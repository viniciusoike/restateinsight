{
  "hash": "5eb0d41652a82854985d52b5e3e7a77e",
  "result": {
    "markdown": "---\ntitle: \"Nascimentos no Brasil\"\ncategories: ['data-science', 'data-visualization', 'brasil', 'demografia']\ndraft: true\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(tidyr)\nlibrary(readr)\nlibrary(forcats)\nlibrary(sidrar)\nlibrary(rlang)\nlibrary(forecast)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRegistered S3 method overwritten by 'quantmod':\n  method            from\n  as.zoo.data.frame zoo \n```\n:::\n\n```{.r .cell-code}\nknitr::opts_chunk$set(\n  fig.align = \"center\",\n  fig.asp = 0.618,\n  fig.width = 9,\n  out.width = \"90%\",\n  fig.dev = \"svg\",\n  fig.retina = 2\n  )\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(showtext)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: sysfonts\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: showtextdb\n```\n:::\n\n```{.r .cell-code}\nfont_add_google(\"Roboto Condensed\", family = \"Roboto Cond\")\nfont_add_google(\"Roboto Mono\", family = \"Roboto Mono\")\n\nshowtext_auto()\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntheme_vini <- theme_minimal() +\n  theme(\n    text = element_text(family = \"Roboto Cond\", color = \"gray10\"),\n    plot.title = element_text(size = 18, hjust = 0, vjust = 1),\n    plot.subtitle = element_text(color = \"gray20\", size = 9),\n    plot.caption = element_text(color = \"gray20\", size = 8),\n    axis.text = element_text(family = \"Roboto Mono\", color = \"gray20\", size = 8),\n    legend.text = element_text(family = \"Roboto Mono\", color = \"gray20\", size = 8),\n    panel.grid = element_blank(),\n    panel.background = element_rect(fill = \"#ffffff\", color = \"#ffffff\"),\n    plot.background = element_rect(fill = \"#ffffff\", color = \"#ffffff\"),\n    legend.position = \"top\",\n    legend.key.width = unit(2, \"cm\")\n  )\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nnasc <- get_sidra(\n  2612,\n  variable = 218,\n  period = \"2003-2021\",\n  classific = \"c235\",\n  category = list(\"all\"),\n  geo = \"Region\"\n  )\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntbl_birth = nasc |> \n  as_tibble() %>%\n  janitor::clean_names() |> \n  select(\n    code_region = grande_regiao_codigo,\n    name_region = grande_regiao,\n    year = ano,\n    month = mes_do_nascimento,\n    birth = valor\n  ) %>%\n  filter(!(month %in% c(\"Total\", \"Ignorado\"))) %>%\n  mutate(\n    date = paste(year, month, \"01\", sep = \"-\"),\n    date = parse_date(date, format = \"%Y-%B-%d\", locale = locale(\"pt\")),\n    month_abb = lubridate::month(date, label = TRUE, locale = \"pt_BR\"),\n    month_abb = fct_rev(month_abb),\n    year = as.numeric(year)\n  )\n\ntbl_birth <- tbl_birth %>%\n  mutate(\n    trend = RcppRoll::roll_mean(birth, n = 12, fill = NA),\n    trend = RcppRoll::roll_mean(trend, n = 2, fill = NA),\n    .by = c(\"code_region\", \"name_region\")\n    )\n\ntbl_brazil <- tbl_birth %>%\n  summarise(total = sum(birth, na.rm = TRUE), .by = \"date\") |> \n  mutate(\n    month_abb = lubridate::month(date, label = TRUE, locale = \"pt_BR\"),\n    month_abb = fct_rev(month_abb),\n    year = as.numeric(lubridate::year(date)),\n    trend = RcppRoll::roll_mean(total, n = 12, fill = NA),\n    trend = RcppRoll::roll_mean(trend, n = 2, fill = NA),\n  )\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np_heatmap_abs <- \n  ggplot(tbl_brazil, aes(x = year, y = month_abb, fill = total)) + \n  geom_tile(color = \"gray80\", linewidth = 0.1) +\n  scale_x_continuous(breaks = 2003:2021, position = \"top\", expand = c(0, 0)) +\n  scale_fill_viridis_c(\n    name = \"\",\n    breaks = seq(200, 275, 15) * 1000,\n    labels = scales::label_number(big.mark = \".\"),\n    limits = c(195000, 280000)\n  ) +\n  labs(\n    x = NULL,\n    y = NULL,\n    title = \"Arianos e taurinos formam maioria dos nascidos\",\n    subtitle = \"Número total de nascidos vivos no Brasil entre 2003 e 2021 a cada mês.\",\n    caption = \"Fonte: Estatísticas do Registro Civil (IBGE). @viniciusoike\") +\n  theme_vini\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np_heatmap_rel <- \n  tbl_brazil |> \n  group_by(year) |> \n  mutate(share = total / sum(total)) %>%\n  ggplot(aes(x = year, y = month_abb, fill = share)) + \n  geom_tile(color = \"gray80\", linewidth = 0.1) +\n  scale_x_continuous(breaks = 2003:2021, position = \"top\", expand = c(0, 0)) +\n  scale_fill_viridis_c(\n    name = \"Percentual\\nnascidos\\nno ano (%)\",\n    labels = scales::label_percent(decimal.mark = \".\")\n  ) +\n  labs(\n    x = NULL,\n    y = NULL,\n    title = \"Arianos e taurinos formam maioria dos nascidos\",\n    subtitle = \"Número de nascidos vivos no Brasil entre 2003 e 2021 a cada mês.\",\n    caption = \"Fonte: Estatísticas do Registro Civil (IBGE). @viniciusoike\") +\n  theme_vini +\n  theme(\n    legend.title = element_text(\n      family = \"Roboto Mono\",\n      size = 8,\n      vjust = 1,\n      hjust = 0.5)\n    )\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np_lineplot <- \n  ggplot(tbl_brazil, aes(x = date)) +\n  geom_line(aes(y = total), alpha = 0.6, linewidth = 1, color = \"#26828EFF\") +\n  geom_line(aes(y = trend), linewidth = 1, color = \"#26828EFF\") +\n  scale_x_date(\n    breaks = c(\n      as.Date(\"2003-01-01\"),\n      seq(as.Date(\"2005-01-01\"), as.Date(\"2020-01-01\"), by = \"1 year\"),\n      as.Date(\"2021-01-01\")\n      ),\n    date_labels = \"%Y\"\n    ) +\n  scale_y_continuous(labels = scales::label_number(big.mark = \".\")) +\n  labs(title = \"Nascidos vivos no Brasil\", x = NULL, y = \"Pessoas\") +\n  theme_vini +\n  theme(\n    panel.grid.major = element_line(color = \"gray90\")\n  )\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot_heatmap <- function(\n    region,\n    breaks = waiver(),\n    share = FALSE,\n    xmin = NULL,\n    xmax = NULL) {\n  \n  stopifnot(any(region %in% unique(tbl_birth$name_region)))\n  stopifnot(is.logical(share))\n  \n  yvar <- ifelse(share, \"share\", \"birth\")\n  \n  sub <- dplyr::filter(tbl_birth, name_region == region)\n  \n  if (share) {\n    sub <- sub |> \n      mutate(share = birth / sum(birth), .by = \"year\")\n  } \n  \n  if (is.null(xmin)) {\n    xmin <- min(sub[[yvar]], na.rm = TRUE) * 0.98\n  }\n  if (is.null(xmax)) {\n    xmax <- max(sub[[yvar]], na.rm = TRUE) * 1.02\n  }\n  \n  plot <- ggplot(sub, aes(x = year, y = month_abb, fill = .data[[yvar]])) + \n    geom_tile(color = \"gray80\", linewidth = 0.1) +\n    scale_x_continuous(breaks = 2003:2021, position = \"top\", expand = c(0, 0)) \n  \n  if (share) {\n    plot <- plot +\n      scale_fill_viridis_c(\n        name = \"Percentual\\nnascidos\\nno ano (%)\",\n        breaks = breaks,\n        labels = scales::label_percent(decimal.mark = \",\"),\n        limits = c(xmin, xmax)\n    )\n  } else {\n    plot <- plot +\n      scale_fill_viridis_c(\n        name = \"\",\n        breaks = breaks,\n        labels = scales::label_number(big.mark = \".\"),\n        limits = c(xmin, xmax)\n    )\n  }\n\n\n  plot <- plot +\n    labs(\n      x = NULL,\n      y = NULL,\n      title = glue::glue(\"Nascidos vivos: {region}\"),\n      subtitle = glue::glue(\n        \"Número total de nascidos vivos na região {region} entre 2003 e 2021 a cada mês.\"),\n      caption = \"Fonte: Estatísticas do Registro Civil (IBGE). @viniciusoike\") +\n    theme_vini +\n    theme(\n      legend.title = element_text(\n        family = \"Roboto Mono\",\n        size = 8,\n        vjust = 1,\n        hjust = 0.5)\n      )\n  \n  return(plot)\n  \n}\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntbl_birth <- tbl_birth %>%\n  mutate(\n    code_region = as.numeric(code_region),\n    name_region = factor(name_region),\n    name_region = fct_reorder(name_region, code_region)\n  )\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np_trend_region <- \n  ggplot(tbl_birth, aes(x = date)) + \n  geom_line(aes(y = birth), alpha = 0.6, linewidth = 1, color = \"#26828EFF\") +\n  geom_line(aes(y = trend), linewidth = 1, color = \"#26828EFF\") +\n  scale_x_date(\n    breaks = c(\n      as.Date(\"2003-01-01\"),\n      seq(as.Date(\"2005-01-01\"), as.Date(\"2020-01-01\"), by = \"2 year\"),\n      as.Date(\"2021-01-01\")\n      ),\n    date_labels = \"%Y\"\n    ) +\n  scale_y_continuous(labels = scales::label_number(big.mark = \".\")) +\n  facet_wrap(vars(name_region), scales = \"free_y\", ncol = 2) +\n  labs(\n    title = \"\",\n    x = NULL,\n    y = \"Nascimentos\",\n    caption = \"Fonte: Estatísticas do Registro Civil (IBGE). @viniciusoike\"\n  ) +\n  theme_vini +\n  theme(\n    panel.grid.major = element_line(color = \"gray90\"),\n    axis.text.x = element_text(angle = 90)\n    )\n```\n:::\n\n\n# Nascimentos no Brasil\n\nTende-se a pensar que a data de nascimento de um indivíduo é algo completamente aleatório. Afinal, ninguém escolhe precisamente quando vai nascer. Alguns atribuem significado profundo à data de nascimento: a depender do horário, dia e mês a pessoa terá tendências a ser mais de uma forma do que outra. Nascer no mês impróprio pode ser um mal negócio para a vida toda.\n\nJá na cultura popular é comum especular que os nascimentos seguem alguns ciclos da vida. As estações do ano regulam as safras de comida, a temperatura, a disposição para sair de casa e, muito acreditam, o desejo sexual. Os feriados, as festividades, o carnaval, as vitórias no campeonato de futebol, tudo isso - imagina-se - tem algum efeito sobre a natalidade no país, nove meses no futuro.\n\nNo campo da economia, pode-se especular que os ciclos de crescimento econômico e, sobretudo, os ciclos de desemprego devem ter algum efeito sobre os nascimentos.\n\n## O mês de nascimento\n\nUsando dados do IBGE, mais especificamente das Estatísticas do Registro Civil, pode-se calcular o número total de nascimentos em cada mês desde 2003. Grosso modo, nos últimos vinte anos, março, abril e maio foram os três meses com maior número de nascimentos (27,23%). Já os meses do final do ano, outubro, novembro e dezembro foram os meses com menor número de nascimentos (22,95%).\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np_heatmap_rel\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\nIsto significa que o maior número de concepções ocorreu no inverno, nos meses de julho a agosto. Já os meses quentes de janeiro a março tiveram os menores números de concepções. Este fato vai diretamente contra a popular percepção de que épocas quentes - e o Carnaval, em particular - favorecem o número de nascimentos.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntbl_brazil |>\n  summarise(births = sum(total), .by = \"month_abb\") |> \n  mutate(share = births / sum(births) * 100) |> \n  filter(month_abb %in% c(\"Mar\", \"Abr\", \"Mai\")) |> \n  summarise(total = sum(share))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 1\n  total\n  <dbl>\n1  27.2\n```\n:::\n:::\n\n\nOlhando para as tendências de médio e longo prazo, vê-se que o número de nascimentos no Brasil permaneceu relativamente estável entre 2000 e 2015, variando de 230 mil a 242 mil nascimentos por mês. A quebra na série coincide com a recessão de 2015-17, período de alta inflação e desemprego recorde: de fato, a série sai do seu pico, acima de 265 mil nascimentos para o seu ponto mais baixo, abaixo de 200 mil nascimentos, neste período.\n\nO fim da recessão\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np_lineplot\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 12 rows containing missing values (`geom_line()`).\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in prettyNum(.Internal(format(x, trim, digits, nsmall, width, 3L, :\n'big.mark' and 'decimal.mark' are both '.', which could be confusing\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){fig-align='center' width=90%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np_heatmap_abs\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in prettyNum(.Internal(format(x, trim, digits, nsmall, width, 3L, :\n'big.mark' and 'decimal.mark' are both '.', which could be confusing\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){fig-align='center' width=90%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np_heatmap_rel\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\n## Regiões\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\np_trend_region\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 12 rows containing missing values (`geom_line()`).\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in prettyNum(.Internal(format(x, trim, digits, nsmall, width, 3L, :\n'big.mark' and 'decimal.mark' are both '.', which could be confusing\n\nWarning in prettyNum(.Internal(format(x, trim, digits, nsmall, width, 3L, :\n'big.mark' and 'decimal.mark' are both '.', which could be confusing\n\nWarning in prettyNum(.Internal(format(x, trim, digits, nsmall, width, 3L, :\n'big.mark' and 'decimal.mark' are both '.', which could be confusing\n\nWarning in prettyNum(.Internal(format(x, trim, digits, nsmall, width, 3L, :\n'big.mark' and 'decimal.mark' are both '.', which could be confusing\n\nWarning in prettyNum(.Internal(format(x, trim, digits, nsmall, width, 3L, :\n'big.mark' and 'decimal.mark' are both '.', which could be confusing\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){fig-align='center' width=90%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot_heatmap(\"Norte\", seq(0.05, 0.1, 0.005), share = TRUE)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){fig-align='center' width=90%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot_heatmap(\"Nordeste\", seq(0.05, 0.1, 0.005), share = TRUE)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){fig-align='center' width=90%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot_heatmap(\"Centro-Oeste\", seq(0.05, 0.1, 0.005), share = TRUE)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){fig-align='center' width=90%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot_heatmap(\"Sudeste\", seq(0.05, 0.1, 0.005), share = TRUE)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){fig-align='center' width=90%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot_heatmap(\"Sul\", seq(0.05, 0.1, 0.005), share = TRUE)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\n## Sazonalidade\n\nE, afinal, há sazonalidade nos nascimentos no Brasil? Visualmente, parece haver fortes indícios de sazonalidade. Uma maneira simples de simultaneamente testar e mensurar o efeito sazonal é via uma regressão linear. Supondo um modelo simples da forma[^1]:\n\n[^1]: Este é um modelo bastente convencional em séries de tempo, também conhecido, modelo \"clássico\" ou \"decomposição clássica\". Veja, por exemplo ...\n\n$$\nB_{t} = T_{t}S_{t}E_{t}\n$$\n\nonde $B_{t}$ é o número ajustado de nascimentos mensais[^2], $T_{t}$ é o termo de tendência, $S_{t}$ é o termo sazonal e $E_{t}$ é o termo de resíduo. Aplicando logaritmo natural, temos um modelo aditivo. Para modelar a tendência vamos utilizar o mesmo filtro linear utilizado nos gráficos acima, isto é, uma média móvel 2x12 centrada[^3]. Esta estimativa é descontada da série original para chegar num valor sem tendência. Por fim, vamos supor dummies sazonais da forma:\n\n[^2]: Becker (1989) sugere corrigir o número de nascimentos pelo número de dias no mês da seguinte maneira: $\\tilde{x}_{t} = x_{t}\\frac{365}{12z}$ onde $z$ é o número de dias do mês.\n\n[^3]: Isto é equivalente a fazer primeiro uma média móvel de dozes meses e depois uma média móvel de dois meses. Na prática, todos os termos têm peso 1/12, exceto pelo primeiro e último que têm peso 1/24.\n\n$$\nb_{t} = \\alpha_{0} + \\sum_{i = 2}^{12}\\beta_{i}\\delta_{i} + u_{t}\n$$\n\nonde $b_{t}$ agora é o logartimo natural da série de nascimentos livre de tendência. O parâmetro $\\alpha_{0}$ é uma constante e $\\delta_{i}$ é uma variável binária que indica com valor unitário se a observação $B_{t}$ pertence ao mês $i$.\n\nA tabela abaixo mostra o resultado da regressão. Assim, como se viu nos gráficos, os três meses do final do ano tem um efeito negativo enquanto os meses de março a maio têm um efeito positivo sobre o número de nascimentos. Além destes, fevereiro e junho aparecem com sinal positivo, mas tem um efeito menor. Agosto também tem um efeito negativo, porém com magnitude inferior aos meses do final do ano.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(gtsummary)\nlibrary(gt)\nlibrary(gtExtras)\n\ntbl_brazil <- tbl_brazil |> \n  mutate(\n    days = lubridate::days_in_month(date),\n    births_adjusted = total * (365/12) / days\n    )\n\n\nnasc <- ts(log(tbl_brazil$births_adjusted), start = c(2003, 1), frequency = 12)\n\nmm <- stats::filter(nasc, filter = rep(1/12, 12), method = \"convolution\")\nmm <- stats::filter(mm, filter = c(1/2, 1/2), method = \"convolution\")\n\nnasc_mm <- nasc - mm\n\nfit_lm <- tslm(nasc_mm ~ season)\n\ntab_reg <- \n  tbl_regression(\n    fit_lm,\n    estimate_fun = ~style_sigfig(.x, digits = 3)\n    ) %>%\n  bold_labels() %>%\n  bold_p() %>%\n  as_gt() %>%\n  gt_theme_538()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: The `tidy()` method for objects of class `tslm` is not maintained by the broom team, and is only supported through the `lm` tidier method. Please be cautious in interpreting and reporting broom output.\n\nThis warning is displayed once per session.\n```\n:::\n\n```{.r .cell-code}\ntab_reg\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"cqitzkmpoh\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>@import url(\"https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\n#cqitzkmpoh table {\n  font-family: Chivo, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#cqitzkmpoh thead, #cqitzkmpoh tbody, #cqitzkmpoh tfoot, #cqitzkmpoh tr, #cqitzkmpoh td, #cqitzkmpoh th {\n  border-style: none;\n}\n\n#cqitzkmpoh p {\n  margin: 0;\n  padding: 0;\n}\n\n#cqitzkmpoh .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: 300;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: none;\n  border-top-width: 3px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#cqitzkmpoh .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#cqitzkmpoh .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#cqitzkmpoh .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#cqitzkmpoh .gt_heading {\n  background-color: #FFFFFF;\n  text-align: left;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#cqitzkmpoh .gt_bottom_border {\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#cqitzkmpoh .gt_col_headings {\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#cqitzkmpoh .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: normal;\n  text-transform: uppercase;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#cqitzkmpoh .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: normal;\n  text-transform: uppercase;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#cqitzkmpoh .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#cqitzkmpoh .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#cqitzkmpoh .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#cqitzkmpoh .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#cqitzkmpoh .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: bolder;\n  text-transform: uppercase;\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 1px;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#cqitzkmpoh .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: bolder;\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 1px;\n  border-bottom-color: #FFFFFF;\n  vertical-align: middle;\n}\n\n#cqitzkmpoh .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#cqitzkmpoh .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#cqitzkmpoh .gt_row {\n  padding-top: 3px;\n  padding-bottom: 3px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#cqitzkmpoh .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: bolder;\n  text-transform: uppercase;\n  border-right-style: solid;\n  border-right-width: 0px;\n  border-right-color: #FFFFFF;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#cqitzkmpoh .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#cqitzkmpoh .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#cqitzkmpoh .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#cqitzkmpoh .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#cqitzkmpoh .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#cqitzkmpoh .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#cqitzkmpoh .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#cqitzkmpoh .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#cqitzkmpoh .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#cqitzkmpoh .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#cqitzkmpoh .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#cqitzkmpoh .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#cqitzkmpoh .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#cqitzkmpoh .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#cqitzkmpoh .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#cqitzkmpoh .gt_sourcenote {\n  font-size: 12px;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#cqitzkmpoh .gt_left {\n  text-align: left;\n}\n\n#cqitzkmpoh .gt_center {\n  text-align: center;\n}\n\n#cqitzkmpoh .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#cqitzkmpoh .gt_font_normal {\n  font-weight: normal;\n}\n\n#cqitzkmpoh .gt_font_bold {\n  font-weight: bold;\n}\n\n#cqitzkmpoh .gt_font_italic {\n  font-style: italic;\n}\n\n#cqitzkmpoh .gt_super {\n  font-size: 65%;\n}\n\n#cqitzkmpoh .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#cqitzkmpoh .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#cqitzkmpoh .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#cqitzkmpoh .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#cqitzkmpoh .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#cqitzkmpoh .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#cqitzkmpoh .gt_indent_5 {\n  text-indent: 25px;\n}\n\ntbody tr:last-child {\n  border-bottom: 2px solid #ffffff00;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"&lt;strong&gt;Characteristic&lt;/strong&gt;\"><strong>Characteristic</strong></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"&lt;strong&gt;Beta&lt;/strong&gt;\"><strong>Beta</strong></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"&lt;strong&gt;95% CI&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>95% CI</strong><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"&lt;strong&gt;p-value&lt;/strong&gt;\"><strong>p-value</strong></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\" style=\"font-weight: bold;\">season</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\"></td>\n<td headers=\"ci\" class=\"gt_row gt_center\"></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    1</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">—</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">—</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    2</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.048</td>\n<td headers=\"ci\" class=\"gt_row gt_center\"></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\" style=\"font-weight: bold;\"><0.001</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    3</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.089</td>\n<td headers=\"ci\" class=\"gt_row gt_center\"></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\" style=\"font-weight: bold;\"><0.001</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    4</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.082</td>\n<td headers=\"ci\" class=\"gt_row gt_center\"></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\" style=\"font-weight: bold;\"><0.001</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    5</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.073</td>\n<td headers=\"ci\" class=\"gt_row gt_center\"></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\" style=\"font-weight: bold;\"><0.001</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    6</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.037</td>\n<td headers=\"ci\" class=\"gt_row gt_center\"></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\" style=\"font-weight: bold;\"><0.001</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    7</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.002</td>\n<td headers=\"ci\" class=\"gt_row gt_center\"></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.7</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    8</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">-0.031</td>\n<td headers=\"ci\" class=\"gt_row gt_center\"></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\" style=\"font-weight: bold;\"><0.001</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    9</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">-0.002</td>\n<td headers=\"ci\" class=\"gt_row gt_center\"></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.7</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    10</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">-0.069</td>\n<td headers=\"ci\" class=\"gt_row gt_center\"></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\" style=\"font-weight: bold;\"><0.001</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    11</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">-0.095</td>\n<td headers=\"ci\" class=\"gt_row gt_center\"></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\" style=\"font-weight: bold;\"><0.001</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    12</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">-0.101</td>\n<td headers=\"ci\" class=\"gt_row gt_center\"></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\" style=\"font-weight: bold;\"><0.001</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"4\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span> CI = Confidence Interval</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n:::\n:::\n\n\nVisualmente, o resultado da regressão acima pode ser visto no painel abaixo. Note que o padrão sazonal é constante: começa o ano subindo, atinge um pico e aí começa a cair\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntheme_series <- theme_vini + theme(panel.grid = element_line(color = 'gray90'))\n\np1 <- autoplot(nasc) +\n  ggtitle(\"Nascimentos\") +\n  labs(x = NULL, y = NULL) +\n  theme_series\n\np2 <- autoplot(mm) +\n  ggtitle(\"Tendência\") +\n  labs(x = NULL, y = NULL) +\n  theme_series\n\np3 <- autoplot(fitted(fit_lm)) +\n  ggtitle(\"Padrão Sazonal\") +\n  labs(x = NULL, y = NULL) +\n  theme_series\n\np4 <- autoplot(resid(fit_lm)) +\n  ggtitle(\"Resíduo\") +\n  labs(x = NULL, y = NULL) +\n  theme_series\n\nlibrary(patchwork)\n\np1 / p2 / p3 / p4\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-14-1.png){fig-align='center' width=90%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsub <- window(fitted(fit_lm), start = c(2004, 1), end = c(2004, 12))\nsub <- broom::tidy(sub)\nsub$id = 1:12\n\nggplot(sub, aes(x = id, y = value)) +\n  geom_line() + \n  geom_point() +\n  geom_hline(yintercept = 0) +\n  scale_x_continuous(breaks = 1:12) +\n  scale_y_continuous(limits = c(NA, 0.1)) +\n  theme_series +\n  theme(panel.grid.minor = element_blank())\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-15-1.png){fig-align='center' width=90%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nautoplot(mstl(nasc)) + theme_series\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-16-1.png){fig-align='center' width=90%}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}