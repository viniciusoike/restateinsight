{
  "hash": "6b1ee7d32a8588d4e8228c531f6730e5",
  "result": {
    "markdown": "---\ntitle: \"Hiperinflation: a Brazilian journey\"\ncategories: ['brasil', 'data-visualization']\ndraft: true\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nsysfonts::font_add(\"Helvetica\", \"Helvetica.ttc\")\nshowtext::showtext_auto()\n\nipca <- GetBCBData::gbcbd_get_series(433, first.date = as.Date(\"1980-01-01\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nFetching id = 433 [433] from BCB-SGS with cache \n\t Found 524 observations\n```\n:::\n\n```{.r .cell-code}\nipca <- ipca |> \n  dplyr::rename(date = ref.date)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- tidyr::tribble(\n  ~date, ~event, ~date_label,\n  \"1980-01-01\", \"Delfim + Oil Crisis\", \"Dez 1989\",\n  \"1983-02-01\", \"Delfim (2nd)\", \"Fev 1983\",\n  \"1985-05-01\", \"Military Regime Ends\", NA,\n  \"1986-04-01\", \"Cruzado Plan\", \"Fev 1986\",\n  \"1987-08-01\", \"Bresser Plan\", \"Jun 1987\",\n  \"1989-03-01\", \"VerÃ£o Plan\", \"Jan 1989\",\n  \"1990-05-01\", \"Collor Plan\", \"Mar 1990\",\n  \"1991-04-01\", \"Collor II Plan\", \"Jan 1991\",\n  \"1994-08-01\", \"Real Plan\", \"Jul 1994\",\n  \"1999-01-01\", \"Flotaing Exchange Rate\", \"Jan 1999\",\n  \"2002-11-01\", \"Argentina + Lula\", \"2002/2003\",\n  \"2008-07-01\", \"Great Financial Recession\", \"2008\",\n  \"2016-08-01\", \"Dilma Impeachment\", \"2016\",\n  \"2020-03-01\", \"Covid-19\", \"Mar 2019\"\n)\n\ndf <- dplyr::mutate(df, date = as.Date(date))\n\nevents <- dplyr::left_join(df, ipca, by = \"date\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  geom_area(\n    data = ipca,\n    aes(x = date, y = value),\n    fill = \"gray50\") +\n  geom_point(\n    data = events,\n    aes(x = date, y = value),\n    shape = 21,\n    fill = \"#de2d26\",\n    color = \"gray90\"\n  ) +\n  geom_hline(yintercept = 0) +\n  labs(\n    title = \"The Story of Brazilian Inflation\",\n    subtitle = \"Monthly percent variation in Consumer Price Index\",\n    caption = \"Source: IBGE\",\n    x = NULL,\n    y = \"IPCA\\n(MoM, %)\") +\n  theme_minimal(base_family = \"Helvetica\") +\n  theme(\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_blank(),\n    panel.grid.major.y = element_line(linetype = 2),\n    plot.title = element_text(size = 18),\n    axis.text.x = element_text(size = 12),\n    axis.text.y = element_text(size = 10),\n    axis.title.y = element_text(size = 12, angle = 0, vjust = 1)\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsubipca <- ipca |> \n  dplyr::mutate(acum = RcppRoll::roll_prodr(1 + value / 100, n = 12) - 1) |> \n  dplyr::filter(date >= as.Date(\"1995-07-01\"))\n\ndf <- tidyr::tribble(\n  ~date, ~event, ~date_label,\n  \"1999-01-01\", \"Flotaing Exchange Rate\", \"Lowest YoY Inflation\",\n  \"2002-11-01\", \"Argentina + Lula\", \"2002/2003\",\n  \"2008-07-01\", \"Great Financial Recession\", \"2008\",\n  \"2016-08-01\", \"Dilma Impeachment\", \"2016\",\n  \"2020-03-01\", \"Covid-19\", \"Mar 2019\",\n  \"2022-04-01\", \"Pandemic Peak\", \"12,1%\"\n)\n\ndf <- dplyr::mutate(df, date = as.Date(date))\n\nevents <- dplyr::left_join(df, subipca, by = \"date\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(subipca, aes(x = date, y = acum)) +\n  geom_area(fill = \"#fcbba1\") +\n  geom_point(\n    data = events,\n    aes(x = date, y = acum),\n    color = \"#cb181d\"\n  ) +\n  geom_hline(yintercept = 0) +\n  scale_x_date(expand = c(0, 0)) +\n  scale_y_continuous(\n    breaks = seq(0, 0.25, 0.05),\n    labels = scales::label_percent(decimal.mark = \",\"),\n    limits = c(NA, 0.35)\n    ) +\n  theme_minimal(base_family = \"Helvetica\") +\n  theme(\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_blank(),\n    panel.grid.major.y = element_line(linetype = 2),\n    plot.title = element_text(size = 18),\n    axis.text.x = element_text(size = 12),\n    axis.text.y = element_text(size = 10),\n    axis.title.y = element_text(size = 12, angle = 0, vjust = 0.7)\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsubipca |> \n  dplyr::filter(date >= as.Date(\"2020-01-01\")) |> \n  dplyr::slice_max(acum, n = 5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n        date value id.num series.name      acum\n1 2022-04-01  1.06    433    id = 433 0.1213148\n2 2022-06-01  0.67    433    id = 433 0.1188673\n3 2022-05-01  0.47    433    id = 433 0.1173113\n4 2022-03-01  1.62    433    id = 433 0.1129932\n5 2021-11-01  0.95    433    id = 433 0.1073849\n```\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}