{
  "hash": "6573123576aa5fb588d992062e2f6384",
  "result": {
    "markdown": "---\ntitle: Uruguay in numbers\ndate: '2023-03-04'\ncategories: ['data-visualization', 'data-science']\ndescription: Article description.\ndraft: true\n---\n\n\n\n\nUruguay has been making the headlines in the past decade in a good way: many consider the country to be an model democracy: topping the Economist's Democracy Index and being the least corrupt country in Latin America are some factors that bring attention to this small country. It also appears to be one the least unequal countries in the region with a GINI index close to 40 (Brazil's is somewhere around 52-53 for comparison).\n\nAs a native Brazilian, who lived most of his life in Porto Alegre - a mere 800km travel away from Uruguay's capital Montevideo -, and a relatively fluent reader of the Spanish language, I must confess that I know very little about Uruguay. In fact, the little I know about Uruguay's history is the brief time period when [Uruguay was a contested territory between the Kingdoms of Spain and Portugal](https://es.wikipedia.org/wiki/Historia_de_Uruguay#Colonización)^[For a brief period, Uruguay was a part of Brazil (technically, the United Kingdom of Portugal, Brazil, and the Algarves). To this day, both Uruguay and Rio Grande do Sul, the southernmost Brazilian state, that borders Uruguay, have some degree of shared culture, mostly amongst the [*gaucho*](https://es.wikipedia.org/wiki/Gaucho#Origen_de_la_expresión_gaucho) figure.].\n\nSo this saturday afternoon I decided to learn all that I could about Uruguay and (sort of) document my steps.\n\n# First things first\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(gt)\nlibrary(gtExtras)\nlibrary(rvest)\n```\n:::\n\n\nAs a first step its always make sure everyone knows where we are. The code below highlights the Uruguay in South America\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nworld_map <- st_as_sf(spData::world)\n\nworld_map <- world_map %>%\n  mutate(highlight = factor(ifelse(name_long == \"Uruguay\", 1L, 0L)))\n\nggplot() +\n  geom_sf(data = world_map, aes(fill = highlight)) +\n  geom_sf_label(data = world_map, aes(label = name_long)) +\n  scale_fill_manual(values = c(\"#edede9\", \"#219ebc\")) +\n  guides(fill = \"none\") +\n  coord_sf(xlim = c(-85, -35), ylim = c(-10, -45)) +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\n## Where to find the data?\n\nWhen looking for socioeconomic and demographic data on countries I usually start at usual suspects:\n\n* World Bank\n* IMF\n* Our World in Data\n* UN\n\nUnfortunately, Uruguay is not a member of the OECD so we can't use that. For more precise/specific comparison, specially on GDP I also recommend both the Maddison Project and the Penn World Table. All of the aforementioned sources also have convenience packages built for `R`!\n\n|        Name       |                               Site                              |                                              R-package                                              |\n|:-----------------:|:---------------------------------------------------------------:|:---------------------------------------------------------------------------------------------------:|\n| IMF               | [link](https://www.imf.org/en/Data)                                     | [IMFData](https://github.com/mingjerli/IMFData), [imfr](https://github.com/christophergandrud/imfr) |\n| World Bank        | [link](https://data.worldbank.org/)                                     | [WDI](https://github.com/vincentarelbundock/WDI)                                                    |\n| UN                | [link](https://data.un.org/)                                            | [wpp2022](https://github.com/PPgp/wpp2022)                                                          |\n| Maddison Project  | [link](https://www.rug.nl/ggdc/historicaldevelopment/maddison/?lang=en) | [maddison](https://cran.r-project.org/web/packages/maddison/index.html)                             |\n| Penn World Table  | [link](https://www.rug.nl/ggdc/productivity/pwt/?lang=en)               | [pwt10](https://cran.r-project.org/web/packages/pwt10/index.html)                                   |\n| OECD              | [link](https://data.oecd.org/)                                          | [oecd](https://cran.r-project.org/web/packages/OECD/index.html)                                     |\n| Our World in Data | [link](https://ourworldindata.org/)                                     | [owidR](https://cran.r-project.org/web/packages/owidR/index.html)                                   |\n\nThe list above is not intended to be comprehensive but it's a good starting point (plus, they're all free). For Latin American countries it might be useful to include [Global Data Lab](https://globaldatalab.org) and [CEPAL](https://www.cepal.org/en/headquarters-and-offices/eclac-mexico/agricultural-development/data-and-statistics). Also, I always like to check in for the National Statistical Bureau and the Central Bank of the country. In Uruguay's case that would be the [Instituto Nacional de Estadística (INE)](https://www.ine.gub.uy/inicio) and the [Banco Central de Uruguay](https://www.bcu.gub.uy/Paginas/Default.aspx). By the way, some useful glossay/translations for foreigners include:\n\n|    Spanish      |      English     |\n|:---------------:|:----------------:|\n| encuesta        | survey/interview |\n| ingreso/salario | income/wage      |\n| desarollo       | development      |\n| inversión       | investment       |\n| empleo          | employment       |\n| desempleo       | unemployment     |\n| promedio        | average          |\n| alquiler/renta  | rent             |\n| venta           | sale             |\n\nFinally, if you don't mind working with slightly outdated data (not my case) you can use packages such as `gapminder` to get a broad view on the country.\n\n# Some project setup\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Import Questrial font if needed\nsysfonts::font_add_google(\"Questrial\", \"Questrial\")\n# Activate custom fonts\nshowtext::showtext_auto()\n\n# A color palette\ncolors_report <- c(\"#264653\", \"#2a9d8f\", \"#e9c46a\", \"#f4a261\", \"#e76f51\")\n# A simple theme of plots\ntheme_report <- theme_minimal() +\n  theme(\n    text = element_text(family = \"Questrial\", color = \"gray15\"),\n    plot.title = element_text(size = 12, color = \"black\", face = \"bold\"),\n    plot.caption = element_text(size = 8),\n    legend.position = \"top\",\n    panel.grid.minor = element_blank()\n  )\n```\n:::\n\n\n\n# Basic facts about Uruguay.\n\nA good starting point is the Penn World Table included in the `{pwt10}` package. We can work this table to find some basic facts about Uruguay such as:\n\n* Real GDP (`rgdpe`)\n* Total population (`pop`)\n* Avg. hours worked per year (`avh`)\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(pwt10)\n\npwt = pwt10.0\n\ntab_decade <- pwt %>%\n  # Get only the last year of each decade\n  filter(isocode == \"URY\", year %in% seq(1959, 2019, 10)) %>%\n  mutate(\n    # Real GDP per capita\n    rgdppc = rgdpe / pop,\n    # Convert population\n    pop = pop * 1e6,\n    # Convert year to character for easier formatting of the table\n    year = as.character(year)) %>%\n  select(year, rgdpe, rgdppc, pop, avh, hc, csh_x)\n\n# Swap names for table\nold_names <- names(tab_decade)\nnew_names <- c(\n  \"Year\", \"Real GDP\", \"Real GDP per capita\", \"Population\", \"Avg. Hours Worked\",\n  \"Human Capital Index\", \"Share of Exports (%GDP)\")\nnames(new_names) <- old_names\n\n# The table\ngt(tab_decade) %>%\n  cols_label(.list = new_names) %>%\n  fmt_number(columns = c(rgdpe:pop, avh), decimals = 0) %>%\n  fmt_number(columns = hc, decimals = 2) %>%\n  fmt_percent(columns = csh_x) %>%\n  sub_missing(missing_text = \"-\") %>%\n  gt_theme_538()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"ikjoypzlzp\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>@import url(\"https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\n#ikjoypzlzp table {\n  font-family: Chivo, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#ikjoypzlzp thead, #ikjoypzlzp tbody, #ikjoypzlzp tfoot, #ikjoypzlzp tr, #ikjoypzlzp td, #ikjoypzlzp th {\n  border-style: none;\n}\n\n#ikjoypzlzp p {\n  margin: 0;\n  padding: 0;\n}\n\n#ikjoypzlzp .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: 300;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: none;\n  border-top-width: 3px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ikjoypzlzp .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#ikjoypzlzp .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ikjoypzlzp .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ikjoypzlzp .gt_heading {\n  background-color: #FFFFFF;\n  text-align: left;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ikjoypzlzp .gt_bottom_border {\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ikjoypzlzp .gt_col_headings {\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ikjoypzlzp .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: normal;\n  text-transform: uppercase;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ikjoypzlzp .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: normal;\n  text-transform: uppercase;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ikjoypzlzp .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ikjoypzlzp .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ikjoypzlzp .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ikjoypzlzp .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#ikjoypzlzp .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: bolder;\n  text-transform: uppercase;\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 1px;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#ikjoypzlzp .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: bolder;\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 1px;\n  border-bottom-color: #FFFFFF;\n  vertical-align: middle;\n}\n\n#ikjoypzlzp .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ikjoypzlzp .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ikjoypzlzp .gt_row {\n  padding-top: 3px;\n  padding-bottom: 3px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ikjoypzlzp .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: bolder;\n  text-transform: uppercase;\n  border-right-style: solid;\n  border-right-width: 0px;\n  border-right-color: #FFFFFF;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ikjoypzlzp .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ikjoypzlzp .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ikjoypzlzp .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#ikjoypzlzp .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ikjoypzlzp .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ikjoypzlzp .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ikjoypzlzp .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ikjoypzlzp .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ikjoypzlzp .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ikjoypzlzp .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ikjoypzlzp .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ikjoypzlzp .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ikjoypzlzp .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ikjoypzlzp .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ikjoypzlzp .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ikjoypzlzp .gt_sourcenote {\n  font-size: 12px;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ikjoypzlzp .gt_left {\n  text-align: left;\n}\n\n#ikjoypzlzp .gt_center {\n  text-align: center;\n}\n\n#ikjoypzlzp .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ikjoypzlzp .gt_font_normal {\n  font-weight: normal;\n}\n\n#ikjoypzlzp .gt_font_bold {\n  font-weight: bold;\n}\n\n#ikjoypzlzp .gt_font_italic {\n  font-style: italic;\n}\n\n#ikjoypzlzp .gt_super {\n  font-size: 65%;\n}\n\n#ikjoypzlzp .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#ikjoypzlzp .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ikjoypzlzp .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#ikjoypzlzp .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#ikjoypzlzp .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#ikjoypzlzp .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#ikjoypzlzp .gt_indent_5 {\n  text-indent: 25px;\n}\n\ntbody tr:last-child {\n  border-bottom: 2px solid #ffffff00;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"Year\">Year</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"Real GDP\">Real GDP</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"Real GDP per capita\">Real GDP per capita</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"Population\">Population</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"Avg. Hours Worked\">Avg. Hours Worked</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"Human Capital Index\">Human Capital Index</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"Share of Exports (%GDP)\">Share of Exports (%GDP)</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"year\" class=\"gt_row gt_right\">1959</td>\n<td headers=\"rgdpe\" class=\"gt_row gt_right\">18,377</td>\n<td headers=\"rgdppc\" class=\"gt_row gt_right\">7,402</td>\n<td headers=\"pop\" class=\"gt_row gt_right\">2,482,770</td>\n<td headers=\"avh\" class=\"gt_row gt_right\">-</td>\n<td headers=\"hc\" class=\"gt_row gt_right\">1.80</td>\n<td headers=\"csh_x\" class=\"gt_row gt_right\">4.69%</td></tr>\n    <tr><td headers=\"year\" class=\"gt_row gt_right\">1969</td>\n<td headers=\"rgdpe\" class=\"gt_row gt_right\">22,091</td>\n<td headers=\"rgdppc\" class=\"gt_row gt_right\">7,923</td>\n<td headers=\"pop\" class=\"gt_row gt_right\">2,788,100</td>\n<td headers=\"avh\" class=\"gt_row gt_right\">-</td>\n<td headers=\"hc\" class=\"gt_row gt_right\">1.92</td>\n<td headers=\"csh_x\" class=\"gt_row gt_right\">5.06%</td></tr>\n    <tr><td headers=\"year\" class=\"gt_row gt_right\">1979</td>\n<td headers=\"rgdpe\" class=\"gt_row gt_right\">27,998</td>\n<td headers=\"rgdppc\" class=\"gt_row gt_right\">9,669</td>\n<td headers=\"pop\" class=\"gt_row gt_right\">2,895,688</td>\n<td headers=\"avh\" class=\"gt_row gt_right\">-</td>\n<td headers=\"hc\" class=\"gt_row gt_right\">2.12</td>\n<td headers=\"csh_x\" class=\"gt_row gt_right\">7.82%</td></tr>\n    <tr><td headers=\"year\" class=\"gt_row gt_right\">1989</td>\n<td headers=\"rgdpe\" class=\"gt_row gt_right\">30,551</td>\n<td headers=\"rgdppc\" class=\"gt_row gt_right\">9,892</td>\n<td headers=\"pop\" class=\"gt_row gt_right\">3,088,595</td>\n<td headers=\"avh\" class=\"gt_row gt_right\">-</td>\n<td headers=\"hc\" class=\"gt_row gt_right\">2.33</td>\n<td headers=\"csh_x\" class=\"gt_row gt_right\">10.97%</td></tr>\n    <tr><td headers=\"year\" class=\"gt_row gt_right\">1999</td>\n<td headers=\"rgdpe\" class=\"gt_row gt_right\">42,008</td>\n<td headers=\"rgdppc\" class=\"gt_row gt_right\">12,699</td>\n<td headers=\"pop\" class=\"gt_row gt_right\">3,308,012</td>\n<td headers=\"avh\" class=\"gt_row gt_right\">1,722</td>\n<td headers=\"hc\" class=\"gt_row gt_right\">2.51</td>\n<td headers=\"csh_x\" class=\"gt_row gt_right\">11.26%</td></tr>\n    <tr><td headers=\"year\" class=\"gt_row gt_right\">2009</td>\n<td headers=\"rgdpe\" class=\"gt_row gt_right\">53,079</td>\n<td headers=\"rgdppc\" class=\"gt_row gt_right\">15,846</td>\n<td headers=\"pop\" class=\"gt_row gt_right\">3,349,676</td>\n<td headers=\"avh\" class=\"gt_row gt_right\">1,604</td>\n<td headers=\"hc\" class=\"gt_row gt_right\">2.57</td>\n<td headers=\"csh_x\" class=\"gt_row gt_right\">16.44%</td></tr>\n    <tr><td headers=\"year\" class=\"gt_row gt_right\">2019</td>\n<td headers=\"rgdpe\" class=\"gt_row gt_right\">73,411</td>\n<td headers=\"rgdppc\" class=\"gt_row gt_right\">21,206</td>\n<td headers=\"pop\" class=\"gt_row gt_right\">3,461,734</td>\n<td headers=\"avh\" class=\"gt_row gt_right\">1,533</td>\n<td headers=\"hc\" class=\"gt_row gt_right\">2.78</td>\n<td headers=\"csh_x\" class=\"gt_row gt_right\">17.47%</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nNow, the table above could be improved since variables such as the unemployment rate or average hours worked could be averaged by decade for a more fair presentation. But the goal here is to keep things simple.\n\nThe first striking feature of the table for me was Uruguay's population. In the 60 year period from 1959 to 2019, total population increased around 39% reaching 3,46 million. For comparison, the similar sized Brazilian state of Rio Grande do Sul has a population close to 10 million, despite suffering population losses due to migration in recent years.\n\nLets compare how Uruguay fared against other LATAM countries. For this comparison I will take: Argentina, Brazil, Paraguay and Chile. I have no idea if is the most ideal comparison group but these are neighbor countries. These countries are also likely to not have missing observations.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncountry_selection <- c(\"Argentina\", \"Brazil\", \"Chile\", \"Paraguay\", \"Uruguay\")\n\npopindex <- pwt %>%\n  filter(country %in% country_selection, !is.na(pop)) %>%\n  group_by(country) %>%\n  mutate(index_pop = pop / first(pop) * 100)\n\nggplot(popindex, aes(x = year, y = index_pop, color = country)) +\n  geom_hline(yintercept = 100) +\n  geom_line() +\n  scale_color_manual(name = \"\", values = colors_report) +\n  labs(\n    title = \"Falling behind\",\n    subtitle = \"Population growth in selected LATAM countries.\\nUruguay exhibits much lower populational growth than nearby neighbors.\",\n    caption = \"Source: PWT 10.0\",\n    x = NULL,\n    y = \"Index (100 = 1951)\") +\n  theme_report\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\nAs suspected, Uruguay has a much lower population growth than its neighbors in the recent history. In the same time frame that Uruguay's population grew around 58,5%, Brazil's population doubled twice.\n\nFor some of these comparisons it can be useful to get regional averages. The issue is grouping countries appropriately. The best way is to rely on standard conventions on country groups and regions. An easy way to get a table with such a grouping is the `WDI::WDI_data$country`. This is a `data.frame` with country names (and iso3c codes) with regions defined by the World Bank plus some useful information.\n\nIn the case of Uruguay, the WB classifies as part of the Latin America & Caribbean reigon and as a high-income country.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncountry_groups <- WDI::WDI_data$country\n\ncountry_groups %>%\n  filter(iso3c == \"URY\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  iso3c iso2c country                    region    capital longitude latitude\n1   URY    UY Uruguay Latin America & Caribbean Montevideo  -56.0675 -34.8941\n       income lending\n1 High income    IBRD\n```\n:::\n:::\n\n\nWe can join this table with the `pwt` table and get averages across LATAM. The code below is probably overkill, since it sum, averages, and indexes all variables across the LATAM countries.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Drop country name from table to avoid duplicate column name after join\ncountry_groups <- country_groups %>%\n  select(-country)\n\nlatam <- pwt %>%\n  mutate(rgdppc = rgdpe / pop) %>%\n  left_join(country_groups, by = c(\"isocode\" = \"iso3c\")) %>%\n  group_by(year) %>%\n  summarise(\n    across(\n      where(is.numeric),\n      list(\"total\" = sum, \"avg\" = mean),\n      na.rm = TRUE,\n      .names = \"latam_{.fn}_{.col}\")\n    )\n\nlatam_index <- latam %>%\n  pivot_longer(-year) %>%\n  filter(!is.na(value)) %>%\n  group_by(name) %>%\n  mutate(index = value / first(value) * 100) %>%\n  pivot_wider(\n    id_cols = \"year\",\n    names_from = \"name\",\n    values_from = \"index\"\n    )\n\ntab_comparison <- pwt %>%\n  mutate(rgdppc = rgdpe / pop) %>%\n  filter(country == \"Uruguay\") %>%\n  select(year, pop, rgdppc) %>%\n  mutate(\n    uruguay_pop = pop / first(pop) * 100,\n    uruguay_rgdppc = rgdppc / first(rgdppc) * 100) %>%\n  left_join(select(latam_index, year, latam_total_pop, latam_avg_rgdppc))\n\ntab_comparison <- tab_comparison %>%\n  select(-pop, -rgdppc) %>%\n  pivot_longer(-year, names_to = \"series\", values_to = \"index\") %>%\n  separate(series, into = c(\"region\", \"variable\"), extra = \"merge\") %>%\n  mutate(\n    variable = str_remove(variable, \"(total_)|(avg_)\"),\n    variable = factor(variable, labels = c(\"Real GDP per capita\", \"Population\"))\n    )\n\nggplot(tab_comparison, aes(x = year, y = index, color = region)) +\n  geom_hline(yintercept = 100) +\n  geom_line() +\n  scale_color_manual(\n    name = \"\",\n    values = colors_report,\n    labels = c(\"Latin America & Carribean Avg.\", \"Uruguay\")) +\n  facet_wrap(vars(variable)) +\n  labs(\n    caption = \"Source: PWT\",  \n    x = NULL,\n    y = \"Index (100 = 1951)\"\n  ) +\n  theme_report\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\nSo, Uruguay is way behind LATAM in growth. Note that in both plots the LATAM series has spikes which most likely indicate that new countries have been introduced in the series. This may not be ideal and in a more thorough analysis we should account for that in some manner. A simple solution would be to simply work with more recent data, since it is less likely to contain missing observations.\n\nLets go back to our basic fact table. To better visualize how these variables change we can repeat the analysis above. To avoid copy-pasting and to keep things simple we can build a simple function that compares variables from the `pwt` table. The code below defines the `plot_comparison` function that compares the historic values of a variable across the five countries we selected. I also defined two additional arguments that can prove to be helpful. First a `start_year` to filter the time horizon of the anaylsis. Second a logical `index` indicating if the variable should be indexed to the first available value (`TRUE`).\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npwt <- pwt %>%\n  mutate(\n    # Real GDP per capita\n    rgdppc = rgdpe / pop\n  )\n\nplot_comparison <- function(variable, start_year = 1950, index = TRUE, ...) {\n  \n  dat <- pwt %>%\n    filter(\n      country %in% country_selection,\n      year >= start_year,\n      !is.na({{variable}})\n      )\n  \n  if (isTRUE(index)) {\n    dat <- dat %>%\n       group_by(country) %>%\n      mutate(index_var = {{variable}} / first({{variable}}) * 100)\n    \n    p <- ggplot(dat, aes(x = year, y = index_var, color = country)) +\n      geom_hline(yintercept = 100)\n  } else {\n    \n    p <- ggplot(dat, aes(x = year, y = {{variable}}, color = country))\n    \n    }\n  \n  p <- p +\n    geom_line() +\n    scale_color_manual(name = \"\", values = colors_report) +\n    labs(...) +\n    theme_report\n  \n  return(p)\n  \n}\n```\n:::\n\n\nTo exemplify how this function works lets see how was the growth in Real GDP per capita across these countries.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot_comparison(rgdppc)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\nBy default, the values are indexed to first available (i.e. non-`NA`) value. During this time window the best performing country was Brazil, followed by Argentina. Note that the plot above shows the growth of Real GDP per capita. To find the actual values of the variable we set `index = FALSE`. \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot_comparison(rgdppc, index = FALSE)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\nWhile Uruguay didn't fare as well in the full time-period, we could analyze its growth pattern following the most recent Commodity Boom. For those unfamiliar with LATAM economies it is important to note that commodity prices have a strong correlation with boom and bust cycles. The most recent and relevant commodity boom was the 2002-2012 period, fueled by Chinese exceptional growth.\n\nAs the plot below reveals all countries perform well during this time window. Uruguay has the strongest growth among them but note that all of them slowdown past 2015. Brazil, in fact, faces a strong internal recession and, a few years later, Argentina also goes to bust.\n\nFinally, since the data is available only until 2019 we don't see how these economies fared during the COVID years.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot_comparison(rgdppc, 2002)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\nWhen looking at average hours worked we see a similar pattern in all countries. Uruguay has the second highest fall (unfortunately there is no information on Paraguay) meaning the average worker is working ~15% less hours in 2019 than in 1990.\n\nThis is [common trend among most economies](https://ourworldindata.org/working-hours), despite a \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot_comparison(avh, 1990)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\nAs mentioned above, most LATAM countries are commodity-exporters and commodity prices have strong repercussions on the domestic economy. This is true, despite most LATAM countries having fairly low exports/imports shares. Exports account for less than 20% of GDP even during the 2002-2012 commodity boom.\n\nGiven that smaller countries tend to have higher international trade volumes I was surprised by how low both Paraguay and Uruguay appear on this plot. Chile is a LATAM outlier in this sense\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot_comparison(csh_x, index = FALSE)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-13-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\nLong-term growth is only possible with sustained productivity growth. A decent proxy for this is the \"total factor productivity\" of the economy. Historically, LATAM countries have struggled to sustain growth for long periods of time: business cycles tend to be extremely volatile in the region.\n\nAs seen in the plot, total productivity is growing since 2002 but at very modest rates.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot_comparison(ctfp, 2002)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-14-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\nCompare Uruguay to another emerging country such as Poland and we see a stark contrast.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npwt |> \n  filter(country %in% c(\"Poland\", \"Uruguay\"), year >= 1980) %>%\n  ggplot(aes(x = year, y = ctfp, color = country)) +\n  geom_line() +\n  scale_color_manual(name = \"\", values = colors_report) +\n  theme_report\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-15-1.png){fig-align='center' width=90%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npwt <- pwt %>%\n  group_by(country) %>%\n  mutate(drgdppc = rgdppc / lag(rgdppc) - 1)\n\nplot_comparison(drgdppc, index = FALSE)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-16-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\nTo plot above is barely comprehensible. To make\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npwt %>%\n  filter(country == \"Uruguay\") %>%\n  mutate(trend = RcppRoll::roll_mean(drgdppc, n = 6, fill = NA)) %>%\n  ggplot(aes(x = year)) +\n  geom_hline(yintercept = 0) +\n  geom_line(aes(y = drgdppc), color = colors_report[1], linewidth = 1) +\n  geom_line(aes(y = trend), color = colors_report[5]) +\n  theme_report\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-17-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\nIf you are not convinced the above plot is very volatile compare it with A\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npwt %>%\n  filter(country == \"Australia\") %>%\n  mutate(trend = RcppRoll::roll_mean(drgdppc, n = 6, fill = NA)) %>%\n  ggplot(aes(x = year)) +\n  geom_hline(yintercept = 0) +\n  geom_line(aes(y = drgdppc), color = colors_report[1], linewidth = 1) +\n  geom_line(aes(y = trend), color = colors_report[5]) +\n  theme_report\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-18-1.png){fig-align='center' width=90%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot_comparison(avh, 1990) +\n  labs(title = \"Fall in avg. worked hours\", x = NULL, y = \"Index (1990 = 100\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-19-1.png){fig-align='center' width=90%}\n:::\n\n```{.r .cell-code}\nplot_comparison(rgdppc)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-19-2.png){fig-align='center' width=90%}\n:::\n\n```{.r .cell-code}\nplot_comparison(rgdppc, 2002)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-19-3.png){fig-align='center' width=90%}\n:::\n:::\n\n\n\n\nhttps://unstats.un.org/unsd/methodology/m49/overview/\n\nhttps://www.imf.org/external/pubs/ft/weo/2022/02/weodata/groups.htm\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npwt %>%\n  filter(year >= 1980) %>%\n  mutate(rgdppc = rgdpe / pop) %>%\n  left_join(country_groups, by = c(\"isocode\" = \"iso3c\")) %>%\n  group_by(year, region) %>%\n  summarise(\n    total_pop = sum(pop, na.rm = TRUE),\n    total_gdp = sum(rgdpe, na.rm = TRUE)\n    ) %>%\n  mutate(rgdppc = total_gdp / total_pop) %>%\n  group_by(region) %>%\n  mutate(index = rgdppc / first(rgdppc) * 100) %>%\n  ggplot(aes(x = year, y = index, color = region)) +\n  geom_line()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-20-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\n## Demographics\n\nAs we've seen above, Uruguay's population is not growing much. I suspect this likely due to falling total fertility rates. Also, I'm curious to find out the age structure of the population as I suspect that Uruguay had a relatively fast demographic transition.\n\nI find that the World Population Projections by the UN is a good fit to answer these sort of questions.\n\nFirst lets look at the population projections for this century. This data, split by age, is in the `popprojAge1dt` table. To make for a cleaner visualization I group the ages into `\"Less than 14\", \"15-24\", \"25-64\", \"65-84\", \"85+\"`.\n\nUruguay's population is expected to grow only until 2027! From that point onwards it will start shrinking. By 2100 the country's population is expected to be at around 2,4 million (smaller than what it was in 1959). Interestingly, the actual \"structure\" of the population seems to stay somewhat constant.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(wpp2022)\n\n# Projections by age 2022-2100\ndata(\"popprojAge1dt\")\n# Estimates by age 1950-2022\ndata(\"popAge1dt\")\n\nproj_age <- popprojAge1dt %>%\n  filter(name == \"Uruguay\") %>%\n  mutate(\n    year = as.numeric(year),\n    age_group = factor(\n      case_when(\n        age <= 14 ~ \"Less than 14\",\n        age > 14 & age <= 24 ~ \"15-24\",\n        age > 24 & age <= 64 ~ \"25-64\",\n        age > 64 & age <= 84 ~ \"65-84\",\n        age > 84 ~ \"85 or over\"),\n      levels = c(\"Less than 14\", \"15-24\", \"25-64\", \"65-84\", \"85 or over\")\n      )\n  ) %>%\n  group_by(year, age_group) %>%\n  summarise(total_pop = sum(pop)) %>%\n  ungroup()\n\nggplot(proj_age, aes(x = year, y = total_pop, fill = age_group)) +\n  geom_area() +\n  geom_hline(yintercept = 0) +\n  scale_x_continuous(breaks = seq(2020, 2100, 10)) +\n  scale_y_continuous(labels = scales::label_number(big.mark = \",\")) +\n  scale_fill_manual(name = \"\", values = colors_report) +\n  labs(\n    title = \"Uruguay's population is expected to shrink\",\n    subtitle = \"UN population projections by age group from 2022 to 2100.\",\n    x = NULL,\n    y = \"Population (thousands)\",\n    caption = \"Source: WPP (2022)\"\n  ) +\n  theme_report +\n  theme(\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor.x = element_blank())\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-21-1.png){fig-align='center' width=90%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nproj_age <- popprojAge1dt %>%\n  filter(name == \"Uruguay\") %>%\n  mutate(\n    year = as.numeric(year),\n    age_group = case_when(\n        age <= 14 ~ \"Young\",\n        age > 14 & age <= 64 ~ \"Adult\",\n        age > 64 ~ \"Elder\")\n  ) %>%\n  group_by(year, age_group) %>%\n  summarise(total_pop = sum(pop)) %>%\n  group_by(year) %>%\n  mutate(share = total_pop / sum(total_pop)) %>%\n  ungroup()\n\nproj_text <- proj_age %>%\n  filter(year == max(year)) %>%\n  mutate(x = 2095, label = paste0(round(share * 100, 1), \"%\"))\n\nggplot(proj_age, aes(x = year, y = share, fill = age_group)) +\n  geom_area() +\n  geom_text(\n    data = proj_text,\n    aes(x = x, y = share, label = label),\n    position = position_stack(vjust = 0.5)) +\n  geom_hline(yintercept = 0) +\n  scale_x_continuous(breaks = seq(2020, 2100, 10)) +\n  scale_y_continuous(labels = scales::label_percent()) +\n  scale_fill_manual(name = \"\", values = colors_report) +\n  labs(\n    title = \"Uruguay's elder population expected to triple\",\n    subtitle = \"Projected population share of each group age 2022-2100\",\n    caption = \"Source: WPP (2022)\",\n    x = NULL,\n    y = NULL\n  ) +\n  theme_report +\n  theme(\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor.x = element_blank()\n    )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-22-1.png){fig-align='center' width=90%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nage_index <- proj_age %>%\n  pivot_wider(\n    id_cols = \"year\",\n    names_from = \"age_group\",\n    values_from = \"total_pop\"\n    ) %>%\n  mutate(index = Elder / Young * 100)\n\nggplot(age_index, aes(x = year, y = index)) +\n  geom_hline(yintercept = 100) +\n  geom_line(color = colors_report[1], linewidth = 1) +\n  labs(\n    title = \"Aging Index\",\n    subtitle = \"Proportion of elder population in relation to young population\",\n    caption = \"Source: WPP (2022).\",\n    x = NULL,\n    y = \"Index (elder/young)\"\n  ) +\n  theme_report\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-23-1.png){fig-align='center' width=90%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nx1 <- seq(0, 80, 5)\nx2 <- seq(4, 84, 5)\n\nxlabels <- c(paste(x1, x2, sep = \"-\"), \"85+\")\n\npop_pyramid <- popAge1dt %>%\n  rename(country = name) %>%\n  filter(\n    country %in% c(\"Brazil\", \"Uruguay\"),\n    year %in% c(1950, 1970, 1990, 2010, 2020)) %>%\n  mutate(\n    age_group = findInterval(age, x2, left.open = TRUE),\n    age_group = factor(age_group, labels = xlabels)) %>%\n  group_by(year, country, age_group) %>%\n  summarise(female = sum(popF), male = sum(popM)) %>%\n  pivot_longer(cols = c(female, male), names_to = \"sex\", values_to = \"pop\") %>%\n  group_by(year, country, sex) %>%\n  mutate(share = pop / sum(pop) * 100) %>%\n  ungroup() %>%\n  mutate(share = if_else(sex == \"male\", -share, share))\n\nggplot(pop_pyramid, aes(x = age_group, y = share)) +\n  geom_col(aes(fill = sex)) +\n  coord_flip() +\n  scale_y_continuous(\n    breaks = seq(-15, 15, 5),\n    labels = c(15, 10, 5, 0, 5, 10, 15)) +\n  scale_fill_manual(values = colors_report[c(1, 3)]) +\n  guides(fill = \"none\") +\n  facet_grid(rows = vars(country), cols = vars(year)) +\n  labs(\n    title = \"Uruguay had a smaller demographic bonus\",\n    subtitle = \"Age pyramids for Brazil and Uruguay\",\n    caption = \"Source: WPP (2022)\",\n    y = \"%\",\n    x = NULL) +\n  theme_report\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-24-1.png){fig-align='center' width=90%}\n:::\n:::\n\n\n## Growth\n\n\n## Montevideo\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(rvest)\nlibrary(emoji)\n\nmercer_url <- \"https://mobilityexchange.mercer.com/Insights/quality-of-living-rankings\"\n\ncountry_latam <- c(\n  \"Argentina\", \"Bolivia\", \"Brazil\", \"Chile\", \"Colombia\", \"Ecuador\", \n  \"Guyana\", \"Paraguay\", \"Peru\", \"Suriname\", \"Uruguay\", \"Venezuela\",\n  \"Mexico\", \"Panama\", \"Cuba\", \"Costa Rica\"\n  )\n\ntables <- mercer_url %>%\n  xml2::read_html() %>%\n  html_table()\n\nmercer <- bind_rows(tables[[1]], tables[[2]])\n\nmercer <- mercer %>%\n  janitor::clean_names() %>%\n  unite(\"country\", c(country_region, country_region_2), na.rm = TRUE)\n\ntab_rank <- mercer %>%\n  filter(country %in% country_latam) %>%\n  mutate(flag = map_chr(country, emoji::flag)) %>%\n  select(rank, city, flag)\n\ntab_rank %>%\n  gt() %>%\n  cols_label(rank = \"Rank\", city = \"City\", flag = \"\") %>%\n  gt_theme_538()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"ubxrdivsuv\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>@import url(\"https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\n#ubxrdivsuv table {\n  font-family: Chivo, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#ubxrdivsuv thead, #ubxrdivsuv tbody, #ubxrdivsuv tfoot, #ubxrdivsuv tr, #ubxrdivsuv td, #ubxrdivsuv th {\n  border-style: none;\n}\n\n#ubxrdivsuv p {\n  margin: 0;\n  padding: 0;\n}\n\n#ubxrdivsuv .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: 300;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: none;\n  border-top-width: 3px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ubxrdivsuv .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#ubxrdivsuv .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ubxrdivsuv .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ubxrdivsuv .gt_heading {\n  background-color: #FFFFFF;\n  text-align: left;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ubxrdivsuv .gt_bottom_border {\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ubxrdivsuv .gt_col_headings {\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ubxrdivsuv .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: normal;\n  text-transform: uppercase;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ubxrdivsuv .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: normal;\n  text-transform: uppercase;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ubxrdivsuv .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ubxrdivsuv .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ubxrdivsuv .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ubxrdivsuv .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#ubxrdivsuv .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: bolder;\n  text-transform: uppercase;\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 1px;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#ubxrdivsuv .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: bolder;\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 1px;\n  border-bottom-color: #FFFFFF;\n  vertical-align: middle;\n}\n\n#ubxrdivsuv .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ubxrdivsuv .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ubxrdivsuv .gt_row {\n  padding-top: 3px;\n  padding-bottom: 3px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ubxrdivsuv .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: bolder;\n  text-transform: uppercase;\n  border-right-style: solid;\n  border-right-width: 0px;\n  border-right-color: #FFFFFF;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ubxrdivsuv .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ubxrdivsuv .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ubxrdivsuv .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#ubxrdivsuv .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ubxrdivsuv .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ubxrdivsuv .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ubxrdivsuv .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ubxrdivsuv .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ubxrdivsuv .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ubxrdivsuv .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ubxrdivsuv .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ubxrdivsuv .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ubxrdivsuv .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ubxrdivsuv .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ubxrdivsuv .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ubxrdivsuv .gt_sourcenote {\n  font-size: 12px;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ubxrdivsuv .gt_left {\n  text-align: left;\n}\n\n#ubxrdivsuv .gt_center {\n  text-align: center;\n}\n\n#ubxrdivsuv .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ubxrdivsuv .gt_font_normal {\n  font-weight: normal;\n}\n\n#ubxrdivsuv .gt_font_bold {\n  font-weight: bold;\n}\n\n#ubxrdivsuv .gt_font_italic {\n  font-style: italic;\n}\n\n#ubxrdivsuv .gt_super {\n  font-size: 65%;\n}\n\n#ubxrdivsuv .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#ubxrdivsuv .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ubxrdivsuv .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#ubxrdivsuv .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#ubxrdivsuv .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#ubxrdivsuv .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#ubxrdivsuv .gt_indent_5 {\n  text-indent: 25px;\n}\n\ntbody tr:last-child {\n  border-bottom: 2px solid #ffffff00;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"Rank\">Rank</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"City\">City</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"\"></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">78</td>\n<td headers=\"city\" class=\"gt_row gt_left\">Montevideo</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇺🇾</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">91</td>\n<td headers=\"city\" class=\"gt_row gt_left\">Buenos Aires</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇦🇷</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">93</td>\n<td headers=\"city\" class=\"gt_row gt_left\">Santiago</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇨🇱</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">97</td>\n<td headers=\"city\" class=\"gt_row gt_left\">Panama City</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇵🇦</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">107</td>\n<td headers=\"city\" class=\"gt_row gt_left\">Brasilia</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇧🇷</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">108</td>\n<td headers=\"city\" class=\"gt_row gt_left\">San José</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇨🇷</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">113</td>\n<td headers=\"city\" class=\"gt_row gt_left\">Monterrey</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇲🇽</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">115</td>\n<td headers=\"city\" class=\"gt_row gt_left\">Asunción</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇵🇾</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">118</td>\n<td headers=\"city\" class=\"gt_row gt_left\">Rio de Janeiro</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇧🇷</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">119</td>\n<td headers=\"city\" class=\"gt_row gt_left\">São Paulo</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇧🇷</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">122</td>\n<td headers=\"city\" class=\"gt_row gt_left\">Quito</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇪🇨</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">124</td>\n<td headers=\"city\" class=\"gt_row gt_left\">Lima</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇵🇪</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">127</td>\n<td headers=\"city\" class=\"gt_row gt_left\">Manaus</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇧🇷</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">128</td>\n<td headers=\"city\" class=\"gt_row gt_left\">Bogotá</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇨🇴</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">129</td>\n<td headers=\"city\" class=\"gt_row gt_left\">Mexico City</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇲🇽</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">156</td>\n<td headers=\"city\" class=\"gt_row gt_left\">La Paz</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇧🇴</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">192</td>\n<td headers=\"city\" class=\"gt_row gt_left\">Havana</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇨🇺</td></tr>\n    <tr><td headers=\"rank\" class=\"gt_row gt_right\">202</td>\n<td headers=\"city\" class=\"gt_row gt_left\">Caracas</td>\n<td headers=\"flag\" class=\"gt_row gt_left\">🇻🇪</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhdi <- read_csv(here(\"static/data/GDL-Sub-national-HDI-data.csv\"))\n\nregion_sel <- c(\n  \"City of Buenos Aires\", \"Rio Grande do Sul\", \"Panama\",\n  \"Distrito Federal\", \"Antioquia (incl Medellin)\", \"La Paz\"\n)\n\nhdi %>%\n  janitor::clean_names() %>%\n  filter(region %in% region_sel)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 8 × 38\n  country   continent iso_code level  gdlcode region                    x1990\n  <chr>     <chr>     <chr>    <chr>  <chr>   <chr>                     <dbl>\n1 Argentina America   ARG      Subnat ARGr101 City of Buenos Aires      0.725\n2 Bolivia   America   BOL      Subnat BOLr102 La Paz                    0.553\n3 Brazil    America   BRA      Subnat BRAr127 Distrito Federal          0.685\n4 Brazil    America   BRA      Subnat BRAr123 Rio Grande do Sul         0.641\n5 Colombia  America   COL      Subnat COLr101 Antioquia (incl Medellin) 0.608\n6 Honduras  America   HND      Subnat HNDr112 La Paz                    0.428\n7 Mexico    America   MEX      Subnat MEXr109 Distrito Federal          0.731\n8 Panama    America   PAN      Subnat PANr108 Panama                    0.695\n  x1991 x1992 x1993 x1994 x1995 x1996 x1997 x1998 x1999 x2000 x2001 x2002 x2003\n  <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>\n1 0.732 0.737 0.741 0.746 0.747 0.753 0.758 0.764 0.775 0.781 0.786 0.786 0.794\n2 0.563 0.571 0.581 0.59  0.601 0.612 0.624 0.635 0.63  0.625 0.62  0.612 0.603\n3 0.692 0.699 0.707 0.716 0.726 0.734 0.742 0.748 0.755 0.764 0.768 0.772 0.765\n4 0.648 0.654 0.662 0.67  0.679 0.686 0.694 0.7   0.706 0.714 0.719 0.723 0.717\n5 0.617 0.626 0.632 0.638 0.642 0.652 0.661 0.668 0.667 0.672 0.673 0.675 0.681\n6 0.428 0.432 0.437 0.439 0.444 0.447 0.451 0.437 0.457 0.461 0.464 0.467 0.47 \n7 0.733 0.736 0.739 0.744 0.744 0.752 0.759 0.768 0.775 0.782 0.786 0.793 0.799\n8 0.698 0.705 0.711 0.714 0.717 0.723 0.73  0.737 0.742 0.748 0.754 0.761 0.765\n  x2004 x2005 x2006 x2007 x2008 x2009 x2010 x2011 x2012 x2013 x2014 x2015 x2016\n  <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>\n1 0.8   0.804 0.816 0.819 0.827 0.829 0.836 0.844 0.842 0.842 0.84  0.84  0.835\n2 0.607 0.622 0.63  0.641 0.652 0.658 0.663 0.669 0.674 0.683 0.685 0.69  0.702\n3 0.767 0.769 0.769 0.771 0.779 0.778 0.781 0.787 0.792 0.811 0.815 0.814 0.816\n4 0.719 0.722 0.723 0.724 0.734 0.733 0.737 0.742 0.746 0.765 0.769 0.768 0.77 \n5 0.688 0.7   0.702 0.715 0.722 0.729 0.734 0.74  0.741 0.752 0.756 0.759 0.764\n6 0.475 0.479 0.494 0.508 0.521 0.532 0.542 0.551 0.553 0.56  0.566 0.575 0.582\n7 0.805 0.808 0.817 0.818 0.821 0.82  0.822 0.825 0.831 0.828 0.83  0.832 0.829\n8 0.772 0.777 0.783 0.792 0.796 0.798 0.802 0.809 0.815 0.821 0.824 0.831 0.837\n  x2017 x2018 x2019 x2020 x2021\n  <dbl> <dbl> <dbl> <dbl> <dbl>\n1 0.835 0.83  0.828 0.81  0.812\n2 0.709 0.715 0.718 0.695 0.693\n3 0.821 0.826 0.829 0.82  0.816\n4 0.774 0.779 0.781 0.773 0.769\n5 0.766 0.768 0.772 0.761 0.757\n6 0.585 0.588 0.605 0.594 0.594\n7 0.832 0.835 0.838 0.813 0.815\n8 0.842 0.846 0.849 0.832 0.837\n```\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nwiki_url <- \"https://en.wikipedia.org/wiki/List_of_cities_in_Uruguay\"\n\ntables <- html_table(xml2::read_html(wiki_url))\n\npop_muni <- tables[[1]]\n\nas_numeric_string <- Vectorize(function(x) {\n  \n  digits <- str_extract_all(x, \"[[:digit:]]\")\n  digits <- paste(unlist(digits), collapse = \"\")\n  as.numeric(digits)\n  \n  })\n\npop_muni <- pop_muni %>%\n  janitor::clean_names() %>%\n  select(city, department, starts_with(\"pop\")) %>%\n  mutate(across(starts_with(\"pop\"), as_numeric_string))\n\npop_depto <- pop_muni %>%\n  group_by(department) %>%\n  summarise(total_pop = sum(population2011_census, na.rm = TRUE))\n```\n:::\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npop_depto <- pop_depto %>%\n  mutate(\n    depto_name = str_remove(department, \"Department\"),\n    depto_name = str_to_upper(depto_name),\n    depto_name = stringi::stri_trans_general(depto_name, \"latin-ascii\"),\n    depto_name = str_trim(depto_name)\n  )\n\ndeptos_pop <- left_join(deptos, pop_depto, by = c(\"nombre\" = \"depto_name\"))\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tmap)\nlibrary(tmaptools)\ntmap_mode(mode = \"view\")\n\nm <- tm_shape(deptos_pop) +\n  tm_fill(\n    col = \"total_pop\",\n    style = \"jenks\",\n    n = 7,\n    title = \"Population\",\n    id = \"department\") +\n  tm_borders() +\n  tm_basemap(server = \"CartoDB.Positron\")\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-0c4e08cb69c30f3de60b\" style=\"width:100%;height:355.968px;\" class=\"widgetframe html-widget \"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-0c4e08cb69c30f3de60b\">{\"x\":{\"url\":\"index_files/figure-html//widgets/widget_unnamed-chunk-31.html\",\"options\":{\"xdomain\":\"*\",\"allowfullscreen\":false,\"lazyload\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsecc <- st_make_valid(secc)\n\nsecc_montevideo <- filter(secc, NOMBDEPTO == \"MONTEVIDEO\")\n\nm <- tm_shape(secc_montevideo) +\n  tm_borders() +\n  tm_basemap(server = \"CartoDB.Positron\")\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-8451ffe216be4a1ae394\" style=\"width:100%;height:355.968px;\" class=\"widgetframe html-widget \"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-8451ffe216be4a1ae394\">{\"x\":{\"url\":\"index_files/figure-html//widgets/widget_unnamed-chunk-33.html\",\"options\":{\"xdomain\":\"*\",\"allowfullscreen\":false,\"lazyload\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<script src=\"../../../site_libs/pymjs-1.3.2/pym.v1.js\"></script>\n<script src=\"../../../site_libs/widgetframe-binding-0.3.1/widgetframe.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}