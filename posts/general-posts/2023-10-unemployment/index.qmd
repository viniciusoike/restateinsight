---
title: "Brazil: Unemployment"
date: "2023-10-20"
description: "Analysis of Brazil's post-pandemic labor market recovery, examining unemployment trends across all 27 states and the decline in labor force participation from 2019 to 2023."
categories: ['data-visualization', 'ggplot2', 'brazil', 'labor-market', 'time-series']
execute:
  warning: false
  message: false
  echo: false
  fig-align: center
---

```{r, libs}
library(sidrar)
library(ggplot2)
library(dplyr)
library(tidyr)
library(showtext)
library(sf)
library(ggrepel)

font_add_google("Merriweather", "Merriweather")
font_add_google("Roboto Condensed", "Roboto Condensed")
font_add_google("Roboto Condensed", "Roboto Condensed")

showtext_auto()
```

```{r, import-data}
state <- geobr::read_state(showProgress = FALSE)
dim_state <- as_tibble(sf::st_drop_geometry(state))
unemp <- get_sidra(
  4099,
  variable = 4099,
  geo = "State",
  period = "201201-202302"
)
```

```{r, clean-data}
#> Clean Sidra table
tbl_unemp <- unemp |>
  janitor::clean_names() |>
  select(
    code_state = unidade_da_federacao_codigo,
    trimestre = trimestre_codigo,
    unemp = valor
  ) |>
  mutate(
    date = zoo::as.Date(zoo::as.yearqtr(trimestre, format = "%Y%q")),
    code_state = as.numeric(code_state)
  ) |>
  left_join(dim_state, by = "code_state")

#> Lollipop data
lvls <- tbl_unemp |>
  filter(date == as.Date("2019-04-01")) |>
  arrange(unemp) |>
  pull(abbrev_state)

tbl_compare <- tbl_unemp |>
  filter(date %in% c(as.Date("2019-04-01"), as.Date("2023-04-01"))) |>
  mutate(abbrev_state = factor(abbrev_state, levels = lvls))

tbl_chg <- tbl_compare |>
  mutate(chg = unemp - lag(unemp), .by = "code_state") |>
  filter(!is.na(chg)) |>
  select(code_state, chg, unemp)


#> Map data
map_chg <- left_join(state, tbl_chg, by = "code_state")

map_chg <- map_chg %>%
  mutate(
    x = as.numeric(st_coordinates(st_centroid(.))[, "X"]),
    y = as.numeric(st_coordinates(st_centroid(.))[, "Y"]),
    label = round(unemp, 2),
    repel = if_else(code_state %in% c(24:28, 53), 1L, 0L),
    group = findInterval(chg, c(6, 10, 12, 16))
  )
```

Brazil's labor market has undergone a significant transformation since the COVID-19 pandemic. While headline unemployment rates have declined across the country, a closer examination reveals important regional variations and underlying structural changes in labor force participation. This analysis examines unemployment trends from 2019 to 2023 using data from IBGE's PNAD Contínua survey.

## Unemployment Declined in All States

Comparing unemployment rates between Q2 2019 (pre-pandemic) and Q2 2023 shows a universal improvement across all 27 Brazilian states.

```{r lollipop}
#| out-width: 80%
#| fig-width: 8
#| fig-height: 9
ggplot(tbl_compare, aes(x = abbrev_state, y = unemp)) +
  geom_line(aes(group = abbrev_state), color = "gray40") +
  geom_point(aes(color = as.factor(date)), size = 2) +
  scale_y_continuous(breaks = seq(0, 18, 2)) +
  coord_flip() +
  scale_color_manual(
    name = "",
    values = c("#3690c0", "#016c59"),
    labels = c("2019-Q2", "2023-Q2")
  ) +
  labs(
    title = "Unemployment rate fell in all Brazilian states",
    subtitle = "Comparison of 2019-Q2 unemployment rate with 2023-Q2. Includes informal workers.",
    caption = "Source: IBGE (PNADC)",
    x = NULL,
    y = "(%)"
  ) +
  theme_minimal(base_family = "Roboto Condensed") +
  theme(
    plot.title = element_text(family = "Merriweather", size = 16),
    plot.subtitle = element_text(
      family = "Merriweather",
      size = 11,
      color = "gray10"
    ),
    legend.position = "top",
    panel.grid.minor = element_blank()
  )
```

The most dramatic improvement occurred in Roraima (RR), where unemployment plummeted from 15.1% to 5.1%—a 10 percentage point decline that represents the largest absolute reduction nationwide. Northern states generally experienced larger decreases, while Southern and Central-Western states, which already had relatively low unemployment in 2019, saw more modest improvements.

## Geographic Patterns in Unemployment

The spatial distribution of unemployment in 2023 reveals clear regional disparities across Brazil.

```{r, map}
ggplot(map_chg) +
  geom_sf(aes(fill = unemp), linewidth = 0.3, color = "white") +
  geom_label(
    data = filter(map_chg, repel == 0),
    aes(x = x, y = y, label = label),
    size = 3,
    family = "Roboto Condensed",
    color = "gray10"
  ) +
  geom_label_repel(
    data = filter(map_chg, repel == 1),
    aes(x = x, y = y, label = label),
    size = 3,
    family = "Roboto Condensed",
    color = "gray10",
    nudge_x = 5
  ) +
  labs(
    title = "Southern and Mid-Western States\nHave Lowest Unemployment Rates"
  ) +
  scale_fill_distiller(name = "Unemployment (%)", palette = "PuBuGn") +
  ggthemes::theme_map() +
  theme(
    plot.title = element_text(family = "Merriweather", size = 16),
    legend.text = element_text(family = "Roboto Condensed"),
    legend.title = element_text(family = "Roboto Condensed")
  )
```

Southern states (Santa Catarina at 3.5%, Rio Grande do Sul at 4.9%) and Central-Western states (Rondônia at 2.3%, Mato Grosso do Sul at 4.1%) exhibit the lowest unemployment rates, reflecting their stronger agricultural sectors and more diversified economies. In contrast, Northeastern states continue to face higher unemployment, with Pernambuco (13.3%) and Bahia (14.2%) among the highest in the country. These persistent regional disparities underscore the uneven economic development across Brazil's macroregions.

## The Labor Participation Caveat

While falling unemployment appears positive, an important structural change complicates this narrative: labor force participation has declined significantly.

```{r}
labor_share_br <- get_sidra(
  6461,
  variable = 4096,
  period = "201801-202304",
  geo = "Brazil"
)

tbl_labor_share_br <- labor_share_br |>
  janitor::clean_names() |>
  select(trimestre = trimestre_codigo, share = valor) |>
  mutate(
    date = zoo::as.Date(zoo::as.yearqtr(trimestre, format = "%Y%q"))
  )

base_index <- tbl_labor_share_br |>
  filter(date >= as.Date("2019-01-01"), date <= as.Date("2019-12-01")) |>
  summarise(base = mean(share))

tbl_labor_share_br <- tbl_labor_share_br |>
  mutate(index = share / base_index$base * 100)
```

```{r}
labor_share <- get_sidra(
  6461,
  variable = 4096,
  period = "201801-202304",
  geo = "State"
)

tbl_labor_share <- labor_share |>
  janitor::clean_names() |>
  select(
    code_state = unidade_da_federacao_codigo,
    trimestre = trimestre_codigo,
    share = valor
  ) |>
  mutate(
    date = zoo::as.Date(zoo::as.yearqtr(trimestre, format = "%Y%q")),
    code_state = as.numeric(code_state)
  ) |>
  left_join(dim_state, by = "code_state")

index_base <- tbl_labor_share |>
  filter(date >= as.Date("2019-01-01"), date <= as.Date("2019-12-01")) |>
  summarise(base = mean(share), .by = "code_state")

tbl_labor_share <- tbl_labor_share |>
  left_join(index_base, by = "code_state") |>
  mutate(
    index = share / base * 100,
    highlight = if_else(
      abbrev_state %in% c("AL", "AC", "SP", "RJ", "TO", "RN"),
      1L,
      0L
    )
  )
```

```{r}
ggplot() +
  geom_line(
    data = tbl_labor_share,
    aes(
      x = date,
      y = index,
      group = code_state,
      color = as.factor(name_region)
    ),
    alpha = 0.7
  ) +
  geom_line(
    data = tbl_labor_share_br,
    aes(x = date, y = index),
    color = "#000000",
    linewidth = 1
  ) +
  geom_hline(yintercept = 100) +
  geom_text(
    data = filter(tbl_labor_share, date == max(date), highlight == 1),
    aes(x = date, y = index, label = abbrev_state),
    family = "Roboto Condensed",
    size = 3,
    nudge_x = 50
  ) +
  scale_x_date(date_breaks = "1 year", date_labels = "%Y") +
  scale_color_manual(
    name = "",
    values = c("#377eb8", "#ff7f00", "#a65628", "#4daf4a", "#984ea3")
  ) +
  labs(
    title = "Drop in labor participation rate",
    y = "Index (2019 = 100)",
    x = NULL,
    caption = "Source: IBGE (PNADC)"
  ) +
  theme_minimal(base_family = "Roboto Condensed") +
  theme(
    panel.grid.minor = element_blank(),
    legend.position = "top",
    plot.title = element_text(family = "Merriweather", size = 16)
  )
```

The labor force participation rate (indexed to 2019 = 100) shows a concerning trend: Brazil has not returned to pre-pandemic levels of labor market engagement. The thick black line representing the national average hovers below 100, indicating that fewer working-age Brazilians are actively employed or seeking employment compared to 2019. Regional variation is substantial—Alagoas (AL) shows participation rates above 110, while Acre (AC) has declined to around 87. This heterogeneity reflects different demographic trends, pension reforms, and regional economic conditions affecting people's decisions to participate in the labor force.

## Conclusion

Brazil's post-pandemic labor market recovery presents a mixed picture. While unemployment rates have declined universally across all states—with particularly dramatic improvements in Northern states like Roraima—this improvement is partially attributable to people exiting the labor force rather than purely to job creation. The persistent decline in labor force participation suggests structural changes in Brazil's labor market, potentially driven by demographic shifts, early retirement, discouraged workers, or increased enrollment in education. Policymakers must look beyond headline unemployment figures to understand the full health of the labor market, as falling unemployment accompanied by falling participation may signal underlying weaknesses rather than genuine economic strength.
