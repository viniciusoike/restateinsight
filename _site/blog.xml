<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Vinicius Oike</title>
<link>https:://www.restateinsight.com/blog.html</link>
<atom:link href="https:://www.restateinsight.com/blog.xml" rel="self" type="application/rss+xml"/>
<description>A blog on economics and cities</description>
<generator>quarto-1.3.450</generator>
<lastBuildDate>Tue, 11 Jul 2023 03:00:00 GMT</lastBuildDate>
<item>
  <title>Definindo objetos no R. = ou &lt;- ?</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/definindo-objetos/index.html</link>
  <description><![CDATA[ 




<section id="definindo-objetos-no-r" class="level1">
<h1>Definindo objetos no R</h1>
<p>Há dois operadores para definir um objeto no R: <code>=</code> e <code>&lt;-</code>. A maior parte dos usuários parece preferir o último apesar dele parecer um tanto inconveniente. Em teclados antigos, havia uma tecla específica com o símbolo <code>&lt;-</code>, mas em teclados ABNT modernos ele exige três teclas para ser escrito.</p>
<p>Para contornar este incômodo é comum criar um atalho no teclado para esse símbolo; o RStudio, por exemplo, tem um atalho usando a teclas <code>Alt</code> e <code>-</code> em conjunto. Mas ainda assim fica a questão: por que não utilizar o <code>=</code>? A resposta curta é que o símbolo <code>&lt;-</code> é a melhor e mais consistente forma de definir objetos R. Na prática, contudo, há poucas diferenças entre as expressões e elas dificilmente vão fazer alguma diferença. Podemos começar com um exemplo bastante simples para entender estas diferenças.</p>
<section id="qual-a-diferença" class="level2">
<h2 class="anchored" data-anchor-id="qual-a-diferença">Qual a diferença?</h2>
<p>O código abaixo cria duas variáveis, <code>x</code> e <code>y</code>, cujos valores são a sequência <img src="https://latex.codecogs.com/png.latex?1,%202,%203,%204,%205">. Até aí tudo igual. A função <code>all.equal</code> certifica que os objetos são iguais e a função <code>rm</code> “deleta” os objetos. Esta última vai ser conveniente para manter os exemplos organizados.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb1-2">y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb1-3"></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">all.equal</span>(x, y)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span>(x, y)</span></code></pre></div>
</div>
<p>Agora considere o código abaixo. A função <code>median</code> está sendo aplicada em <code>x &lt;- 1:5</code>. O que acontece desta vez? O resultado é que é criada uma variável <code>x</code> com valor <code>1 2 3 4 5</code> e também é impresso a mediana deste vetor, i.e., <code>3</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">median</span>(x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">x</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span>(x)</span></code></pre></div>
</div>
<p>Poderíamos fazer o mesmo usando <code>=</code>, certo? Errado. Aí está uma das primeiras diferenças entre estes operadores. O código abaixo calcula a mediana do vetor, mas não cria um objeto chamado <code>x</code> com valor <code>1 2 3 4 5</code>. Por quê? O problema é que o operador <code>=</code> tem <em>duas finalidades distintas</em>. Ele serve tanto para definir <em>novos</em> objetos, como em <code>x = 2</code>, como também para definir o <em>valor dos argumentos de uma função</em>, como em <code>rnorm(n = 10, mean = 5, sd = 1)</code>. Coincidentemente, o nome do primeiro argumento da função <code>median</code> é x. Logo, o código abaixo é interpretado como: tire a mediana do vetor <code>1 2 3 4 5</code>. O mesmo acontece com outras funções (ex: <code>mean</code>, <code>var</code>, etc.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">median</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">x</span></code></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'x' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span>(x)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in rm(x): object 'x' not found</code></pre>
</div>
</div>
<p>Outro exemplo em que há divergência entre os operadores é com o comando <code>lm</code>. Usando <code>&lt;-</code> podemos escrever, numa única linha, um comando que define um objeto <code>lm</code> (resultado de uma regressão) ao mesmo tempo em que pedimos ao R para imprimir os resultados desta regressão. O código abaixo faz justamente isto.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Imprime os resultados da regressão e salva as info num objeto chamado 'fit'</span></span>
<span id="cb15-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(mpg <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> wt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> mtcars))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = mpg ~ wt, data = mtcars)

Residuals:
    Min      1Q  Median      3Q     Max 
-4.5432 -2.3647 -0.1252  1.4096  6.8727 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  37.2851     1.8776  19.858  &lt; 2e-16 ***
wt           -5.3445     0.5591  -9.559 1.29e-10 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 3.046 on 30 degrees of freedom
Multiple R-squared:  0.7528,    Adjusted R-squared:  0.7446 
F-statistic: 91.38 on 1 and 30 DF,  p-value: 1.294e-10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Verifica que é, de fato, um objeto lm</span></span>
<span id="cb17-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">class</span>(fit)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "lm"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span>(fit)</span></code></pre></div>
</div>
<p>Note que isto não é possível com o operador <code>=</code>. Isto acontece, novamente, porque o <code>=</code> é interpretado de maneira diferente quando aparece dentro de uma função. É necessário quebrar o código em duas linhas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Este exemplo não funciona</span></span>
<span id="cb20-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fit =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(mpg <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> wt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> mtcars))</span></code></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in summary.lm(fit = lm(mpg ~ wt, data = mtcars)): argument "object" is missing, with no default</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># É preciso reescrever o código em duas linhas</span></span>
<span id="cb22-2">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(mpg <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> wt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> mtcars)</span>
<span id="cb22-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(fit)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = mpg ~ wt, data = mtcars)

Residuals:
    Min      1Q  Median      3Q     Max 
-4.5432 -2.3647 -0.1252  1.4096  6.8727 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  37.2851     1.8776  19.858  &lt; 2e-16 ***
wt           -5.3445     0.5591  -9.559 1.29e-10 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 3.046 on 30 degrees of freedom
Multiple R-squared:  0.7528,    Adjusted R-squared:  0.7446 
F-statistic: 91.38 on 1 and 30 DF,  p-value: 1.294e-10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span>(fit)</span></code></pre></div>
</div>
<p>Há também algumas pequenas divergências pontuais. Os primeiros dois argumentos da função <code>lm</code> são <code>formula</code> e <code>data</code>. Considere o código abaixo. Sem executar o código qual deve ser o resultado?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(formula <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mpg <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> wt, data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mtcars)</span></code></pre></div>
</div>
<p>Estamos aplicando a função <code>lm</code> em dois argumentos. O primeiro deles se chama <code>formula</code> e é definido como <code>mpg ~ wt</code>, o segundo é chamado <code>data</code> e é definido como os valores no data.frame <code>mtcars</code>. Ou seja, o resultado deve ser o mesmo do exemplo acima com <code>median(x &lt;- 1:5)</code>. A função é aplicada sobre os argumentos e os objetos <code>formula</code> e <code>data</code> são criados.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(formula <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mpg <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> wt, data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mtcars)</span>
<span id="cb26-2">fit</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = formula &lt;- mpg ~ wt, data = data &lt;- mtcars)

Coefficients:
(Intercept)           wt  
     37.285       -5.344  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1">formula</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>mpg ~ wt</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(data)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span>(fit, formula, data)</span></code></pre></div>
</div>
<p>Note que usei os nomes dos argumentos apenas para exemplificar o caso. Pode-se colocar um nome diferente, pois não estamos “chamando” o argumento e sim especificando qual valor/objeto a função deve utilizar.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Exemplo utilizando nomes diferentes</span></span>
<span id="cb33-2">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(a <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mpg ~ wt"</span>, b <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mtcars)</span>
<span id="cb33-3">fit</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = a &lt;- "mpg ~ wt", data = b &lt;- mtcars)

Coefficients:
(Intercept)           wt  
     37.285       -5.344  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(a)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "mpg ~ wt"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(b)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">list =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ls</span>())</span></code></pre></div>
</div>
<p>O mesmo não é possível com <code>=</code>, por causa da duplicidade apontada acima.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">a =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mpg ~ wt"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">b =</span> mtcars)</span></code></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in terms.formula(formula, data = data): argument is not a valid model</code></pre>
</div>
</div>
<p>Há ainda mais alguns exemplos estranhos, resultados da ordem que o R processa os comandos. O segundo código abaixo, por exemplo, não funciona. Isto acontece porque o <code>&lt;-</code> tem “prioridade” e é lido primeiro.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1">(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1">(x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in x &lt;- y = 5: could not find function "&lt;-&lt;-"</code></pre>
</div>
</div>
<p>É difícil encontrar desvatagens em usar o <code>&lt;-</code> (além da dificuldade de escrevê-lo num teclado normal). Mas há pelo menos um caso em que ele pode levar a problemas. O código abaixo mostra como este operador pode ser sensível a espaços em branco. No caso, define-se o valor de <code>x</code> como <code>-2</code>. O primeiro teste verifica se o valor de <code>x</code> é menor que <img src="https://latex.codecogs.com/png.latex?-1">. Logo, espera-se que o código imprima <code>"ótimo"</code> pois <code>-2</code> é menor que <code>-1</code>. Já o segundo teste faz <em>quase</em> o mesmo. A única diferença é um espaço em branco, mas agora ao invés de um teste, a linha de código define o valor de x como <code>1</code> e imprime <code>"ótimo"</code>, pois o valor do teste (por padrão) é <code>TRUE</code>.</p>
<p>Assim como muitos dos exemplos acima, é difícil imaginar que isto possa ser um problema real. Eventualmente, podemos apagar espaços em branco usando o ‘localizar e substituir’ e isto talvez leve a um erro como o abaixo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define x como -2</span></span>
<span id="cb46-2">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb46-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Se x for menor que -1 (menos um) então "ótimo"</span></span>
<span id="cb46-4"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ótimo"</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"errado"</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ótimo"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Verifica o valor de x</span></span>
<span id="cb48-2">x</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Mesma linha com uma diferença sutil</span></span>
<span id="cb50-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> ) <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ótimo"</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"errado"</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ótimo"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Agora acabamos de mudar o valor de x (e não há aviso algum!)</span></span>
<span id="cb52-2">x</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</section>
<section id="mais-um-adendo" class="level2">
<h2 class="anchored" data-anchor-id="mais-um-adendo">Mais um adendo</h2>
<p>Eu citei apenas dois operadores: <code>=</code> e <code>&lt;-</code>; mas na verdade há ainda outros: <code>&lt;&lt;-</code>, <code>-&gt;</code> e <code>-&gt;&gt;</code> (veja <code>help("assignOps")</code>). Os operadores com “flecha dupla” são comumente utilizadas dentro de funções para usos específicos. Algumas pessoas acham que o operador <code>-&gt;</code> é mais intuitivo quando usado com “pipes”. Pessoalmente, acho este tipo de código abominável.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1">AirPassengers <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb54-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb54-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">window</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1955</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">end =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1958</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-&gt;</span> sub_air_passengers</span>
<span id="cb54-4"></span>
<span id="cb54-5">sub_air_passengers</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Jan      Feb      Mar      Apr      May      Jun      Jul      Aug
1955 5.488938 5.451038 5.587249 5.594711 5.598422 5.752573 5.897154 5.849325
1956 5.648974 5.624018 5.758902 5.746203 5.762051 5.924256 6.023448 6.003887
1957 5.752573 5.707110 5.874931 5.852202 5.872118 6.045005 6.142037 6.146329
1958 5.828946 5.762051 5.891644 5.852202 5.894403 6.075346 6.196444 6.224558
          Sep      Oct      Nov      Dec
1955 5.743003 5.613128 5.468060 5.627621
1956 5.872118 5.723585 5.602119 5.723585
1957 6.001415 5.849325 5.720312 5.817111
1958 6.001415 5.883322 5.736572 5.820083</code></pre>
</div>
</div>
<p>Além dos operadores base, o popular pacote <code>magrittr</code> também possui um novo tipo de operador. Muitos conhecem o <code>%&gt;%</code> que ajuda a formar “pipes” e carregar objetos progressivamente em funções distintas. Menos conhecido, mas igualmente poderoso, o <code>%&lt;&gt;%</code> faz algo parecido.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(magrittr)</span>
<span id="cb56-2">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb56-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(x)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1">x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&lt;&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&lt;&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sin</span>()</span>
<span id="cb58-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(x)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.14112</code></pre>
</div>
</div>
<p>Note que o código acima é equivalente ao abaixo. A vantagem do operador <code>%&lt;&gt;%</code> é de evitar a repetição do <code>x &lt;- x ...</code> o que pode ser conveniente quando o nome do objeto é longo. Da mesma forma, também pode ser aplicado para transformar elementos em uma lista ou colunas num <code>data.frame</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb60-2">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sin</span>()</span></code></pre></div>
</div>
<p>Não recomendo o uso nem do <code>-&gt;</code> e nem do <code>%&lt;&gt;%</code>.</p>
</section>
<section id="resumo" class="level2">
<h2 class="anchored" data-anchor-id="resumo">Resumo</h2>
<p>No geral, o operador <code>&lt;-</code> é a forma mais “segura” de se definir objetos. De fato, atualmente, este operador é considerado o mais apropriado. O livro <a href="https://adv-r.hadley.nz/"><em>Advanced R</em></a>, do influente autor Hadley Wickham, por exemplo, recomenda que se use o operador <code>&lt;-</code> <em>exclusivamente</em> para definir objetos.</p>
<p>A inconveniência de escrevê-lo num teclado moderno é contornada, como comentado acima, por atalhos como o <code>Alt</code> + <code>-</code> no RStudio. Em editores de texto como o VSCode, Sublime Text ou Notepad++ também é possível criar atalhos personalizados para o <code>&lt;-</code>. Pessoalmente, eu já me acostumei a digitar <code>&lt;-</code> manualmente e não vejo grande problema nisso. Acho que o <code>=</code> tem seu valor por ser mais intutivo, especialmente para usuários que já tem algum conhecimento de programação, mas acabo usando mais o <code>&lt;-</code>. Por fim, o <code>&lt;-</code> fica bem bonito quando se usa uma fonte com ligaturas como o <a href="https://github.com/tonsky/FiraCode">Fira Code</a>.</p>
<p>É importante frisar que o <code>&lt;-</code> continua sendo o operador de predileção da comunidade dos usuários de R e novas funções/pacotes devem ser escritas com este sinal. Por sorte há opções bastante simples que trocam os <code>=</code> para <code>&lt;-</code> corretamente como o <code>formatR</code> apresentado abaixo. Veja também o addin do pacote <code>styler</code>. Ou seja, é possível escrever seu código usando <code>=</code> e trocá-los por <code>&lt;-</code> de maneira automática se for necessário.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(formatR)</span>
<span id="cb61-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy_source</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x = rnorm(n = 10, mean = 2)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">arrow =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>x &lt;- rnorm(n = 10, mean = 2)</code></pre>
</div>
</div>
<p>O ponto central deste post, na verdade, é mostrar como os operadores <code>&lt;-</code> e <code>=</code> são muito similares na prática e que a escolha entre um ou outro acaba caindo numa questão subjetiva. Há quem acredite ser mais cômodo usar o <code>=</code> não só porque ele é mais fácil de escrever, mas também porque ele é mais próximo de <em>universal</em>. Várias linguagens de programação comuns para a/o economista (Matlab, Python, Stata, etc.) usam o sinal de igualdade para definir objetos e parece estranho ter que usar o <code>&lt;-</code> somente para o R.</p>
<p>Em livros de econometria ambos os operadores são utilizados. Os livros <a href="https://www.econometrics-with-r.org/index.html">Introduction to Econometrics with R</a>, <a href="https://www.zeileis.org/teaching/AER/">Applied Econometrics with R</a>, <a href="https://link.springer.com/book/10.1057/9781137317940">Arbia. Spatial Econometrics</a>, entre outros, usam o <code>&lt;-</code>. Já os livros <a href="https://faculty.chicagobooth.edu/ruey-s-tsay/research/analysis-of-financial-time-series-3rd-edition">Tsay. Financial Time Series</a> e <a href="https://link.springer.com/book/10.1007/978-3-319-52452-8">Shumway &amp; Stoffer. Time Series Analysis</a> usam <code>=</code>.</p>
<p>No fim, use o operador que melhor</p>


</section>
</section>

 ]]></description>
  <category>tutorial-R</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/definindo-objetos/index.html</guid>
  <pubDate>Tue, 11 Jul 2023 03:00:00 GMT</pubDate>
  <media:content url="https:://www.restateinsight.com/static/codigo_generico.png" medium="image" type="image/png" height="56" width="144"/>
</item>
<item>
  <title>Pacotes Essenciais R</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/pacotes-essenciais-r/index.html</link>
  <description><![CDATA[ 




<p>R é uma das linguagens de programação mais populares para ciência de dados, estatística, economia e várias outras áreas quantitativas. O <code>R</code> já vem com alguns pacotes “imbutidos” que, em geral, são referidos como <code>base R</code>, são os pacotes que são instalados automaticamente junto com o <code>R</code> como o <code>stats</code>, <code>utils</code>, <code>graphics</code>, <code>datasets</code> entre outros.</p>
<p>Ou seja, já é possível importar dados e limpá-los, fazer análises estatísticas, gráficos e tabelas sem carregar nenhum pacote adicional.</p>
<p>Mas para o usufruir de todo o potencial que o R pode oferecer é essencial conhecer os melhores pacotes e as suas funções.</p>
<section id="a-lista-de-pacotes-essenciais" class="level1">
<h1>A lista de pacotes essenciais</h1>
<table class="table">
<colgroup>
<col style="width: 39%">
<col style="width: 60%">
</colgroup>
<thead>
<tr class="header">
<th>Nome do Pacote</th>
<th>Principal Uso</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><code>data.table</code></p></td>
<td><p>Manipulação de dados extremamente veloz para bigdata</p></td>
</tr>
<tr class="even">
<td><p><code>dplyr</code> + <code>tidyr</code></p></td>
<td><p>Manipulação de dados</p></td>
</tr>
<tr class="odd">
<td><p><code>readr</code></p></td>
<td><p>Importar e exportar arquivos</p></td>
</tr>
<tr class="even">
<td><p><code>stringr</code></p></td>
<td><p>Trabalhar com strings</p></td>
</tr>
<tr class="odd">
<td><p><code>lubridate</code></p></td>
<td><p>Trabalhar com datas</p></td>
</tr>
<tr class="even">
<td><p><code>ggplot2</code></p></td>
<td><p>Visualização de dados com varias extensões</p></td>
</tr>
<tr class="odd">
<td><p><code>knitr</code> + <code>shiny</code> + <code>rmarkdown</code> + <code>quarto</code></p></td>
<td><p>Desenvolvimento de relatórios, apresentações, dashboards e Apps</p></td>
</tr>
<tr class="even">
<td><p><code>dbplyr</code></p></td>
<td><p>Interface para interagir com Bases de Dados (SQL, PostGreSQL, etc.)</p></td>
</tr>
</tbody>
</table>
<p>A verdade é que cada usuário de <code>R</code> tem demandas específicas, então é difícil dizer quais são os pacotes <strong>indisipensáveis</strong>. Por isso o foco da minha lista foi em pacotes que facilitam três partes essenciais de qualquer análise de dados: importação, manipulação e apresentação dos dados.</p>
<p>Independentemente do foco do seu projeto ou da sua pesquisa eu garanto que será necessário:</p>
<ol type="1">
<li>Importar dados no <code>R</code></li>
<li>Transformar esses dados</li>
<li>Apresentar seus resultados na forma de gráficos, tabelas, relatórios, dashboards, etc.</li>
</ol>
</section>
<section id="importar-dados" class="level1">
<h1>Importar dados</h1>
<section id="tabelas-csv" class="level3">
<h3 class="anchored" data-anchor-id="tabelas-csv">Tabelas csv</h3>
<p>Quando comecei a usar <code>R</code> uma das partes mais agoniantes era conseguir importar arquivos de dados externos corretamente. As funções <code>read.csv</code>, <code>read.csv2</code>, <code>read.delim</code> funcionam bem, mas o <code>readr</code> tornou isso tudo muito mais fácil.</p>
<p>O pacote essencialmente tem funções <code>read_*</code> (<code>read_csv</code>, <code>read_fwf</code>, etc.) que servem para importar dados e funções <code>write_</code> (<code>write_csv</code>, <code>write_excel_csv</code>, etc.) que servem para exportar dados num formato específico.</p>
<p>Além das funções <code>read_*</code> e <code>write_*</code>, vale a pena explorar as funções <code>parse_*</code> como <code>parse_number</code> e <code>parse_date</code> que são muito convenientes para garantir que seus dados estejam sendo interpretados da maneira correta.</p>
<p>Para arquivos mais pesados vale considerar duas opções: <code>vroom</code> e <code>data.table</code>. O primeiro é um pacote enxuto que permite a importação e exportação rápida de arquivos <code>csv</code> mais pesados. Já a segunda opção é um pacote completo, que será disuctido em maiores detalhes abaixo, de importação e manipulação de dados. A função <code>data.table::fread</code> é extremamente veloz.</p>
</section>
<section id="outros-formatos" class="level3">
<h3 class="anchored" data-anchor-id="outros-formatos">Outros formatos</h3>
<p>Se você utiliza dados em formatos mais específicos então outros pacotes se tornam essenciais. A lista abaixo cita alguns dos casos mais comuns:</p>
<ul>
<li><code>haven</code> - SPSS, SAS e Stata</li>
<li><code>readxl</code> - Excel</li>
<li><code>jsonlite</code> - Json</li>
<li><code>sf</code> - Shapefiles em geral</li>
</ul>
<p>Por fim, vale notar um pacote simpático chamado <code>rio</code> que tem duas funções centrais <code>import</code> e <code>export</code>. Essas funções automaticamente detectam o tipo de arquivo que você quer importar ou exportar e chamam a função do pacote apropriado para executar a tarefa.</p>
<p>A única desvantagem desta conveniência é que em casos mais complicados pode ser difícil lembrar do nome dos argumentos da função que você precisa. Por exemplo, o <code>import</code> usa o o <code>readxl</code> para importar um arquivo <code>xlsx</code>. Mas você precisa lembrar de cabeça que o argumento para selecionar uma aba específica é <code>sheet</code>.</p>
</section>
</section>
<section id="manipulação-de-dados" class="level1">
<h1>Manipulação de dados</h1>
<p>Toda análise começa com uma base de dados (ou muitas bases de dados). E se você já se aventurou o suficiente no mundo, você sabe que são raríssimas as bases de dados que já vem prontas no momento em que você baixa o <code>csv</code> ou <code>xlsx</code>. Na grande maioria dos casos, é preciso passar por diversas etapas de limpeza ou de pré-processamento para transformar os dados em algo que possa ser analisado.</p>
<p>O <code>R</code> tem várias funções no seu core para realizar essas tarefas mas há dois pacotes essenciais que melhoram (e muito) essa tarefa: <code>dplyr</code> e <code>data.table</code>.</p>
<section id="dplyr-x-data.table" class="level2">
<h2 class="anchored" data-anchor-id="dplyr-x-data.table">dplyr x data.table</h2>
<p>O <code>dplyr</code> é bastante intuitivo, poderoso e há centenas de tutoriais e livros sobre ele. Ele serve para transformar os dados: criar colunas, filtrar linhas, reordernar dados, etc. Ele integra um “ecossistema” de pacotes chamado <a href="https://www.tidyverse.org">tidyverse</a>, uma coleção de pacotes para processamento e visualização de dados, construídos em torno de uma filosofia comum.</p>
<p>O <code>data.table</code> surgiu com o intuito de fazer o <code>R</code> funcionar melhor num mundo de big data. Seu desenvolvimento foi focado em ser o mais rápido, eficiente e sucinto possível, permitindo trabalhar com bases de dados muito grandes dentro do <code>R</code> (~100GB). Em termos de velocidade, o <code>data.table</code> ganha facilmente de praticamente <a href="https://h2oai.github.io/db-benchmark/">todas as outras linguagens populares em data science</a>. Ele é centena de vezes mais rápido que base <code>R</code> e também ganha com folga do seu competidor <code>dplyr</code>.</p>
<p>Se o <code>data.table</code> é tão mais eficiente então como o <code>dplyr</code> se tornou mais popular do que ele?</p>
<p>Acontece que o <code>dplyr</code> é melhor integrado com vários outros pacotes podersos do <code>tidyverse</code>. Também há muito material de apoio ao <code>dplyr</code> na forma de tutoriais, vídeos, livros, etc. disponíveis na internet. Quase todo curso de R ensina a usar o <code>dplyr</code>. Assim, a curva de aprendizado fica mais fácil.</p>
<p>O <code>data.table</code> funciona muito bem com funções do <code>base R</code> como <code>lapply</code>, <code>colMeans()</code>, etc. e tem uma sintaxe concisa e flexível, onde o usuário acaba tendo bastante liberdade para criar as suas soluções. Já o <code>dplyr</code> vai pelo caminho de tentar facilitar ao máximo a vida do usuário criando várias funções com usos bastante específicos para otimizar pequenas tarefas do dia-a-dia do processamento de dados.</p>
<p>Outra pequena desvantagem do <code>data.table</code> é que ele <strong>não funciona de primeira no Mac</strong>. Como ele usa OpenMP é preciso baixar outros programas e modificar algumas configurações no <code>R</code> o que pode ser bem trabalhoso e chato.</p>
<p>Na comparação fica o seguinte:</p>
<table class="table">
<colgroup>
<col style="width: 65%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th><code>dplyr</code></th>
<th><code>data.table</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Mais funções para aprender. Em geral, o código fica mais comprido</td>
<td>Sintaxe sucinta</td>
</tr>
<tr class="even">
<td>Funções melhor integradas com o <code>tidyverse</code></td>
<td>Funções melhor integradas com base <code>R</code></td>
</tr>
<tr class="odd">
<td>Muito mais veloz que o base <code>R</code></td>
<td>Opção mais veloz possível</td>
</tr>
<tr class="even">
<td>Sintaxe mais intuitiva, mais material de apoio na internet, mais popular.</td>
<td>Menos material de apoio disponível</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="tidyverse" class="level2">
<h2 class="anchored" data-anchor-id="tidyverse">tidyverse</h2>
<p>Indepedentemente da sua escolha entre <code>dplyr</code> e/ou <code>data.table</code> (recomendo usar os dois!) vale a pena explorar os demais pacotes do <code>tidyverse</code>.</p>
<section id="tidyr" class="level3">
<h3 class="anchored" data-anchor-id="tidyr">tidyr</h3>
<p>O <code>tidyr</code> acrescenta algumas importantes funcionalidades que faltam no <code>dplyr</code>. Talvez as duas funções mais importantes do pacote sejam <code>pivot_longer</code> e <code>pivot_wider</code> que servem para converter seus dados de transversais (wide) para longitudinais (long) e vice-versa. O <code>tidyr</code> também traz um novo tipo de objeto o <code>tibble</code>, uma versão moderna do <code>data.frame</code>.</p>
<p>Vale também explorar algumas funções muito úteis como <code>separate</code>, <code>fill</code>, <code>complete</code>, <code>replace_na</code> entre outras.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyr)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Exemplo de tibble</span></span>
<span id="cb1-4">data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_tibble</span>(USPersonalExpenditure)</span>
<span id="cb1-5">data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(data, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variable =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rownames</span>(USPersonalExpenditure))</span>
<span id="cb1-6">data</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  `1940` `1945` `1950` `1955` `1960` variable           
   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;              
1 22.2   44.5    59.6    73.2  86.8  Food and Tobacco   
2 10.5   15.5    29      36.5  46.2  Household Operation
3  3.53   5.76    9.71   14    21.1  Medical and Health 
4  1.04   1.98    2.45    3.4   5.4  Personal Care      
5  0.341  0.974   1.8     2.6   3.64 Private Education  </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Exemplo de dado longitudinal</span></span>
<span id="cb3-2">long <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(data, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cols =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>variable, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"year"</span>)</span>
<span id="cb3-3">long</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 25 × 3
   variable            year  value
   &lt;chr&gt;               &lt;chr&gt; &lt;dbl&gt;
 1 Food and Tobacco    1940   22.2
 2 Food and Tobacco    1945   44.5
 3 Food and Tobacco    1950   59.6
 4 Food and Tobacco    1955   73.2
 5 Food and Tobacco    1960   86.8
 6 Household Operation 1940   10.5
 7 Household Operation 1945   15.5
 8 Household Operation 1950   29  
 9 Household Operation 1955   36.5
10 Household Operation 1960   46.2
# ℹ 15 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calcula a variação e apresenta de maneira transversal</span></span>
<span id="cb5-2">long <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(variable) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">variacao =</span> (value <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(value) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">na.omit</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_wider</span>(</span>
<span id="cb5-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id_cols =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"variable"</span>,</span>
<span id="cb5-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_from =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"year"</span>,</span>
<span id="cb5-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values_from =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"variacao"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
# Groups:   variable [5]
  variable            `1945` `1950` `1955` `1960`
  &lt;chr&gt;                &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1 Food and Tobacco     100.    33.9   22.8   18.6
2 Household Operation   47.6   87.1   25.9   26.6
3 Medical and Health    63.2   68.6   44.2   50.7
4 Personal Care         90.4   23.7   38.8   58.8
5 Private Education    186.    84.8   44.4   40  </code></pre>
</div>
</div>
</section>
<section id="stringr" class="level3">
<h3 class="anchored" data-anchor-id="stringr">stringr</h3>
<p>O <code>stringr</code> é um pacote voltado para facilitar a manipulação de vetores de texto (<code>character</code>). Todas as funções do pacote são convenientemente precedidas pelo prefixo <code>str_</code> e a lista dos argumentos segue um padrão uniforme. O nome das funções também é bastante intuitivo.</p>
<p>Novamente, há funções base como <code>gsub</code>, <code>grep</code>, <code>strsplit</code>, <code>sub</code>, entre outras, que servem para manipular vetores de string, mas essas funções carecem de “coesão interna” e em alguns casos elas podem retornar valores inesperados ou “erros silenciosos”.</p>
<p>Uma função muito divertida do pacote é a <code>str_glue</code> que facilita na hora de concatenar strings. Note como é simples incluir variáveis como parte do texto e inclusive fazer transformações nas variáveis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(stringr)</span>
<span id="cb7-2"></span>
<span id="cb7-3">nome <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vinicius Oike"</span></span>
<span id="cb7-4">idade <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">29</span></span>
<span id="cb7-5">nfav <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runif</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb7-6"></span>
<span id="cb7-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_glue</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Olá, meu nome é {nome}, tenho {idade} anos. Ano que vem, terei {idade + 1} anos. Meu número favorito é {round(nfav)}."</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Olá, meu nome é Vinicius Oike, tenho 29 anos. Ano que vem, terei 30 anos. Meu número favorito é 3.</code></pre>
</div>
</div>
</section>
<section id="lubridate" class="level3">
<h3 class="anchored" data-anchor-id="lubridate">lubridate</h3>
<p>O <code>lubridate</code> é um pacote exclusivamente focado em manipulação de vetores de datas e tudo relacionado ao tempo como variável. Variáveis de datas podem ser uma dor de cabeça tremenda no processo de limpeza de dados, pois há inúmeros formatos diferentes, que variam para cada país, fora os problemas potenciais de ano bissextos, fusos-horários diferentes, etc.</p>
<p>Especialmente para quem precisa trabalhar com séries de tempo ou dados em painel, o <code>lubridate</code> é um pacote é essencial.</p>
<p>O pacote também facilita “operações aritméticas” com datas como no exemplo abaixo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(lubridate)</span>
<span id="cb9-2"></span>
<span id="cb9-3">start <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ymd</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2020-01-15"</span>)</span>
<span id="cb9-4">start <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">years</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">months</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2021-04-15"</code></pre>
</div>
</div>
<p>Ele também permite a extração de qualquer informação específica de uma data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">agora <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ymd_hms</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2022-06-10 20:36:15"</span>)</span></code></pre></div>
</div>
<p>Como o dia da semana:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">wday</span>(agora)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
</div>
<p>O trimestre:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">quarter</span>(agora)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>Ou o mês (com a opção de ter a abreviação do mês já no padrão desejado!):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">month</span>(agora, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">locale =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pt_BR"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Jun
12 Levels: Jan &lt; Fev &lt; Mar &lt; Abr &lt; Mai &lt; Jun &lt; Jul &lt; Ago &lt; Set &lt; ... &lt; Dez</code></pre>
</div>
</div>
</section>
<section id="dbplyr" class="level3">
<h3 class="anchored" data-anchor-id="dbplyr">dbplyr</h3>
<p>O <code>dbplyr</code> é um pacote muito interessante que transforma o <code>R</code> numa “interface” para o SQL. O pacote traduz código escrito em <code>dplyr</code> para código em SQL. Assim, é possível acessar, transformar e baixar dados de uma Base de Dados em SQL, PostGreSQL, etc. diretamente no <code>R</code>.</p>
<p>O código abaixo é um exemplo (bem artficial) que demonstra o funcionamento da pacote. A função <code>show_query()</code> não costuma ser usada na prática, mas ela serve para mostrar o que o pacote está fazendo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb18-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dbplyr)</span>
<span id="cb18-3"></span>
<span id="cb18-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Abre um servidor SQL para servir de exemplo</span></span>
<span id="cb18-5">con <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> DBI<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dbConnect</span>(RSQLite<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">SQLite</span>(), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dbname =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">":memory:"</span>)</span>
<span id="cb18-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Faz o update da tabela mtcars para esse servidor</span></span>
<span id="cb18-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">copy_to</span>(con, mtcars)</span>
<span id="cb18-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Acessa a tabela do servidor usando tbl</span></span>
<span id="cb18-9">db <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tbl</span>(con, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mtcars"</span>)</span>
<span id="cb18-10"></span>
<span id="cb18-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Trabalha normalmente usando comandos do dplyr</span></span>
<span id="cb18-12">db <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(cyl <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">disp =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(disp))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(cyl) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">a1 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(disp, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">a2 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">median</span>(wt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(a1)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-18">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># No lugar de show_query() use collect() para baixar os dados</span></span>
<span id="cb18-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">show_query</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;SQL&gt;
SELECT `cyl`, AVG(`disp`) AS `a1`, MEDIAN(`wt`) AS `a2`
FROM (
  SELECT
    `mpg`,
    `cyl`,
    LOG(ROUND(`disp`, 0)) AS `disp`,
    `hp`,
    `drat`,
    `wt`,
    `qsec`,
    `vs`,
    `am`,
    `gear`,
    `carb`
  FROM `mtcars`
  WHERE (`cyl` IN (4.0, 6.0))
)
GROUP BY `cyl`
ORDER BY `a1` DESC</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="visualização-de-dados" class="level1">
<h1>Visualização de dados</h1>
<p>Aqui a lista fica simples pois o <code>ggplot2</code> é simplesmente indispensável. O <code>ggplot2</code> foi lançado em 2005 e até hoje ainda é o pacote mais baixado de <code>R</code> na <a href="https://www.r-pkg.org/downloaded">lista oficial do CRAN</a>. É um pacote sinônimo de <code>R</code> e dá um baile em qualquer outro pacote de visualização.</p>
<p>O <code>ggplot2</code> tem uma sintaxe bastante intuitiva em que o usário vai adicionando camadas e elementos sobre o gráfico.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span>
<span id="cb20-2"></span>
<span id="cb20-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> mtcars, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> wt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> mpg)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_smooth</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ef476f"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">se =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.factor</span>(cyl))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#073b4c"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#06d6a0"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ffd166"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/pacotes-essenciais-r/index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>O pacote por si só já é muito poderoso, mas há ainda inúmeras <a href="https://exts.ggplot2.tidyverse.org/gallery/">extensões desnenvolvidas por outros usuários</a>.</p>
<p>Para ter uma ideia do potencial do pacote vale olhar, por exemplo, a <a href="https://www.cedricscherer.com/top/dataviz/#&amp;gid=1&amp;pid=50">galeria de visualizações do Cédric Scherer</a>.</p>
</section>
<section id="relatórios-e-apps" class="level1">
<h1>Relatórios e Apps</h1>
<section id="rmarkdown" class="level2">
<h2 class="anchored" data-anchor-id="rmarkdown">RMarkdown</h2>
<p>Uma análise de dados, em geral, vira um de dois produtos: um relatório/artigo ou um aplicativo interativo. Novamente o <code>R</code> tem funcionalidades incríveis para ambos os objetivos. Existe um tipo de arquivo chamado <code>RMarkdown</code> que junto com o pacote <code>knitr</code> permite compilar um arquivo misto de <code>Markdown</code> e <code>R</code> em formato <code>pdf</code>, <code>html</code>, <code>doc</code> ou <code>ppt</code>.</p>
<p>Essa extensão é tão poderosa que não só é possível escrever um artigo científico com ela, mas também, um <a href="https://pkgs.rstudio.com/flexdashboard/">dashboard interativo</a>, um <a href="https://bookdown.org">livro inteiro</a>, ou até um <a href="https://bookdown.org/yihui/blogdown/">blog/site</a> (este blog é escrito em <code>RMarkdown</code>).</p>
<p>Atualmente o formato do código é ainda mais flexível, permitindo misturar linguagens como <code>R</code>, <code>Python</code>, <code>SQL</code> e outras num mesmo arquivo. <a href="https://rmarkdown.rstudio.com">Um resumo das funcionalidades pode ser visto aqui</a>.</p>
</section>
<section id="shiny" class="level2">
<h2 class="anchored" data-anchor-id="shiny">Shiny</h2>
<p>O pacote <code>shiny</code> tem se tornado cada vez mais potente nos últimos anos. Inicialmente, ele servia para montar dashboards relativamente simples, que permitiam ao usuário mais liberdade para explorar e montar suas próprias análises. Atualmente, tanto o pacote como as suas extensões melhoraram muito o seu potencial.</p>
<p>A <a href="https://shiny.rstudio.com/gallery/">galeria de apps do RStudio</a> já está um pouco desatualizada, mas dá um sabor do que é possível fazer com <code>shiny</code>.</p>
<p>Alguns exemplos:</p>
<ul>
<li><a href="https://vnijs.shinyapps.io/radiant/?SSUID=102af87a3a">Radiant</a> - Esta é, sem dúvida, uma das aplicações mais completas e impressionantes de Shiny, vale um post inteiro por si só.</li>
<li><a href="https://vac-lshtm.shinyapps.io/ncov_tracker/?_ga=2.208589338.945012269.1654951879-1352143415.1654951879#">Monitor de Covid</a></li>
<li><a href="https://voronoys.shinyapps.io/voronoys/?_ga=2.21641907.945012269.1654951879-1352143415.1654951879">Anaálise do Perfil de Eleitor no Brasil</a></li>
</ul>
</section>
<section id="quarto" class="level2">
<h2 class="anchored" data-anchor-id="quarto">Quarto</h2>
<p>Recentemente lançado, o <code>quarto</code> não é um pacote de <code>R</code> propriamente dito. O Quarto é como um <code>RMarkdown</code> turbinado, é um meio de publicar análises de dados com textos. De maneira geral o Quarto te permite:</p>
<ul>
<li>Escrever e rodar análises de dados em <code>R</code>, python e julia</li>
<li>Publicar relatórios, dashboards, livros, sites, etc.</li>
<li>Publicar artigos científicos utilizando equações, citações, etc.</li>
</ul>
<p>Para conhecer mais sobre o Quarto vale a pena checar o <a href="https://quarto.org/">site</a>. Como o Quarto foi desenvolvido pela Posit, que desenvolvou o <code>RStudio</code> a IDE mais popular de <code>R</code>, o Quarto e o <code>R</code> funcionam muito bem no <code>RStudio</code>.</p>
</section>
</section>
<section id="quero-baixar-tudo" class="level1">
<h1>Quero baixar tudo</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># O tidyverse inclui a instalação do dplyr, tidyr, readr, stringr e outros</span></span>
<span id="cb21-2">packs <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb21-3">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data.table"</span>,</span>
<span id="cb21-4">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"vroom"</span>,</span>
<span id="cb21-5">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tidyverse"</span>,</span>
<span id="cb21-6">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"readxl"</span>,</span>
<span id="cb21-7">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"haven"</span>,</span>
<span id="cb21-8">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jsonlite"</span>,</span>
<span id="cb21-9">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sf"</span>,</span>
<span id="cb21-10">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rio"</span>,</span>
<span id="cb21-11">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lubridate"</span>,</span>
<span id="cb21-12">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dbplyr"</span>,</span>
<span id="cb21-13">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"odbc"</span>,</span>
<span id="cb21-14">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DBI"</span>,</span>
<span id="cb21-15">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"knitr"</span>,</span>
<span id="cb21-16">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"shiny"</span>,</span>
<span id="cb21-17">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"quarto"</span></span>
<span id="cb21-18">  )</span>
<span id="cb21-19"></span>
<span id="cb21-20"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(packs, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">repos =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://vps.fmvz.usp.br/CRAN/"</span>)</span></code></pre></div>
</div>


</section>

 ]]></description>
  <category>data-science</category>
  <category>econometria</category>
  <category>tutorial-R</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/pacotes-essenciais-r/index.html</guid>
  <pubDate>Fri, 30 Jun 2023 03:00:00 GMT</pubDate>
  <media:content url="https:://www.restateinsight.com/static/installing_packages.png" medium="image" type="image/png" height="46" width="144"/>
</item>
<item>
  <title>Visualizando uma única variável</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/repost-mapa-desigualdade/index.html</link>
  <description><![CDATA[ 




<p>Há algum tempo atrás tive o seguinte problema: como visualizar várias observações de uma única variável numérica num gráfico? Tentei algumas soluções óbvias, mas nenhuma pareceu funcionar muito bem. Neste post junto algumas das minhas tentativas.</p>
<p>Os dados provêm do <a href="https://www.nossasaopaulo.org.br/2019/11/05/mapa-da-desigualdade-2019-e-lancado-em-sao-paulo/">Mapa da Desigualdade 2019</a>. Neste site pode-se baixar todos os dados além de baixar o relatório completo que apresenta informações socioeconômicas atualizadas para todos os distritos de São Paulo, compilando e sistematizando dados de diversas fontes públicas.</p>
<section id="pacotes-tema-e-dados." class="level1">
<h1>Pacotes, tema e dados.</h1>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(stringr)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(forcats)</span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(readxl)</span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(janitor)</span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(classInt)</span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggrepel)</span>
<span id="cb1-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(showtext)</span>
<span id="cb1-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(sf)</span></code></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Importa a fonte Roboto Light</span></span>
<span id="cb2-2">sysfonts<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">font_add_google</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Roboto"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Roboto Light"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">regular.wt =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>)</span>
<span id="cb2-3">showtext<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">showtext_auto</span>()</span>
<span id="cb2-4"></span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Um tema básico para os gráficos</span></span>
<span id="cb2-6">theme_vini <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb2-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Roboto Light"</span>),</span>
<span id="cb2-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Roboto Light"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span>),</span>
<span id="cb2-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid.minor =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb2-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span></span>
<span id="cb2-12">  )</span></code></pre></div>
</div>
<p>O código abaixo mostra como importei e limpei os dados.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Importa os dados do arquivo xlsx</span></span>
<span id="cb3-2">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> readxl<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_excel</span>(</span>
<span id="cb3-3">  here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"posts"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"general-posts"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"repost-mapa-desigualdade"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tabela.xlsx"</span>),</span>
<span id="cb3-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sheet =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb3-5">)</span>
<span id="cb3-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Arruma o nome das colunas</span></span>
<span id="cb3-7">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> janitor<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">clean_names</span>(df)</span>
<span id="cb3-8"></span>
<span id="cb3-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Alguns bairros para destacar nos graficos</span></span>
<span id="cb3-10">sel_bairro <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Grajaú"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Penha"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sapopemba"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bela Vista"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Moema"</span>)</span>
<span id="cb3-11"></span>
<span id="cb3-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Função para converter os numeros</span></span>
<span id="cb3-13">as_numeric_string <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x) {</span>
<span id="cb3-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stopifnot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.character</span>(x))</span>
<span id="cb3-15">  x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_remove_all</span>(x, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">."</span>)</span>
<span id="cb3-16">  x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace</span>(x, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">","</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"."</span>)</span>
<span id="cb3-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(x))</span>
<span id="cb3-18">  </span>
<span id="cb3-19">}</span>
<span id="cb3-20"></span>
<span id="cb3-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Função para abreviar o nome dos distritos</span></span>
<span id="cb3-22">pat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vila"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Jardim"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cidade"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Santo"</span>)</span>
<span id="cb3-23">pat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(pat, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">collapse =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"|"</span>)</span>
<span id="cb3-24"></span>
<span id="cb3-25">str_shorten <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x) {</span>
<span id="cb3-26">  </span>
<span id="cb3-27">  vl <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb3-28">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vila"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vl."</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Jardim"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Jd."</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cidade"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cd."</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Santo"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"St."</span>,</span>
<span id="cb3-29">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Santa"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"St."</span></span>
<span id="cb3-30">    )</span>
<span id="cb3-31">  </span>
<span id="cb3-32">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unname</span>(vl[x]))</span>
<span id="cb3-33"></span>
<span id="cb3-34">}</span>
<span id="cb3-35"></span>
<span id="cb3-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Limpa os dados</span></span>
<span id="cb3-37">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-38">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Renomeia a coluna de idade_media_ao_morrer</span></span>
<span id="cb3-39">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rename</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">expec_vida =</span> idade_media_ao_morrer) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-40">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Seleciona apenas as colunas de interesse</span></span>
<span id="cb3-41">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(id_regiao, distrito, expec_vida, populacao_total) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-42">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb3-43">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Encurta o nome dos distritos</span></span>
<span id="cb3-44">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label_distrito =</span> stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(distrito, pat, str_shorten),</span>
<span id="cb3-45">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Converte as colunas numéricas</span></span>
<span id="cb3-46">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">expec_vida =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_numeric_string</span>(expec_vida),</span>
<span id="cb3-47">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">populacao_total =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_numeric_string</span>(populacao_total),</span>
<span id="cb3-48">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Variável dummy para indicar os bairros destacados</span></span>
<span id="cb3-49">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">highlight =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(distrito <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> sel_bairro, 1L, 0L))</span>
<span id="cb3-50">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-51">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">na.omit</span>()</span>
<span id="cb3-52"></span>
<span id="cb3-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Tabela auxiliar somente com os valores médios do municíoio</span></span>
<span id="cb3-54">df_media <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(df, distrito <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Município SP"</span>)</span>
<span id="cb3-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Tabela auxiliar somente com os municipios destacados</span></span>
<span id="cb3-56">df_aux_label <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(df, highlight <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb3-57"></span>
<span id="cb3-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Remove a média da tabela</span></span>
<span id="cb3-59">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(df, distrito <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Município SP"</span>)</span></code></pre></div>
</details>
</div>
</section>
<section id="expectativa-de-vida-por-distrito-de-são-paulo" class="level1">
<h1>Expectativa de vida por distrito de São Paulo</h1>
<p>Há mais de 90 distritos em São Paulo e temos estimativas da expectativa de vida média em cada um deles. O expec_vida mais alto foi de 80,57 anos, registrado no distrito de Moema, cifra próxima a de países como Dinamarca e Liechtenstein. Como referência, a expectativa de vida média em São Paulo é de 68,7.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">

<table class="table table-hover table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>Distritos com expectativa de vida mais elevada</caption>
 <thead>
  <tr>
   <th style="text-align:center;"> Distrito </th>
   <th style="text-align:center;"> Expectativa de Vida </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:center;"> Jardim Paulista </td>
   <td style="text-align:center;"> 80.0 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Moema </td>
   <td style="text-align:center;"> 79.8 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Itaim Bibi </td>
   <td style="text-align:center;"> 79.5 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Alto de Pinheiros </td>
   <td style="text-align:center;"> 79.4 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Pinheiros </td>
   <td style="text-align:center;"> 78.8 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Vila Mariana </td>
   <td style="text-align:center;"> 78.3 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Santo Amaro </td>
   <td style="text-align:center;"> 78.2 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Consolação </td>
   <td style="text-align:center;"> 78.1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Perdizes </td>
   <td style="text-align:center;"> 77.9 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Campo Belo </td>
   <td style="text-align:center;"> 77.9 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Do outro lado temos expec_vidaes significativamente mais baixos, registrados em alguns dos distritos de menor renda de São Paulo como Cidade Tiradentes e Marsilac. A diferença na expectativa de vida entre os distritos chega a mais de 20 anos.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">

<table class="table table-hover table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>Distritos com expectativa de vida mais baixa</caption>
 <thead>
  <tr>
   <th style="text-align:center;"> Distrito </th>
   <th style="text-align:center;"> Expectativa de Vida </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:center;"> Iguatemi </td>
   <td style="text-align:center;"> 59.3 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Cidade Tiradentes </td>
   <td style="text-align:center;"> 59.4 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Jardim Ângela </td>
   <td style="text-align:center;"> 59.8 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> São Rafael </td>
   <td style="text-align:center;"> 59.8 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Grajaú </td>
   <td style="text-align:center;"> 60.4 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Guaianases </td>
   <td style="text-align:center;"> 61.2 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Lajeado </td>
   <td style="text-align:center;"> 61.5 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Anhanguera </td>
   <td style="text-align:center;"> 61.5 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Marsilac </td>
   <td style="text-align:center;"> 61.6 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Brás </td>
   <td style="text-align:center;"> 61.7 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>O objetivo aqui é de enxergar mais claramente estas diferenças. Como é a expectativa de vida nos diferentes distritos de São Paulo?</p>
<section id="histograma" class="level2">
<h2 class="anchored" data-anchor-id="histograma">Histograma</h2>
<p>Uma solução bastante clássica seria de fazer um histograma. Neste tipo de gráfico a dispersão fica clara, mas pode ser difícil de dar destaque para distritos específicos. O histograma conta a frequência de observações dentro de janelas de tamanho fixo. A princípio, a única dificuldade em usar o histograma está em definir a amplitude de cada um destes intervalos, mas, na prática, este problema não costuma ser muito complexo.</p>
<p>Ainda que o gráfico seja comumente usado, ele não é tão popular, sendo raramente visto em publicações de jornal, por exemplo.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> expec_vida)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_histogram</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bins =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#08519c"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(</span>
<span id="cb4-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df_aux_label,</span>
<span id="cb4-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> expec_vida,</span>
<span id="cb4-7">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">17</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">19</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>),</span>
<span id="cb4-8">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_wrap</span>(label_distrito, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)),</span>
<span id="cb4-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray25"</span>,</span>
<span id="cb4-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Roboto Light"</span>,</span>
<span id="cb4-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span></span>
<span id="cb4-12">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_segment</span>(</span>
<span id="cb4-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df_aux_label,</span>
<span id="cb4-15">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> expec_vida,</span>
<span id="cb4-16">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xend =</span> expec_vida,</span>
<span id="cb4-17">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,</span>
<span id="cb4-18">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yend =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">17</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">19</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>),</span>
<span id="cb4-19">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray70"</span></span>
<span id="cb4-20">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">limits =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>expec_vida) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>expec_vida) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb4-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expectativa de Vida"</span>,</span>
<span id="cb4-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Anos de idade"</span>,</span>
<span id="cb4-26">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb4-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fonte: SMS (Secretaria Municipal de Saúde)"</span>,</span>
<span id="cb4-28">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Idade média ao morrer em 2022."</span></span>
<span id="cb4-29">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-30">  theme_vini <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-31">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>())</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-mapa-desigualdade/index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="gráfico-de-colunas" class="level2">
<h2 class="anchored" data-anchor-id="gráfico-de-colunas">Gráfico de colunas</h2>
<p>Um simples gráfico de colunas também poderia ser uma alternativa. Neste caso, como há muitas observações (distritos) diferentes, o gráfico acaba sobrecarregado e confuso.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">ordered_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb5-3">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label_distrito =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(label_distrito),</span>
<span id="cb5-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label_distrito =</span> forcats<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fct_reorder</span>(label_distrito, expec_vida)</span>
<span id="cb5-5">  )</span>
<span id="cb5-6"></span>
<span id="cb5-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(ordered_df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> label_distrito, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> expec_vida)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#08519c"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">expand =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb5-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expectativa de Vida"</span>,</span>
<span id="cb5-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Anos de idade"</span>,</span>
<span id="cb5-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb5-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fonte: SMS (Secretaria Municipal de Saúde)"</span>,</span>
<span id="cb5-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Idade média ao morrer em 2022."</span></span>
<span id="cb5-17">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-18">  theme_vini <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb5-20">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>),</span>
<span id="cb5-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">angle =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">90</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb5-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid.major.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>()</span>
<span id="cb5-23">    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-mapa-desigualdade/index_files/figure-html/unnamed-chunk-8-1.png" style="width:100.0%" height="805" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Outra saída seria dividir os dados em grupos menores (e.g.&nbsp;alta, média-alta, média-baixa, baixa) e usar a função <code>facet_wrap</code>. O lado negativo disto, além de tornar o código mais complexo, é de acrescentar divisões nos dados que eventualmente são muito artificiais.</p>
<p>Aqui eu faço um divisão por quintil e crio uma denominação um tanto arbitrária para permitir a leitura dos dados.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">xl <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Baixo"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Médio-Baixo"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Médio"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Médio-Alto"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Alto"</span>)</span>
<span id="cb6-2"></span>
<span id="cb6-3">quintile_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> ordered_df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb6-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb6-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">life_group =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ntile</span>(expec_vida, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>),</span>
<span id="cb6-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">life_group =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(life_group, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> xl)</span>
<span id="cb6-7">    )</span>
<span id="cb6-8"></span>
<span id="cb6-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(quintile_df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> label_distrito, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> expec_vida)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#08519c"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vars</span>(life_group), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">scales =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"free_y"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expectativa de Vida"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-14">  theme_vini <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb6-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>),</span>
<span id="cb6-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">strip.text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb6-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid.major.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>()</span>
<span id="cb6-19">    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-mapa-desigualdade/index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="lolipop" class="level2">
<h2 class="anchored" data-anchor-id="lolipop">Lolipop</h2>
<p>Este tipo de gráfico vem ganhando espaço mesmo em veículos de mídia populares por ser bastante simples. Ele é mais comumente usado para mostrar a evolução de uma variável em dois momentos do tempo, mas também pode-se usá-lo analogamente a um gráfico de colunas.</p>
<p>Infelizmente, neste exemplo, ele vai sofrer do mesmo problema que o gráfico de colunas. A título de exemplo faço um gráfico deste estilo apenas para os distritos com as maiores e menores expectativas de vida.</p>
<div class="cell" data-layout-align="center">

</div>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Ordena a base de dados pela expectativa de vida</span></span>
<span id="cb7-2">ordered_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(ordered_df, expec_vida)</span>
<span id="cb7-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cria uma tabela com as primeiras 5 e últimas 5 linhas</span></span>
<span id="cb7-4">top_df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbind</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(ordered_df, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tail</span>(ordered_df, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>))</span>
<span id="cb7-5"></span>
<span id="cb7-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(top_df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> label_distrito, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> expec_vida)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_segment</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xend =</span> label_distrito, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yend =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">55</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#08519c"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">21</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb7-11">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Anos de vida"</span>,</span>
<span id="cb7-12">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>,</span>
<span id="cb7-13">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expectativa de vida"</span>,</span>
<span id="cb7-14">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Idade média ao morrer em 2022. Dados apenas dos distritos</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">com maiores e menores expectativas de vida."</span>,</span>
<span id="cb7-15">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fonte: SMS (Secretaria Municipal de Saúde)"</span></span>
<span id="cb7-16">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-17">  theme_vini <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-18">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid.major.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>())</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-mapa-desigualdade/index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="gráfico-de-dispersão" class="level2">
<h2 class="anchored" data-anchor-id="gráfico-de-dispersão">Gráfico de dispersão</h2>
<p>Gráficos de dispersão apresentam a relação entre duas variáveis. Neste caso, podemos fazer alguns truques para inventar uma variável falsa que serve somente para que o <code>R</code> faça o gráfico.</p>
<p>Uma alternativa seria impor um expec_vida constante e arbitrário para uma das variáveis. Neste caso escolho <code>x = 1</code> e escondo o eixo. No gráfico abaixo, cada distrito é um ponto sobre uma mesma linha. Para amenizar a sobreposição de observações uso <code>alpha = 0.5</code> que acrescenta um pouco de transparência nas observações.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">df_aux <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb8-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.025</span>,</span>
<span id="cb8-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> df_media<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>expec_vida,</span>
<span id="cb8-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Média = "</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(y, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb8-5">)</span>
<span id="cb8-6"></span>
<span id="cb8-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> expec_vida)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_vline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray60"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(</span>
<span id="cb8-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> highlight, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> highlight, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> populacao_total),</span>
<span id="cb8-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">21</span>,</span>
<span id="cb8-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#08519c"</span>,</span>
<span id="cb8-13">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(</span>
<span id="cb8-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df_aux_label,</span>
<span id="cb8-16">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.95</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.95</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.05</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.05</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.05</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> expec_vida, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> label_distrito),</span>
<span id="cb8-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Roboto Light"</span>,</span>
<span id="cb8-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span></span>
<span id="cb8-19">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_segment</span>(</span>
<span id="cb8-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df_aux_label,</span>
<span id="cb8-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray25"</span>,</span>
<span id="cb8-23">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(</span>
<span id="cb8-24">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xend =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.955</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.955</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.045</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.045</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.045</span>),</span>
<span id="cb8-25">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> expec_vida, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yend =</span> expec_vida</span>
<span id="cb8-26">    )</span>
<span id="cb8-27">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-28">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_segment</span>(</span>
<span id="cb8-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xend =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.02</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> df_media<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>expec_vida, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yend =</span> y),</span>
<span id="cb8-30">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xend =</span> xend, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yend =</span> yend),</span>
<span id="cb8-31">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray25"</span>,</span>
<span id="cb8-32">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-33">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(</span>
<span id="cb8-34">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df_aux,</span>
<span id="cb8-35">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> label),</span>
<span id="cb8-36">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Roboto Light"</span>,</span>
<span id="cb8-37">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb8-38">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-39">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-40">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">limits =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.94</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.06</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-41">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">limits =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>expec_vida) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>expec_vida) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-42">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_alpha_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.45</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-43">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_size_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">range =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">7.5</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb8-44">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_colour_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#08519c"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-45">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb8-46">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expectativa de Vida"</span>,</span>
<span id="cb8-47">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb8-48">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Anos de idade"</span>,</span>
<span id="cb8-49">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fonte: SMS (Secretaria Municipal de Saúde)"</span>,</span>
<span id="cb8-50">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Idade média ao morrer em 2022. Cada ponto representa um distrito de São Paulo."</span></span>
<span id="cb8-51">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-52">  theme_vini <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-53">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb8-54">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb8-55">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb8-56">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid.major.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>()</span>
<span id="cb8-57">  )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-mapa-desigualdade/index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Uma solucão alternativa seria criar uma variável aleatória qualquer para servir como a variável “falsa”. Estranhamente, cria-se uma sensação melhor de dispersão e não há mais o problema de sobreposição. Contudo, o gráfico pode ser bastante confuso, pois dá a entender que estamos vendo a relação entre duas variáveis distintas, quando uma delas, na verdade, não representa coisa alguma.</p>
<p>Ainda assim, ideias similares foram implementadas pelo portal Nexo <a href="https://www.nexojornal.com.br/grafico/2019/11/12/A-desigualdade-na-cidade-de-S%C3%A3o-Paulo-em-20-indicadores">nesta postagem</a>.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cria uma variável aleatória qualquer seguindo uma Gaussiana</span></span>
<span id="cb9-2">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(.)))</span>
<span id="cb9-3"></span>
<span id="cb9-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para destacar o expec_vida médio</span></span>
<span id="cb9-5">df_aux <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb9-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.25</span>,</span>
<span id="cb9-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> df_media<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>expec_vida <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.75</span>,</span>
<span id="cb9-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Média ="</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.75</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb9-9">)</span>
<span id="cb9-10"></span>
<span id="cb9-11">df_aux_label <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label_distrito =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(highlight <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> 1L, label_distrito, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>))</span>
<span id="cb9-13"></span>
<span id="cb9-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> expec_vida)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_jitter</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> highlight, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> populacao_total),</span>
<span id="cb9-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">21</span>,</span>
<span id="cb9-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#08519c"</span></span>
<span id="cb9-18">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-19">  ggrepel<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text_repel</span>(</span>
<span id="cb9-20">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df_aux_label,</span>
<span id="cb9-21">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> label_distrito),</span>
<span id="cb9-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">force =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,</span>
<span id="cb9-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Roboto Light"</span>,</span>
<span id="cb9-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb9-25">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-26">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(</span>
<span id="cb9-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df_aux,</span>
<span id="cb9-28">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> label),</span>
<span id="cb9-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.15</span></span>
<span id="cb9-30">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-31">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(expec_vida)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray70"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-32">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-33">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_alpha_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.65</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-34">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">limits =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>expec_vida) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>expec_vida) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-35">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">limits =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-36">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb9-37">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expectativa de Vida (idade média ao morrer)"</span>,</span>
<span id="cb9-38">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb9-39">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Anos de idade"</span>,</span>
<span id="cb9-40">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fonte: SMS (Secretaria Municipal de Saúde)"</span></span>
<span id="cb9-41">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-42">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guides</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-43">  theme_vini <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-44">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb9-45">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb9-46">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid.major.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>()</span>
<span id="cb9-47">  )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-mapa-desigualdade/index_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mapa" class="level2">
<h2 class="anchored" data-anchor-id="mapa">Mapa</h2>
<p>Deixei a visualização mais óbvia para o final. Como a variável está distribuída espacialmente, pode-se fazer um simples mapa de São Paulo separado por distritos.</p>
<p>Aqui, eu uso o shapefile de distritos da Pesquisa Origem e Destino. Apesar de não haver um identificador comum entre as bases, foi relativamente simples fazer o join compatibilizando o nome dos distritos.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Importa o shapefile</span></span>
<span id="cb10-2">distritos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">st_read</span>(</span>
<span id="cb10-3">  here<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"posts"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"general-posts"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"repost-mapa-desigualdade"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"districts.gpkg"</span>),</span>
<span id="cb10-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">quiet =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb10-5">  )</span>
<span id="cb10-6"></span>
<span id="cb10-7">distritos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> distritos <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-8">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Filtra apenas distritos de SP (capital)</span></span>
<span id="cb10-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(code_district <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">96</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-10">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Renomeia a coluna para facilitar o join</span></span>
<span id="cb10-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rename</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">distrito =</span> name_district)</span>
<span id="cb10-12"></span>
<span id="cb10-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Verifica se ha distritos com nome diferente (Mooca)</span></span>
<span id="cb10-14">anti <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">anti_join</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(df, distrito), distritos, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"distrito"</span>)</span>
<span id="cb10-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Altera a grafia para garantir o join</span></span>
<span id="cb10-16">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb10-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">distrito =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(distrito <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Moóca"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Mooca"</span>, distrito)</span>
<span id="cb10-19">  )</span>
<span id="cb10-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Junta os dados no sf</span></span>
<span id="cb10-21">distritos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(distritos, df, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"distrito"</span>)</span></code></pre></div>
</details>
</div>
<p>O gráfico abaixo mostra a expectativa de vida em cada distrito na cidade.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(distritos) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_sf</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> expec_vida), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_viridis_c</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expectativa</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">de Vida"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggtitle</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expectativa de Vida por Distrito"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_void</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb11-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb11-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>)</span>
<span id="cb11-9">  )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-mapa-desigualdade/index_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Outra maneira de apresentar este dado é agrupando-o de alguma forma. Eu sou particularmente parcial ao algoritmo de Jenks.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Encontra os intervalos de cada grupo</span></span>
<span id="cb12-2">breaks <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> classInt<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">classIntervals</span>(distritos<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>expec_vida, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jenks"</span>)</span>
<span id="cb12-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Classifica os valores em grupos</span></span>
<span id="cb12-4">distritos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> distritos <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb12-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">jenks_group =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cut</span>(expec_vida, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> breaks<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>brks, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">include.lowest =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb12-7">  )</span>
<span id="cb12-8"></span>
<span id="cb12-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(distritos, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> jenks_group)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_sf</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray80"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_brewer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">palette =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BrBG"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expectativa</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">de Vida"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggtitle</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expectativa de Vida por Distrito"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_void</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb12-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb12-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>)</span>
<span id="cb12-17">  )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-mapa-desigualdade/index_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>


</section>
</section>

 ]]></description>
  <category>data-visualization</category>
  <category>tutorial-R</category>
  <category>repost</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/repost-mapa-desigualdade/index.html</guid>
  <pubDate>Wed, 28 Jun 2023 03:00:00 GMT</pubDate>
  <media:content url="https:://www.restateinsight.com/static/visualizando-unica-variavel.png" medium="image" type="image/png" height="89" width="144"/>
</item>
<item>
  <title>Preços de Imóveis e Demografia</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/precos-imoveis-demografia/index.html</link>
  <description><![CDATA[ 




<p>Já vi em alguns lugares uma suposta ligação entre fatores demográficos e tendências de longo prazo no mercado imobiliário. Intuitivamente, alguns dos principais motivadores para comprar ou vender um imóvel estão ligados a fatores demográficos: nascimentos, casamentos, divórcios ou óbitos.</p>
<p>Este tipo de análise omite fatores importantes como renda, condições de financiamento e o contexto geral da economia. Ainda assim, fiquei curioso para ver se havia algum padrão entre tendências demográficas mais simples e o comportamento dos preços.</p>
<section id="dados-e-setup" class="level1">
<h1>Dados e setup</h1>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyr)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(stringr)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggrepel)</span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(here)</span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(WDI)</span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(showtext)</span></code></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">font_add</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Helvetica"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Helvetica.ttc"</span>)</span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">showtext_auto</span>()</span>
<span id="cb2-3"></span>
<span id="cb2-4">colors <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> MetBrewer<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">met.brewer</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hokusai1"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>)[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>)]</span>
<span id="cb2-5"></span>
<span id="cb2-6">theme_vini <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb2-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid.minor =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb2-9">    </span>
<span id="cb2-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>),</span>
<span id="cb2-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>),</span>
<span id="cb2-12">    </span>
<span id="cb2-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"top"</span>,</span>
<span id="cb2-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.box.margin =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">margin</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),</span>
<span id="cb2-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.margin =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">margin</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),</span>
<span id="cb2-16">    </span>
<span id="cb2-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Helvetica"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray15"</span>),</span>
<span id="cb2-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span>),</span>
<span id="cb2-19">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.subtitle =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray30"</span>),</span>
<span id="cb2-20">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.caption  =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray30"</span>),</span>
<span id="cb2-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">angle =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">90</span>)</span>
<span id="cb2-22">  )</span></code></pre></div>
</details>
</div>
<p>Para montar um painel de dados usei preços de imóveis do Bank for International Settelments (BIS), que reúne índices de preços imobiliários de diversos países do mundo. Os dados demográficos, de crescimento econômico, e share de população adulta, vem do Banco Mundial. Como os dados demográficos dependem de censos populacionais que demoram a ser divulgados, tive que restringir a amostra até 2020 para garantir que os dados fossem comparáveis no maior número possível de países.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Import house price indexes from BIS #</span></span>
<span id="cb3-2">bis <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> readr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"posts/general-posts/precos-imoveis-demografia/rppi_bis_data.csv"</span>))</span>
<span id="cb3-3">bis <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> bis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1960</span>, unit <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Index, 2010 = 100"</span>)</span>
<span id="cb3-5"></span>
<span id="cb3-6">bis_real <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> bis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(nominal <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Real"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">country =</span> reference_area, value) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, country) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">index_house =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> T))</span>
<span id="cb3-11"></span>
<span id="cb3-12">bis_nominal <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> bis <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(nominal <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Nominal"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">country =</span> reference_area, value) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, country) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">index_house =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> T))</span>
<span id="cb3-17"></span>
<span id="cb3-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Import demographic data from WBD #</span></span>
<span id="cb3-19">wdi_names <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_tibble</span>(WDI_data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>country)</span>
<span id="cb3-20"></span>
<span id="cb3-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#search &lt;- WDIsearch("population")</span></span>
<span id="cb3-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Total population</span></span>
<span id="cb3-23">pop <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">WDI</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">indicator =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SP.POP.TOTL"</span>)</span>
<span id="cb3-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Population growth</span></span>
<span id="cb3-25">pop_growth <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">WDI</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">indicator =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SP.POP.GROW"</span>)</span>
<span id="cb3-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adult population</span></span>
<span id="cb3-27">codes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb3-28">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SP.POP.2024.MA"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SP.POP.2529.MA"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SP.POP.3034.MA"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SP.POP.3539.MA"</span>,</span>
<span id="cb3-29">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SP.POP.4044.FE"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SP.POP.2024.FE"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SP.POP.2529.FE"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SP.POP.3034.FE"</span>,</span>
<span id="cb3-30">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SP.POP.3539.FE"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SP.POP.4044.FE"</span>)</span>
<span id="cb3-31"></span>
<span id="cb3-32">adult_pop <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">WDI</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">indicator =</span> codes)</span>
<span id="cb3-33"></span>
<span id="cb3-34">tbl_pop_adult <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> adult_pop <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-35">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>iso2c, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>iso3c) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-36">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cols =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(year, country)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-37">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, country) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-38">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pop_adult =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> T)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-39">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-40">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb3-41">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">country =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(country, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hong Kong SAR, China"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hong Kong SAR"</span>),</span>
<span id="cb3-42">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">country =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(country, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Korea, Rep."</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Korea"</span>),</span>
<span id="cb3-43">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">country =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(country, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Russian Federation"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Russia"</span>))</span>
<span id="cb3-44"></span>
<span id="cb3-45">tbl_pop <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> pop <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-46">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb3-47">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">country =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(country, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hong Kong SAR, China"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hong Kong SAR"</span>),</span>
<span id="cb3-48">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">country =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(country, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Korea, Rep."</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Korea"</span>),</span>
<span id="cb3-49">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">country =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(country, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Russian Federation"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Russia"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-50">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(year, country, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pop =</span> SP.POP.TOTL) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-51">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(year) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-52">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(tbl_pop_adult)</span>
<span id="cb3-53"></span>
<span id="cb3-54">base_pop <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tbl_pop <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-55">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2010</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-56">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(country, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">base_pop =</span> pop, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">base_pop_adult =</span> pop_adult)</span>
<span id="cb3-57"></span>
<span id="cb3-58">tbl_pop <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tbl_pop <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-59">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(base_pop) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-60">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb3-61">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">index_pop =</span> pop <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> base_pop <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>,</span>
<span id="cb3-62">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">index_pop_adult =</span> pop_adult <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> base_pop_adult <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span>
<span id="cb3-63">    )</span>
<span id="cb3-64"></span>
<span id="cb3-65"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Join information across tables</span></span>
<span id="cb3-66"></span>
<span id="cb3-67"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Real property prices</span></span>
<span id="cb3-68">tbl <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> bis_real <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-69">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1970</span>, year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-70">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(tbl_pop) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-71">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(year, country, index_house, index_pop, index_pop_adult) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-72">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cols =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(year, country), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index"</span>)</span>
<span id="cb3-73"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Nominal property prices</span></span>
<span id="cb3-74">tbl_nominal <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> bis_nominal <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-75">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1970</span>, year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-76">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(tbl_pop) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-77">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(year, country, index_house, index_pop, index_pop_adult) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-78">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cols =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(year, country), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index"</span>)</span>
<span id="cb3-79"></span>
<span id="cb3-80"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Convert real prices to wide and compare evolution</span></span>
<span id="cb3-81">tbl_wide <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tbl <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-82">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(</span>
<span id="cb3-83">    year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2010</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>),</span>
<span id="cb3-84">    index <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index_house"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index_pop"</span>)</span>
<span id="cb3-85">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-86">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(country, index) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-87">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">diff =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">diff</span>(value)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-88">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-89">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-90">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_wider</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id_cols =</span> country, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_from =</span> index, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values_from =</span> diff) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-91">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(wdi_names, country, iso3c)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-92">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">highlight =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(country <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"World"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)))</span>
<span id="cb3-93"></span>
<span id="cb3-94">tbl_wide_lr <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> tbl_nominal <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-95">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(</span>
<span id="cb3-96">    year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1990</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>),</span>
<span id="cb3-97">    index <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index_house"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index_pop"</span>)</span>
<span id="cb3-98">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-99">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(country, index) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-100">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">diff =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">diff</span>(value)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-101">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-102">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(diff)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-103">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_wider</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id_cols =</span> country, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_from =</span> index, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values_from =</span> diff) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-104">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(wdi_names, country, iso3c)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-105">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">highlight =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">if_else</span>(country <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"World"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)))</span>
<span id="cb3-106"></span>
<span id="cb3-107">sel <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Australia"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"United States"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Japan"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Germany"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Austria"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"France"</span>)</span>
<span id="cb3-108">sel_latam <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chile"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Brazil"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Peru"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Mexico"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Colombia"</span>)</span></code></pre></div>
</details>
</div>
</section>
<section id="análise" class="level1">
<h1>Análise</h1>
<p>Nos gráficos abaixo eu destaco a variação real do preços dos imóveis (isto é, descontando a inflação geral) e variação no crescimento da população. Considero tanto o nível geral da população como da população adulta (aqui definida como a população de 20 a 44 anos, que formam o grosso da demanda por nova habitação).</p>
<p>O gráfico abaixo mostra como estas variáveis evoluíram nos EUA desde 1970. Durante os anos 1970 até o começo dos anos 2000 parece haver uma ligação próxima entre o mercado imobiliário e o crescimento da população. O descolamento começa ali por volta de 2002 e culmina na Crise Imobiliária e na Crise dos anos 2008-09. Após a Crise, os preços caem até o início de 2010; de lá pra cá os preços voltaram a subir, impulsionados pela baixíssima taxa de juros da economia norte americana neste período.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">p1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> </span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(</span>
<span id="cb4-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(tbl, country <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"United States"</span>),</span>
<span id="cb4-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> index)</span>
<span id="cb4-5">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(</span>
<span id="cb4-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> colors,</span>
<span id="cb4-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb4-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Real House Prices"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Population"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adult Pop."</span>)</span>
<span id="cb4-11">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb4-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Over the long-run, house price seemed to follow pop. growth"</span>,</span>
<span id="cb4-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Index (2010 = 100)"</span>,</span>
<span id="cb4-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>,</span>
<span id="cb4-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Source: Real House Price Indexes (BIS), Population (UN).</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Adult Pop. defined as population from 20-44 years."</span></span>
<span id="cb4-17">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-18">  theme_vini</span>
<span id="cb4-19"></span>
<span id="cb4-20">p1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Prices and demographic trends in the USA."</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/precos-imoveis-demografia/index_files/figure-html/unnamed-chunk-5-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Olhando somente para este gráfico a história parece convincente, mas acho que por trás da recente valorização de imóveis está a escassez de novos imóveis no mercado. A imagem abaixo vem de um <a href="https://www.jchs.harvard.edu/blog/were-finally-building-more-small-homes-but-construction-remains-at-historically-low-levels">estudo do Joint Center for Housing Stuides (JCHS)</a> da Universidade de Harvard. Fica evidente como a construção de novos imóveis desacelerou muito na última década. Em estudos com horizontes mais longos, que voltam até a década de 1930 ou 1940, vê-se que a construção está em um de seus pontos mais baixos na história.</p>
<p>A escassez de oferta junto com uma tendência de concentração populacional em grandes metrópoles (com péssimas leis de zoneamento, como São Fransisco, por exemplo) - para mim - é uma história muito mais convincente do que imaginar que está havendo uma bolha imobiliária.</p>
<p><img src="https:://www.restateinsight.com/posts/general-posts/precos-imoveis-demografia/jchs_house_starts.png" class="img-fluid"></p>
<section id="preços-e-população-andam-juntos" class="level3">
<h3 class="anchored" data-anchor-id="preços-e-população-andam-juntos">Preços e população andam juntos</h3>
<p>No agregado dos dados encontrei mais alguns países em que os preços parecem seguir as tendências demográficas. É o caso, por exemplo, de Cingapura, Japão e Itália. Vale notar que estes são países, atualmente, têm baixo crescimento populacional e vivem o envelhecimento de suas populações.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">sel_conforme <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Singapore"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Belgium"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"France"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Japan"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Korea"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Italy"</span>)</span>
<span id="cb5-2">sel_acima <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Switzerland"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Hong Kong SAR"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chile"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"India"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Malaysia"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Estonia"</span>)</span>
<span id="cb5-3"></span>
<span id="cb5-4">p2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> </span>
<span id="cb5-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(</span>
<span id="cb5-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(tbl, country <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> sel_conforme, year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span>),</span>
<span id="cb5-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> index)</span>
<span id="cb5-8">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray60"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>country) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(</span>
<span id="cb5-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> colors,</span>
<span id="cb5-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb5-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Real House Prices"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Population"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adult Pop."</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">140</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb5-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"House prices follow population growth"</span>,</span>
<span id="cb5-19">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>,</span>
<span id="cb5-20">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Index (2010 = 100)"</span>,</span>
<span id="cb5-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Source: Real House Price Indexes (BIS), Population (UN).</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Adult Pop. defined as population from 20-44 years."</span></span>
<span id="cb5-22">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-23">  theme_vini</span>
<span id="cb5-24"></span>
<span id="cb5-25">p2</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/precos-imoveis-demografia/index_files/figure-html/unnamed-chunk-6-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="preços-e-população-divergem" class="level3">
<h3 class="anchored" data-anchor-id="preços-e-população-divergem">Preços e população divergem</h3>
<p>Mas há tabmém vários outros em que população e preços divergem. Vale lembrar que estamos comparando índices de preços imobiliárias reais, isto é, já descontando o efeito da inflação: no Chile, por exemplo, o preço médio dos imóveis cresceu cerca de 100% acima do nível da inflação (dobrou nos últimos dez anos). Chile e Hong Kong, em particular, são dois países onde o aumento do preço dos imóveis causou bastante revolta popular em anos recentes<sup>1</sup>.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">p3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> </span>
<span id="cb6-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(</span>
<span id="cb6-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(tbl, country <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> sel_acima, year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span>),</span>
<span id="cb6-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> index)</span>
<span id="cb6-5">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray60"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>country) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(</span>
<span id="cb6-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> colors,</span>
<span id="cb6-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb6-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Real House Prices"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Population"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adult Pop."</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"In some markets, hose prices have detached from pop. growth"</span>,</span>
<span id="cb6-15">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>,</span>
<span id="cb6-16">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Index (2010 = 100)"</span>,</span>
<span id="cb6-17">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Source: Real House Price Indexes (BIS), Population (UN).</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Adult Pop. defined as population from 20-44 years."</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-18">  theme_vini</span>
<span id="cb6-19"></span>
<span id="cb6-20">p3</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/precos-imoveis-demografia/index_files/figure-html/unnamed-chunk-7-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="américa-latina" class="level3">
<h3 class="anchored" data-anchor-id="américa-latina">América Latina</h3>
<p>Por curiosidade, resolvi olhar os países da América Latina.</p>
<p>No caso do Brasil, vemos que os preços entraram em queda seguindo a recessão de 2014 e, a despeito de uma recuperação recente, ainda estão em níveis mais baixos do que os observados em 2010. De maneira geral, os preços parecem ter ligação nenhuma com o crescimento da população. Vale lembrar que o mercado imobiliário no Brasil é fortemente subsididado e pouco alavancado de maneira geral.</p>
<p>Chile e Colômbia parecem exibir uma tendência similar de crescimento, mas a alta pós-2010 no Chile é assustadora. Em termos reais, os preços dos imóveis quase dobraram em dez anos.</p>
<p>Outro ponto interessante é que os mercado não parecem exibir muito sincronismo (no olho, não parecem séries cointegradas) ao contrário do que se observa em <a href="https://journals.sagepub.com/doi/full/10.1177/0042098014555629?casa_token=GZDm7jR8f0UAAAAA%3AbbnqbFMywKOF1U1Jug1oU2mrE1PASlgW0ZBGL405xMkI2_TAPA62V1iURTfD7uJBics4gMT9dDgI">mercados mais integrados como a Zona do Euro</a>.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">p4 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> </span>
<span id="cb7-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(</span>
<span id="cb7-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(tbl, country <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> sel_latam, year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span>),</span>
<span id="cb7-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> index)</span>
<span id="cb7-5">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray60"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>country) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(</span>
<span id="cb7-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> colors,</span>
<span id="cb7-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb7-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Real House Prices"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Population"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Adult Pop."</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"LATAM markets are not synched"</span>,</span>
<span id="cb7-15">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>,</span>
<span id="cb7-16">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Index (2010 = 100)"</span>,</span>
<span id="cb7-17">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Source: Real House Price Indexes (BIS), Population (UN).</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Adult Pop. defined as population from 20-44 years."</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-18">  theme_vini</span>
<span id="cb7-19"></span>
<span id="cb7-20">p4</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/precos-imoveis-demografia/index_files/figure-html/unnamed-chunk-8-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="todos-os-países" class="level2">
<h2 class="anchored" data-anchor-id="todos-os-países">Todos os países</h2>
<p>Esta análise é ainda bastante preliminar. Ainda que a demografia seja um motor para a demanda imobiliária, outros fatores como oferta de moradia e condições de crédito são importantes demais parecem serem omitidos.</p>
<p>O gráfico abaixo compara a população em 2010/2020 com os preços em 2010/2020. Os países ao lado direito do gráfico, são os países onde houve crescimento populacional. Os países na parte de cima do gráfico são os países onde houve crescimento real do preço dos imóveis. Na média da amostra, destacada como WLD, houve crescimento de ambos.</p>
<p>Países que estão muito para cima como Chile (CHL), Índia (IND) e Estônia (EDT) estão com imóveis muito “caros”. Já em países com França e Finlândia tanto a população como o nível de preço dos imóveis cresceram muito pouco. No caso da Grécia, tanto a população como o preço dos imóveis diminuiu nos últimos dez anos.</p>
<p>O gráfico não me surpreendeu muito, mas esperava que os EUA estivessem mais para cima no gráfico e que o Brasil estivesse ao menos do lado positivo do eixo-x. Isso me sugere que a impressão de que os imóveis no Brasil são ou estão caros tem muito mais a ver com a baixa renda da população.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">p5 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> </span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(</span>
<span id="cb8-3">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">na.omit</span>(tbl_wide),</span>
<span id="cb8-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> index_pop, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> index_house)</span>
<span id="cb8-5">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_vline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">slope =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">intercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> colors[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> highlight)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text_repel</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> iso3c, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> highlight)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">90</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>, colors[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guides</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb8-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Real House Prices x Population (2010/20)"</span>,</span>
<span id="cb8-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Population (2010/2020)"</span>,</span>
<span id="cb8-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RPPI (2010/2020)"</span>,</span>
<span id="cb8-19">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Source: Real House Price Indexes (BIS), Population (UN)."</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-20">  theme_vini</span>
<span id="cb8-21"></span>
<span id="cb8-22">p5</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/precos-imoveis-demografia/index_files/figure-html/unnamed-chunk-9-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Hong Kong: https://exame.com/economia/as-raizes-economicas-dos-protestos-de-hong-kong/↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>real-estate</category>
  <category>economia</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/precos-imoveis-demografia/index.html</guid>
  <pubDate>Tue, 20 Jun 2023 03:00:00 GMT</pubDate>
</item>
<item>
  <title>Séries de Tempo no R</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/arima-no-r/index.html</link>
  <description><![CDATA[ 




<section id="séries-de-tempo-no-r" class="level1">
<h1>Séries de tempo no R</h1>
<p>Neste post vou explorar um pouco das funções base do R para montar um modelo SARIMA. O <code>R</code> vem “pré-equipado” com um robusto conjunto de funções para lidar com séries de tempo. Inclusive, como se verá, existe uma class específica de objeto para trabalhar com séries de tempo.</p>
</section>
<section id="os-dados" class="level1">
<h1>Os dados</h1>
<p>Como exemplo, vamos usar a série <code>AirPassengers</code>, uma série bastante famosa usada no livro <em>Time Series Analysis</em> de Box &amp; Jenkins (1976). A série apresenta o volume mensal de passagens aéreas internacionais (em milhares) no período 1949-1960.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(AirPassengers, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#023047"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lwd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grid</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/arima-no-r/index_files/figure-html/unnamed-chunk-2-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Uma maneira comum de avaliar a performance preditiva de modelo é usando uma divisão train/test. Essencialmente, removemos uma parte das observações da nossa amostra para que possamos testar a taxa de acerto das previsões do nosso modelo.</p>
<p>Como estamos no contexto de séries de tempo, é natural remover um percetual das observações finais da série. No caso, uso a função <code>window</code> para remover os últimos dois anos da amostra.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log</span>(AirPassengers)</span>
<span id="cb2-2"></span>
<span id="cb2-3">train <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">window</span>(y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">end =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1958</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>))</span>
<span id="cb2-4">test  <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">window</span>(y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1959</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span></code></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/arima-no-r/index_files/figure-html/unnamed-chunk-4-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>A rigor, seria mais correto experimentar com várias janelas diferentes e talvez fosse interessante também remover um percentual maior de observações. Até onde sei, não é tão fácil implementar esse tipo de <em>cross-validation</em> apenas usando funções base do R, mas um maneira de fazer isso está exposta no livro <a href="https://otexts.com/fpp3/tscv.html">Forecasting: Principles and Practice</a>.</p>
<section id="modelagem-sarima" class="level2">
<h2 class="anchored" data-anchor-id="modelagem-sarima">Modelagem SARIMA</h2>
<p>Aqui a ideia é experimentar com alguns modelos simples. Em especial, o modelo que Box &amp; Jenkins sugerem para a série é de um SARIMA (0, 1, 1)(0, 1, 1)[12] da forma</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A(1%20-%20%5CDelta)(1%20-%20%5CDelta%5E%7B12%7D)y_%7Bt%7D%20=%20%5Cvarepsilon_%7Bt%7D%20+%20%5Ctheta_%7B1%7D%5Cvarepsilon_%7Bt_1%7D%20+%20%5CTheta_%7B1%7D%5Cvarepsilon_%7Bt-12%7D%0A"></p>
<p>A metodologia correta para a análise seria primeiro fazer testes de raiz unitária para avaliar a estacionaridade da série. Mas só de olhar para as funções de autocorrelação e autocorrelação parcial, fica claro que há algum componente sazonal e que a série não é estacionária.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/arima-no-r/index_files/figure-html/unnamed-chunk-5-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<section id="teste-de-raiz-unitária" class="level3">
<h3 class="anchored" data-anchor-id="teste-de-raiz-unitária">Teste de raiz unitária</h3>
<p>Apenas a título de exemplo, faço um teste Dickey-Fuller (ADF), bastante geral, com constante e tendência temporal linear. Para uma boa revisão metodológica de como aplicar testes de raiz unitária, em partiular o teste ADF, consulte o capítulo de séries não-estacionárias do livro <a href="https://www.wiley.com/en-br/Applied+Econometric+Time+Series,+4th+Edition-p-9781118808566">Applied Econometric Time Series do Enders</a></p>
<p>Aqui, a escolha ótima do lag é feita usando o critério BIC (também conhecido como Critério de Schwarz). Não existe uma função que aplica o teste ADF no pacote base o <code>R</code>. A implementação é feita na função <code>ur.df</code> do pacote <code>urca</code>.</p>
<p>A estatísitica de teste mais relevante é a <code>tau3</code> e vê-se, surpreendentemente, que se rejeita a hipótese nula de raiz unitária. As estatísticas <code>phi2</code> e <code>phi3</code> são testes-F da significânica conjunta dos termos de constante e de tendência temporal. As estatísticas de teste são convencionais e seguem a notação do livro do Enders citado acima e também do clássico livro do <a href="http://www.ru.ac.bd/stat/wp-content/uploads/sites/25/2019/03/504_02_Hamilton_Time-Series-Analysis.pdf">Hamilton</a>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(urca)</span>
<span id="cb3-2">adf_test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ur.df</span>(y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"trend"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">selectlags =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BIC"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lags =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13</span>)</span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(adf_test)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
############################################### 
# Augmented Dickey-Fuller Test Unit Root Test # 
############################################### 

Test regression trend 


Call:
lm(formula = z.diff ~ z.lag.1 + 1 + tt + z.diff.lag)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.090139 -0.022382 -0.002417  0.021008  0.110003 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   0.8968049  0.3999031   2.243 0.026859 *  
z.lag.1      -0.1809364  0.0842729  -2.147 0.033909 *  
tt            0.0016886  0.0008609   1.961 0.052263 .  
z.diff.lag1  -0.2588927  0.1134142  -2.283 0.024301 *  
z.diff.lag2  -0.0986455  0.1070332  -0.922 0.358665    
z.diff.lag3  -0.0379799  0.1045583  -0.363 0.717097    
z.diff.lag4  -0.1392651  0.0981271  -1.419 0.158560    
z.diff.lag5  -0.0283998  0.0963368  -0.295 0.768686    
z.diff.lag6  -0.1326313  0.0889223  -1.492 0.138581    
z.diff.lag7  -0.1096365  0.0865862  -1.266 0.208019    
z.diff.lag8  -0.2348880  0.0829892  -2.830 0.005497 ** 
z.diff.lag9  -0.0926604  0.0843594  -1.098 0.274344    
z.diff.lag10 -0.2053937  0.0789245  -2.602 0.010487 *  
z.diff.lag11 -0.1081091  0.0786801  -1.374 0.172127    
z.diff.lag12  0.6633101  0.0752086   8.820 1.54e-14 ***
z.diff.lag13  0.3197783  0.0883636   3.619 0.000443 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.04011 on 114 degrees of freedom
Multiple R-squared:  0.8781,    Adjusted R-squared:  0.8621 
F-statistic: 54.75 on 15 and 114 DF,  p-value: &lt; 2.2e-16


Value of test-statistic is: -2.147 4.9781 3.4342 

Critical values for test statistics: 
      1pct  5pct 10pct
tau3 -3.99 -3.43 -3.13
phi2  6.22  4.75  4.07
phi3  8.43  6.49  5.47</code></pre>
</div>
</div>
<p>Pela análise do correlograma do resíduo da regressão, fica claro que ainda há autocorrelação. Novamente, o mais correto seria aplicar o teste Ljung-Box sobre os resíduos para verificar a presença de autocorrelação conjunta nas primeiras <em>k</em> defasagens, mas este não é o foco deste post. Esta pequena digressão exemplifica como a aplicação destes testes em séries de tempo pode não ser tão direto/simples.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/arima-no-r/index_files/figure-html/unnamed-chunk-7-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Os gráficos abaixo mostram o correlograma da série após tirarmos a primeira diferença e a primeira diferença sazonal. A partir da análise destes correlogramas poderíamos inferir algumas especificações alternativas para modelos SARIMA e aí, poderíamos escolher o melhor modelo usando algum critério de informação.</p>
<p>A metodologia Box &amp; Jenkins de análise de séries de tempo tem, certamente, um pouco de <em>arte</em> e <em>feeling</em>. Não é tão imediato entender como devemos proceder e, na prática, faz sentido experimentar com vários modelos alternativos de ordem baixa como SARIMA(1, 1, 1)(0, 1, 1), SARIMA(2, 1, 0)(0, 1, 1), etc.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/arima-no-r/index_files/figure-html/unnamed-chunk-8-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="os-modelos" class="level3">
<h3 class="anchored" data-anchor-id="os-modelos">Os modelos</h3>
<p>Para não perder muito tempo experimentando com vários modelos vou me ater a três modelos diferentes. Uma função bastante útil é a <code>auto.arima</code> do pacote <code>forecast</code> que faz a seleção automática do melhor modelo da classe SARIMA/ARIMA/ARMA.</p>
<p>Eu sei que o Schumway/Stoffer, autores do ótimo <a href="https://github.com/nickpoison/tsa4">Time Series Analysis and Its Applications</a>, tem um <a href="https://www.stat.pitt.edu/stoffer/tsa4/Rissues.htm">post crítico ao uso</a> do <code>auto.arima</code>. Ainda assim, acho que a função tem seu mérito e costuma ser um bom ponto de partida para a sua análise. Quando temos poucas séries de tempo para analisar, podemos nos dar ao luxo de fazer a modelagem manualmente, mas quando há centenas de séries, é muito conveniente poder contar com o <code>auto.arima</code>.</p>
<p>Como o <code>auto.arima</code> escolhe o mesmo modelo do Box &amp; Jenkins eu experimento com uma especificação diferente. Novamente, a título de exemplo eu comparo ambos os modelos SARIMA com uma regressão linear simples que considera uma tendência temporal linear e uma série de dummies sazonais. O modelo é algo da forma</p>
<p><img src="https://latex.codecogs.com/png.latex?%0Ay_%7Bt%7D%20=%20%5Calpha_%7B0%7D%20+%20%5Calpha_%7B1%7Dt%20+%20%5Csum_%7Bi%20=%201%7D%5E%7B11%7D%5Cbeta_%7Bi%7Ds_%7Bi%7D%20+%20%5Cvarepsilon_%7Bt%7D%0A"></p>
<p>Onde <img src="https://latex.codecogs.com/png.latex?s_%7Bi%7D"> é uma variável indicadora igual a 1 se <img src="https://latex.codecogs.com/png.latex?t"> corresponder ao mês <img src="https://latex.codecogs.com/png.latex?i"> e igual a 0 caso contrário. Vale notar que não podemos ter uma dummy para todos os meses se não teríamos uma matriz de regressores com colinearidade perfeita!</p>
<p>Aqui vou contradizer um pouco o espírito do post novamente para usar o <code>forecast</code>. O ganho de conveniência vem na hora de fazer as previsões. Ainda assim, indico como estimar os mesmos modelos usando apenas funções base do <code>R</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Usando o forecast</span></span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(forecast)</span>
<span id="cb5-3">model1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">auto.arima</span>(train)</span>
<span id="cb5-4">model2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Arima</span>(train, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">seasonal =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>))</span>
<span id="cb5-5">model3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tslm</span>(train <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> trend <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> season)</span></code></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Usando apenas funções base</span></span>
<span id="cb6-2">model2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arima</span>(</span>
<span id="cb6-3">  trains,</span>
<span id="cb6-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb6-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">seasonal =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">period =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)</span>
<span id="cb6-6">)</span>
<span id="cb6-7"></span>
<span id="cb6-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extrai uma tendência temporal linear </span></span>
<span id="cb6-9">trend <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">time</span>(train)</span>
<span id="cb6-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cria variáveis dummies mensais</span></span>
<span id="cb6-11">season <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cycle</span>(train)</span>
<span id="cb6-12">model3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(train <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> trend <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> season)</span></code></pre></div>
</div>
<p>A saída dos modelos segue abaixo. As saídas dos modelos SARIMA não são muito interessantes. Em geral, não é muito comum avaliar nem a significância e nem o sinal dos coeficientes, já que eles não têm muito valor interpretativo. Uma coisa que fica evidente dos dois modelos abaixo é que o primeiro parece melhor ajustado aos dados pois tem valores menores em todos os critérios de informação considerados.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">model1</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Series: train 
ARIMA(0,1,1)(0,1,1)[12] 

Coefficients:
          ma1     sma1
      -0.3424  -0.5405
s.e.   0.1009   0.0877

sigma^2 = 0.001432:  log likelihood = 197.51
AIC=-389.02   AICc=-388.78   BIC=-381</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">model2</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Series: train 
ARIMA(1,1,1)(1,1,0)[12] 

Coefficients:
         ar1      ma1     sar1
      0.0668  -0.4518  -0.4426
s.e.  0.3046   0.2825   0.0875

sigma^2 = 0.001532:  log likelihood = 195.14
AIC=-382.28   AICc=-381.89   BIC=-371.59</code></pre>
</div>
</div>
<p>Já o modelo de regressão linear tem uma saída mais interessante. Note que, por padrão, o primeiro mês foi omitido e seu efeito aparece no termo constante. Na tabela abaixo, vemos que há um efeito positivo e significativo, por exemplo, nos meses 6-8 (junho a agosto), que coincidem com o período de férias de verão no hemisfério norte. Já, em novembro (mês 11) parece haver uma queda na demanda por passagens aéreas.</p>
<p>Note que o R quadrado da regressão é extremamente elevado e isso é um indício de que algo está errado. Isto, muito provavelmente é resultado da não-estacionaridade da série.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">broom<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(model3)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13 × 5
   term        estimate std.error statistic   p.value
   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
 1 (Intercept)  4.71     0.0191    247.     2.81e-149
 2 trend        0.0106   0.000145   73.2    3.09e- 93
 3 season2     -0.0134   0.0245     -0.549  5.84e-  1
 4 season3      0.120    0.0245      4.91   3.32e-  6
 5 season4      0.0771   0.0245      3.15   2.14e-  3
 6 season5      0.0675   0.0245      2.75   6.93e-  3
 7 season6      0.191    0.0245      7.81   4.23e- 12
 8 season7      0.288    0.0245     11.7    6.32e- 21
 9 season8      0.278    0.0245     11.4    4.36e- 20
10 season9      0.143    0.0245      5.82   6.13e-  8
11 season10     0.00108  0.0245      0.0441 9.65e-  1
12 season11    -0.141    0.0245     -5.77   7.97e-  8
13 season12    -0.0248   0.0245     -1.01   3.14e-  1</code></pre>
</div>
</div>
<p>De fato, olhando para a função de autocorrelação do resíduo do modelo de regressão linear, fica evidente que há autocorrelação. Uma forma de contornar isso seria de incluir um termo ARMA no termo de erro. Novamente, este não é o foco do post e vamos seguir normalmente.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">acf</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">resid</span>(model3))</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/arima-no-r/index_files/figure-html/unnamed-chunk-14-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="comparando-as-previsões" class="level2">
<h2 class="anchored" data-anchor-id="comparando-as-previsões">Comparando as previsões</h2>
<p>A maneira mais prática de trabalhar com vários modelos ao mesmo tempo é agregando eles em listas e aplicando funções nessas listas.</p>
<p>Abaixo eu aplico a função <code>forecast</code> para gerar as previsões 24 períodos a frente nos três modelos. Depois, eu extraio somente a estimativa pontual de cada previsão.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">models <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(model1, model2, model3)</span>
<span id="cb14-2">yhat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(models, forecast, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">h =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span>)</span>
<span id="cb14-3">yhat_mean <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(yhat, <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x) x<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>mean)</span></code></pre></div>
</div>
<p>Comparamos a performance de modelos de duas formas: (1) olhando para medidas de erro (o quão bem o modelo prevê os dados do <em>test</em>) e (2) olhando para critérios de informação (o quão bem o modelo se ajusta aos dados do <em>train</em>).</p>
<p>Os critérios de informação têm todos uma interpretação bastante simples: quanto menor, melhor. Tipicamente, o AIC tende a escolher modelos sobreparametrizados enquanto o BIC tende a escolher modelos mais parcimoniosos.</p>
<p>Já a comparação de medidas de erro não é tão simples. Pois ainda que um modelo tenha, por exemplo, um erro médio quadrático menor do que outro, não é claro se esta diferença é significante. Uma maneira de testar isso é via o teste Diebold-Mariano, que compara os erros de previsão de dois modelos. Implicitamente, contudo, ele assume que a diferença entre os erros de previsão é covariância-estacionária (também conhecido como estacionário de segunda ordem ou fracamente estacionário). Dependendo do contexto, esta pode ser uma hipótese mais ou menos razoável.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">compute_error <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(model, test) {</span>
<span id="cb15-2">  y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> test</span>
<span id="cb15-3">    yhat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>mean</span>
<span id="cb15-4">    train <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x</span>
<span id="cb15-5"></span>
<span id="cb15-6">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calcula o erro de previsao</span></span>
<span id="cb15-7">    y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> yhat</span>
<span id="cb15-8">}</span>
<span id="cb15-9"></span>
<span id="cb15-10">compute_error_metrics <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(model, test) {</span>
<span id="cb15-11"></span>
<span id="cb15-12">    y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> test</span>
<span id="cb15-13">    yhat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>mean</span>
<span id="cb15-14">    train <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> model<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x</span>
<span id="cb15-15"></span>
<span id="cb15-16">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calcula o erro de previsao</span></span>
<span id="cb15-17">    error <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> yhat</span>
<span id="cb15-18">    </span>
<span id="cb15-19">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Raiz do erro quadrado medio</span></span>
<span id="cb15-20">    rmse <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(error<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))</span>
<span id="cb15-21">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Erro medio absoluto</span></span>
<span id="cb15-22">    mae <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(error))</span>
<span id="cb15-23">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Erro medio percentual</span></span>
<span id="cb15-24">    mape <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> error <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> y))</span>
<span id="cb15-25">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Root mean squared scaled error</span></span>
<span id="cb15-26">    rmsse <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(error<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">snaive</span>(train)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>mean))</span>
<span id="cb15-27"></span>
<span id="cb15-28">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Devolve os resultados num list</span></span>
<span id="cb15-29">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rmse =</span> rmse, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mae =</span> mae, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mape =</span> mape, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rmsse =</span> rmsse)</span>
<span id="cb15-30">    </span>
<span id="cb15-31"></span>
<span id="cb15-32">}</span>
<span id="cb15-33"></span>
<span id="cb15-34">compute_ics <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(model) {</span>
<span id="cb15-35"></span>
<span id="cb15-36">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extrai criterios de informacao</span></span>
<span id="cb15-37">    aic  <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">AIC</span>(model)</span>
<span id="cb15-38">    bic  <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">BIC</span>(model)</span>
<span id="cb15-39"></span>
<span id="cb15-40">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Devolve os resultados num list</span></span>
<span id="cb15-41">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">aic =</span> aic, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bic =</span> bic)</span>
<span id="cb15-42"></span>
<span id="cb15-43">} </span>
<span id="cb15-44"></span>
<span id="cb15-45">fcomparison <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(yhat, <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(yhat) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">compute_error_metrics</span>(yhat, test))</span>
<span id="cb15-46">icc <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(models, compute_ics)</span>
<span id="cb15-47"></span>
<span id="cb15-48">comp_error <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">do.call</span>(rbind.data.frame, fcomparison)</span>
<span id="cb15-49"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rownames</span>(comp_error) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AutoArima"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Manual SARIMA"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OLS"</span>)</span>
<span id="cb15-50">comp_ics <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">do.call</span>(rbind.data.frame, icc)</span>
<span id="cb15-51"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rownames</span>(comp_ics) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AutoArima"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Manual SARIMA"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OLS"</span>)</span></code></pre></div>
</div>
<p>A tabela abaixo mostra os critérios AIC e BIC para os três modelos. Em ambos os casos, o SARIMA(0, 1, 1)(0, 1, 1)[12] parece ser o escolhido. Este tipo de feliz coincidência não costuma acontecer frequentemente na prática, mas neste caso ambos os critérios apontam para o mesmo modelo.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">comp_ics</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    aic       bic
AutoArima     -389.0155 -380.9970
Manual SARIMA -382.2807 -371.5894
OLS           -342.2930 -303.2681</code></pre>
</div>
</div>
<p>Na comparação de medidas de erro, o SARIMA(0, 1, 1)(0, 1, 1)[12] realmente tem uma melhor performance, seguido pelo OLS e pelo SARIMA(1, 1, 1)(1, 1, 0)[12].</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">comp_error</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    rmse        mae     mape      rmsse
AutoArima     0.09593236 0.08959921 1.463477 0.03939512
Manual SARIMA 0.11688549 0.10780460 1.762201 0.04806577
OLS           0.10333715 0.09384411 1.549261 0.04266214</code></pre>
</div>
</div>
<p>Será que esta diferença é significante? Vamos comparar os modelos SARIMA. Pelo teste DM ela é sim. Lembre-se que o teste DM é, essencialmente, um teste Z de que <img src="https://latex.codecogs.com/png.latex?e_%7B1%7D%20-%20e_%7B2%7D%20=%200"> ou <img src="https://latex.codecogs.com/png.latex?e_%7B1%7D%20=%20e_%7B2%7D">, onde os valores são a média dos erros de previsão dos modelos.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">errors <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lapply</span>(yhat, <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(yhat) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">compute_error</span>(yhat, test))</span>
<span id="cb20-2">e1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> errors[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]]</span>
<span id="cb20-3">e2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> errors[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]]</span>
<span id="cb20-4"></span>
<span id="cb20-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dm.test</span>(e1, e2, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">power =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Diebold-Mariano Test

data:  e1e2
DM = -4.4826, Forecast horizon = 1, Loss function power = 2, p-value =
0.0001691
alternative hypothesis: two.sided</code></pre>
</div>
</div>
<p>Vale notar que o teste DM serve para comparar os erros de previsão de quaisquer modelos. Como o teste não faz qualquer hipótese sobre “de onde vem” os erros de previsão, ele pode ser utilizado livremente. Vale lembrar também que este teste não deve ser utilizado para escolher o melhor modelo, já que ele compara apenas a capacidade preditiva de dois modelos alternativos.</p>
<p>Outro ponto, também complicado, é de qual a medida de erro que se deve escolher. O teste DM implicitamente usa o erro médio quadrático, mas há várias outras alternativas. <a href="https://otexts.com/fpp3/accuracy.html">Uma breve discussão pode ser vista aqui</a>.</p>
<p>Por fim, o gráfico abaixo mostra as previsões dos modelos alternativos contra a série real.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(test, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylim =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5.8</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6.5</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#8ecae6"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lwd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"o"</span>)</span>
<span id="cb22-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lines</span>(yhat_mean[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ffb703"</span>)</span>
<span id="cb22-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lines</span>(yhat_mean[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#fb8500"</span>)</span>
<span id="cb22-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lines</span>(yhat_mean[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>]], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#B86200"</span>)</span>
<span id="cb22-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grid</span>()</span>
<span id="cb22-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">legend</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"topleft"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lty =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb22-7">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Test"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AutoArima"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Arima"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OLS"</span>),</span>
<span id="cb22-8">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#8ecae6"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ffb703"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#fb8500"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#B86200"</span>))</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/arima-no-r/index_files/figure-html/unnamed-chunk-20-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="resumo-geral" class="level1">
<h1>Resumo geral</h1>
<p>Algumas conclusões gerais para amarrar este post:</p>
<ol type="1">
<li><p>A metodologia Box-Jenkins não é tão direta. A interpretação do correlograma é muitas vezes incerta e a melhor opção costuma ser testar vários modelos.</p></li>
<li><p>Escolher o melhor modelo não é tão trivial. Uma saída simples é escolher o modelo com menor AIC ou BIC. Ainda assim, é importante levar em conta a capacidade preditiva do modelo.</p></li>
<li><p>Mesmo usando apenas funções base do <code>R</code> já é possível fazer boas análises com séries de tempo.</p></li>
</ol>


</section>

 ]]></description>
  <category>time-series</category>
  <category>tutorial-R</category>
  <category>econometria</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/arima-no-r/index.html</guid>
  <pubDate>Thu, 01 Jun 2023 03:00:00 GMT</pubDate>
  <media:content url="https:://www.restateinsight.com/static/series-tempo-r.svg" medium="image" type="image/svg+xml"/>
</item>
<item>
  <title>Usando fontes com showtext no R</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/tutorial-showtext/index.html</link>
  <description><![CDATA[ 




<div class="cell">

</div>
<p>Criar boas visualizações é parte importante de qualquer análise de dados.</p>
<p>A tipografia de um texto deve complementar a mensagem e o tom que se quer comunicar e o mesmo vale para visualizações com dados. A fonte do texto ajuda a transmitir informação e pode comunicar, por exemplo, maior sobriedade, profissionalismo, etc.</p>
<p>O pacote <code>showtext</code>, desenvolvido por <a href="https://github.com/yixuan/showtext">yixuan</a>, facilita a importação e o uso de fontes em gráficos no <code>R</code>. O pacote funciona com uma variedade de extensões de fontes, não sendo limitado como o <code>extrafont</code>, por exemplo, a arquivos <code>.ttf</code>.</p>
<section id="r" class="level1">
<h1>R</h1>
<p>O primeiro passo necessário é instalar o pacote do CRAN usando <code>install.packages()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Instale o pacote se necessário</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"extrafont"</span>)</span>
<span id="cb1-3"></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Opcionalmente instale a versão em desenvolvimento</span></span>
<span id="cb1-5">remotes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install_github</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yixuan/showtext"</span>)</span>
<span id="cb1-6"></span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(showtext)</span></code></pre></div>
</div>
<div class="cell" data-layout-align="center">

</div>
<p>Importar fontes é bastante simples. Como exemplo vamos importar algumas <a href="https://fonts.google.com">fontes do Google</a> usando a função <code>font_add_google()</code>. Esta função, em geral, leva apenas dois arugmentos. O primeiro argumento deve ser o nome “oficial” da fonte; o segundo argumento é como será o nome desta fonte dentro do R.</p>
<p>No exemplo abaixo vamos importar três fontes: Montserrat, Roboto Condensed e Alice. No primeiro caso vamos manter o mesmo nome da fonte; já nos outros dois vamos usar nomes diferentes.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">font_add_google</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Montserrat"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Montserrat"</span>)</span>
<span id="cb2-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># É possível simplificar o nome da fonte</span></span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">font_add_google</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Roboto Condensed"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RobCond"</span>)</span>
<span id="cb2-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">font_add_google</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Alice"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"alice"</span>)</span></code></pre></div>
</div>
<p>Também é possível importar fontes que já estão instaladas no seu computador usando a função <code>font_add</code>. Agora a ordem dos arugmentos é invertida: o primeiro argumento define o nome da fonte dentro do <code>R</code> enquanto o segundo argumento é o nome do arquivo que pode ser <code>.ttf</code>, <code>.ttc</code> ou outros.</p>
<p>Em geral, o <code>showtext</code> consegue encontrar corretamente as pastas onde estes arquivos estão armazenados. Caso você tenha problema com isso vai ter de especificar este caminho manualmente com a função <code>font_paths()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Importar a fonte Helvetica</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">font_add</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HelveticaNeue"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HelveticaNeue.ttc"</span>)</span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Importar a fonte Arial (junto com a versão em negrito, itálico, etc.)</span></span>
<span id="cb3-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">font_add</span>(</span>
<span id="cb3-6">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Arial"</span>,</span>
<span id="cb3-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">regular =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Arial.ttf"</span>,</span>
<span id="cb3-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bold =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Arial Bold.ttf"</span>,</span>
<span id="cb3-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">italic =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Arial Italic.ttf"</span>,</span>
<span id="cb3-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bolditalic =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Arial Bold Italic.ttf"</span>)</span></code></pre></div>
</div>
<p>Para informar ao R que o <code>showtext</code> deve ser utilizado para desenhar o texto dos gráficos é preciso usar a função <code>showtext_auto()</code>. Só é preciso fazer isto uma única vez por sessão. Se você <em>sempre</em> utiliza o <code>showtext</code> você pode considerar incluir esta função no seu <code>.Rprofile</code>, assim o pacote será carregado automaticamente sempre que você abrir uma nova sessão no <code>R</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Indica que o showtext deve ser utilizado para criar as imagens</span></span>
<span id="cb4-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Só precisa ser chamado uma única vez por sessão</span></span>
<span id="cb4-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">showtext_auto</span>()</span></code></pre></div>
</div>
<section id="base-r" class="level2">
<h2 class="anchored" data-anchor-id="base-r">Base R</h2>
<p>Para modificar a fonte dos elementos textuais dos gráficos feitos com o <code>plot()</code> é preciso ajustar o argumento <code>family</code>. Usando as funções base do R, este argumento aparece dentro da função <code>par</code> (que configura vários parâmetros dos gráficos).</p>
<p>O código abaixo mostra como trocar a fonte do gráfico.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define a fonte padrão do gráfico</span></span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"alice"</span>)</span>
<span id="cb5-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Monta um scatter plot de exemplo</span></span>
<span id="cb5-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(mpg <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> wt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> mtcars, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Milhas por galão"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Peso (ton.)"</span>)</span>
<span id="cb5-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Peso x eficiência de carros"</span>)</span>
<span id="cb5-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"exemplo de texto"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>)</span>
<span id="cb5-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">legend</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"topright"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"exemplo de legenda"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pch =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/tutorial-showtext/index_files/figure-html/unnamed-chunk-6-1.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Note que <em>todos</em> os objetos textuais (título, legenda, etc.) são convertidos para a mesma fonte. Caso se queira fontes diferentes para estes elementos é preciso especificá-los adequadamente. Por exemplo, para trocar somente a fonte do título</p>
<p><code>title("nome_do_titulo", family = "nome_fonte")</code></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(mpg <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> wt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> mtcars, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Milhas por galão"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Peso (ton.)"</span>)</span>
<span id="cb6-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Peso x eficiência de carros"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RobCond"</span>)</span>
<span id="cb6-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"exemplo de texto"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Montserrat"</span>)</span>
<span id="cb6-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">legend</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"topright"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"exemplo de legenda"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pch =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/tutorial-showtext/index_files/figure-html/unnamed-chunk-7-1.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Vale notar que, uma vez definida a fonte usando a função <code>par</code>, todos os gráficos subsequentes vão usar esta fonte. Para trocar a fonte é preciso usar a função <code>par</code> novamente. Além da fonte também é possível trocar a ênfase (e.g.&nbsp;<code>face = c("bold", "italic")</code>) e também o tamanho da letra (e.g.&nbsp;<code>cex.axis = 1.5</code>, <code>cex.main = 2</code>).</p>
</section>
<section id="ggplot2" class="level2">
<h2 class="anchored" data-anchor-id="ggplot2">ggplot2</h2>
<p>Também é possível trocar a fonte de gráficos feitos com outros pacotes, como o <code>ggplot2</code>. O exemplo abaixo monta um gráfico similar ao que foi feito acima. Modifica-se a fonte dentro da função <code>theme</code>. Esta função é um tanto particular, então vale a pena discorrer um pouco sobre ela. Ela é basicamente usada para modificar elementos do gráfico. Há quatro elementos principais, dos quais só nos interessa um: o <code>element_text</code>. São seis os principais elementos textuais que pode-se modificar:</p>
<ul>
<li><code>axis.text</code> - texto dos eixos (em geral, os números do eixo);</li>
<li><code>axis.title</code> - nome do eixo (e.g.&nbsp;“Milhas por galão” no exemplo acima);</li>
<li><code>legend.text</code> - texto da legenda;</li>
<li><code>legend.title</code> - título da legenda;</li>
<li><code>plot.title</code> - título do gráfico;</li>
<li><code>text</code> - <em>todos</em> os acima.</li>
</ul>
<p>Pode-se ser mais específico com o texto dos eixos usando <code>axis.text.x</code> e <code>axis.text.y</code>, por exemplo. O último dos elementos listados acima funciona como um “coringa”, ele serve para modificar de uma vez só todos os elementos textuais de um gráfico. No exemplo abaixo modifico somente o <code>text</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span>
<span id="cb7-2"></span>
<span id="cb7-3">p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> mtcars, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> wt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> mpg)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stat_smooth</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poly</span>(x, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">se =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb7-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Peso (ton.)"</span>,</span>
<span id="cb7-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Milhas por galão"</span>,</span>
<span id="cb7-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Eficiência e peso de carros"</span>,</span>
<span id="cb7-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Regressão entre o peso de diferentes carros e sua eficiência energética"</span>,</span>
<span id="cb7-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fonte: Motor Trend US Magazine 1974"</span></span>
<span id="cb7-12">    )</span></code></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Montserrat"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>))</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/tutorial-showtext/index_files/figure-html/unnamed-chunk-9-1.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>O próximo exemplo mostra como modificar alguns dos diferentes elementos do gráfico. Aproveito a variável <code>cyl</code> (cilindradas) para diferenciar os carros em três grupos para que o gráfico agora tenha uma legenda.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.factor</span>(cyl))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_discrete</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cilindros"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb9-5">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Modifica o texto (números) dos eixos x e y</span></span>
<span id="cb9-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"alice"</span>),</span>
<span id="cb9-7">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Modifica o título do eixo (i.e. Milhas por galão)</span></span>
<span id="cb9-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Montserrat"</span>),</span>
<span id="cb9-9">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Modifica o título da legenda (Cilindros)</span></span>
<span id="cb9-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HelveticaNeue"</span>),</span>
<span id="cb9-11">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Modifica o texto da legenda (i.e. 4, 6, 8)</span></span>
<span id="cb9-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HelveticaNeue"</span>),</span>
<span id="cb9-13">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Modifica o título do gráfico</span></span>
<span id="cb9-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RobCond"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb9-15">    )</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/tutorial-showtext/index_files/figure-html/unnamed-chunk-10-1.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Talvez o jeito mais sensato de usar fontes com o <code>ggplot2</code> seja primeiro especificar uma fonte padrão para o gráfico usando <code>text</code> e depois calibrar as exceções. Os elementos textuais como <code>axis.title</code> e <code>legend.text</code> copiam as propriedades definidas em <code>text</code>.</p>
<p>No exemplo abaixo defino que todos os elementos textuais ser escritos em Arial simples em tamanho 12 na cor <code>"gray20"</code>. Depois disso defino que o título deve ter mais destaque com Arial em negrito (bold) num tamanho maior e numa cor mais escura. Por fim, defino que o rodapé do gráfico seja escrito em fonte menor e em itálico.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">theme_custom <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb10-3">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Modifica todos os elementos textuais do gráfico</span></span>
<span id="cb10-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Arial"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray20"</span>),</span>
<span id="cb10-5">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Modifica apenas o título</span></span>
<span id="cb10-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">face =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray10"</span>),</span>
<span id="cb10-7">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Modifica apenas a nota no rodapé</span></span>
<span id="cb10-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.caption =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">face =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"italic"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>)</span>
<span id="cb10-9">  )</span>
<span id="cb10-10"></span>
<span id="cb10-11">p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb10-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.factor</span>(cyl))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_discrete</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cilindros"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-14">  theme_custom</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/tutorial-showtext/index_files/figure-html/unnamed-chunk-11-1.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Por último, também pode ser interessante usar fontes diferentes para representar dados diferentes. Isto é possível usando o argumento <code>family</code> dentro do <code>aes</code>. Da mesma forma, seria possível também representar grupos de dados diferentes com tamanhos de fontes diferentes ou mesmo destacar algum grupo específico com itálico.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">nomes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(mtcars)</span>
<span id="cb11-2">mtcars<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cyl <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.factor</span>(mtcars<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>cyl)</span>
<span id="cb11-3"></span>
<span id="cb11-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> mtcars, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> wt, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> mpg)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> nomes, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Arial"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"alice"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Montserrat"</span>)[cyl]))</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/tutorial-showtext/index_files/figure-html/unnamed-chunk-12-1.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="anexo-problemas-com-dpi-e-rmarkdown" class="level2">
<h2 class="anchored" data-anchor-id="anexo-problemas-com-dpi-e-rmarkdown">Anexo: problemas com DPI e RMarkdown</h2>
<p>Apesar de muito conveniente, o <code>showtext</code> não é inteiramente desprovido de problemas. Dois problemas que enfrento com alguma recorrência são diferenças de DPI na hora de exportar gráficos e problemas com RMarkdown.</p>
<p>O problema com o RMarkdown é mais simples. Em versões antigas do RMarkdown e do showtext era necessário adicionar um argumento <code>fig.showtext = TRUE</code> em todos os chunks em que um gráfico usando showtext fosse renderizado. Alternativamente, podia-se modificar esta opção globalmente inserido o seguinte código no início do documento RMarkdown.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>opts_chunk<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set</span>(</span>
<span id="cb12-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fig.showtext =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb12-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fig.retina =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb12-4">  )</span></code></pre></div>
</div>
<p>Acredito, mas não tenho certeza, de que este problema sumiu em versões mais recentes dos pacotes, pois com frequência eu esqueço de adicionar estes argumentos mas não encontro problemas na prática.</p>
<p>O problema com o DPI na hora de exportar gráficos é mais complicado. Por problemas de DPI quero dizer quando o showtext “desenha” o texto num DPI diferente do ggplot2. O resultado é que o texto fica ou grande ou pequeno demais. Por padrão o <code>showtext</code> utiliza o DPI em 96.</p>
<p>Vamos montar um gráfico para ilustrar o problema.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">grafico <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb13-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.factor</span>(cyl))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb13-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_discrete</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cilindros"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb13-4">  theme_custom</span>
<span id="cb13-5"></span>
<span id="cb13-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Exportar o gráfico em alta resolução</span></span>
<span id="cb13-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggsave</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"meu_grafico.jpeg"</span>, grafico, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dpi =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>)</span></code></pre></div>
</div>
<div class="cell" data-layout-align="center">

</div>
<p>Quando vamos abrir o arquivo que foi exportado temos o resultado abaixo.</p>
<p><img src="https:://www.restateinsight.com/posts/tutorial-showtext/meu_grafico.jpeg" class="image_figure image_featured image_internal image_unprocessed img-fluid" loading="lazy" decoding="async" alt=""></p>
<p>Como a imagem foi salva com DPI mais elevado o texto fica menor do que deveria; em casos mais extremos o texto fica minúsculo a ponto de ser ilegível. Há duas formas de tentar contornar este problema: (1) reduzir o DPI dentro de <code>ggsave</code>; ou (2) modificar o DPI do <code>showtext</code>.</p>
<p>Vamos tentar a primeira solução: modificar o <code>ggsave</code> para o DPI padrão do <code>showtext</code>. Agora o texto está maior mas a proporção dos elementos está péssima! O resultado é pior do que o problema inicial.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Exportar a imagem num dpi menor</span></span>
<span id="cb14-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggsave</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"meu_grafico_96.jpeg"</span>, grafico, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dpi =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">96</span>)</span></code></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/tutorial-showtext/meu_grafico_96.jpeg" class="img-fluid figure-img"></p>
</figure>
</div>
<div class="cell" data-layout-align="center">

</div>
<p>A segunda solução é modificar as opções internas do <code>showtext</code>. Isto é bastante simples e pode ser feito com o <code>showtext_opts(dpi = 300)</code> e chamando novamente a função <code>showtext_auto()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Ajusta o DPI do showtext</span></span>
<span id="cb15-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">showtext_opts</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dpi =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>)</span>
<span id="cb15-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># "Ativa" o showtext novamente</span></span>
<span id="cb15-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">showtext_auto</span>()</span>
<span id="cb15-5"></span>
<span id="cb15-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Refaz o gráfico (isto é importante!)</span></span>
<span id="cb15-7">grafico <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb15-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.factor</span>(cyl))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb15-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_discrete</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Cilindros"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb15-10">  theme_custom</span>
<span id="cb15-11"></span>
<span id="cb15-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Exporta um novo gráfico</span></span>
<span id="cb15-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggsave</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"meu_grafico_300.jpeg"</span>, grafico, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dpi =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>)</span></code></pre></div>
</div>
<div class="cell" data-layout-align="center">

</div>
<p>Agora o tamanho do texto está correto e a imagem como um todo está em alta resolução. Um problema é que a imagem ficou bastante grande, mas isto pode ser ajustado variando os argumentos <code>width</code> e <code>height</code> da função <code>ggsave</code>.</p>
<p><img src="https:://www.restateinsight.com/posts/tutorial-showtext/meu_grafico_300.jpeg" class="image_figure image_featured image_internal image_unprocessed img-fluid" loading="lazy" decoding="async" alt=""></p>
<p>Vale notar que, a depender do seu sistema operacional, modificar o DPI padrão do showtext pode distorcer os gráficos dentro do R ou RStudio. Na prática o melhor <em>workflow</em> pode ser de modificar o DPI do showtext apenas no momento de exportar os gráficos.</p>


</section>
</section>

 ]]></description>
  <category>tutorial-R</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/tutorial-showtext/index.html</guid>
  <pubDate>Wed, 10 May 2023 03:00:00 GMT</pubDate>
  <media:content url="https:://www.restateinsight.com/static/tipografia_r.png" medium="image" type="image/png" height="57" width="144"/>
</item>
<item>
  <title>Visualizando o IPCA</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/ipca-visualizacao/index.html</link>
  <description><![CDATA[ 




<section id="inflação-no-brasil" class="level1">
<h1>Inflação no Brasil</h1>
<p>A inflação voltou a ser uma pauta, não só no Brasil, mas no mundo todo, nos últimos meses. No Brasil, a combinação de câmbio desvalorizado, desajustes logísticos, crise hídrica e choques de preços externos, culminaram no maior nível de inflação desde 2002.</p>
<p>Mesmo em países avançados, os níveis de inflação estão em altas históricas. Nos Estados Unidos, por exemplo, o nível do CPI está no valor mais alto desde o final dos anos 1970.</p>
<p>Visualizar a magnitude da inflação no Brasil pode ser um pouco desafiador. A série do IPCA é calculada desde 1979. O número de cidades avaliadas pelo índice cresceu no tempo: nos primeiros anos o índice contemplava Rio de Janeiro, Porto Alegre, Belo Horizonte, Recife, São Paulo, Brasília, Belém, Fortaleza, Salvador e Curitiba. Em 1991, Goiânia entra no índice e, mais recentemente, em 2014, Vitória e Campo Grande também entraram no cômputo do índice.</p>
<p>Mais importante do que a variação no número das cidades, é o período hiperinflacionário da década de 1980. Os números da inflação são incomparavelmente mais altos do que os atuais. Como regra, os cortes temporais mais relevantes para enxergar a inflação são Jul/94 (Plano Real), Jul/99 (Regime de Metas de Inflação), Mai/00 (Lei de Responsabilidade Fiscal) e Mai/03 (pós choque de 2002).</p>
<p>Neste post vou mostrar o comportamento da inflação desde 1999.</p>
<section id="pacotes" class="level2">
<h2 class="anchored" data-anchor-id="pacotes">Pacotes</h2>
<div class="cell">

</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Os pacotes utilizados</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyr)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggdist)</span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(spiralize)</span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(showtext)</span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(lubridate)</span>
<span id="cb1-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(GetBCBData)</span>
<span id="cb1-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(forecast)</span></code></pre></div>
</div>
<div class="cell" data-layout-align="center">

</div>
</section>
<section id="importando-os-dados" class="level2">
<h2 class="anchored" data-anchor-id="importando-os-dados">Importando os dados</h2>
<p>Importo os dados diretamente da API do Banco Central usando o pacote <code>GetBCBData</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Importar os dados</span></span>
<span id="cb2-2">ipca <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gbcbd_get_series</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">433</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">first.date =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.Date</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1998-01-01"</span>))</span></code></pre></div>
</div>
<p>O código abaixo cria alguns elementos que serão necessários para as visualizações.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">grid <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb3-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ref.date =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.Date</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1998-01-01"</span>),<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.Date</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2022-12-01"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1 month"</span>))</span>
<span id="cb3-3"></span>
<span id="cb3-4">ipca_meta <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb3-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">year =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1999</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2022</span>,</span>
<span id="cb3-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">meta =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5.5</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span>), <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.25</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.75</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.5</span>),</span>
<span id="cb3-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">banda =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>)),</span>
<span id="cb3-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">banda_superior =</span> meta <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> banda,</span>
<span id="cb3-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">banda_inferior =</span> meta <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> banda)</span></code></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">ipca <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> ipca <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">right_join</span>(grid) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fill</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">month =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">month</span>(ref.date, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">abbr =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">locale =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pt_BR"</span>),</span>
<span id="cb4-5">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">year =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">year</span>(ref.date),</span>
<span id="cb4-6">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">value =</span> value <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>,</span>
<span id="cb4-7">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">acum12m =</span> RcppRoll<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">roll_prodr</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb4-8">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">acum12m =</span> acum12m <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(ipca_meta) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">deviation =</span> acum12m <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> meta)</span></code></pre></div>
</div>
</section>
<section id="inflação" class="level2">
<h2 class="anchored" data-anchor-id="inflação">Inflação</h2>
<p>O cálculo do IPCA avalia a variação de preços de uma cesta fixa de bens. A composição desta cesta vem da Pesquisa de Orçamentos Familiares (POF), também feita pelo IBGE, que tem como objetivo representar a “cesta de consumo média” dos brasileiros.</p>
<p>Formalmente, o IPCA é um índice de Laspeyeres que compara o preço de mercado de uma cesta de bens <img src="https://latex.codecogs.com/png.latex?W%20=%20(w_%7B1%7D,%20w_%7B2%7D,%20%5Cdots,%20w_%7Bn%7D)"> no período <img src="https://latex.codecogs.com/png.latex?t"> e compara o preço de mercado desta mesma cesta de bens no período anterior <img src="https://latex.codecogs.com/png.latex?t-1">.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0AI_%7Bt%7D%20=%20%5Cfrac%7B%5Csum_%7Bi%7Dw_%7Bi%7DP_%7Bi,%20t%7D%7D%7B%5Csum_%7Bi%7Dw_%7Bi%7DP_%7Bi,%20t-1%7D%7D%0A"></p>
<p>Na prática, esta cesta de bens agrega um misto de gastos com habitação, alimentos, vestuário, combustíveis, serivços, etc. Como existe uma clara sazonalidade tanto na oferta como na demanda por estes bens, o IPCA também apresenta sazonalidade.</p>
<p>Isso fica claro, quando se visualiza a variação do IPCA mês a mês como no gráfico abaixo. Tipicamente, os meses de nov-dez-jan-fev apresentam valores mais altos do que os meses de mai-jun-jul-ago.</p>
<p>O ponto fora da curva em novembro é referente ao ano de 2002. Ele é resultado, em parte, da incerteza econômica e da enorme desvalorização cambial que se seguiu à primeira eleição do ex-presidente Lula.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts</span>(ipca<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>value <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1998</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">frequency =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)</span>
<span id="cb5-2"></span>
<span id="cb5-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggseasonplot</span>(y) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_viridis_d</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sazonalidade do IPCA"</span>,</span>
<span id="cb5-6">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>,</span>
<span id="cb5-7">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottom"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/ipca-visualizacao/index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="no-longo-prazo" class="level2">
<h2 class="anchored" data-anchor-id="no-longo-prazo">No longo prazo</h2>
<p>Uma das maneiras de contornar o problema da sazonalidade é acumulando o índice anualmente, pois aí temos o efeito sazonal de todos os meses. O problema é que aí teríamos de sempre comparar anos completos, impossibilitando um diagnóstico da inflação em maio do ano corrente.</p>
<p>A solução é acumular o índice em doze meses, criando um “ano artificial”. A lógica é que, independentemente do momento do tempo em que estamos, contamos o efeito de todos os meses individualmente. Chamando de <img src="https://latex.codecogs.com/png.latex?z_%7Bt%7D"> o índice acumulado e <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D"> o valor do IPCA no período <img src="https://latex.codecogs.com/png.latex?t"> temos que:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0Az_%7Bt%7D%20=%20%5B(1%20+%20y_%7Bt-12%7D)(1%20+%20y_%7Bt-11%7D)%5Cdots(1%20+%20y_%7Bt-1%7D)%5D%20-%201%0A"></p>
<p>Assim, para o mês de maio de 2022 teríamos</p>
<p><img src="https://latex.codecogs.com/png.latex?%0Az_%7B%5Ctext%7Bmaio/22%7D%7D%20=%20%5B(1%20+%20y_%7B%5Ctext%7Babril/22%7D%7D)(1%20+%20y_%7B%5Ctext%7Bmar/22%7D%7D)%5Cdots(1%20+%20y_%7B%5Ctext%7Bjun/21%7D%7D)%5D%20-%201%0A"></p>
<section id="acumulado-12-meses" class="level3">
<h3 class="anchored" data-anchor-id="acumulado-12-meses">Acumulado 12 meses</h3>
<p>O código abaixo apresenta o histórico do IPCA acumulado em 12 meses junto com a sua média histórica.</p>
<p>Vemos como o período de 2002 é muito fora da curva. Também se nota como o Brasil quase sempre tem uma inflação relativamente alta, próxima de 5-6%. O único período de inflação baixa na série é no período 2017-19.</p>
<p>Vale notar que só faz sentido em falar na “média histórica” de uma série se ela for estacionária.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">avgipca <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(ipca<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>acum12m, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb6-2">label <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Média: "</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(avgipca, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb6-3">dftext <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.Date</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2019-01-01"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> label)</span>
<span id="cb6-4"></span>
<span id="cb6-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">na.omit</span>(ipca), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> ref.date, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> acum12m)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> avgipca,</span>
<span id="cb6-9">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dftext,</span>
<span id="cb6-11">            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.Date</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2019-01-01"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> label),</span>
<span id="cb6-12">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Helvetica"</span>,</span>
<span id="cb6-13">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_date</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date_breaks =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1 year"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date_labels =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%Y"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Inflação Acumulada em 12 Meses"</span>,</span>
<span id="cb6-16">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>,</span>
<span id="cb6-17">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%"</span>,</span>
<span id="cb6-18">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fonte: BCB"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb6-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Helvetica"</span>),</span>
<span id="cb6-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">angle =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">90</span>))</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/ipca-visualizacao/index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>A comparação com a média histórica é interessante, mas é mais relevante olhar para a meta de inflação. Desde 1999, o Conselho Monetário Nacional (CMN) define, em geral com 2 anos de antecedência, a meta de inflação que o Banco Central deve perseguir. Este tipo de estrutura institucional é bastante popular mundo afora e há uma sólida básica empírica e teórica que a sustenta.</p>
<p>Basicamente, ao estabelecer antecipadamente uma meta de inflação, o CMN tenta ancorar as expectativas das pessoas na economia. Se a meta for crível, as pessoas tendem a montar planos de negócios, firmar contratos e tomar escolhas tomando a inflação futura como a meta de inflação.</p>
<p>A meta de inflação também incentiva o Banco Central a priorizar o controle dos preços acima de outras prioridades concorrentes.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">historico_meta <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> ipca <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb7-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(ref.date, acum12m, meta, banda_inferior, banda_superior) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb7-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cols =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>ref.date) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb7-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">na.omit</span>()</span>
<span id="cb7-5"></span>
<span id="cb7-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(historico_meta, name <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"acum12m"</span>),</span>
<span id="cb7-8">            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> ref.date, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> value),</span>
<span id="cb7-9">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#e63946"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(historico_meta, name <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"acum12m"</span>),</span>
<span id="cb7-11">            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> ref.date, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> name)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_date</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date_breaks =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1 year"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">date_labels =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%Y"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb7-15">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#264653"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#264653"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#2a9d8f"</span>),</span>
<span id="cb7-16">                     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Banda Inf."</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Banda Sup."</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Meta"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Histórico de Metas de Inflação"</span>,</span>
<span id="cb7-18">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"% (acum. 12 meses)"</span>,</span>
<span id="cb7-19">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>,</span>
<span id="cb7-20">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fonte: BCB"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-21">  theme_vini</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/ipca-visualizacao/index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>No Brasil, o CMN define a meta e também a sua banda superior e inferior. No gráfico acima, vemos que a inflação esteve relativamente dentro da meta no período 2003-2014, ainda que depois de 2008 o índice tenha ficado sempre acima do centro da meta.</p>
<p>Após a alta de 2016 o índice cai para níveis bastante baixos e o CMN inclusive começa a progressivamente reduzir a meta de inflação. Este é o único período desde 1999 em que a inflação fica, em alguns momentos, abaixo da meta.</p>
<p>Evidentemente, a inflação dispara no período recente. O enorme descolamento com a meta põe o sistema em cheque, à medida em que as pessoas acreditam cada vez menos na habilidade do Banco Central em honrar seu compromisso.</p>
</section>
</section>
<section id="enxergando-a-distribuição" class="level2">
<h2 class="anchored" data-anchor-id="enxergando-a-distribuição">Enxergando a distribuição</h2>
<p>Outra maneira de enxergar o IPCA é olhar para a distribuição dos seus valores. O gráfico abaixo é um histograma com um</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(ipca, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> value <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_histogram</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> ..density..), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bins =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">38</span>,</span>
<span id="cb8-3">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#264653"</span>,</span>
<span id="cb8-4">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_density</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.25</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Distribuição do IPCA mensal"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Densidade"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-9">  theme_vini</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/ipca-visualizacao/index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Um tipo de visualização interessante é montar um “grid” como o abaixo. Um problema é que a escala de cores acaba um pouco deturpada por causa do período 2002-3.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(ipca, ref.date <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.Date</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1999-01-01"</span>)),</span>
<span id="cb9-2">       <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> month, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> acum12m)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_tile</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray90"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1999</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2022</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_viridis_c</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">option =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"magma"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-7">  theme_vini</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/ipca-visualizacao/index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Algum nível de arbitrariedade é necessário para resolver isso. Uma opção é agrupar os dados em grupos. Como a meta mais longa que tivemos foi a de 4.5 com intervalo de 2, monto os grupos baseado nisso. A aceleração recente da inflação, a meu ver, fica mais evidente desta forma. Inclusive, conseguimos enxergar melhor como a inflação recente é mais intensa do que a de 2015-17.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">grupos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> ipca <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb10-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(ref.date <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.Date</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1999-01-01"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb10-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ipca_group =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">findInterval</span>(acum12m, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6.5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>)),</span>
<span id="cb10-4">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ipca_group =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(ipca_group))</span>
<span id="cb10-5">labels <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt; 2.5"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2.5-4.5"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"4.5-6.5"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"6.5-10"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"10-15"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&gt; 15"</span>)</span>
<span id="cb10-6"></span>
<span id="cb10-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(grupos,</span>
<span id="cb10-8">       <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> month, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> ipca_group)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_tile</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray90"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1999</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2022</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_viridis_d</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">option =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"magma"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> labels) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-13">  theme_vini</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/ipca-visualizacao/index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Também podemos plotar a distribuição dos dados a cada ano. Note que a visualização abaixo não é nada convencional do ponto de vista estatístico.</p>
<p>Ainda assim, é interessante ver a dispersão enorme dos valores em 2002-3 e também como a inflação ficou relativamente bem-comportada nos anos seguintes até se tornar mais volátil e enviesada para a direita em 2016.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(ipca, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(year), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> value <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factor</span>(year))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stat_halfeye</span>(</span>
<span id="cb11-3">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">justification =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,</span>
<span id="cb11-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">.width =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, </span>
<span id="cb11-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">point_colour =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-6">  </span>
<span id="cb11-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_viridis_d</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">option =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"magma"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guides</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray80"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>),</span>
<span id="cb11-14">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid.minor =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>())</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/ipca-visualizacao/index_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Por fim, uma visualização que eu acho muito interessante, mas que é ainda menos convencional é de espiral. Eu sinceramente não sei se é possível enxergar muita coisa de interessante desta forma e eu, infelizmente, não entendo o pacote <code>spiralize</code> o suficiente para entender de que forma é possível ajustar a escala das cores.</p>
<p>Fica uma visualização bacana, mas não acho que seja a mais apropriada.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">ipca <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">na.omit</span>(ipca)</span>
<span id="cb12-2"></span>
<span id="cb12-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">spiral_initialize_by_time</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlim =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">range</span>(ipca<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>ref.date),</span>
<span id="cb12-4">                          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">unit_on_axis =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"months"</span>,</span>
<span id="cb12-5">                          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">period =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"year"</span>,</span>
<span id="cb12-6">                          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">period_per_loop =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb12-7">                          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">padding =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unit</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cm"</span>))</span>
<span id="cb12-8">                          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#vp_param = list(x = unit(0, "npc"), just = "left"))</span></span>
<span id="cb12-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">spiral_track</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">height =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>)</span>
<span id="cb12-10">lt <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">spiral_horizon</span>(ipca<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>ref.date, ipca<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>acum12m, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">use_bar =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb12-11"></span>
<span id="cb12-12">s <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">current_spiral</span>()</span>
<span id="cb12-13">d <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">360</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%%</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">360</span></span>
<span id="cb12-14">month_name <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(lubridate<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">month</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">abbr =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">locale =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pt_BR"</span>))</span>
<span id="cb12-15"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq_along</span>(d)) {</span>
<span id="cb12-16">  foo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">polar_to_cartesian</span>(d[i]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">180</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>pi, (s<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>max_radius <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.05</span>)</span>
<span id="cb12-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grid.text</span>(month_name[i], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> foo[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> foo[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">default.unit =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"native"</span>,</span>
<span id="cb12-18">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rot =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(d[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> d[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">180</span>, d[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">90</span>, d[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">90</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">gp =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gpar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fontsize =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>))</span>
<span id="cb12-19">}</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/ipca-visualizacao/index_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>


</section>
</section>

 ]]></description>
  <category>data-visualization</category>
  <category>brasil</category>
  <category>economia</category>
  <category>tutorial-R</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/ipca-visualizacao/index.html</guid>
  <pubDate>Thu, 01 Dec 2022 03:00:00 GMT</pubDate>
  <media:content url="https:://www.restateinsight.com/static/visualizando-ipca.png" medium="image" type="image/png" height="99" width="144"/>
</item>
<item>
  <title>ARMA: um exemplo simples</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/repost-arma-exemplo-simples/index.html</link>
  <description><![CDATA[ 




<div class="cell">

</div>
<section id="introdução" class="level1">
<h1>Introdução</h1>
<p>Neste post apresento como estimar e diagnosticar um modelo ARMA simples no R. O modelo ARMA decompõe uma série em função de suas observações passadas e de “passados” (às vezes chamados de inovações). O ARMA(1, 1) com constante tem a seguinte forma.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0Ay_%7Bt%7D%20=%20%5Cphi_%7B0%7D%20+%5Cphi_%7B1%7Dy_%7Bt-1%7D%20+%20%5Cvarepsilon_%7Bt%7D%20+%20%5Ctheta_%7B1%7D%5Cvarepsilon_%7Bt%20-%201%7D%0A"></p>
<p>onde ambas as condições de estacionaridade como de invertibilidade devem ser atendidas. Assume-se que o termo <img src="https://latex.codecogs.com/png.latex?%5Cvarepsilon_%7Bt%7D"> é um ruído branco. De maneira mais geral, um modelo ARMA(p, q) tem a forma:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0Ay_%7Bt%7D%20=%20%5Cphi_%7B0%7D%20+%5Cphi_%7B1%7Dy_%7Bt-1%7D%20+%20%5Cdots%20+%20%5Cphi_%7Bp%7Dy_%7Bt-p%7D%20+%20%5Cvarepsilon_%7Bt%7D%20+%20%5Ctheta_%7B1%7D%5Cvarepsilon_%7Bt%20-%201%7D%20+%20%5Cdots%20+%20%5Ctheta_%7Bq%7D%5Cvarepsilon_%7Bt-%20q%7D%0A"></p>
</section>
<section id="crescimento-do-pnb" class="level1">
<h1>Crescimento do PNB</h1>
<p>Vamos usar a série do PNB disponbilizada pelo pacote <code>astsa</code>. Este pacote foi montado pelos autores do livro <a href="https://www.stat.pitt.edu/stoffer/tsa4/">Time Series Analysis</a>. Para visualizar a série usamos a função <code>plot.ts</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(astsa)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(forecast)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gnp"</span>)</span></code></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot.ts</span>(gnp,</span>
<span id="cb2-2">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Produto Nacional Bruto EUA (trimestre)"</span>,</span>
<span id="cb2-3">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb2-4">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"US$ (bilhões)"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-arma-exemplo-simples/index_files/figure-html/unnamed-chunk-3-1.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Precisamos transformar a série primeiro. Para encontrar a variação percentual de uma variável <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D"> qualquer fazemos</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20%5CDelta%20y_%7Bt%7D%20=%20%5Cfrac%7By_%7Bt%7D%20-%20y_%7Bt-1%7D%7D%7By_%7Bt-1%7D%7D%0A"></p>
<p>Uma aproximação comumumente usada no lugar da equação acima é a diferença em log. Na literatura de finanças a equação acima também é conhecida como <em>retorno</em> e a diferença em log como <em>log-retorno</em>. Na prática, além da aproximação ser boa para valores pequenos (em torno de zero) costuma ser mais cômodo trabalhar com log-retornos.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20%5CDelta%20y_%7Bt%7D%20=%20%5Cfrac%7By_%7Bt%7D%20-%20y_%7Bt-1%7D%7D%7By_%7Bt-1%7D%7D%20%5Capprox%20%5Ctext%7Bln%7D(1%20+%20%5CDelta%20y_%7Bt%7D)%20=%20%5Ctext%7Bln%7D(y_%7Bt%7D/y_%7Bt-1%7D)%20=%20%5Ctext%7Bln%7D(y_%7Bt%7D)%20-%20%5Ctext%7Bln%7D(y_%7Bt-1%7D)%0A"></p>
<p>No R podemos combinar duas funções para facilitar o cômputo da diferença dos logs: usamos <code>diff()</code> que computa <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D%20-%20y_%7Bt%20-%201%7D"> junto com a função <code>log()</code> que computa o logaritmo. Note que a função <code>log()</code> usa o número <img src="https://latex.codecogs.com/png.latex?e"> como base; é possível trocar a base usando o argumento <code>base = 10</code>, por exemplo, ou usar simplesmente uma outra função <code>log10()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Computa log(y[t]) - log(y[t-1])</span></span>
<span id="cb3-2">y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">diff</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log</span>(gnp))</span>
<span id="cb3-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Gráfico da série transformada</span></span>
<span id="cb3-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot.ts</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Variação percentual do PIB"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"(%)"</span>)</span>
<span id="cb3-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">h =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray30"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-arma-exemplo-simples/index_files/figure-html/unnamed-chunk-4-1.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Para avaliar a qualidade do modelo vamos reservar a parte final dos dados: a ideia é gerar previsões usando apenas a informação da primeira parte da amostra e então comparar estas previsões com as observações. Esta metodologia às vezes é denominada de <em>train</em> (treino) e <em>test</em> (teste).</p>
<p>Treinamos o modelo com as primeiras observações e depois testamos as suas previsões contra as observações finais (que ficaram fora do modelo). Aqui também cabe uma breve observação sobre dados em série de tempo. Se tivéssemos dados em cross-section o correto seria formar as bases <em>train</em> e <em>test</em> usando algum tipo de amostragem aleatória. Como os dados de série de tempo são encadeados não podemos fazer isto: por isto “cortamos” as observações num determinado instante do tempo.</p>
<p>Abaixo escolho um tanto arbitrariamente cortar os dados em janeiro de 1992. Em azul destaco os dados que serão utilizados para alimentar o modelo. As previsões serão testasdas contra as observações em vermelho.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cria a janela temporal</span></span>
<span id="cb4-2">train <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">window</span>(y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">end =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1991</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span>
<span id="cb4-3">teste <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">window</span>(y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1992</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb4-4"></span>
<span id="cb4-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plota o gráfico destacando as observações finais que foram removidas.</span></span>
<span id="cb4-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot.ts</span>(y)</span>
<span id="cb4-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lines</span>(train, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>)</span>
<span id="cb4-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lines</span>(teste, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-arma-exemplo-simples/index_files/figure-html/unnamed-chunk-5-1.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="identificação" class="level1">
<h1>Identificação</h1>
<p>O primeiro trabalho que temos é o de identificar a ordem do modelo, isto é, encontrar os valores verdadeiros de <img src="https://latex.codecogs.com/png.latex?p"> e <img src="https://latex.codecogs.com/png.latex?q">. A maneira mais comum de começar é tentar comparar os gráficos das funções de autocorrelação (FAC) e autocorrelação parcial (FACP) com suas contrapartidas teóricas. O R tem as funções <code>acf()</code> e <code>pacf()</code> que calculam estes valores junto com intervalos de confiança assintóticos.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Modifica parâmetros para apresentar dois gráficos numa mesma figura</span></span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mfrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb5-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">acf</span>(train,  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Função de autocorrelação"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Defasagem"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ACF"</span>)</span>
<span id="cb5-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pacf</span>(train, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Função de autocorrelação parcial"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Defasagem"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PACF"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-arma-exemplo-simples/index_files/figure-html/unnamed-chunk-6-1.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Note que a escala das defasagens é agrupada pela frequência dos dados, isto é, são contadas de quatro em quatro. Há alguns problemas com a visualização acima. Primeiro, a função de autocorrelãção começa no lag zero, isto é, <img src="https://latex.codecogs.com/png.latex?%5Crho(0)">. Sabemos que este valor sempre será igual a um pois, por definição: <img src="https://latex.codecogs.com/png.latex?%5Crho(0)%20=%20%5Cfrac%7B%5Cgamma(0)%7D%7B%5Cgamma(0)%7D%20=%201">. Logo, seria melhor que esta defasagem fosse suprimida. Além disso, é um tanto inconveniente ter que modificar os parâmetros gráficos usando <code>par(mfrow = c(2, 1))</code>. Uma saída é usar a função <code>acf2()</code> do pacote <code>astsa</code>. Esta função também imprime uma lista com os valores estimados da FAC e da FACP.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">acf2</span>(train)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-arma-exemplo-simples/index_files/figure-html/unnamed-chunk-7-1.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
<pre><code>#&gt;      [,1] [,2]  [,3]  [,4]  [,5]  [,6]  [,7]  [,8] [,9] [,10] [,11] [,12] [,13]
#&gt; ACF  0.36 0.19 -0.01 -0.13 -0.17 -0.11 -0.09 -0.05 0.04  0.05  0.03 -0.12 -0.13
#&gt; PACF 0.36 0.07 -0.12 -0.12 -0.08  0.00 -0.03 -0.02 0.05  0.01 -0.03 -0.18 -0.05
#&gt;      [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24]
#&gt; ACF  -0.10 -0.11  0.05  0.08  0.11  0.06  0.07 -0.08 -0.05 -0.10 -0.06
#&gt; PACF  0.02 -0.07  0.10  0.02  0.02 -0.04  0.02 -0.11  0.03 -0.03 -0.01</code></pre>
</div>
<p>Agora está mais claro que as duas primeiras defasagens da FAC são significantes e que a primeira defasagem da FACP é significante. Note também que a 5ª defasagem na FAC é um pouco significante e há uma defasagem de ordem elevada (lag 12) que é um pouco significante na FACP. Em geral, podemos desprezar estas autocorrelações de ordens muito elevadas até porque vamos querer modelos mais parcimoniosos (i.e.&nbsp;com poucos parâmetros).</p>
<p>Apenas olhando para os gráficos acima poderíamos chutar um modelo ARMA(1,1), ARMA(1,2) ou mesmo um AR(1). Depois disto teríamos que checar os resíduos para ver se o modelo está bem ajustado. Por fim, poderíamos escolher o melhor modelo segundo algum critério de informação como o Critério de Akaike (AIC). Alternativamente, poderíamos identificar a ordem do modelo usando algum algoritmo. A função <code>auto.arima()</code> do pacote <code>forecast()</code> verifica vários modelos e compara eles via uma série de critérios.</p>
</section>
<section id="estimação-e-diagnóstico" class="level1">
<h1>Estimação e diagnóstico</h1>
<section id="modelo-1" class="level2">
<h2 class="anchored" data-anchor-id="modelo-1">Modelo 1</h2>
<p>Vou primeiro estimar o ARMA(1, 2) usando a função <code>arima()</code> do R.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1">(m1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arima</span>(train, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)))</span>
<span id="cb8-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb8-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Call:</span></span>
<span id="cb8-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; arima(x = train, order = c(1, 0, 2))</span></span>
<span id="cb8-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb8-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Coefficients:</span></span>
<span id="cb8-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          ar1     ma1     ma2  intercept</span></span>
<span id="cb8-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       0.2324  0.0971  0.1623     0.0084</span></span>
<span id="cb8-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; s.e.  0.2294  0.2247  0.0958     0.0012</span></span>
<span id="cb8-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb8-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sigma^2 estimated as 0.0001038:  log likelihood = 566.91,  aic = -1123.82</span></span></code></pre></div>
</div>
<p>A estimativa tem a forma: <img src="https://latex.codecogs.com/png.latex?%0A%20%20y_%7Bt%7D%20=%20%5Cunderset%7B(0.0012)%7D%7B0.0084%7D%20+%20%5Cunderset%7B(0.2324)%7D%7B0.2294%7Dy_%7Bt%20-%201%7D%20+%20%5Cunderset%7B(0.2247)%7D%7B0.0971%7D%5Cepsilon_%7Bt-1%7D%20+%20%5Cunderset%7B(0.0958)%7D%7B0.1623%7D%5Cepsilon_%7Bt-2%7D%0A"> Note que os erros-padrão de <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Cphi_%7B1%7D%7D"> e <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Ctheta_%7B1%7D%7D"> são bastante elevados. De fato, um teste-t revela que estes coeficientes não são significantes.</p>
<section id="diagnóstico-de-resíduos" class="level3">
<h3 class="anchored" data-anchor-id="diagnóstico-de-resíduos">Diagnóstico de resíduos</h3>
<p>Pode-se verificar os resíduos do modelo de muitas formas. Idealmente, quer-se que os resíduos não apresentem autocorrelação alguma. Uma forma gráfica de ver isto é usando a função <code>lag1.plot</code> que apresenta gráficos de dispersão entre o resíduo <img src="https://latex.codecogs.com/png.latex?u_%7Bt%7D"> contra suas defasagens <img src="https://latex.codecogs.com/png.latex?u_%7Bt-1%7D,%20u_%7Bt-2%7D,%20%5Cdots">. Abaixo faço isto para as primieras quatro defasagens.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">residuos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">resid</span>(m1)</span>
<span id="cb9-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag1.plot</span>(residuos, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max.lag =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-arma-exemplo-simples/index_files/figure-html/unnamed-chunk-9-1.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Na prática, é mais conveniente analisar diretamente os gráficos da FAC e da FACP dos resíduos.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">acf2</span>(residuos)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-arma-exemplo-simples/index_files/figure-html/unnamed-chunk-10-1.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
<pre><code>#&gt;      [,1]  [,2] [,3]  [,4]  [,5]  [,6]  [,7]  [,8] [,9] [,10] [,11] [,12] [,13]
#&gt; ACF  0.01 -0.01    0 -0.09 -0.12 -0.03 -0.04 -0.05 0.04  0.06  0.07 -0.12 -0.07
#&gt; PACF 0.01 -0.01    0 -0.09 -0.12 -0.03 -0.05 -0.06 0.02  0.04  0.06 -0.15 -0.09
#&gt;      [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24]
#&gt; ACF  -0.03 -0.12  0.07  0.06  0.06  0.02  0.09  -0.1  0.00 -0.07 -0.04
#&gt; PACF -0.02 -0.11  0.06  0.02  0.04 -0.02  0.05  -0.1  0.01 -0.05 -0.01</code></pre>
</div>
<p>Um teste basatante usual para verificar a presença de autocorrelação nos resíduos é o Ljung-Box. Para computá-lo uso a função <code>Box.test()</code> do pacote <code>tseries</code>. Note que é preciso suplementar o argumento <code>fitdf</code> com o número de parâmetros estimados do modelo. Isto serve para corrigir a estatística do teste. A escolha da ordem do teste é um tanto arbitrária e, na prática, seria recomendado fazer o teste para várias ordens diferentes. O código abaixo computa a estatística do teste para uma defasagem igual a 8.</p>
<p>Note o uso do argumento <code>fitdf</code> que leva em conta o número de parâmetros estimados no modelo. Segundo o p-valor, não temos evidência para rejeitar a hipótese nula de que os resíduos <em>não</em> são conjuntamente autocorrelacionados. Isto é, temos evidência de que o modelo está bem ajustado pois os resíduos parecem se comportar como ruído branco.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tseries)</span>
<span id="cb12-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Box.test</span>(residuos, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ljung-Box"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lag =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fitdf =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)</span>
<span id="cb12-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb12-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;  Box-Ljung test</span></span>
<span id="cb12-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb12-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; data:  residuos</span></span>
<span id="cb12-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; X-squared = 4.9486, df = 4, p-value = 0.2926</span></span></code></pre></div>
</div>
<p>Na prática, é bom repetir o teste para várias defasagens diferentes. A tabela abaixo resume os valores do teste para várias ordens de defasagem. Vale lembrar que o teste Ljung-Box tende a não-rejeitar H0 para defasagens muito elevadas.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">

<table class="table table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:center;"> Defasagem </th>
   <th style="text-align:center;"> Estatística de teste </th>
   <th style="text-align:center;"> P-valor </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:center;"> 8 </td>
   <td style="text-align:center;"> 4.9486 </td>
   <td style="text-align:center;"> 0.2926 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 9 </td>
   <td style="text-align:center;"> 5.2251 </td>
   <td style="text-align:center;"> 0.3890 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 10 </td>
   <td style="text-align:center;"> 5.8669 </td>
   <td style="text-align:center;"> 0.4383 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 11 </td>
   <td style="text-align:center;"> 6.7991 </td>
   <td style="text-align:center;"> 0.4501 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 12 </td>
   <td style="text-align:center;"> 9.7788 </td>
   <td style="text-align:center;"> 0.2809 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 13 </td>
   <td style="text-align:center;"> 10.8054 </td>
   <td style="text-align:center;"> 0.2893 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 14 </td>
   <td style="text-align:center;"> 10.9313 </td>
   <td style="text-align:center;"> 0.3629 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 15 </td>
   <td style="text-align:center;"> 13.6377 </td>
   <td style="text-align:center;"> 0.2537 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 16 </td>
   <td style="text-align:center;"> 14.5903 </td>
   <td style="text-align:center;"> 0.2646 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 17 </td>
   <td style="text-align:center;"> 15.2158 </td>
   <td style="text-align:center;"> 0.2941 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 18 </td>
   <td style="text-align:center;"> 15.8735 </td>
   <td style="text-align:center;"> 0.3212 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 19 </td>
   <td style="text-align:center;"> 15.9294 </td>
   <td style="text-align:center;"> 0.3868 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> 20 </td>
   <td style="text-align:center;"> 17.4548 </td>
   <td style="text-align:center;"> 0.3568 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="usando-o-pacote-astsa" class="level3">
<h3 class="anchored" data-anchor-id="usando-o-pacote-astsa">Usando o pacote <code>astsa</code></h3>
<p>Uma forma bastante conveniente de trabalhar com modelos ARMA é com a função <code>sarima</code> do pacote <code>astsa</code>. Esta função apresenta automaticamente algumas valiosas informações para o diagnóstico dos resíduos: o gráfico do ACF, o gráfico qq-plot (para verificar a normalidade dos resíduos) e os p-valores do teste Ljung-Box para várias ordens de defasagem.</p>
<p>A saída abaixo reúne quatro gráficos. O primeiro deles apresenta o resíduo normalizado (ou escalado). Este gráfico não deve apresentar um padrão claro. O segundo gráfico é a FAC do resíduo: idealmente, nenhuma defasagem deve ser significativa neste gráfico. Ao lado da FAC temos o QQ-plot: se todos os pontos caem sobre a linha azul temos evidência de que os resíduos são normalmente distribuídos.</p>
<p>Por fim, o último gráfico mostra o p-valor do teste Ljung-Box (já ajustado pelo número de parâmetros do modelo estimado) para diferentes defasagens. A linha tracejada em azul indica o valor 0.05. Idealmente, todos os pontos devem estar acima desta linha.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sarima</span>(train, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">d =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">q =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb13-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; initial  value -4.507231 </span></span>
<span id="cb13-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   2 value -4.512000</span></span>
<span id="cb13-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   3 value -4.582718</span></span>
<span id="cb13-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   4 value -4.583615</span></span>
<span id="cb13-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   5 value -4.583727</span></span>
<span id="cb13-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   6 value -4.583754</span></span>
<span id="cb13-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   7 value -4.583896</span></span>
<span id="cb13-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   8 value -4.583941</span></span>
<span id="cb13-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   9 value -4.583957</span></span>
<span id="cb13-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter  10 value -4.583958</span></span>
<span id="cb13-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter  10 value -4.583958</span></span>
<span id="cb13-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; final  value -4.583958 </span></span>
<span id="cb13-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; converged</span></span>
<span id="cb13-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; initial  value -4.586016 </span></span>
<span id="cb13-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   2 value -4.586020</span></span>
<span id="cb13-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   3 value -4.586022</span></span>
<span id="cb13-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   4 value -4.586023</span></span>
<span id="cb13-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   5 value -4.586025</span></span>
<span id="cb13-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   6 value -4.586026</span></span>
<span id="cb13-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   7 value -4.586027</span></span>
<span id="cb13-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   8 value -4.586027</span></span>
<span id="cb13-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   9 value -4.586028</span></span>
<span id="cb13-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   9 value -4.586028</span></span>
<span id="cb13-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; iter   9 value -4.586028</span></span>
<span id="cb13-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; final  value -4.586028 </span></span>
<span id="cb13-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; converged</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-arma-exemplo-simples/index_files/figure-html/unnamed-chunk-13-1.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
<pre><code>#&gt; $fit
#&gt; 
#&gt; Call:
#&gt; arima(x = xdata, order = c(p, d, q), seasonal = list(order = c(P, D, Q), period = S), 
#&gt;     xreg = xmean, include.mean = FALSE, transform.pars = trans, fixed = fixed, 
#&gt;     optim.control = list(trace = trc, REPORT = 1, reltol = tol))
#&gt; 
#&gt; Coefficients:
#&gt;          ar1     ma1     ma2   xmean
#&gt;       0.2324  0.0971  0.1623  0.0084
#&gt; s.e.  0.2294  0.2247  0.0958  0.0012
#&gt; 
#&gt; sigma^2 estimated as 0.0001038:  log likelihood = 566.91,  aic = -1123.82
#&gt; 
#&gt; $degrees_of_freedom
#&gt; [1] 175
#&gt; 
#&gt; $ttable
#&gt;       Estimate     SE t.value p.value
#&gt; ar1     0.2324 0.2294  1.0130  0.3125
#&gt; ma1     0.0971 0.2247  0.4319  0.6664
#&gt; ma2     0.1623 0.0958  1.6946  0.0919
#&gt; xmean   0.0084 0.0012  6.7491  0.0000
#&gt; 
#&gt; $AIC
#&gt; [1] -6.278312
#&gt; 
#&gt; $AICc
#&gt; [1] -6.277028
#&gt; 
#&gt; $BIC
#&gt; [1] -6.189279</code></pre>
</div>
</section>
</section>
<section id="modelo-2" class="level2">
<h2 class="anchored" data-anchor-id="modelo-2">Modelo 2</h2>
<p>Estimo também o modelo ARMA(1, 1). A análise de resíduos é análoga à apresentada acima.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1">m2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arima</span>(train, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span></code></pre></div>
</div>
</section>
<section id="modelo-3" class="level2">
<h2 class="anchored" data-anchor-id="modelo-3">Modelo 3</h2>
<p>Para o terceiro modelo uso o método automático do <code>auto.arima()</code>. A função escolhe o AR(1) com constante como melhor modelo para representar os dados. Note que a na inspeação visual também tínhamos verificado que o AR(1) seria um possível candidato.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">(m3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">auto.arima</span>(train))</span>
<span id="cb16-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Series: train </span></span>
<span id="cb16-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; ARIMA(1,0,0) with non-zero mean </span></span>
<span id="cb16-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb16-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; Coefficients:</span></span>
<span id="cb16-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;          ar1    mean</span></span>
<span id="cb16-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt;       0.3568  0.0084</span></span>
<span id="cb16-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; s.e.  0.0695  0.0012</span></span>
<span id="cb16-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; </span></span>
<span id="cb16-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; sigma^2 = 0.0001066:  log likelihood = 565.52</span></span>
<span id="cb16-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#&gt; AIC=-1125.04   AICc=-1124.91   BIC=-1115.48</span></span></code></pre></div>
</div>
<section id="seleção" class="level3">
<h3 class="anchored" data-anchor-id="seleção">Seleção</h3>
<p>Para escolher o melhor modelo pode-se usar algum critério de informação. Abaixo comparo os modelos segundo os critérios AIC, AICc (AIC corrigido) e BIC (Bayesian Information Criterion). Na prática, não é comum que os três critérios escolham o mesmo modelo; em particular, o BIC penaliza o número de parâmetros mais fortemente que o AIC. Neste caso específico, os três critérios escolhem o AR(1).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">

<table class="table table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:center;"> AIC </th>
   <th style="text-align:center;"> AICc </th>
   <th style="text-align:center;"> BIC </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> ARMA(1, 2) </td>
   <td style="text-align:center;"> -1123.818 </td>
   <td style="text-align:center;"> -1124.908 </td>
   <td style="text-align:center;"> -1115.483 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ARMA(1, 1) </td>
   <td style="text-align:center;"> -1123.563 </td>
   <td style="text-align:center;"> -1124.908 </td>
   <td style="text-align:center;"> -1115.483 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> AR(1) </td>
   <td style="text-align:center;"> -1125.045 </td>
   <td style="text-align:center;"> -1124.908 </td>
   <td style="text-align:center;"> -1115.483 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="previsão" class="level3">
<h3 class="anchored" data-anchor-id="previsão">Previsão</h3>
<p>Para gerar previsões usamos a função <code>forecast()</code> (outra opção é usar a função base <code>predict()</code>). Abaixo computo previsões para os três modelos acima mais um modelo ingênuo que será usado como bench-mark. O modelo ingênuo é simplesmente um random-walk que prevê sempre o valor anterior, isto é, <img src="https://latex.codecogs.com/png.latex?%5Chat%7By_%7BT+1%7D%7D%20=%20y_%7BT%7D">.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">prev1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forecast</span>(m1, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">h =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(teste))</span>
<span id="cb17-2">prev2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forecast</span>(m2, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">h =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(teste))</span>
<span id="cb17-3">prev3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forecast</span>(m3, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">h =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(teste))</span>
<span id="cb17-4">prev4 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forecast</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">naive</span>(train, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">h =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(teste)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">h =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(teste))</span>
<span id="cb17-5"></span>
<span id="cb17-6">erros <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">t</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">matrix</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(teste <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> prev1<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>mean,</span>
<span id="cb17-7">                    teste <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> prev2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>mean,</span>
<span id="cb17-8">                    teste <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> prev3<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>mean,</span>
<span id="cb17-9">                    teste <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> prev4<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>mean),</span>
<span id="cb17-10">                    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ncol =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span>
<span id="cb17-11">erros <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>(erros)</span>
<span id="cb17-12"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colnames</span>(erros) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"t ="</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">time</span>(teste)))</span>
<span id="cb17-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(erros) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ARMA(1, 2)"</span>,</span>
<span id="cb17-14">                      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ARMA(1, 1)"</span>,</span>
<span id="cb17-15">                      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AR(1)"</span>,</span>
<span id="cb17-16">                      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Y[t+1] = Y[t]"</span>)</span></code></pre></div>
</div>
<p>Os erros de previsão são apresentados na tabela abaixo.</p>
<div class="cell" data-layout-align="center" data-asis="true">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-bordered table-hover" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:center;"> t = 1992 </th>
   <th style="text-align:center;"> t = 1992.25 </th>
   <th style="text-align:center;"> t = 1992.5 </th>
   <th style="text-align:center;"> t = 1992.75 </th>
   <th style="text-align:center;"> t = 1993 </th>
   <th style="text-align:center;"> t = 1993.25 </th>
   <th style="text-align:center;"> t = 1993.5 </th>
   <th style="text-align:center;"> t = 1993.75 </th>
   <th style="text-align:center;"> t = 1994 </th>
   <th style="text-align:center;"> t = 1994.25 </th>
   <th style="text-align:center;"> t = 1994.5 </th>
   <th style="text-align:center;"> t = 1994.75 </th>
   <th style="text-align:center;"> t = 1995 </th>
   <th style="text-align:center;"> t = 1995.25 </th>
   <th style="text-align:center;"> t = 1995.5 </th>
   <th style="text-align:center;"> t = 1995.75 </th>
   <th style="text-align:center;"> t = 1996 </th>
   <th style="text-align:center;"> t = 1996.25 </th>
   <th style="text-align:center;"> t = 1996.5 </th>
   <th style="text-align:center;"> t = 1996.75 </th>
   <th style="text-align:center;"> t = 1997 </th>
   <th style="text-align:center;"> t = 1997.25 </th>
   <th style="text-align:center;"> t = 1997.5 </th>
   <th style="text-align:center;"> t = 1997.75 </th>
   <th style="text-align:center;"> t = 1998 </th>
   <th style="text-align:center;"> t = 1998.25 </th>
   <th style="text-align:center;"> t = 1998.5 </th>
   <th style="text-align:center;"> t = 1998.75 </th>
   <th style="text-align:center;"> t = 1999 </th>
   <th style="text-align:center;"> t = 1999.25 </th>
   <th style="text-align:center;"> t = 1999.5 </th>
   <th style="text-align:center;"> t = 1999.75 </th>
   <th style="text-align:center;"> t = 2000 </th>
   <th style="text-align:center;"> t = 2000.25 </th>
   <th style="text-align:center;"> t = 2000.5 </th>
   <th style="text-align:center;"> t = 2000.75 </th>
   <th style="text-align:center;"> t = 2001 </th>
   <th style="text-align:center;"> t = 2001.25 </th>
   <th style="text-align:center;"> t = 2001.5 </th>
   <th style="text-align:center;"> t = 2001.75 </th>
   <th style="text-align:center;"> t = 2002 </th>
   <th style="text-align:center;"> t = 2002.25 </th>
   <th style="text-align:center;"> t = 2002.5 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> ARMA(1, 2) </td>
   <td style="text-align:center;"> 0.0017385 </td>
   <td style="text-align:center;"> 0.0009996 </td>
   <td style="text-align:center;"> -0.0011832 </td>
   <td style="text-align:center;"> 0.0047685 </td>
   <td style="text-align:center;"> -0.0075880 </td>
   <td style="text-align:center;"> -0.0034300 </td>
   <td style="text-align:center;"> -0.0032720 </td>
   <td style="text-align:center;"> 0.0041505 </td>
   <td style="text-align:center;"> 0.0009645 </td>
   <td style="text-align:center;"> 0.0048053 </td>
   <td style="text-align:center;"> -0.0031499 </td>
   <td style="text-align:center;"> 0.0038158 </td>
   <td style="text-align:center;"> -0.0038534 </td>
   <td style="text-align:center;"> -0.0059706 </td>
   <td style="text-align:center;"> -0.0026298 </td>
   <td style="text-align:center;"> 0.0011636 </td>
   <td style="text-align:center;"> -0.0008728 </td>
   <td style="text-align:center;"> 0.0066953 </td>
   <td style="text-align:center;"> -0.0041940 </td>
   <td style="text-align:center;"> 0.0035309 </td>
   <td style="text-align:center;"> 0.0012488 </td>
   <td style="text-align:center;"> 0.0064862 </td>
   <td style="text-align:center;"> 0.0012950 </td>
   <td style="text-align:center;"> -0.0021395 </td>
   <td style="text-align:center;"> 0.0069883 </td>
   <td style="text-align:center;"> -0.0032794 </td>
   <td style="text-align:center;"> -0.0002956 </td>
   <td style="text-align:center;"> 0.0083934 </td>
   <td style="text-align:center;"> 0.0023188 </td>
   <td style="text-align:center;"> -0.0031434 </td>
   <td style="text-align:center;"> 0.0033963 </td>
   <td style="text-align:center;"> 0.0099058 </td>
   <td style="text-align:center;"> -0.0030742 </td>
   <td style="text-align:center;"> 0.0039295 </td>
   <td style="text-align:center;"> -0.0078546 </td>
   <td style="text-align:center;"> -0.0045499 </td>
   <td style="text-align:center;"> -0.0119065 </td>
   <td style="text-align:center;"> -0.0103021 </td>
   <td style="text-align:center;"> -0.0110772 </td>
   <td style="text-align:center;"> 0.0006393 </td>
   <td style="text-align:center;"> 0.0005900 </td>
   <td style="text-align:center;"> -0.0074360 </td>
   <td style="text-align:center;"> 0.0023173 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ARMA(1, 1) </td>
   <td style="text-align:center;"> 0.0015678 </td>
   <td style="text-align:center;"> 0.0011472 </td>
   <td style="text-align:center;"> -0.0010609 </td>
   <td style="text-align:center;"> 0.0048359 </td>
   <td style="text-align:center;"> -0.0075556 </td>
   <td style="text-align:center;"> -0.0034158 </td>
   <td style="text-align:center;"> -0.0032667 </td>
   <td style="text-align:center;"> 0.0041516 </td>
   <td style="text-align:center;"> 0.0009637 </td>
   <td style="text-align:center;"> 0.0048036 </td>
   <td style="text-align:center;"> -0.0031520 </td>
   <td style="text-align:center;"> 0.0038136 </td>
   <td style="text-align:center;"> -0.0038557 </td>
   <td style="text-align:center;"> -0.0059730 </td>
   <td style="text-align:center;"> -0.0026323 </td>
   <td style="text-align:center;"> 0.0011611 </td>
   <td style="text-align:center;"> -0.0008752 </td>
   <td style="text-align:center;"> 0.0066928 </td>
   <td style="text-align:center;"> -0.0041964 </td>
   <td style="text-align:center;"> 0.0035284 </td>
   <td style="text-align:center;"> 0.0012464 </td>
   <td style="text-align:center;"> 0.0064838 </td>
   <td style="text-align:center;"> 0.0012925 </td>
   <td style="text-align:center;"> -0.0021420 </td>
   <td style="text-align:center;"> 0.0069858 </td>
   <td style="text-align:center;"> -0.0032818 </td>
   <td style="text-align:center;"> -0.0002980 </td>
   <td style="text-align:center;"> 0.0083910 </td>
   <td style="text-align:center;"> 0.0023164 </td>
   <td style="text-align:center;"> -0.0031458 </td>
   <td style="text-align:center;"> 0.0033939 </td>
   <td style="text-align:center;"> 0.0099034 </td>
   <td style="text-align:center;"> -0.0030766 </td>
   <td style="text-align:center;"> 0.0039271 </td>
   <td style="text-align:center;"> -0.0078570 </td>
   <td style="text-align:center;"> -0.0045523 </td>
   <td style="text-align:center;"> -0.0119090 </td>
   <td style="text-align:center;"> -0.0103046 </td>
   <td style="text-align:center;"> -0.0110796 </td>
   <td style="text-align:center;"> 0.0006369 </td>
   <td style="text-align:center;"> 0.0005876 </td>
   <td style="text-align:center;"> -0.0074384 </td>
   <td style="text-align:center;"> 0.0023149 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> AR(1) </td>
   <td style="text-align:center;"> 0.0013079 </td>
   <td style="text-align:center;"> 0.0009620 </td>
   <td style="text-align:center;"> -0.0011721 </td>
   <td style="text-align:center;"> 0.0047728 </td>
   <td style="text-align:center;"> -0.0075918 </td>
   <td style="text-align:center;"> -0.0034379 </td>
   <td style="text-align:center;"> -0.0032817 </td>
   <td style="text-align:center;"> 0.0041400 </td>
   <td style="text-align:center;"> 0.0009537 </td>
   <td style="text-align:center;"> 0.0047944 </td>
   <td style="text-align:center;"> -0.0031608 </td>
   <td style="text-align:center;"> 0.0038049 </td>
   <td style="text-align:center;"> -0.0038643 </td>
   <td style="text-align:center;"> -0.0059815 </td>
   <td style="text-align:center;"> -0.0026408 </td>
   <td style="text-align:center;"> 0.0011526 </td>
   <td style="text-align:center;"> -0.0008837 </td>
   <td style="text-align:center;"> 0.0066843 </td>
   <td style="text-align:center;"> -0.0042049 </td>
   <td style="text-align:center;"> 0.0035199 </td>
   <td style="text-align:center;"> 0.0012379 </td>
   <td style="text-align:center;"> 0.0064753 </td>
   <td style="text-align:center;"> 0.0012840 </td>
   <td style="text-align:center;"> -0.0021505 </td>
   <td style="text-align:center;"> 0.0069773 </td>
   <td style="text-align:center;"> -0.0032903 </td>
   <td style="text-align:center;"> -0.0003065 </td>
   <td style="text-align:center;"> 0.0083825 </td>
   <td style="text-align:center;"> 0.0023079 </td>
   <td style="text-align:center;"> -0.0031543 </td>
   <td style="text-align:center;"> 0.0033854 </td>
   <td style="text-align:center;"> 0.0098949 </td>
   <td style="text-align:center;"> -0.0030851 </td>
   <td style="text-align:center;"> 0.0039186 </td>
   <td style="text-align:center;"> -0.0078655 </td>
   <td style="text-align:center;"> -0.0045608 </td>
   <td style="text-align:center;"> -0.0119175 </td>
   <td style="text-align:center;"> -0.0103131 </td>
   <td style="text-align:center;"> -0.0110881 </td>
   <td style="text-align:center;"> 0.0006284 </td>
   <td style="text-align:center;"> 0.0005791 </td>
   <td style="text-align:center;"> -0.0074469 </td>
   <td style="text-align:center;"> 0.0023064 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Y[t+1] = Y[t] </td>
   <td style="text-align:center;"> 0.0024552 </td>
   <td style="text-align:center;"> 0.0025186 </td>
   <td style="text-align:center;"> 0.0005306 </td>
   <td style="text-align:center;"> 0.0065276 </td>
   <td style="text-align:center;"> -0.0058184 </td>
   <td style="text-align:center;"> -0.0016579 </td>
   <td style="text-align:center;"> -0.0014994 </td>
   <td style="text-align:center;"> 0.0059232 </td>
   <td style="text-align:center;"> 0.0027372 </td>
   <td style="text-align:center;"> 0.0065781 </td>
   <td style="text-align:center;"> -0.0013772 </td>
   <td style="text-align:center;"> 0.0055886 </td>
   <td style="text-align:center;"> -0.0020806 </td>
   <td style="text-align:center;"> -0.0041978 </td>
   <td style="text-align:center;"> -0.0008571 </td>
   <td style="text-align:center;"> 0.0029363 </td>
   <td style="text-align:center;"> 0.0009000 </td>
   <td style="text-align:center;"> 0.0084680 </td>
   <td style="text-align:center;"> -0.0024213 </td>
   <td style="text-align:center;"> 0.0053036 </td>
   <td style="text-align:center;"> 0.0030215 </td>
   <td style="text-align:center;"> 0.0082589 </td>
   <td style="text-align:center;"> 0.0030677 </td>
   <td style="text-align:center;"> -0.0003668 </td>
   <td style="text-align:center;"> 0.0087610 </td>
   <td style="text-align:center;"> -0.0015066 </td>
   <td style="text-align:center;"> 0.0014772 </td>
   <td style="text-align:center;"> 0.0101662 </td>
   <td style="text-align:center;"> 0.0040916 </td>
   <td style="text-align:center;"> -0.0013707 </td>
   <td style="text-align:center;"> 0.0051690 </td>
   <td style="text-align:center;"> 0.0116786 </td>
   <td style="text-align:center;"> -0.0013015 </td>
   <td style="text-align:center;"> 0.0057023 </td>
   <td style="text-align:center;"> -0.0060818 </td>
   <td style="text-align:center;"> -0.0027771 </td>
   <td style="text-align:center;"> -0.0101338 </td>
   <td style="text-align:center;"> -0.0085294 </td>
   <td style="text-align:center;"> -0.0093044 </td>
   <td style="text-align:center;"> 0.0024120 </td>
   <td style="text-align:center;"> 0.0023628 </td>
   <td style="text-align:center;"> -0.0056632 </td>
   <td style="text-align:center;"> 0.0040900 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<p>Pode-se melhor comparar a performance das previsões usando alguma medida agregada de erro. Duas medidas bastante comuns são o Erro Absoluto Médio (EAM) e o Erro Quadrático Médio. A primeira toma o módulo da diferença entre o previsto (<img src="https://latex.codecogs.com/png.latex?%5Chat%7By%7D">) e o observado (<img src="https://latex.codecogs.com/png.latex?y">) e tira uma média, enquanto a última toma a diferença quadrática. Formalmente, para um horizonte de previsão <img src="https://latex.codecogs.com/png.latex?h"> começando na última observação <img src="https://latex.codecogs.com/png.latex?T">:</p>
<img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Balign%7D%0A%5Ctext%7BEAM%7D%20&amp;%20=%20%5Cfrac%7B1%7D%7Bh%7D%5Csum_%7Bi%20=%20T%20+%201%7D%5E%7BT%20+%20h%7D%20%7Cy_%7Bi%7D%20-%20%5Chat%7By%7D_%7Bi%7D%7C%20%5C%5C%0A%5Ctext%7BEQM%7D%20&amp;%20=%20%5Cfrac%7B1%7D%7Bh%7D%5Csum_%7Bi%20=%20T%20+%201%7D%5E%7BT%20+%20h%7D%20(y_%7Bi%7D%20-%20%5Chat%7By%7D_%7Bi%7D)%5E2%0A%5Cend%7Balign%7D">
<p>A tabela abaixo compara os modelos segundo estas medidas de erro.</p>
<div class="cell" data-layout-align="center">

</div>
<div class="cell" data-layout-align="center" data-asis="true">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-bordered table-hover" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:center;"> EAM </th>
   <th style="text-align:center;"> EQM </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> ARMA(1, 2) </td>
   <td style="text-align:center;"> 0.0042173 </td>
   <td style="text-align:center;"> 0.0042062 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> ARMA(1, 1) </td>
   <td style="text-align:center;"> 0.0000268 </td>
   <td style="text-align:center;"> 0.0000268 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> AR(1) </td>
   <td style="text-align:center;"> 0.0042143 </td>
   <td style="text-align:center;"> 0.0043644 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Y[t+1] = Y[t] </td>
   <td style="text-align:center;"> 0.0000268 </td>
   <td style="text-align:center;"> 0.0000280 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<p>Nem sempre é fácil comparar estas medidas, i.e., verificar se elas são estatisticamente significantes. Pode-se usar o teste Diebold-Mariano para comparar estas medidas de erro, mas é importante frisar que ele contém uma série de hipóteses sobre a distribuição dos erros. A função <code>dm.test</code> do pacote <code>forecast</code> faz este teste e mais informações sobre ele podem ser encontradas usando <code>?dm.test</code>.</p>
<p>Pode-se visualizar as previsões usando as funções <code>autoplot()</code> e <code>autolayer()</code> do pacote <code>forecast</code>. Abaixo mostro os resultados para o modelo AR(1) e também para o modelo ingênuo. note como o erros-padrão deste último cresce muito rapidamente (pois a variância de um processo random-walk cresce sem limite).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span>
<span id="cb18-2"></span>
<span id="cb18-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(prev2, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">include =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb18-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autolayer</span>(teste) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb18-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-arma-exemplo-simples/index_files/figure-html/unnamed-chunk-21-1.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"></span>
<span id="cb19-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(prev3, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">include =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb19-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autolayer</span>(teste) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb19-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"(%)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb19-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-arma-exemplo-simples/index_files/figure-html/unnamed-chunk-21-2.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"></span>
<span id="cb20-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(prev4, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">include =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autolayer</span>(teste) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"(%)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb20-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-arma-exemplo-simples/index_files/figure-html/unnamed-chunk-21-3.svg" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="conclusão" class="level1">
<h1>Conclusão</h1>
<p>Os modelos da classe ARMA são bastante populares em séries de tempo pois geram boas previsões de curto prazo. Além disso, estes modelos são estimados facilmente e usam apenas a informação da própria série. No post acima, vimos como estimar um modelo ARMA e algumas das facilidades que tanto o pacote <code>astsa</code> como o <code>forecast</code> nos oferecem.</p>


</section>

 ]]></description>
  <category>econometria</category>
  <category>time-series</category>
  <category>repost</category>
  <category>tutorial-R</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/repost-arma-exemplo-simples/index.html</guid>
  <pubDate>Mon, 01 Mar 2021 03:00:00 GMT</pubDate>
</item>
<item>
  <title>EMV no R</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/emv-no-r/index.html</link>
  <description><![CDATA[ 




<section id="estimadores-de-máxima-verossimilhança" class="level1">
<h1>Estimadores de Máxima Verossimilhança</h1>
<p>A estimação por máxima verossimilhança possui várias boas propriedades. O estimador de máxima verossimilhança (EMV) é <strong>consistente</strong> (converge para o valor verdadeiro), <strong>normalmente assintótico</strong> (distribuição assintórica segue uma normal padrão) e <strong>eficiente</strong> (é o estimador de menor variância possível). Por isso, e outros motivos, ele é um estimador muito comumemente utilizado em estatística e econometria.</p>
<p>A intuição do EMV é a seguinte: temos uma amostra e estimamos os parâmetros que maximizam a probabilidade de que esta amostra tenha sido gerada por uma certa distribuição de probabilidade. Em termos práticos, eu primeiro suponho a forma da distribuição dos meus dados (e.g.&nbsp;normal), depois eu estimo os parâmetros <img src="https://latex.codecogs.com/png.latex?%5Cmu"> e <img src="https://latex.codecogs.com/png.latex?%5Csigma"> de maneira que eles maximizem a probabilidade de que a minha amostra siga uma distribuição normal (tenha sido “gerada” por uma normal).</p>
<p>Há vários pacotes que ajudam a implementar a estimação por máxima verossimilhança no <code>R</code>. Neste post vou me ater apenas a dois pacotes: o <code>optimx</code> e o <code>maxLik</code>. O primeiro deles agrega funções de otimização de diversos outros pacotes numa sintaxe unificada centrada em algumas poucas funções. O último é feito especificamente para estimação de máxima verossimilhança então traz algumas comodidades como a estimação automática de erros-padrão.</p>
<p>Vale lembrar que o problema de MV é, essencialmente, um problema de otimização, então é possível resolvê-lo simplesmente com a função <code>optim</code> do <code>R</code>. Os dois pacotes simplesmente trazem algumas comodidades.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(maxLik)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(optimx)</span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Para reproduzir os resultados</span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set.seed</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">33</span>)</span></code></pre></div>
</div>
</section>
<section id="exemplo-com-distribuição-poisson" class="level1">
<h1>Exemplo com distribuição Poisson</h1>
<p>A ideia da estimação por máxima verossimilhança é de encontrar os parâmetros que maximizam a probabilidade de que um certo conjunto de dados sejam gerados por algum processo específico. Agora, em português: imagine que temos uma amostra aleatória; não sabemos qual distribuição os dados seguem, mas vamos <em>supor</em> que eles seguem alguma distribuição específica, por exemplo, uma Poisson. O formato da Poisson depende do parâmetro <img src="https://latex.codecogs.com/png.latex?%5Clambda"> e a ideia então é de encontrar o valor de <img src="https://latex.codecogs.com/png.latex?%5Clambda"> que melhor aproxima a distribuição empírica/observada dos dados. Isto é, dado uma amostra aleatória <img src="https://latex.codecogs.com/png.latex?x_%7B1%7D,%20x_%7B2%7D,%20%5Cdots%20,%20x_%7Bn%7D"> buscamos o valor de <img src="https://latex.codecogs.com/png.latex?%5Clambda"> que maximiza a probabilidade de que os dados tenham sido gerados por uma distribuição de Poisson.</p>
<p>A Poisson é uma distribuição discreta parametrizada por um valor <img src="https://latex.codecogs.com/png.latex?%5Clambda%20%3E%200">. O formato da distribuição varia com o valor de <img src="https://latex.codecogs.com/png.latex?%5Clambda">. Lembrando que a função de distribuição da Poisson é dada pela expressão:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20f(k,%20%5Clambda)%20=%20%5Ctext%7BPr%7D(X%20=%20k)%20=%20%5Cfrac%7B%5Clambda%5E%7Bk%7De%5E%7B-%5Clambda%7D%7D%7Bk!%7D,%20%5Cquad%20k%20=%200,%201,%202,%20%5Cdots%0A"></p>
<p>O código abaixo faz o gráfico da função acima para diferentes valores de <img src="https://latex.codecogs.com/png.latex?%5Clambda">.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/emv-no-r/index_files/figure-html/unnamed-chunk-3-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Para montar a função de log-verossimilhança começamos com a função de verossimilhança de uma observação <img src="https://latex.codecogs.com/png.latex?i"> qualquer e depois montamos a distribuição conjunta dos dados. Lembrando que a função de verossimilhança da Poisson para uma observação <img src="https://latex.codecogs.com/png.latex?i"> é dada por:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20f(x_%7Bi%7D,%20%5Clambda)%20=%20%5Cfrac%7B%5Clambda%5E%7Bx_%7Bi%7D%7De%5E%7B-%5Clambda%7D%7D%7Bx_%7Bi%7D!%7D%0A"></p>
<p>Supondo que a amostra é de fato aleatória, a distribuição conjunta dos dados é simplesmente o produtório das distribuições individuais, isto é:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Balign%7D%0A%20%20%5Cprod_%7Bk%20=%201%7D%5E%7Bn%7D%20f(x_%7Bk%7D,%20%5Clambda)%20&amp;%20=%20%5Cprod_%7Bk%20=%201%7D%5E%7Bn%7D%20%5Cleft(%20%5Cfrac%7B%5Clambda%5E%7Bx_%7Bk%7D%7De%5E%7B-%5Clambda%7D%7D%7Bx_%7Bk%7D!%7D%20%5Cright)%20%5C%5C%0A%20%20&amp;%20=%20%5Cfrac%7B%5Clambda%5E%7B%5Csum%20x_%7Bk%7D%7D%20e%5E%7B-n%5Clambda%7D%7D%7B%5Cprod_%7Bk%20=%201%7D%5E%7Bn%7D(x_%7Bk%7D!)%7D%0A%5Cend%7Balign%7D%0A"></p>
<p>Aplicando log chegamos na função de log-verossimilhança:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Balign%7D%0A%20%20%5Cmathcal%7BL%7D(%5Clambda%20;%20x_%7B1%7D,%20%5Cdots%20,%20x_%7Bn%7D)%20&amp;%20=%20%5Ctext%7Bln%7D(%5Cprod_%7Bk%20=%201%7D%5E%7Bn%7D%20f(x_%7Bk%7D,%20%5Clambda))%20%5C%5C%0A%20%20&amp;%20=%20%5Ctext%7Bln%7D(%5Clambda%5E%7B%5Csum%20x_%7Bk%7D%7D)%20+%20%5Ctext%7Bln%7D(e%5E%7B-n%5Clambda%7D)%20-%20%5Ctext%7Bln%7D(%5Cprod_%7Bk%20=%201%7D%5E%7Bn%7D(x_%7Bk%7D!))%20%5C%5C%0A%20%20&amp;%20=%20%5Ctext%7Bln%7D(%5Clambda)%5Csum_%7Bk%20=%201%7D%5E%7Bn%7Dx_%7Bk%7D%20-%20n%5Clambda%20-%20%5Csum_%7Bk%20=%201%7D%5E%7Bn%7D%20%5Ctext%7Bln%7D(x_%7Bk%7D!)%0A%5Cend%7Balign%7D%0A"></p>
<p>Dada uma amostra aleatória <img src="https://latex.codecogs.com/png.latex?x_%7B1%7D,%20x_%7B2%7D,%20%5Cdots%20,%20x_%7Bn%7D"> buscamos o valor de <img src="https://latex.codecogs.com/png.latex?%5Clambda"> que maximiza a função acima. Isto é, temos o seguinte problema de otimização:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20%5Cunderset%7B%5Clambda%20%3E%200%7D%7B%5Ctext%7BMax%7D%7D%20%5Cquad%20%5Ctext%7Bln%7D(%5Clambda)%5Csum_%7Bk%20=%201%7D%5E%7Bn%7Dx_%7Bk%7D%20-%20n%5Clambda%20-%20%5Csum_%7Bk%20=%201%7D%5E%7Bn%7D%20%5Ctext%7Bln%7D(x_%7Bk%7D!)%0A"></p>
<p>onde os valores de <img src="https://latex.codecogs.com/png.latex?x_%7Bk%7D"> são os nossos dados observados. Para implementar este procedimento no R primeiro montamos a função log-verossimilhança no código abaixo. Em seguida vamos usar a função base <code>optim</code> que resolve problemas de minimização. Como a função <code>optim</code> serve para <em>minimizar</em> funções precisamos implementar o negativo da função de log-verossimilhança (lembrando que maximizar <img src="https://latex.codecogs.com/png.latex?f(x)"> é equivalente à minimizar <img src="https://latex.codecogs.com/png.latex?-f(x)">).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">ll_pois <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x, theta) {</span>
<span id="cb2-2">    n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(x)</span>
<span id="cb2-3">    ll <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log</span>(theta) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(x) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> n <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> theta <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">factorial</span>(x)))</span>
<span id="cb2-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>ll)</span>
<span id="cb2-5">}</span></code></pre></div>
</div>
<p>Vamos simular 1000 observações <img src="https://latex.codecogs.com/png.latex?x_%7Bi%7D%20%5Csim%20%5Ctext%7BPoisson%7D(%5Clambda%20=%205)">.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">amostra <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rpois</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lambda =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
</div>
<p>Podemos tornar mais claro o procedimento de estimação olhando para o gráfico da função. O código abaixo plota o gráfico da função de log-verossimilhança para valores de <img src="https://latex.codecogs.com/png.latex?%5Clambda"> no intervalo <img src="https://latex.codecogs.com/png.latex?%5B0,%2020%5D">. Note que a função parece atingir um máximo em torno de <img src="https://latex.codecogs.com/png.latex?5">, o valor verdadeiro do parâmetro.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">eixo_lambda <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">001</span>)</span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(eixo_lambda, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ll_pois</span>(amostra, eixo_lambda), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"l"</span>,</span>
<span id="cb4-3">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(lambda),</span>
<span id="cb4-4">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylab =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"L("</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>lambda<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">";"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>x[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">", ... ,"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>x[n]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">")"</span>),</span>
<span id="cb4-5">     <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Função log-verossimilhança da Poisson"</span>)</span>
<span id="cb4-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"indianred"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/emv-no-r/index_files/figure-html/unnamed-chunk-6-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Para estimar <img src="https://latex.codecogs.com/png.latex?%5Clambda"> usamos a função <code>optim</code>. É preciso definir algum valor inicial para que o otimizador numérico comece a procurar pelo máximo global. Em casos mais simples, de funções globalmente côncavas, esta escolha não apresenta grandes consequências. Em casos mais complicados, o resultado da estimação pode ser bastante sensível à escolha de valor inicial porque o otimizador pode cair em máximos/mínimos locais. No final do post discuto brevemente algumas soluções. Neste exemplo escolho arbitrariamente começar no valor <img src="https://latex.codecogs.com/png.latex?1">.</p>
<p>Neste caso também poderíamos usar o fato de que a esperança da Poisson é igual a <img src="https://latex.codecogs.com/png.latex?%5Clambda">, logo, pela Lei dos Grandes Números, a média amostral já deve estar próxima do verdadeiro valor de <img src="https://latex.codecogs.com/png.latex?%5Clambda">. Assim, poderíamos também ter escolhido <code>mean(amostra)</code> como valor inicial.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">optim</span>(</span>
<span id="cb5-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">par =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb5-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fn =</span> ll_pois,</span>
<span id="cb5-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> amostra,</span>
<span id="cb5-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BFGS"</span>,</span>
<span id="cb5-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hessian =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb5-7">  )</span>
<span id="cb5-8"></span>
<span id="cb5-9">fit</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$par
[1] 4.938

$value
[1] 2202.837

$counts
function gradient 
      34        9 

$convergence
[1] 0

$message
NULL

$hessian
         [,1]
[1,] 202.5112</code></pre>
</div>
</div>
<p>A saída da função traz várias informações técnicas sobre a otimização numérica. A estimativa pontual computada foi de <img src="https://latex.codecogs.com/png.latex?4.938"> - bastante próxima do verdadeiro valor do parâmetro. Usando a função <code>str</code> podemos observar a estrutura do objeto <code>fit</code> criado acima. As principais informações que podemos extrair são as estimativas dos parâmetros <code>fit$par</code> e a hessiana calculada nestes parâmetros <code>fit$hessian</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str</span>(fit)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 6
 $ par        : num 4.94
 $ value      : num 2203
 $ counts     : Named int [1:2] 34 9
  ..- attr(*, "names")= chr [1:2] "function" "gradient"
 $ convergence: int 0
 $ message    : NULL
 $ hessian    : num [1, 1] 203</code></pre>
</div>
</div>
<p>Usando a estimativa da hessiana podemos computar o erro-padrão da estimativa. Lembre que a variância assintótica do estimador de máxima verossimilhança é o inverso da matriz de informação de Fisher que pode ser expressa como o negativo do valor esperado da hessiana. Isto é, podemos encontrar a variância assintótica calculando o inverso da hessiana (como fizemos a minimização do negativo da função log-verossimilhança não precisamos calcular o negativo da hessiana).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">(ep <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>fit<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>hess))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]
[1,] 0.0702709</code></pre>
</div>
</div>
<p>Com o erro-padrão podemos calcular intervalos de confiança e estatística t.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">(ic <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(fit<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>par <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.96</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> ep, fit<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>par <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.96</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> ep))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.800269 5.075731</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">(est_t <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (fit<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>par <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> ep)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           [,1]
[1,] -0.8823045</code></pre>
</div>
</div>
<section id="usando-o-pacote-optimx" class="level2">
<h2 class="anchored" data-anchor-id="usando-o-pacote-optimx">Usando o pacote <code>optimx</code></h2>
<p>A função <code>optim</code> já é bastante antiga e um novo pacote, chamado <code>optimx</code>, foi criado. A ideia do pacote é de agregar várias funções de otimização que estavam espalhadas em diversos pacotes diferentes. As principais funções do pacote são <code>optimx</code> e <code>optimr</code>. Mais informações sobre o pacote podem ser encontradas <a href="https://rdrr.io/cran/optimx/">aqui</a>.</p>
<p>A sintaxe das funções é muito similar à sintaxe original do <code>optim</code>. O código abaixo faz o mesmo procedimento de estimação que o acima. Por padrão a função executa dois otimizadores: o BFGS e Nelder-Mead</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">optimx</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">par =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fn =</span> ll_pois, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> amostra))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                p1    value fevals gevals niter convcode kkt1 kkt2 xtime
Nelder-Mead 4.9375 2202.837     32     NA    NA        0   NA   NA 0.001
BFGS        4.9380 2202.837     34      9    NA        0   NA   NA 0.003</code></pre>
</div>
</div>
<p>Uma das principais vantagens do <code>optimx</code> é a possibilidade de usar vários métodos de otimização numérica numa mesma função.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">optimx</span>(</span>
<span id="cb17-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">par =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb17-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fn =</span> ll_pois,</span>
<span id="cb17-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> amostra,</span>
<span id="cb17-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nlm"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BFGS"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Rcgmin"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nlminb"</span>)</span>
<span id="cb17-6">  )</span>
<span id="cb17-7"></span>
<span id="cb17-8">fit</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             p1    value fevals gevals niter convcode kkt1 kkt2 xtime
nlm    4.937998 2202.837     NA     NA     8        0   NA   NA 0.001
BFGS   4.938000 2202.837     34      9    NA        0   NA   NA 0.002
Rcgmin 4.938000 2202.837     15     10    NA        0   NA   NA 0.002
nlminb 4.938000 2202.837     10     12     9        0   NA   NA 0.002</code></pre>
</div>
</div>
<p>Como este exemplo é bastante simples os diferentes métodos parecem convergir para valores muito parecidos.</p>
</section>
<section id="usando-o-pacote-maxlik" class="level2">
<h2 class="anchored" data-anchor-id="usando-o-pacote-maxlik">Usando o pacote maxLik</h2>
<p>A função maxLik (do pacote homônimo) traz algumas comodidades: primeiro, ela maximiza as funções de log-verossimilhança, ou seja, <em>não é preciso montar a função com sinal de menos</em> como fizemos acima; segundo, ela já <em>calcula erros-padrão e estatísticas-t dos coeficientes estimados</em>. Além disso, ela também facilita a implementação de gradientes e hessianas analíticos e conta com métodos de otimização bastante populares como o BHHH. Mais detalhes sobre a função e o pacote podem ser encontradas <a href="https://www.researchgate.net/publication/227354660_MaxLik_A_package_for_maximum_likelihood_estimation_in_R">aqui</a>.</p>
<p>Para usar a função precisamos primeiro reescrever a função log-verossimilhança, pois agora não precisamos mais buscar o negativo da função. Como o R já vem com as funções de densidade de várias distribuições podemos tornar o código mais enxuto usando o <code>dpois</code> que implementa a função densidade da Poisson. O argumento <code>log = TRUE</code> retorna as probabilidades <img src="https://latex.codecogs.com/png.latex?p"> como <img src="https://latex.codecogs.com/png.latex?log(p)">.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1">ll_pois <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x, theta) {</span>
<span id="cb19-2">    ll <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dpois</span>(x, theta, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">log =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb19-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(ll))</span>
<span id="cb19-4">}</span></code></pre></div>
</div>
<p>O comando abaixo executa a estimação. Note que a saída agora traz várias informações relevantes.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">maxLik</span>(ll_pois, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> amostra))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>--------------------------------------------
Maximum Likelihood estimation
Newton-Raphson maximisation, 8 iterations
Return code 8: successive function values within relative tolerance limit (reltol)
Log-Likelihood: -2202.837 
1  free parameters
Estimates:
     Estimate Std. error t value Pr(&gt; t)    
[1,]  4.93800    0.07617   64.83  &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
--------------------------------------------</code></pre>
</div>
</div>
<p>Podemos implementar manualmente o gradiente e a hessiana da função. Neste caso, a estimativa do parâmetro continua a mesma mas o erro-padrão diminui um pouco. Note que também podemos fornecer estas informações para a função <code>optimx</code>. Derivando a função de log-verossimilhança:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Balign%7D%0A%20%20%5Cfrac%7B%5Cpartial%20%5Cmathcal%7BL%7D(%5Clambda%20;%20x)%7D%7B%5Cpartial%5Clambda%7D%20&amp;%20=%20%5Cfrac%7B1%7D%7B%5Clambda%7D%5Csum_%7Bk%20=%201%7D%5E%7Bn%7Dx_%7Bk%7D%20-%20n%20%5C%5C%0A%20%20%5Cfrac%7B%5Cpartial%5E2%20%5Cmathcal%7BL%7D(%5Clambda%20;%20x)%7D%7B%5Cpartial%5Clambda%5E2%7D%20&amp;%20=%20-%5Cfrac%7B1%7D%7B%5Clambda%5E2%7D%5Csum_%7Bk%20=%201%7D%5E%7Bn%7Dx_%7Bk%7D%0A%5Cend%7Balign%7D%0A"></p>
<p>O código abaixo implementa o gradiente e a hessiana e faz a estimação. O valor estimado continua praticamente o mesmo, mas o erro-padrão fica menor.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1">grad_pois <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x, theta) {</span>
<span id="cb22-2">  (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> theta) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(x) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(x)</span>
<span id="cb22-3">  }</span>
<span id="cb22-4"></span>
<span id="cb22-5">hess_pois <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x, theta) {</span>
<span id="cb22-6">    <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> theta<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(x)</span>
<span id="cb22-7">}</span>
<span id="cb22-8"></span>
<span id="cb22-9">fit2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">maxLik</span>(</span>
<span id="cb22-10">  ll_pois,</span>
<span id="cb22-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">grad =</span> grad_pois,</span>
<span id="cb22-12">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hess =</span> hess_pois,</span>
<span id="cb22-13">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb22-14">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> amostra</span>
<span id="cb22-15">  )</span>
<span id="cb22-16"></span>
<span id="cb22-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(fit2)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>--------------------------------------------
Maximum Likelihood estimation
Newton-Raphson maximisation, 7 iterations
Return code 1: gradient close to zero (gradtol)
Log-Likelihood: -2202.837 
1  free parameters
Estimates:
     Estimate Std. error t value Pr(&gt; t)    
[1,]  4.93800    0.07027   70.27  &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
--------------------------------------------</code></pre>
</div>
</div>
</section>
</section>
<section id="exemplo-com-a-distribuição-normal" class="level1">
<h1>Exemplo com a distribuição normal</h1>
<p>A distribuição normal tem dois parâmetros: <img src="https://latex.codecogs.com/png.latex?%5Cmu"> e <img src="https://latex.codecogs.com/png.latex?%5Csigma">. Lembrando que o primeiro indica a média e o segundo a desvio-padrão. A função de densidade de probabilidade é dada por:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20f(x,%20%5Ctheta)%20=%20%5Cfrac%7B1%7D%7B%5Csqrt%7B2%5Cpi%5Csigma%5E%7B2%7D%7D%7D%5Ctext%7Bexp%7D%5Cleft(%5Cfrac%7B-(x%20-%20%5Cmu)%5E2%7D%7B2%5Csigma%5E%7B2%7D%7D%5Cright)%0A"></p>
<p>onde <img src="https://latex.codecogs.com/png.latex?%5Ctheta%20=%20(%5Cmu,%20%5Csigma)">. O gráfico abaixo mostra como o formato da função varia conforme o valor destes parâmetros. Basicamente, quando a média aumenta, estamos “deslocando para a direita” e quando aumentamos o desvio-padrão estamos “achatando” a distribuição.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/emv-no-r/index_files/figure-html/unnamed-chunk-16-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Lembrando que a função de distribuição de probabilidade da normal para uma observação <img src="https://latex.codecogs.com/png.latex?i"></p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20f(x_%7Bi%7D,%20%5Ctheta)%20=%20%5Cfrac%7B1%7D%7B%5Csqrt%7B2%5Cpi%5Csigma%5E%7B2%7D%7D%7De%5E%7B%5Cfrac%7B-(x_%7Bi%7D%20-%20%5Cmu)%5E2%7D%7B2%5Csigma%5E%7B2%7D%7D%7D%0A"></p>
<p>Fazendo o produtório da expressão acima para cada <img src="https://latex.codecogs.com/png.latex?i"></p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20%5Cprod_%7Bi%20=%201%7D%5E%7BN%7Df(x_%7Bi%7D,%20%5Ctheta)%20=%20(2%5Cpi%5Csigma%5E%7B2%7D)%5E%7B-%5Cfrac%7BN%7D%7B2%7D%7D%5Ctext%7Bexp%7D%5Cleft(%20-%5Cfrac%7B1%7D%7B2%5Csigma%5E%7B2%7D%7D%5Cprod_%7Bi%20=%201%7D%5E%7BN%7D(x_%7Bi%7D%20-%20%5Cmu)%5E2%5Cright)%0A"></p>
<p>e agora passando log, temos:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20L(x_%7Bi%7D,%20%5Ctheta)%20=%20-%5Cfrac%7BN%7D%7B2%7D%5Ctext%7Bln%7D(2%5Cpi)%20-N%5Ctext%7Bln%7D(%5Csigma)%20-%5Cfrac%7B1%7D%7B2%5Csigma%5E%7B2%7D%7D%5Csum_%7Bi%20=%201%7D%5E%7BN%7D(x_%7Bi%7D%20-%20%5Cmu)%5E%7B2%7D%0A"></p>
<p>Montamos a função log-verossimilhança usando a função <code>dnorm</code></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1">ll_norm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(theta) {</span>
<span id="cb24-2">    ll <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dnorm</span>(x, theta[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>], theta[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">log =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb24-3">    <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(ll)</span>
<span id="cb24-4">}</span></code></pre></div>
</div>
<p>Vamos simular uma amostra aleatória <img src="https://latex.codecogs.com/png.latex?x_%7B1%7D,%20x_%7B2%7D,%20%5Cdots,%20x_%7B1000%7D"> onde cada <img src="https://latex.codecogs.com/png.latex?x_%7Bi%7D"> segue uma distribuição normal com média <img src="https://latex.codecogs.com/png.latex?2"> e desvio-padrão <img src="https://latex.codecogs.com/png.latex?3"> (i.e., variância <img src="https://latex.codecogs.com/png.latex?9">).</p>
<p>Primeiro vamos usar a função <code>optimx</code></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># warnings por causa dos valores negativos no log</span></span>
<span id="cb25-2">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb25-3">(fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">optimx</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">par =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fn =</span> ll_norm, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BFGS"</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           p1       p2    value fevals gevals niter convcode kkt1 kkt2 xtime
BFGS 2.138082 3.058111 2536.736     47     20    NA        0 TRUE TRUE 0.003</code></pre>
</div>
</div>
<p>Note que a função retorna mensagens de erro indicando que a função retornou <em>NaNs</em>. Isto acontece porque o otimizador experimenta valores não-positivos para <img src="https://latex.codecogs.com/png.latex?%5Csigma"> e isto não é admissível pois <img src="https://latex.codecogs.com/png.latex?%5Ctext%7Bln%7D(%5Csigma)">, que aparece no segundo termo da equação acima, não é definido para <img src="https://latex.codecogs.com/png.latex?%5Csigma%20%3C%200">. Além disso, <img src="https://latex.codecogs.com/png.latex?%5Csigma"> não pode ser igual a zero pois ele aparece no denominador do último termo à direita da expressão da log-verossimilhança.</p>
<p>Intuitivamente isto é bastante óbvio: <img src="https://latex.codecogs.com/png.latex?%5Csigma"> representa o desvio-padrão da distribuição e <img src="https://latex.codecogs.com/png.latex?%5Csigma%5E%7B2%7D"> a sua variância: não podemos ter valores negativos ou nulos para estas expressões.</p>
<p>Podemos restringir os valores dos parâmetros usando os argumentos <code>upper</code> e <code>lower</code> para evitar as mensagens de <code>warning</code>, mas, na prática, isto não costuma fazer diferença no resultado final da estimação. Note que podemos deixar a restrição livre usando <code>Inf</code> e <code>-Inf</code> que correspondem a <img src="https://latex.codecogs.com/png.latex?%5Cinfty"> e <img src="https://latex.codecogs.com/png.latex?-%5Cinfty">.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">optimx</span>(</span>
<span id="cb27-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">par =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb27-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fn =</span> ll_norm,</span>
<span id="cb27-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"L-BFGS-B"</span>,</span>
<span id="cb27-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">upper =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">Inf</span>, <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">Inf</span>),</span>
<span id="cb27-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lower =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">Inf</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb27-7">  )</span>
<span id="cb27-8"></span>
<span id="cb27-9">fit</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               p1       p2    value fevals gevals niter convcode kkt1 kkt2
L-BFGS-B 2.138093 3.058112 2536.736     11     11    NA        0 TRUE TRUE
         xtime
L-BFGS-B 0.001</code></pre>
</div>
</div>
</section>
<section id="propriedades-dos-estimadores-de-mv" class="level1">
<h1>Propriedades dos estimadores de MV</h1>
<p>A teoria dos estimadores de máxima verossimilhança nos garante que eles são <em>consistentes</em> (i.e.&nbsp;que eles aproximam o valor verdadeiro dos parâmetros) e <em>normalmente assintóticos</em> (a distribuição assintótica segue uma distribuição normal) desde que algumas condições de regularidade sejam atentdidas.</p>
<p>Podemos demonstrar ambas as propriedades fazendo algumas simulações no <code>R</code>.</p>
<section id="consistência" class="level2">
<h2 class="anchored" data-anchor-id="consistência">Consistência</h2>
<p>Vamos montar um experimento simples: simulamos 5000 amostras aleatórias de tamanho 1000 seguindo uma distribuição <img src="https://latex.codecogs.com/png.latex?N(2,%203)">; computamos as estimativas para <img src="https://latex.codecogs.com/png.latex?%5Cmu"> e <img src="https://latex.codecogs.com/png.latex?%5Csigma"> e suas respectivas variâncias assintóticas e depois analisamos suas propriedades.</p>
<ol type="1">
<li>Simular uma amostra segundo uma distribuição.</li>
<li>Estimata os parâmetros da distribuição.</li>
<li>Calcula a variância assintótica dos estimadores.</li>
<li>Repete 5000 vezes os passos 1-3.</li>
</ol>
<p>O código abaixo implementa exatamente este experimento. Note que a matriz de informação de Fisher é aproximada pela hessiana.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1">r <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5000</span></span>
<span id="cb29-2">n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span></span>
<span id="cb29-3"></span>
<span id="cb29-4">estimativas <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">matrix</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ncol =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nrow =</span> r)</span>
<span id="cb29-5"></span>
<span id="cb29-6"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>r) {</span>
<span id="cb29-7">    x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb29-8">    </span>
<span id="cb29-9">    fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">optimr</span>(</span>
<span id="cb29-10">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">par =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb29-11">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fn =</span> ll_norm,</span>
<span id="cb29-12">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BFGS"</span>,</span>
<span id="cb29-13">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hessian =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb29-14">      )</span>
<span id="cb29-15">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Guarda o valor estimado do parâmetro</span></span>
<span id="cb29-16">    estimativas[i, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> fit<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>par</span>
<span id="cb29-17">    estimativas[i, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">diag</span>(n <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">solve</span>(fit<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>hess))</span>
<span id="cb29-18">}</span></code></pre></div>
</div>
<p>A <em>consistência</em> dos estimadores <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Ctheta%7D_%7BMV%7D"> significa que eles aproximam os valores verdadeiros do parâmetros <img src="https://latex.codecogs.com/png.latex?%5Ctheta_%7B0%7D"> à medida que aumenta o tamanho da amostra. Isto é, se tivermos uma amostra grande <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BN%7D%20%5Cto%20%5Cinfty"> então podemos ter confiança de que nossos estimadores estão muito próximos dos valores verdadeiros dos parâmetros <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Ctheta%7D_%7B%5Ctext%7BMV%7D%7D%20%5Cto%20%5Ctheta_%7B0%7D"></p>
<p>O código abaixo calcula a média das estimativas para cada parâmetro - lembrando que <img src="https://latex.codecogs.com/png.latex?%5Cmu_%7B0%7D%20=%202"> e que <img src="https://latex.codecogs.com/png.latex?%5Csigma_%7B0%7D%20=%203">. Além disso, o histograma das estimativas mostra como as estimativas concentram-se em torno do valor verdadeiro do parâmetro (indicado pela linha vertical).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># | fig-width: 10</span></span>
<span id="cb30-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mfrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))</span>
<span id="cb30-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Consistência dos estimadores de MV</span></span>
<span id="cb30-4">mu <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> estimativas[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]; sigma <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> estimativas[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]</span>
<span id="cb30-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(mu)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.000883</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(sigma)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.997335</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(mu, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Estimativas para "</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">~</span>mu), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlim =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.5</span>))</span>
<span id="cb34-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"indianred"</span>)</span>
<span id="cb34-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(sigma, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Estimativas para "</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">~</span>sigma), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlim =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.7</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.3</span>))</span>
<span id="cb34-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"indianred"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/emv-no-r/index_files/figure-html/unnamed-chunk-21-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="normalmente-assintótico" class="level2">
<h2 class="anchored" data-anchor-id="normalmente-assintótico">Normalmente assintótico</h2>
<p>Dizemos que os estimadores de máxima verossimilhança são normalmente assintóticos porque a sua distribuição assintótica segue uma normal padrão. Especificamente, temos que:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0Az_%7B%5Ctheta%7D%20=%20%5Csqrt%7BN%7D%5Cfrac%7B%5Chat%7B%5Ctheta%7D_%7BMV%7D%20-%20%5Ctheta%7D%7B%5Csqrt%7B%5Ctext%7BV%7D_%7Bast%7D%7D%7D%20%5Cto%20%5Cmathbb%7BN%7D(0,%201)%0A"></p>
<p>onde <img src="https://latex.codecogs.com/png.latex?%5Ctext%7BV%7D_%7Bast%7D"> é a variância assintótica do estimador. O código abaixo calcula a expressão acima para os dois parâmetros e apresenta o histograma dos dados com uma normal padrão superimposta.</p>
<p>No loop acima usamos o fato que a matriz de informação de Fisher pode ser estimada pela hessiana. O código abaixo calcula a expressão acima para os dois parâmetros e apresenta o histograma dos dados com uma normal padrão superimposta.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Normalidade assintótica</span></span>
<span id="cb35-2"></span>
<span id="cb35-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define objetos para facilitar a compreensão</span></span>
<span id="cb35-4">mu_hat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> estimativas[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb35-5">sigma_hat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> estimativas[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]</span>
<span id="cb35-6">var_mu_hat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> estimativas[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>]</span>
<span id="cb35-7">var_sg_hat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> estimativas[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>]</span>
<span id="cb35-8"></span>
<span id="cb35-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Centra a estimativa</span></span>
<span id="cb35-10">mu_centrado <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mu_hat <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> </span>
<span id="cb35-11">sigma_centrado <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sigma_hat <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb35-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Computa z_mu z_sigma</span></span>
<span id="cb35-13">mu_normalizado <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(n) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> mu_centrado <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(var_mu_hat)</span>
<span id="cb35-14">sigma_normalizado <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(n) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> sigma_centrado <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(var_sg_hat)</span></code></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Monta o gráfico para mu</span></span>
<span id="cb36-2"></span>
<span id="cb36-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Eixo x</span></span>
<span id="cb36-4">grid_x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.01</span>)</span>
<span id="cb36-5"></span>
<span id="cb36-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(</span>
<span id="cb36-7">  mu_normalizado,</span>
<span id="cb36-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Histograma de 5000 simulações para z"</span>[mu]),</span>
<span id="cb36-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb36-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlim =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>),</span>
<span id="cb36-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fd"</span>,</span>
<span id="cb36-12">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"z"</span>[mu]),</span>
<span id="cb36-13">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Densidade"</span></span>
<span id="cb36-14">  )</span>
<span id="cb36-15"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lines</span>(grid_x, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dnorm</span>(grid_x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dodgerblue"</span>)</span>
<span id="cb36-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">legend</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"topright"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lty =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dodgerblue"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Normal (0, 1)"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/emv-no-r/index_files/figure-html/unnamed-chunk-23-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Monta o gráfico para sigma2</span></span>
<span id="cb37-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(</span>
<span id="cb37-3">  sigma_normalizado,</span>
<span id="cb37-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Histograma de 5000 simulações para z"</span>[sigma]),</span>
<span id="cb37-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb37-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlim =</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>),</span>
<span id="cb37-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"fd"</span>,</span>
<span id="cb37-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"z"</span>[sigma]),</span>
<span id="cb37-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Densidade"</span></span>
<span id="cb37-10">  )</span>
<span id="cb37-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lines</span>(grid_x, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dnorm</span>(grid_x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dodgerblue"</span>)</span>
<span id="cb37-12"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">legend</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"topright"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lty =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dodgerblue"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Normal (0, 1)"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/emv-no-r/index_files/figure-html/unnamed-chunk-24-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="escolha-de-valores-inicias" class="level2">
<h2 class="anchored" data-anchor-id="escolha-de-valores-inicias">Escolha de valores inicias</h2>
<p>Como comentei acima, o método de estimação por MV exige que o usuário escolha valores iniciais (chutes) para os parâmetros que se quer estimar.</p>
<p>O exemplo abaixo mostra o caso em que a escolha de valores iniciais impróprios leva a estimativas muito ruins.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># sensível a escolha de valores inicias</span></span>
<span id="cb38-2">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mean =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)</span>
<span id="cb38-3">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">optim</span>(</span>
<span id="cb38-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">par =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb38-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fn =</span> ll_norm,</span>
<span id="cb38-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BFGS"</span>,</span>
<span id="cb38-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hessian =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb38-8">  )</span>
<span id="cb38-9"></span>
<span id="cb38-10">fit</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$par
[1] 618.6792 962.0739

$value
[1] 7984.993

$counts
function gradient 
     107      100 

$convergence
[1] 1

$message
NULL

$hessian
             [,1]          [,2]
[1,]  0.001070703 -0.0013531007
[2,] -0.001353101  0.0001884928</code></pre>
</div>
</div>
<p>Note que as estimativas estão muito distantes dos valores corretos <img src="https://latex.codecogs.com/png.latex?%5Cmu%20=%2015"> e <img src="https://latex.codecogs.com/png.latex?%5Csigma%20=%204">. Uma das soluções, já mencionada acima, é de usar os momentos da distribuição como valores iniciais.</p>
<p>O código abaixo usa os momentos empíricos como valores inicias para <img src="https://latex.codecogs.com/png.latex?%5Cmu"> e <img src="https://latex.codecogs.com/png.latex?%5Csigma">:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Balign%7D%0A%20%20%5Cmu_%7Binicial%7D%20&amp;%20=%20%5Cfrac%7B1%7D%7Bn%7D%5Csum_%7Bi%20=%201%7D%5E%7Bn%7Dx_%7Bi%7D%20%5C%5C%0A%20%20%5Csigma_%7Binicial%7D%20&amp;%20=%20%5Csqrt%7B%5Cfrac%7B1%7D%7Bn%7D%20%5Csum_%7Bi%20=%201%7D%5E%7Bn%7D%20(x_%7Bi%7D%20-%20%5Cmu_%7Binicial%7D)%5E2%7D%0A%5Cend%7Balign%7D%0A"></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1">(chute_inicial <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(x), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">var</span>(x))))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 14.859702  3.930849</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1">(est <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">optimx</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">par =</span> chute_inicial, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fn =</span> ll_norm))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  p1       p2    value fevals gevals niter convcode kkt1 kkt2
Nelder-Mead 14.85997 3.929097 2787.294     47     NA    NA        0 TRUE TRUE
BFGS        14.85970 3.928884 2787.294     15      2    NA        0 TRUE TRUE
            xtime
Nelder-Mead 0.001
BFGS        0.001</code></pre>
</div>
</div>
<p>Agora as estimativas estão muito melhores. Outra opção é experimentar com otimizadores diferentes. Aqui a função <code>optimx</code> se prova bastante conveniente pois admite uma grande variedade de métodos de otimizãção.</p>
<p>Note como os métodos BFGS e CG retornam valores muito distantes dos verdadeiros. Já o método <code>bobyqa</code> retorna um valor corretor para o parâmetro da média, mas erra no parâmetro da variânica. Já os métodos <code>nlminb</code> e <code>Nelder-Mead</code> ambos retornam os valores corretos.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Usando outros métodos numéricos</span></span>
<span id="cb44-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">optimx</span>(</span>
<span id="cb44-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">par =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb44-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fn =</span> ll_norm,</span>
<span id="cb44-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BFGS"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Nelder-Mead"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CG"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nlminb"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bobyqa"</span>)</span>
<span id="cb44-6">  )</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   p1         p2    value fevals gevals niter convcode  kkt1
BFGS        618.67917 962.073907 7984.993    107    100    NA        1  TRUE
Nelder-Mead  14.85571   3.929621 2787.294     83     NA    NA        0  TRUE
CG           46.43586 628.570987 7358.601    204    101    NA        1  TRUE
nlminb       14.85970   3.928883 2787.294     23     47    19        0  TRUE
bobyqa       15.20011   8.993240 3211.556    109     NA    NA        0 FALSE
             kkt2 xtime
BFGS        FALSE 0.006
Nelder-Mead  TRUE 0.001
CG          FALSE 0.008
nlminb       TRUE 0.001
bobyqa      FALSE 0.036</code></pre>
</div>
</div>
<p>Vale notar também alguns detalhes técnicos da saída. Em particular, <code>convcode == 0</code> significa que o otimizador conseguiu convergir com sucesso, enquanto <code>convcode == 1</code> indica que o otimizador chegou no límite máximo de iterações sem convergir. Vemos que tanto o BFGS e o CG falharam em convergir e geraram os piores resultados.</p>
<p>Já o <code>kkt1</code> e <code>kkt2</code> verificam as condições de Karush-Kuhn-Tucker (às vezes apresentadas apenas como condições de Kuhn-Tucker). Resumidamente, a primeira condição verifica a parte <em>necessária</em> do teorema enquanto a segunda condição verifica a parte <em>suficiente</em>. Note que o <code>bobyqa</code> falha em ambas as condições (pois ele não é feito para este tipo de problema).</p>
<p>Os métodos que retornam os melhores valores, o <code>Nelder-Mead</code> e <code>nlminb</code> são os únicos que convergiram com sucesso e que atenderam a ambas as condições de KKT. Logo, quando for comparar os resltados de vários otimizadores distintos, vale estar atento a estes valores.</p>
<p>Mais detalhes sobre os métodos podem ser encontrados na página de ajuda da função <code>?optimx</code>.</p>


</section>
</section>

 ]]></description>
  <category>econometria</category>
  <category>tutorial-R</category>
  <category>repost</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/emv-no-r/index.html</guid>
  <pubDate>Sat, 01 Feb 2020 03:00:00 GMT</pubDate>
  <media:content url="https:://www.restateinsight.com/static/emv-r.svg" medium="image" type="image/svg+xml"/>
</item>
<item>
  <title>Aquecimento Global</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/aquecimento-global/index.html</link>
  <description><![CDATA[ 




<p>Uma recente edição da revista inglesa <a href="https://www.economist.com/">The Economist</a> exibe uma <a href="https://pbs.twimg.com/media/EE0hWYAXUAATHvv?format=jpg&amp;name=4096x4096">série de listras coloridas em sua capa</a>. Elas formam um degradê que vai de um azul escuro até um vermelho intenso. Cada listra representa a temperatura de um ano e a linha do tempo vai desde o 1850 até o presente. A mensagem é bastante clara: o planeta esta cada ano mais quente e é nos anos recentes que estão concentradas as maiores altas de temperatura. Esta imagem é creditada a <a href="http://www.met.reading.ac.uk/~ed/home/index.php">Ed Hawkings</a>, editor do <a href="https://www.climate-lab-book.ac.uk/2018/warming-stripes/">Climate Lab Book</a>.</p>
<p><img src="https:://www.restateinsight.com/posts/general-posts/aquecimento-global/https:/bpb-eu-w2.wpmucdn.com/blogs.reading.ac.uk/dist/3/187/files/2018/05/globalcore.png" class="center" width="640px" height="480px"></p>
<p>Para ser preciso, a imagem não plota a temperatura de cada ano, mas sim o quanto cada ano se desvia da temperatura média do período 1971-2000. Isto é, anos acima dessa média têm um valor positivo, valores abaixo dessa média, valores negativos. Esta é uma forma bastante comum de representar este tipo de dado climático. De imediato, quando vi a imagem me ocorreu que seria bastante simples reproduzir uma versão aproximada dela usando o R.</p>
<div class="cell">

</div>
<section id="o-código" class="level2">
<h2 class="anchored" data-anchor-id="o-código">O código</h2>
<p>O código necessário para gerar a imagem é bastante enxuto. Vou descrever em linhas gerais o que ele faz:</p>
<p>Primeiro carrego dois pacotes (linhas 1, 2), depois a série de temperatura (linha 3), faço algumas transformações nos dados (linhas 4, 5) e, por fim, ploto os dados (linhas 6, 7, 8). O resultado inicial já é bastante satisfatório e a partir destas poucas linhas de código pode-se chegar num resultado muito próximo ao da imagem original. Vale notar que a imagem fica um pouco diferente da original porque eu uso uma <a href="http://data.giss.nasa.gov/gistemp/graphs/">base de dados diferente</a>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Carrega pacotes</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(astsa)</span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Carrega a base de dados 'globtemp'</span></span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"globtemp"</span>)</span>
<span id="cb1-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Converte o objeto para data.frame</span></span>
<span id="cb1-7">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ano =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">time</span>(globtemp)),</span>
<span id="cb1-8"> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">temp =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.numeric</span>(globtemp))</span>
<span id="cb1-9"></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Monta o gráfico</span></span>
<span id="cb1-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> ano, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> temp)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-12"> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_tile</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb1-13"> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_gradient2</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">low =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#104e8b"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mid =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#b9d3ee"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">high =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ff0000"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/aquecimento-global/index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="os-detalhes-do-código" class="level2">
<h2 class="anchored" data-anchor-id="os-detalhes-do-código">Os detalhes do código</h2>
<p>Vou explicar cada linha de código para ser didático. O R funciona, grosso modo, como um repositório de pacotes: cada pacote contem funções e, às vezes, bases de dados. O primeiro pacote que carrego é o <code>ggplot2</code>. Ele serve para fazer visualizações de dados. O pacote <code>astsa</code> traz várias funções para fazer análise de séries de tempo, mas eu carrego ele somente para usar a base de dados <code>globtemp</code>, que traz informação sobre a temperatura anual da terra coletada pela NASA.</p>
<p>O objeto <code>globtemp</code> é uma série de tempo (um objeto da classe <code>ts</code>), que tem alguns atributos especiais. Um deles pode ser acesado pela função <code>time</code> que extrai um vetor numérico com as datas desta série de tempo. No código abaixo mostro os primeiros dez valores do <code>time(globtemp)</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">class</span>(globtemp)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ts"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">time</span>(globtemp)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1880 1881 1882 1883 1884 1885 1886 1887 1888 1889</code></pre>
</div>
</div>
<p>Para extrair somente os valores da série, uso a função <code>as.numeric</code>, que converte o vetor de <code>ts</code> para <code>numeric</code> (numérico). Este tipo de função é bastante comum já que frequentemente é preciso trocar a classe de um objeto. O objetivo destes primeiros passos é de inserir as informações do <code>globtemp</code> num <code>data.frame</code> em que a data aparece na primeira coluna e os valores da série são armazenados na segunda coluna. O procedimento pode parecer um tanto trabalhoso (e acho que é mesmo), mas é o jeito. Um <code>data.frame</code> é como uma tabela com dados. Este é um objeto bastante típico em análise de dados e é necessário para usar a função <code>ggplot</code> que vai fazer o gráfico. Abaixo pode-se ver as primeiras linhas desta tabela.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(df)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   ano  temp
1 1880 -0.20
2 1881 -0.11
3 1882 -0.10
4 1883 -0.20
5 1884 -0.28
6 1885 -0.31</code></pre>
</div>
</div>
<p>Agora que tenho os dados no formato apropriado posso usar o <code>ggplot</code>. O argumento que pode ser um pouco confuso é o <code>aes</code>. Nele especifica-se quais dados serão mapeados no gráfico. Depois disso adicionamos um <code>geom</code>. Há vários tipos de geom (<code>geom_line</code>, <code>geom_bar</code>, <code>geom_histogram</code>, etc.) e cada um deles produz uma imagem diferente. O <code>geom_tile</code> faz um pequeno quadrado. Para que a função consiga desenhar o quadrado é preciso informar uma variável <code>x</code> e uma variável <code>y</code>. Além disso, também especifico <code>fill = temp</code>. O <code>fill</code> se refere à cor que vai preencher (<em>fill</em>) o quadrado. Como especifico <code>fill = temp</code> a cor do quadrado vai representar a variável <code>temp</code> (temperatura).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> ano, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> temp)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-2"> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_tile</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/aquecimento-global/index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>O resultado é exatamente como o esperado, mas ainda é preciso mudar a escala de cores. Faço isto com o <code>scale_fill_gradient2</code>. Aqui cada termo tem um signficado: <code>scale_fill</code> pois estamos mudando a escala do <code>fill</code> (outra opção seria <code>scale_color</code> que muda a escala do <code>color</code>). <code>scale_fill_gradient</code> pois queremos um gradiente (degradê) de cores. Por fim, o <code>2</code> é adicionado no final pois queremos um escala que diferencie <em>dois</em> grupos distintos: temperaturas acima da média em vermelho, temperaturas abaixo da média em azul. A escala de cores é determinada pelos argumentos <code>low</code>, <code>mid</code> e <code>high</code>.</p>
<p>Os valores negativos serão coloridos pelo <code>low</code>, os próximos de zero pelo <code>mid</code> e os valores grandes pelo <code>high</code>. Abaixo escrevo as cores em hexa-decimal, mas elas podem ser lidas, essencialmente, como: azul-escuro, cinza-azulado-claro e vermelho-escuro.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> ano, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> temp)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-2"> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_tile</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb9-3"> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_gradient2</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">low =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#104e8b"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mid =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#b9d3ee"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">high =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ff0000"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/aquecimento-global/index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Como comentei acima, pode-se melhorar o gráfico acima adicionando outros elementos e detalhes. A versão final que fiz do gráfico fica no código abaixo.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Pacote para carregar fontes externas no R</span></span>
<span id="cb10-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Necessário para utilizar 'Georgia' no gráfico</span></span>
<span id="cb10-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(extrafont)</span>
<span id="cb10-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Data.frames auxiliares para plotar as anotações de texto</span></span>
<span id="cb10-5">df_aux_title <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1930</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"The Climate Issue"</span>)</span>
<span id="cb10-6">df_aux_anos <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb10-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1880</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1920</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1960</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span>),</span>
<span id="cb10-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1890</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1925</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1960</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1995</span>)</span>
<span id="cb10-9">  )</span>
<span id="cb10-10"></span>
<span id="cb10-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_tile</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> ano, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> temp)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(</span>
<span id="cb10-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df_aux_anos,</span>
<span id="cb10-15">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> label),</span>
<span id="cb10-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>,</span>
<span id="cb10-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>,</span>
<span id="cb10-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>,</span>
<span id="cb10-19">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Georgia"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(</span>
<span id="cb10-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df_aux_title,</span>
<span id="cb10-22">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1950</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> label),</span>
<span id="cb10-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Georgia"</span>,</span>
<span id="cb10-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>,</span>
<span id="cb10-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-26">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_gradientn</span>(</span>
<span id="cb10-28">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#213A82"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#3B60CE"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#8DA2E2"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#DE2E02"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#9d0208"</span>)</span>
<span id="cb10-29">   ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-30">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guides</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-31">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-32">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb10-33">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb10-34">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb10-35">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb10-36">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>),</span>
<span id="cb10-37">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.margin =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">margin</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>))</span>
<span id="cb10-38">    )</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/aquecimento-global/index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="624"></p>
</figure>
</div>
</div>
</div>


</section>

 ]]></description>
  <category>data-visualization</category>
  <category>tutorial-R</category>
  <category>repost</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/aquecimento-global/index.html</guid>
  <pubDate>Fri, 10 Jan 2020 03:00:00 GMT</pubDate>
  <media:content url="https:://www.restateinsight.com/static/climate_issue.svg" medium="image" type="image/svg+xml"/>
</item>
<item>
  <title>OLS com matrizes</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/ols-com-matrizes/index.html</link>
  <description><![CDATA[ 




<p>Uma forma instrutiva de entender o modelo de regressão linear é expressando ele em forma matricial. Os cursos introdutórios de econometria costumam omitir esta abordagem e expressam todas as derivações usando somatórios, deixando a abordagem matricial para cursos mais avançados. É bastante simples computar uma regressão usando apenas matrizes no R.</p>
<p>De fato, um dos objetos fundamentais do R é a e muitas das operações matriciais (decomposições, inversa, transposta, etc.) já estão implementadas em funções base. Uma var <img src="https://latex.codecogs.com/png.latex?k"> .</p>
<p>Neste post vou mostrar como fazer uma regressão linear usando somente matrizes no R. Além disso, vou computar algumas estatísticas típicas (t, F)</p>
<p>O modelo linear é da forma</p>
<p><img src="https://latex.codecogs.com/png.latex?%0Ay_%7Bt%7D%20=%20x%5E%5Cintercal_%7Bt%7D%20%5Cbeta%20+%20e_%7Bt%7D%0A"></p>
<p>onde <img src="https://latex.codecogs.com/png.latex?x%5E%5Cintercal"> é o vetor transposto de <img src="https://latex.codecogs.com/png.latex?x"> . É importante sempre ter em mente a dimensão destes vetores. O vetor <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D"> é <img src="https://latex.codecogs.com/png.latex?n%5Ctimes1"> onde <img src="https://latex.codecogs.com/png.latex?n"> representa o número de observações na amostra. O vetor <img src="https://latex.codecogs.com/png.latex?%5Cbeta"> é <img src="https://latex.codecogs.com/png.latex?k%5Ctimes1"> onde <img src="https://latex.codecogs.com/png.latex?k"> é o número de regressores (ou variáveis explicativas). Como há <img src="https://latex.codecogs.com/png.latex?n"> observações para cada uma dos <img src="https://latex.codecogs.com/png.latex?k"> regressores, <img src="https://latex.codecogs.com/png.latex?x"> é <img src="https://latex.codecogs.com/png.latex?k%5Ctimes1"> ; o detalhe é que <img src="https://latex.codecogs.com/png.latex?x%20=%20(1%20%5C,%20%5C,x_%7B1%7D%20%5C,%20%5Cdots%20%5C,x_%7Bk-1%7D)"> , onde cada <img src="https://latex.codecogs.com/png.latex?x_%7Bi%7D"> é <img src="https://latex.codecogs.com/png.latex?n%5Ctimes%201"> e <img src="https://latex.codecogs.com/png.latex?1"> é um vetor de uns <img src="https://latex.codecogs.com/png.latex?n%5Ctimes1"> . Finalmente, <img src="https://latex.codecogs.com/png.latex?e_%7Bt%7D"> é <img src="https://latex.codecogs.com/png.latex?n%5Ctimes1"> . Temos então que:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Bpmatrix%7D%0Ay_%7B1%7D%20%5C%5C%0Ay_%7B2%7D%5C%5C%0A%5Cvdots%5C%5C%0Ay_%7Bn%7D%0A%5Cend%7Bpmatrix%7D=%0A%5Cbegin%7Bpmatrix%7D%0A1%5C%5C%0Ax_%7B1%7D%5C%5C%0A%5Cvdots%5C%5C%0Ax_%7Bk-1%7D%0A%5Cend%7Bpmatrix%7D%5E%5Cintercal%0A%5Cbegin%7Bpmatrix%7D%0A%5Cbeta_%7B0%7D%5C%5C%0A%5Cbeta_%7B1%7D%5C%5C%0A%5Cvdots%5C%5C%0A%5Cbeta_%7Bk-1%7D%0A%5Cend%7Bpmatrix%7D+%0A%5Cbegin%7Bpmatrix%7D%0Ae_%7B1%7D%5C%5C%0Ae_%7B2%7D%5C%5C%0A%5Cvdots%5C%5C%0Ae_%7Bn%7D%0A%5Cend%7Bpmatrix%7D%0A"></p>
<p>onde:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Bbmatrix%7D%0Ax_%7B1%7D%20&amp;%20=%20(x_%7B11%7D%20&amp;%20x_%7B12%7D%20&amp;%20x_%7B13%7D%20&amp;%20%5Cdots%20&amp;%20x_%7B1n%7D)%5C%5C%0Ax_%7B2%7D%20&amp;%20=%20(x_%7B21%7D%20&amp;%20x_%7B22%7D%20&amp;%20x_%7B23%7D%20&amp;%20%5Cdots%20&amp;%20x_%7B2n%7D)%5C%5C%0Ax_%7B3%7D%20&amp;%20=%20(x_%7B31%7D%20&amp;%20x_%7B32%7D%20&amp;%20x_%7B33%7D%20&amp;%20%5Cdots%20&amp;%20x_%7B3n%7D)%5C%5C%0A%5Cvdots%5C%5C%0Ax_%7Bk-1%7D%20&amp;%20=%20(x_%7B(k-1)1%7D%20&amp;%20x_%7B(k-1)2%7D%20&amp;%20x_%7B(k-1)3%7D%20&amp;%20%5Cdots%20&amp;%20x_%7B(k-1)n%7D)%0A%5Cend%7Bbmatrix%7D%0A"></p>
<p>Queremos encontrar o vetor <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Cbeta%7D"> que minimiza o a soma do quadrado dos erros, isto é, que minimiza</p>
<p><img src="https://latex.codecogs.com/png.latex?%0AS(%5Cbeta)%20=%20%5Csum_%7Bt%20=%201%7D%5E%7BT%7D(y_%7Bt%7D%20-%20x%5E%5Cintercal_%7Bt%7D%5Cbeta)%5E%7B2%7D%0A"></p>
<p>Encontramos o ponto crítico derivando a expressão acima e igualando-a a zero. O resultado é o conhecido estimador de mínimos quadrados:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Chat%7B%5Cbeta%7D%20=%20%5Cleft%20(%20%5Csum_%7Bt%20=%201%7D%5E%7BT%7Dx_%7Bt%7Dx_%7Bt%7D%5E%7B%5E%5Cintercal%7D%20%5Cright%20)%5E%7B-1%7D%20%5Csum_%7Bt%20=%201%7D%5E%7BT%7Dx_%7Bt%7Dy_%7Bt%7D%0A"></p>
<p>Para reescrever as equações acima usando matrizes usamos os seguintes fatos:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Csum_%7Bt%20=%201%7D%5E%7BT%7Dx_%7Bt%7Dx_%7Bt%7D%5E%7B%5E%5Cintercal%7D%20=%20X%5E%5Cintercal%20X%0A"></p>
<p>onde <img src="https://latex.codecogs.com/png.latex?X"> é uma matriz <img src="https://latex.codecogs.com/png.latex?n%20%5Ctimes%20k"></p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Csum_%7Bt%20=%201%7D%5E%7BT%7Dx_%7Bt%7Dy_%7Bt%7D%20=%20X%5E%5Cintercal%20y%0A"></p>
<p>onde <img src="https://latex.codecogs.com/png.latex?X%5E%5Cintercal%20y"> é <img src="https://latex.codecogs.com/png.latex?k%20%5Ctimes%201"> . Lembre-se que uma hipótese do modelo linear é de que <img src="https://latex.codecogs.com/png.latex?X"> é uma matriz de posto completo, logo <img src="https://latex.codecogs.com/png.latex?X%5E%5Cintercal%20X"> possui inversa e podemos escrever:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Chat%7B%5Cbeta%7D%20=%20(X%5E%5Cintercal%20X)%5E%7B-1%7DX%5E%5Cintercal%20y%0A"></p>
<section id="exemplo-salário-wooldridge" class="level2">
<h2 class="anchored" data-anchor-id="exemplo-salário-wooldridge">Exemplo: salário (Wooldridge)</h2>
<p>Como exemplo vou usar um exemplo clássico de livro texto de econometria: uma regressão de salário (rendimento) contra algumas variáveis explicativas convencionais: anos de educação, sexo, anos de experiência, etc. As bases de dados do livro <a href="https://www.cengagebrain.com.mx/shop/isbn/9781337558860">Introductory Econometrics</a> estão disponíveis no pacote <code>wooldridge</code>. O código abaixo carrega a base de dados .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(wooldridge)</span>
<span id="cb1-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Carrega a base</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data</span>(wage2)</span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Remove os valores ausentes (NAs)</span></span>
<span id="cb1-5">sal <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">na.omit</span>(wage2)</span></code></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:80%; "><table class="table table-hover table-bordered table-striped" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:center;"> wage </th>
   <th style="text-align:center;"> hours </th>
   <th style="text-align:center;"> IQ </th>
   <th style="text-align:center;"> KWW </th>
   <th style="text-align:center;"> educ </th>
   <th style="text-align:center;"> exper </th>
   <th style="text-align:center;"> tenure </th>
   <th style="text-align:center;"> age </th>
   <th style="text-align:center;"> married </th>
   <th style="text-align:center;"> black </th>
   <th style="text-align:center;"> south </th>
   <th style="text-align:center;"> urban </th>
   <th style="text-align:center;"> sibs </th>
   <th style="text-align:center;"> brthord </th>
   <th style="text-align:center;"> meduc </th>
   <th style="text-align:center;"> feduc </th>
   <th style="text-align:center;"> lwage </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 1 </td>
   <td style="text-align:center;"> 769 </td>
   <td style="text-align:center;"> 40 </td>
   <td style="text-align:center;"> 93 </td>
   <td style="text-align:center;"> 35 </td>
   <td style="text-align:center;"> 12 </td>
   <td style="text-align:center;"> 11 </td>
   <td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> 31 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> 8 </td>
   <td style="text-align:center;"> 8 </td>
   <td style="text-align:center;"> 6.645091 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 3 </td>
   <td style="text-align:center;"> 825 </td>
   <td style="text-align:center;"> 40 </td>
   <td style="text-align:center;"> 108 </td>
   <td style="text-align:center;"> 46 </td>
   <td style="text-align:center;"> 14 </td>
   <td style="text-align:center;"> 11 </td>
   <td style="text-align:center;"> 9 </td>
   <td style="text-align:center;"> 33 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> 14 </td>
   <td style="text-align:center;"> 14 </td>
   <td style="text-align:center;"> 6.715383 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 4 </td>
   <td style="text-align:center;"> 650 </td>
   <td style="text-align:center;"> 40 </td>
   <td style="text-align:center;"> 96 </td>
   <td style="text-align:center;"> 32 </td>
   <td style="text-align:center;"> 12 </td>
   <td style="text-align:center;"> 13 </td>
   <td style="text-align:center;"> 7 </td>
   <td style="text-align:center;"> 32 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 4 </td>
   <td style="text-align:center;"> 3 </td>
   <td style="text-align:center;"> 12 </td>
   <td style="text-align:center;"> 12 </td>
   <td style="text-align:center;"> 6.476973 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 5 </td>
   <td style="text-align:center;"> 562 </td>
   <td style="text-align:center;"> 40 </td>
   <td style="text-align:center;"> 74 </td>
   <td style="text-align:center;"> 27 </td>
   <td style="text-align:center;"> 11 </td>
   <td style="text-align:center;"> 14 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 34 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 10 </td>
   <td style="text-align:center;"> 6 </td>
   <td style="text-align:center;"> 6 </td>
   <td style="text-align:center;"> 11 </td>
   <td style="text-align:center;"> 6.331502 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 7 </td>
   <td style="text-align:center;"> 600 </td>
   <td style="text-align:center;"> 40 </td>
   <td style="text-align:center;"> 91 </td>
   <td style="text-align:center;"> 24 </td>
   <td style="text-align:center;"> 10 </td>
   <td style="text-align:center;"> 13 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 30 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> 8 </td>
   <td style="text-align:center;"> 8 </td>
   <td style="text-align:center;"> 6.396930 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 9 </td>
   <td style="text-align:center;"> 1154 </td>
   <td style="text-align:center;"> 45 </td>
   <td style="text-align:center;"> 111 </td>
   <td style="text-align:center;"> 37 </td>
   <td style="text-align:center;"> 15 </td>
   <td style="text-align:center;"> 13 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 36 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> 3 </td>
   <td style="text-align:center;"> 14 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 7.050990 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 10 </td>
   <td style="text-align:center;"> 1000 </td>
   <td style="text-align:center;"> 40 </td>
   <td style="text-align:center;"> 95 </td>
   <td style="text-align:center;"> 44 </td>
   <td style="text-align:center;"> 12 </td>
   <td style="text-align:center;"> 16 </td>
   <td style="text-align:center;"> 16 </td>
   <td style="text-align:center;"> 36 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 12 </td>
   <td style="text-align:center;"> 11 </td>
   <td style="text-align:center;"> 6.907755 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 11 </td>
   <td style="text-align:center;"> 930 </td>
   <td style="text-align:center;"> 43 </td>
   <td style="text-align:center;"> 132 </td>
   <td style="text-align:center;"> 44 </td>
   <td style="text-align:center;"> 18 </td>
   <td style="text-align:center;"> 8 </td>
   <td style="text-align:center;"> 13 </td>
   <td style="text-align:center;"> 38 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 13 </td>
   <td style="text-align:center;"> 14 </td>
   <td style="text-align:center;"> 6.835185 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 14 </td>
   <td style="text-align:center;"> 1318 </td>
   <td style="text-align:center;"> 38 </td>
   <td style="text-align:center;"> 119 </td>
   <td style="text-align:center;"> 24 </td>
   <td style="text-align:center;"> 16 </td>
   <td style="text-align:center;"> 7 </td>
   <td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> 28 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 3 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 10 </td>
   <td style="text-align:center;"> 10 </td>
   <td style="text-align:center;"> 7.183871 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 15 </td>
   <td style="text-align:center;"> 1792 </td>
   <td style="text-align:center;"> 40 </td>
   <td style="text-align:center;"> 118 </td>
   <td style="text-align:center;"> 47 </td>
   <td style="text-align:center;"> 16 </td>
   <td style="text-align:center;"> 9 </td>
   <td style="text-align:center;"> 9 </td>
   <td style="text-align:center;"> 34 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 12 </td>
   <td style="text-align:center;"> 12 </td>
   <td style="text-align:center;"> 7.491087 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<p>A base traz 663 observações de 17 variáveis. A função <code>str</code> é útil para entender a estrutura dos dados.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Dimensão da base (# linhas  # colunas)</span></span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(sal)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 663  17</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Descrição da base</span></span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str</span>(sal)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   663 obs. of  17 variables:
 $ wage   : int  769 825 650 562 600 1154 1000 930 1318 1792 ...
 $ hours  : int  40 40 40 40 40 45 40 43 38 40 ...
 $ IQ     : int  93 108 96 74 91 111 95 132 119 118 ...
 $ KWW    : int  35 46 32 27 24 37 44 44 24 47 ...
 $ educ   : int  12 14 12 11 10 15 12 18 16 16 ...
 $ exper  : int  11 11 13 14 13 13 16 8 7 9 ...
 $ tenure : int  2 9 7 5 0 1 16 13 2 9 ...
 $ age    : int  31 33 32 34 30 36 36 38 28 34 ...
 $ married: int  1 1 1 1 0 1 1 1 1 1 ...
 $ black  : int  0 0 0 0 0 0 0 0 0 0 ...
 $ south  : int  0 0 0 0 0 0 0 0 0 0 ...
 $ urban  : int  1 1 1 1 1 0 1 0 1 1 ...
 $ sibs   : int  1 1 4 10 1 2 1 1 3 1 ...
 $ brthord: int  2 2 3 6 2 3 1 1 1 1 ...
 $ meduc  : int  8 14 12 6 8 14 12 13 10 12 ...
 $ feduc  : int  8 14 12 11 8 5 11 14 10 12 ...
 $ lwage  : num  6.65 6.72 6.48 6.33 6.4 ...
 - attr(*, "time.stamp")= chr "25 Jun 2011 23:03"
 - attr(*, "na.action")= 'omit' Named int [1:272] 2 6 8 12 13 19 20 21 31 36 ...
  ..- attr(*, "names")= chr [1:272] "2" "6" "8" "12" ...</code></pre>
</div>
</div>
<p>O modelo proposto é o abaixo:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Ctext%7Blwage%7D_%7Bt%7D%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7D%5Ctext%7Beduc%7D_%7Bt%7D%20+%20%5Cbeta_%7B2%7D%5Ctext%7Bexper%7D_%7Bt%7D%20+%20%5Cbeta_%7B3%7D%5Ctext%7Bexper%7D%5E%7B2%7D_%7Bt%7D%20+%20%5Cbeta_%7B4%7D%5Ctext%7Btenure%7D_%7Bt%7D%20+%20%5Cbeta%7B5%7D%5Ctext%7Bmarried%7D_%7Bt%7D%20+%20u_%7Bt%7D%0A"></p>
<p>onde:</p>
<ul>
<li><p>lwage = logaritmo natural do salário</p></li>
<li><p>educ = anos de educação</p></li>
<li><p>exper = anos de experiência (trabalhando)</p></li>
<li><p>tenure = anos trabalhando com o empregador atual</p></li>
<li><p>married = dummy (1 = casado, 0 = não-casado)</p></li>
</ul>
<p>Há 6 coeficientes para estimar logo <img src="https://latex.codecogs.com/png.latex?k%20=%206"> . Além disso, como há <img src="https://latex.codecogs.com/png.latex?663"> observações temos que <img src="https://latex.codecogs.com/png.latex?n%20=%20663"> . A matriz de “dados” é da forma:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0AX%20=%20%5Cbegin%7Bbmatrix%7D%0A1%20&amp;%2012%20&amp;%2011%20&amp;%20121%20&amp;%202%20&amp;%201%5C%5C%5C%5C%0A1%20&amp;%2014%20&amp;%2011%20&amp;%20121%20&amp;%209%20&amp;%201%5C%5C%5C%5C%0A1%20&amp;%2012%20&amp;%2013%20&amp;%20169%20&amp;%207%20&amp;%201%5C%5C%5C%5C%0A%5Cvdots%20&amp;%20%5Cvdots%20&amp;%20%5Cvdots%20&amp;%20%5Cvdots%20&amp;%20%5Cvdots%20&amp;%20%5Cvdots%20%5C%5C%5C%5C%0A1%20&amp;%2013%20&amp;%2010%20&amp;%20100%20&amp;%203%20&amp;%201%0A%5Cend%7Bbmatrix%7D_%7B663%5Ctimes%206%7D%0A"></p>
<p>O código abaixo monta a matriz <img src="https://latex.codecogs.com/png.latex?X"> acima. As funções <code>head</code> e <code>tail</code> podem ser usadas para verificar as primeiras e últimas linhas da matriz. Vale esclarecer dois pontos sobre o código a ser usado neste post. Primeiro, quando se cria um objeto usando o operador <code>&lt;-</code> pode-se forçar o R a imprimir o seu valor colocando a expressão entre parêntesis. Por exemplo, teste <code>(x &lt;- 3)</code>. O segundo ponto é que o operador de multiplicação matricial é <code>%*%</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define alguns valores úteis: </span></span>
<span id="cb6-2"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## N = número de observações</span></span>
<span id="cb6-3"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## k = número de regressores</span></span>
<span id="cb6-4"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">## const = vetor com 1^\intercals (uns)</span></span>
<span id="cb6-5">N <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">663</span>; k <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>; const <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">663</span>)</span>
<span id="cb6-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Monta a matriz de observações da regressão</span></span>
<span id="cb6-7">X <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(const, sal<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>educ, sal<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>exper, sal<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>exper<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, sal<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>tenure, sal<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>married)</span>
<span id="cb6-8">X <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.matrix</span>(X)</span>
<span id="cb6-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define o nome das colunas da matriz de observações</span></span>
<span id="cb6-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colnames</span>(X) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"const"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"educ"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"exper"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"exper2"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tenure"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"married"</span>)</span>
<span id="cb6-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Função para verificar as primeiras linhas da matriz X</span></span>
<span id="cb6-12"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(X)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     const educ exper exper2 tenure married
[1,]     1   12    11    121      2       1
[2,]     1   14    11    121      9       1
[3,]     1   12    13    169      7       1
[4,]     1   11    14    196      5       1
[5,]     1   10    13    169      0       0
[6,]     1   15    13    169      1       1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Função para verificar as últimas linhas da matriz X</span></span>
<span id="cb8-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tail</span>(X)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       const educ exper exper2 tenure married
[658,]     1   12     9     81      2       1
[659,]     1   16     8     64     10       1
[660,]     1   12    11    121      3       1
[661,]     1   12     9     81      3       1
[662,]     1   16    10    100      9       1
[663,]     1   13    10    100      3       1</code></pre>
</div>
</div>
<p>Lembrando que o problema de mínimos quadrados é de encontrar os valores de <img src="https://latex.codecogs.com/png.latex?%5Cbeta"> que minimizam a soma dos erros ao quadrado.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cunderset%7B%5Cbeta%7D%7B%5Ctext%7BMin%20%7D%7D%20e%5E%5Cintercal%20e%0A"></p>
<p>Abrindo mais a expressão acima:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Balign%7D%0A%20%20e%5E%5Cintercal%20e%20&amp;%20=%20(y%20-%20X%5Cbeta%20)%5E%5Cintercal(y%20-%20X%5Cbeta%20)%20%5C%5C%5C%5C%0A%20%20%20%20%20%20&amp;%20=%20y%5E%5Cintercal%20y%20-%20y%5E%5Cintercal%20X%5Cbeta%20-%20%5Cbeta%20%5E%5Cintercal%20X%5E%5Cintercal%20y%20+%20%5Cbeta%20%5E%5Cintercal%20X%5E%5Cintercal%20X%20%5Cbeta%20%5C%5C%5C%5C%0A%20%20%20%20%20%20&amp;%20=%20y%5E%5Cintercal%20y%20-%202%20y%5E%5Cintercal%20X%20%5Cbeta%20+%20%5Cbeta%5E%5Cintercal%20X%5E%5Cintercal%20X%20%5Cbeta%0A%5Cend%7Balign%7D%0A"></p>
<p>Derivando em relação a <img src="https://latex.codecogs.com/png.latex?%5Cbeta"> e igualando a zero chega-se no estimador de MQO</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbeta_%7B%5Ctext%7BMQO%7D%7D%20=%20(X%5E%5Cintercal%20X)%5E%7B-1%7DX%5E%5Cintercal%20y%0A"></p>
<p>O código abaixo computa <img src="https://latex.codecogs.com/png.latex?%5Cbeta_%7B%5Ctext%7BMQO%7D%7D"> . Note que os parêntesis por fora da expressão forçam o R a imprimir o valor do objeto. Além disso, como estamos multiplicando matrizes/vetores usamos <code>%*%</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define o vetor y (log do salário)</span></span>
<span id="cb10-2">y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sal<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>lwage</span>
<span id="cb10-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Computa a estimativa para os betas</span></span>
<span id="cb10-4">(beta <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">solve</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">t</span>(X) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%*%</span> X) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%*%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">t</span>(X) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%*%</span> y)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                [,1]
const   5.3563606713
educ    0.0767258959
exper   0.0104985672
exper2  0.0002881339
tenure  0.0091039254
married 0.2002468574</code></pre>
</div>
</div>
<p>Os valores estimados dos betas são reportados na tabela abaixo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">tabela <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.data.frame</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(beta, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span>
<span id="cb12-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colnames</span>(tabela) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Coeficiente estimado"</span>)</span>
<span id="cb12-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(beta, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">align =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"c"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable_styling</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">full_width =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span></code></pre></div>
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
  <tr>
   <td style="text-align:left;"> const </td>
   <td style="text-align:center;"> 5.3564 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> educ </td>
   <td style="text-align:center;"> 0.0767 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> exper </td>
   <td style="text-align:center;"> 0.0105 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> exper2 </td>
   <td style="text-align:center;"> 0.0003 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> tenure </td>
   <td style="text-align:center;"> 0.0091 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> married </td>
   <td style="text-align:center;"> 0.2002 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="resíduo-e-variância" class="level2">
<h2 class="anchored" data-anchor-id="resíduo-e-variância">Resíduo e variância</h2>
<p>O resíduo do modelo é simplesmente a diferença entre o observado <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D"> e o estimado <img src="https://latex.codecogs.com/png.latex?%5Chat%7By_%7Bt%7D%7D"> . Isto é,</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Chat%7Be%7D_%7Bt%7D%20=%20y_%7Bt%7D%20-%20%5Chat%7By%7D_%7Bt%7D%20=%20y_%7Bt%7D%20-%20x_%7Bt%7D%5E%5Cintercal%5Chat%7B%5Cbeta%7D%0A"></p>
<p>ou, de forma equivalente,</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Chat%7Be%7D%20=%20y%20-%20X%5Chat%7B%5Cbeta%7D%0A"></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Computa o resíduo da regressão</span></span>
<span id="cb13-2">u_hat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> X <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%*%</span> beta</span></code></pre></div>
</div>
<p>Usando o histograma pode-se visualizar a distribuição dos resíduos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(u_hat, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Histograma dos resíduos"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/ols-com-matrizes/index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>O estimador da variância é dado por:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Chat%7B%5Csigma%7D%5E%7B2%7D%20=%20%5Cfrac%7B1%7D%7BN-k%7D%5Csum_%7Bt%20=%201%7D%5E%7BN%7D%5Chat%7Be%7D_%7Bt%7D%5E%7B2%7D%0A"></p>
<p>Substituindo os valores calculados acima chegamos em:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Chat%7B%5Csigma%7D%5E%7B2%7D%20=%20%5Cfrac%7B%5Chat%7Be%7D%5E%5Cintercal%5Chat%7Be%7D%7D%7BN-k%7D%20=%200.1403927%0A"></p>


</section>

 ]]></description>
  <category>econometria</category>
  <category>repost</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/ols-com-matrizes/index.html</guid>
  <pubDate>Wed, 01 Jan 2020 03:00:00 GMT</pubDate>
</item>
<item>
  <title>Crescimento do PIB per capita no mundo</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/repost-crescimento-pib-mundo/index.html</link>
  <description><![CDATA[ 




<div class="cell">

</div>
<section id="introdução" class="level1">
<h1>Introdução</h1>
<p>Como desafio pessoal às vezes tento replicar gráficos que acho interessante. O portal Nexo, em particular, costuma ter lindas visualizações de dados. Vou tentar replicar os <a href="https://www.nexojornal.com.br/grafico/2018/07/30/O-crescimento-e-a-queda-do-PIB-dos-pa%C3%ADses-ao-longo-do-tempo">gráficos desta publicação</a>. Como o foco desta postagem está na visualização e em mostrar exemplos de aplicações do <code>ggplot2</code> vou omitir as (longas) manipulações de dados, deixando indicadas as fontes (com links) que usei. Numa postagem futura pretendo fazer um tutorial mais detalhado de como reproduzir estes gráficos.</p>
<section id="pacotes" class="level2">
<h2 class="anchored" data-anchor-id="pacotes">Pacotes</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"readxl"</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"here"</span>)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ggplot2"</span>)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ggrepel"</span>)</span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dplyr"</span>)</span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"reshape2"</span>)</span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"kableExtra"</span>)</span></code></pre></div>
</details>
</div>
</section>
<section id="dados" class="level2">
<h2 class="anchored" data-anchor-id="dados">Dados</h2>
<p>Dados são do Maddison Project Database, <a href="https://www.rug.nl/ggdc/historicaldevelopment/maddison/releases/maddison-project-database-2018">disponíveis aqui</a></p>
<div class="cell">

</div>
<div class="cell">

</div>
<div class="cell-output-display">

<table class="table table-bordered table-hover table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:center;"> País </th>
   <th style="text-align:center;"> Ano </th>
   <th style="text-align:center;"> Região </th>
   <th style="text-align:center;"> PIB </th>
   <th style="text-align:center;"> Crescimento </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:center;"> Angola </td>
   <td style="text-align:center;"> 2005 </td>
   <td style="text-align:center;"> Africa </td>
   <td style="text-align:center;"> 66351984 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Angola </td>
   <td style="text-align:center;"> 2011 </td>
   <td style="text-align:center;"> Africa </td>
   <td style="text-align:center;"> 123013536 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Albania </td>
   <td style="text-align:center;"> 2005 </td>
   <td style="text-align:center;"> Europe </td>
   <td style="text-align:center;"> 21452400 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Albania </td>
   <td style="text-align:center;"> 2006 </td>
   <td style="text-align:center;"> Europe </td>
   <td style="text-align:center;"> 22717995 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Albania </td>
   <td style="text-align:center;"> 2007 </td>
   <td style="text-align:center;"> Europe </td>
   <td style="text-align:center;"> 24080895 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Albania </td>
   <td style="text-align:center;"> 2008 </td>
   <td style="text-align:center;"> Europe </td>
   <td style="text-align:center;"> 25890410 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Albania </td>
   <td style="text-align:center;"> 2009 </td>
   <td style="text-align:center;"> Europe </td>
   <td style="text-align:center;"> 26754552 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Albania </td>
   <td style="text-align:center;"> 2010 </td>
   <td style="text-align:center;"> Europe </td>
   <td style="text-align:center;"> 27741824 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Albania </td>
   <td style="text-align:center;"> 2011 </td>
   <td style="text-align:center;"> Europe </td>
   <td style="text-align:center;"> 28452000 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:center;"> Albania </td>
   <td style="text-align:center;"> 2012 </td>
   <td style="text-align:center;"> Europe </td>
   <td style="text-align:center;"> 28852736 </td>
   <td style="text-align:center;"> 1 </td>
  </tr>
</tbody>
</table>

</div>
</section>
</section>
<section id="europa" class="level1">
<h1>Europa</h1>
<p>Neste primeiro gráfico cada quadradinho representa uma variável binária que indica se o país estava em expansão ou recessão. Mapeio esta variável usando o <code>geom_tile</code> e depois ajusto o tamanho dos quadradinhos. Para dar um pouco da intuição do processo vale começar com uma versão simplificada do problema.</p>
<p>Queremos mapear a cada ano se um país está ou não em recessão. A tabela abaixo reúne esta informação para seis países (Alemanha, Bélgica, França, Itália, Polônia e Reino Unido) desde 1980. É um pequeno recorte da nossa base original.</p>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:80%; "><table class="table table-hover table-condensed table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;"> year </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> country </th>
   <th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;"> var_pib </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 1980 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1980 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1980 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1980 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1980 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1980 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1981 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1981 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1981 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1981 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1981 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1981 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1982 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1982 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1982 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1982 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1982 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1982 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1983 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1983 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1983 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1983 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1983 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1983 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1984 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1984 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1984 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1984 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1984 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1984 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1985 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1985 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1985 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1985 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1985 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1985 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1986 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1986 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1986 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1986 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1986 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1986 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1987 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1987 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1987 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1987 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1987 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1987 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1988 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1988 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1988 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1988 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1988 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1988 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1989 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1989 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1989 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1989 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1989 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1989 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1990 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1990 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1990 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1990 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1990 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1990 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1991 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1991 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1991 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1991 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1991 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1991 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1992 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1992 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1992 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1992 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1992 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1992 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1993 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1993 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1993 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1993 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1993 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1993 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1994 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1994 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1994 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1994 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1994 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1994 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1995 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1995 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1995 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1995 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1995 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1995 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1996 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1996 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1996 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1996 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1996 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1996 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1997 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1997 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1997 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1997 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1997 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1997 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1998 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1998 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1998 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1998 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1998 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1998 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1999 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1999 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1999 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1999 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1999 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1999 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2000 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2000 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2000 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2000 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2000 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2000 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2001 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2001 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2001 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2001 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2001 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2001 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2002 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2002 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2002 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2002 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2002 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2002 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2003 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2003 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2003 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2003 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2003 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2003 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2004 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2004 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2004 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2004 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2004 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2004 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2005 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2005 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2005 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2005 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2005 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2005 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2006 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2006 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2006 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2006 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2006 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2006 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2007 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2007 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2007 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2007 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2007 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2007 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2008 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2008 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2008 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2008 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2008 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2008 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2009 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2009 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2009 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2009 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2009 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2009 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2010 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2010 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2010 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2010 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2010 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2010 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2011 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2011 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2011 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2011 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2011 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2011 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2012 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2012 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2012 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2012 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2012 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2012 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2013 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2013 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2013 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2013 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2013 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2013 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2014 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2014 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2014 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2014 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2014 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2014 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2015 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2015 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2015 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2015 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2015 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2015 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2016 </td>
   <td style="text-align:left;"> Belgium </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2016 </td>
   <td style="text-align:left;"> Germany </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2016 </td>
   <td style="text-align:left;"> France </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2016 </td>
   <td style="text-align:left;"> United Kingdom </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2016 </td>
   <td style="text-align:left;"> Italy </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2016 </td>
   <td style="text-align:left;"> Poland </td>
   <td style="text-align:left;"> 1 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<p>A função <code>geom_tile()</code> mapeia cada observação num quadrado. A cor de cada quadrado depende da variável binária <code>var_pib</code>. O código abaixo mostra como montar este gráfico bastante simples.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(sub, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> country)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_tile</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> var_pib), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">height =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">85</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-crescimento-pib-mundo/index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>O resto do trabalho é simplesmente ajustar os eixos, os nomes das legendas, etc. No código fonte da página do Nexo encontrei as fontes usadas nos gráficos: Gotham Rounded Bold e Gotham Rounded Light. O pacote <code>showtext</code> me permite carregar estas fontes no R.</p>
<p>O gráfico abaixo mostra o resultado final considerando todos os países da Europa.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">d_europa <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> d <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb3-2">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Filtra por região (Europa)</span></span>
<span id="cb3-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(region <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Europe"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-4">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Restringe a amostra às observações a partir de 1900</span></span>
<span id="cb3-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>)</span>
<span id="cb3-6"></span>
<span id="cb3-7">plot_europa <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(d_europa, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(year, country))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-8">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Mapeia cada variável como um 'tile' (quadradinho)</span></span>
<span id="cb3-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_tile</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> var_pib), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">height =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">85</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-10">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Superimpõe linhas verticais tracejadas</span></span>
<span id="cb3-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_vline</span>(</span>
<span id="cb3-12">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># valores de corte das linhas</span></span>
<span id="cb3-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xintercept =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1925</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1950</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1975</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2016</span>),      </span>
<span id="cb3-14">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tipo da linha (2 = tracejado)</span></span>
<span id="cb3-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,                                           </span>
<span id="cb3-16">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># cor da linha</span></span>
<span id="cb3-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray65"</span></span>
<span id="cb3-18">    )<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>                                      </span>
<span id="cb3-19">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Modifica o eixo-x</span></span>
<span id="cb3-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(</span>
<span id="cb3-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1925</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1950</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1975</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2016</span>),</span>
<span id="cb3-22">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># remove a área entre o gráfico e o eixo</span></span>
<span id="cb3-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">expand =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),</span>
<span id="cb3-24">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># duplica o eixo (para aparecer em cima e em baixo)</span></span>
<span id="cb3-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sec.axis =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dup_axis</span>()</span>
<span id="cb3-26">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>                         </span>
<span id="cb3-27">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Modifica a legenda e as cores </span></span>
<span id="cb3-28">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_discrete</span>(</span>
<span id="cb3-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb3-30">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># título da legenda</span></span>
<span id="cb3-31">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"VARIAÇÃO DO PIB NO MUNDO</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Por ano"</span>,</span>
<span id="cb3-32">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># texto da legenda</span></span>
<span id="cb3-33">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PIB EM QUEDA"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PIB EM CRESCIMENTO"</span>), </span>
<span id="cb3-34">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.value =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray90"</span></span>
<span id="cb3-35">    )<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-36">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define o título do gráfico e o título dos eixos</span></span>
<span id="cb3-37">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Europa"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-38">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Modifica características estéticas do gráfico</span></span>
<span id="cb3-39">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb3-40">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fundo do gráfico</span></span>
<span id="cb3-41">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb3-42">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define as margens do gráfico</span></span>
<span id="cb3-43">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.margin =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unit</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cm"</span>),</span>
<span id="cb3-44">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Eixos</span></span>
<span id="cb3-45">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>),</span>
<span id="cb3-46">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>),</span>
<span id="cb3-47">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family  =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Light"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>),</span>
<span id="cb3-48">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Legenda</span></span>
<span id="cb3-49">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"top"</span>,</span>
<span id="cb3-50">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(</span>
<span id="cb3-51">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>,</span>
<span id="cb3-52">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray20"</span>,</span>
<span id="cb3-53">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Bold"</span></span>
<span id="cb3-54">      ),</span>
<span id="cb3-55">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(</span>
<span id="cb3-56">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>,</span>
<span id="cb3-57">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray20"</span>,</span>
<span id="cb3-58">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Bold"</span></span>
<span id="cb3-59">      ),</span>
<span id="cb3-60">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Título</span></span>
<span id="cb3-61">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Crimson Text"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18</span>)</span>
<span id="cb3-62">    )</span></code></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-crescimento-pib-mundo/index_files/figure-html/unnamed-chunk-9-1.png" style="width:100.0%;height:100.0%"></p>
</div>
</div>
</section>
<section id="américa-do-sul" class="level1">
<h1>América do Sul</h1>
<p>Para fazer o mesmo gráfico para os países da América do Sul e da Ásia basta filtrar por estas regiões. Esta é uma das grandes vantagens do R: para fazer os dois gráficos abaixo só precisei mudar uma linha de código. Na verdade, como é uma mudança muito simples podemos montar o processo acima numa função que cria exatamente o mapa acima para cada região.</p>
<p>O código abaixo mostra um exemplo de como estruturar isto.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Função para reproduzir o gráfico acima</span></span>
<span id="cb4-2"></span>
<span id="cb4-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Guarda as informações do tema</span></span>
<span id="cb4-4">theme_vini <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  </span>
<span id="cb4-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb4-6">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fundo do gráfico</span></span>
<span id="cb4-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb4-8">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define as margens do gráfico</span></span>
<span id="cb4-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.margin =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unit</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cm"</span>),</span>
<span id="cb4-10">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Eixos</span></span>
<span id="cb4-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>),</span>
<span id="cb4-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>),</span>
<span id="cb4-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family  =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Light"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>),</span>
<span id="cb4-14">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Legenda</span></span>
<span id="cb4-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"top"</span>,</span>
<span id="cb4-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(</span>
<span id="cb4-17">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>,</span>
<span id="cb4-18">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray20"</span>,</span>
<span id="cb4-19">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Bold"</span></span>
<span id="cb4-20">      ),</span>
<span id="cb4-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(</span>
<span id="cb4-22">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>,</span>
<span id="cb4-23">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray20"</span>,</span>
<span id="cb4-24">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Bold"</span></span>
<span id="cb4-25">      ),</span>
<span id="cb4-26">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Título</span></span>
<span id="cb4-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Crimson Text"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18</span>)</span>
<span id="cb4-28">    )</span>
<span id="cb4-29"></span>
<span id="cb4-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Função simples para traduzir os títulos</span></span>
<span id="cb4-31">translate_region <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(string) {</span>
<span id="cb4-32">  </span>
<span id="cb4-33">  vl <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb4-34">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"South America"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"América do Sul"</span>,</span>
<span id="cb4-35">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Asia"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ásia"</span>,</span>
<span id="cb4-36">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Africa"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"África"</span>,</span>
<span id="cb4-37">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oceania"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oceania"</span>,</span>
<span id="cb4-38">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"North America"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"América do Norte"</span>,</span>
<span id="cb4-39">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Latin America And The Caribbean"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"América Latina"</span>,</span>
<span id="cb4-40">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Europa"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Europa"</span></span>
<span id="cb4-41">    )</span>
<span id="cb4-42">  </span>
<span id="cb4-43">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unname</span>(vl[string]))</span>
<span id="cb4-44">  </span>
<span id="cb4-45">}</span>
<span id="cb4-46"></span>
<span id="cb4-47">plot_regiao <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(name_region) {</span>
<span id="cb4-48">  </span>
<span id="cb4-49">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Filtra por região e restringe a amostra às observações a partir de 1900</span></span>
<span id="cb4-50">  </span>
<span id="cb4-51">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (name_region <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"South America"</span>) {</span>
<span id="cb4-52">    </span>
<span id="cb4-53">    df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(d, subregion <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> name_region, year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>)</span>
<span id="cb4-54">    </span>
<span id="cb4-55">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb4-56">    </span>
<span id="cb4-57">    df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dplyr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(d, region <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> name_region, year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>)</span>
<span id="cb4-58">  }</span>
<span id="cb4-59">  </span>
<span id="cb4-60">  p <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> </span>
<span id="cb4-61">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(df, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(year, country)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-62">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_tile</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> var_pib), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">height =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">85</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-63">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_vline</span>(</span>
<span id="cb4-64">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xintercept =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1925</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1950</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1975</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2016</span>),      </span>
<span id="cb4-65">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,                                           </span>
<span id="cb4-66">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray65"</span></span>
<span id="cb4-67">      ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>                                      </span>
<span id="cb4-68">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(</span>
<span id="cb4-69">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1925</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1950</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1975</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2016</span>),</span>
<span id="cb4-70">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">expand =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),</span>
<span id="cb4-71">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sec.axis =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dup_axis</span>()</span>
<span id="cb4-72">      ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>                         </span>
<span id="cb4-73">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_discrete</span>(</span>
<span id="cb4-74">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb4-75">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"VARIAÇÃO DO PIB NO MUNDO</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Por ano"</span>,</span>
<span id="cb4-76">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PIB EM QUEDA"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PIB EM CRESCIMENTO"</span>), </span>
<span id="cb4-77">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.value =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray90"</span></span>
<span id="cb4-78">      ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-79">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">translate_region</span>(name_region), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-80">    theme_vini</span>
<span id="cb4-81">  </span>
<span id="cb4-82">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(p)</span>
<span id="cb4-83"> </span>
<span id="cb4-84">}</span>
<span id="cb4-85"></span>
<span id="cb4-86"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_regiao</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"South America"</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-crescimento-pib-mundo/index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="ásia" class="level1">
<h1>Ásia</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_regiao</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Asia"</span>)  </span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-crescimento-pib-mundo/index_files/figure-html/unnamed-chunk-11-1.png" style="width:100.0%;height:100.0%"></p>
</div>
</div>
</section>
<section id="américa-latina" class="level1">
<h1>América Latina</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_regiao</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Latin America And The Caribbean"</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-crescimento-pib-mundo/index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="número-de-países-com-queda-no-pib" class="level1">
<h1>Número de países com queda no PIB</h1>
<section id="gráfico-2" class="level2">
<h2 class="anchored" data-anchor-id="gráfico-2">Gráfico 2</h2>
<p>Este gráfico conta o número absoluto de países que estava em recessão durante um determinado ano. Como o número de países dentro da amostra também cresce com o tempo, uma linha cinza foi adicionada para representar isto. Resolvi suprimir as flechas que aparecem na postagem original, pois a implementação disto no <code>ggplot</code> é muito trabalhosa e o resultado final não é tão bonito.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Primeiro: conta o número de países pela variável var_pib</span></span>
<span id="cb7-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># (1 = expansão, 0 = recessão)</span></span>
<span id="cb7-3">recession_countries <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> d <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-4">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Seleciona as observações a partir de 1900</span></span>
<span id="cb7-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-6">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Agrupa os dados por ano e var_pib</span></span>
<span id="cb7-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, var_pib) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-8">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Soma os valores que não são NA por tipo (1 = expansão, 0 = recessão)</span></span>
<span id="cb7-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">tipo =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(var_pib)))</span>
<span id="cb7-10"></span>
<span id="cb7-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Segundo: conta o número de países incluídos na amostra</span></span>
<span id="cb7-12">recession_countries <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> recession_countries <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">amostra =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(tipo)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>()</span>
<span id="cb7-16"></span>
<span id="cb7-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Terceiro: remove as contagens de anos de expansão e converte os dados para longitudinal (melhor para plotar)</span></span>
<span id="cb7-18">recession_countries <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> recession_countries <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-19">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Remove os valores que são referentes a anos de expansão</span></span>
<span id="cb7-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(var_pib <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-21">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Tranforma os dados em longitudinais por ano e 'var_pib'</span></span>
<span id="cb7-22">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># (tipo = recessão, amostra = observações válidas)</span></span>
<span id="cb7-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">melt</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id.vars =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"year"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"var_pib"</span>))</span>
<span id="cb7-24"></span>
<span id="cb7-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Base de dados para os textos no gráfico</span></span>
<span id="cb7-26">highlight <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb7-27">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">evento =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb7-28">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1ª GUERRA</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">MUNDIAL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CRISE</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">DE 1929"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2ª GUERRA</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">MUNDIAL"</span>,</span>
<span id="cb7-29">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CRISE DO</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">PETRÓLEO"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"TRANSIÇÃO CAPITALISTA</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">DO LESTE EUROPEU"</span>,</span>
<span id="cb7-30">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CRISE DE 2008"</span>),</span>
<span id="cb7-31">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">year =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1918</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1929</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1945</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1971</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1988</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2008</span>),</span>
<span id="cb7-32">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">52</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">65</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">35</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">62</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">78</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">90</span>)</span>
<span id="cb7-33">)</span></code></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Obs: como plotamos dados de duas bases diferentes a sintaxe é diferente</span></span>
<span id="cb8-2"></span>
<span id="cb8-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(</span>
<span id="cb8-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> recession_countries, </span>
<span id="cb8-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(year, value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group =</span> variable, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> variable),</span>
<span id="cb8-7">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Espessura da linha</span></span>
<span id="cb8-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.2</span></span>
<span id="cb8-9">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-10">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Destaques de texto</span></span>
<span id="cb8-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(</span>
<span id="cb8-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> highlight,</span>
<span id="cb8-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(year, y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> evento), </span>
<span id="cb8-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,</span>
<span id="cb8-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Light"</span>,</span>
<span id="cb8-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"center"</span>,</span>
<span id="cb8-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"center"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-18">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Troca as cores das linhas e altera a legenda</span></span>
<span id="cb8-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_colour_manual</span>(</span>
<span id="cb8-20">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>,</span>
<span id="cb8-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"amostra"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tipo"</span>),</span>
<span id="cb8-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tomato"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray50"</span>),</span>
<span id="cb8-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"países incluídos na amostra"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"países com queda no PIB"</span>)</span>
<span id="cb8-24">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-25">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(</span>
<span id="cb8-26">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1925</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1950</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1975</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2016</span>),</span>
<span id="cb8-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">expand =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.025</span>,<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.025</span>)</span>
<span id="cb8-28">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-29">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define o título e subtítulo do gráfico e o título dos eixos</span></span>
<span id="cb8-30">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb8-31">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>,</span>
<span id="cb8-32">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"número</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">de países"</span>,</span>
<span id="cb8-33">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"NÚMERO DE PAÍSES COM QUEDA NO PIB NO ANO"</span>,</span>
<span id="cb8-34">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Em valores absolutos"</span></span>
<span id="cb8-35">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-36">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb8-37">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Título e subtítulo</span></span>
<span id="cb8-38">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Bold"</span>),</span>
<span id="cb8-39">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.subtitle =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Light"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span>),</span>
<span id="cb8-40">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Eixos</span></span>
<span id="cb8-41">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Bold"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb8-42">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Light"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb8-43">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"grey70"</span>),</span>
<span id="cb8-44">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb8-45">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.title.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">angle =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">360</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">face =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>),</span>
<span id="cb8-46">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Legenda</span></span>
<span id="cb8-47">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(</span>
<span id="cb8-48">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Bold"</span>,</span>
<span id="cb8-49">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>,</span>
<span id="cb8-50">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">vjust =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>,</span>
<span id="cb8-51">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hjust =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb8-52">      ),</span>
<span id="cb8-53">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>),</span>
<span id="cb8-54">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.key =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>),</span>
<span id="cb8-55">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.17</span>,<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.75</span>),</span>
<span id="cb8-56">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fundo do gráfico  </span></span>
<span id="cb8-57">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>),</span>
<span id="cb8-58">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Linhas de grade</span></span>
<span id="cb8-59">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb8-60">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid.major.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"grey70"</span>)</span>
<span id="cb8-61">  )</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-crescimento-pib-mundo/index_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="gráfico-3" class="level2">
<h2 class="anchored" data-anchor-id="gráfico-3">Gráfico 3</h2>
<p>Este último gráfico mostra o número relativo de países em recessão.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calcula o share de países em recessão na amostra a cada ano</span></span>
<span id="cb9-2">share_recession <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> d <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb9-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-4">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Agrupa os dados por ano e var_pib (indicadora)</span></span>
<span id="cb9-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, var_pib) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-6">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Remove as observações ausentes </span></span>
<span id="cb9-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(var_pib)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-8">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Conta o número de casos</span></span>
<span id="cb9-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">count =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>()) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-10">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calcula a proporção dos casos acima (em porcentagem)</span></span>
<span id="cb9-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb9-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> count <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(count) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>)</span>
<span id="cb9-13"></span>
<span id="cb9-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Tabela auxiliar para guardar os valores que vão ser plotados como</span></span>
<span id="cb9-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># texto no gráfico</span></span>
<span id="cb9-16">highlight <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(</span>
<span id="cb9-17">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">evento =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb9-18">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1ª GUERRA</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">MUNDIAL"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CRISE</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">DE 1929"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2ª GUERRA</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">MUNDIAL"</span>,</span>
<span id="cb9-19">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CRISE DO</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">PETRÓLEO"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"TRANSIÇÃO</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">CAPITALISTA</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">DO LESTE</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">EUROPEU"</span>,</span>
<span id="cb9-20">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CRISE DE 2008"</span>),</span>
<span id="cb9-21">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">year =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1916</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1929</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1942</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1971</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1988</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2006</span>),</span>
<span id="cb9-22">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">70</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">45</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">75</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">77</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">81</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">70</span>)</span>
<span id="cb9-23">)</span></code></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_col</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> share_recession, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(year, freq, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> var_pib)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-3">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Superimpõe linhas horizontais no gráfico</span></span>
<span id="cb10-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(</span>
<span id="cb10-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>),</span>
<span id="cb10-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray70"</span>,</span>
<span id="cb10-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,</span>
<span id="cb10-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span></span>
<span id="cb10-9">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-10">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Mapeia o texto no gráfico (geom_label permite escolher fill = "salmon")</span></span>
<span id="cb10-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_label</span>(</span>
<span id="cb10-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> highlight,</span>
<span id="cb10-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(year, y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> evento),</span>
<span id="cb10-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>,</span>
<span id="cb10-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,</span>
<span id="cb10-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"salmon"</span>,</span>
<span id="cb10-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Medium"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-18">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define título, subtítulo e o título dos eixos</span></span>
<span id="cb10-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb10-20">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>,</span>
<span id="cb10-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>,</span>
<span id="cb10-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"NÚMERO DE PAÍSES COM QUEDA NO PIB"</span>,</span>
<span id="cb10-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Em percentual dos países incluídos na amostra"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-24">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_fill_discrete</span>(</span>
<span id="cb10-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>,</span>
<span id="cb10-26">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>),</span>
<span id="cb10-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PIB EM CRESCIMENTO"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PIB EM QUEDA"</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-28">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(</span>
<span id="cb10-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1925</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1950</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1975</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2016</span>),</span>
<span id="cb10-30">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">expand =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.025</span>,<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.025</span>)</span>
<span id="cb10-31">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-32">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(</span>
<span id="cb10-33">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>),</span>
<span id="cb10-34">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">75</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"100%"</span>)</span>
<span id="cb10-35">    )<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-36">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb10-37">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fundo do gráfico</span></span>
<span id="cb10-38">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>),</span>
<span id="cb10-39">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Linhas de grade</span></span>
<span id="cb10-40">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb10-41">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Legenda</span></span>
<span id="cb10-42">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"top"</span>,</span>
<span id="cb10-43">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.direction =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"horizontal"</span>,</span>
<span id="cb10-44">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.justification=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'left'</span>,</span>
<span id="cb10-45">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Bold"</span>),</span>
<span id="cb10-46">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Título e subtítulo</span></span>
<span id="cb10-47">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Bold"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>),</span>
<span id="cb10-48">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.subtitle =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Light"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>),</span>
<span id="cb10-49">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Eixos</span></span>
<span id="cb10-50">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Bold"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb10-51">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gotham Rounded Light"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb10-52">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.ticks.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>()</span>
<span id="cb10-53">  )</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-crescimento-pib-mundo/index_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="gráfico-extra" class="level1">
<h1>Gráfico extra</h1>
<p>Resolvi fazer um gráfico próprio mostrando o crescimento do PIB nos países da América Latina dando destaque para alguns.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">destaque <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Uruguay"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Brazil"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chile"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Venezuela"</span>)</span>
<span id="cb11-2"></span>
<span id="cb11-3">principal <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> d <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb11-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>, subregion <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"South America"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ind =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.factor</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(country <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> destaque, country, <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(ind))</span>
<span id="cb11-7"></span>
<span id="cb11-8">outros <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> d <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>, subregion <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"South America"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ind =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.factor</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(country <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> destaque, <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>, country))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(ind))</span>
<span id="cb11-12"></span>
<span id="cb11-13">y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> principal <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb11-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2016</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb11-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> cgdppc,</span>
<span id="cb11-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">country_abbrev =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb11-18">      country <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Brazil"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BRA"</span>,</span>
<span id="cb11-19">      country <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Venezuela"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"VEN"</span>,</span>
<span id="cb11-20">      country <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Uruguay"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"URY"</span>,</span>
<span id="cb11-21">      country <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chile"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CHL"</span>,</span>
<span id="cb11-22">      <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> country</span>
<span id="cb11-23">    ))</span></code></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(</span>
<span id="cb12-3">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> principal,</span>
<span id="cb12-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(year, cgdppc, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group =</span> country, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> ind),</span>
<span id="cb12-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb12-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">85</span></span>
<span id="cb12-7">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(</span>
<span id="cb12-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> outros,</span>
<span id="cb12-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(year, cgdppc, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group =</span> country),</span>
<span id="cb12-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"grey70"</span>,</span>
<span id="cb12-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span></span>
<span id="cb12-13">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_hline</span>(</span>
<span id="cb12-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yintercept =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5000</span>),</span>
<span id="cb12-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linetype =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,</span>
<span id="cb12-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"grey75"</span></span>
<span id="cb12-18">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text_repel</span>(</span>
<span id="cb12-20">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> y,</span>
<span id="cb12-21">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(year, cgdppc <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.025</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> country_abbrev),</span>
<span id="cb12-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>,</span>
<span id="cb12-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bahnschrift"</span>,</span>
<span id="cb12-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nudge_x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">force =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb12-25">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-26">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_colour_manual</span>(</span>
<span id="cb12-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"steelblue2"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"limegreen"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"orange"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tomato"</span>)</span>
<span id="cb12-28">    )<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-29">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1900</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2010</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-30">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(</span>
<span id="cb12-31">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20000</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5000</span>),</span>
<span id="cb12-32">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"5.000"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"10.000"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"15.000"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"20.000"</span>)</span>
<span id="cb12-33">    )<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-34">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guides</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-35">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb12-36">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>,</span>
<span id="cb12-37">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"US$"</span>,</span>
<span id="cb12-38">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AMÉRICA DO SUL"</span>,</span>
<span id="cb12-39">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PIB per capita real, em milhares de dólares (constante 2011).</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Em destaque: Brasil (BR), Chile (CH), Uruguai (UR) e Venezuela (VN)."</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-40">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb12-41">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bahnschrift"</span>),</span>
<span id="cb12-42">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white"</span>),</span>
<span id="cb12-43">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">face =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>),</span>
<span id="cb12-44">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">axis.text.y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb12-45">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">face =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span>),</span>
<span id="cb12-46">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.subtitle =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)</span>
<span id="cb12-47">  )</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-crescimento-pib-mundo/index_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>


<!-- -->

</section>

 ]]></description>
  <category>repost</category>
  <category>data-visualization</category>
  <category>ggplot2</category>
  <category>tutorial-R</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/repost-crescimento-pib-mundo/index.html</guid>
  <pubDate>Sat, 01 Jun 2019 03:00:00 GMT</pubDate>
  <media:content url="https:://www.restateinsight.com/static/nexo-crescimento-pib.png" medium="image" type="image/png" height="103" width="144"/>
</item>
<item>
  <title>Repost: Expectativa de vida e Crescimento Econômico</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/repost-gapminder/index.html</link>
  <description><![CDATA[ 




<div class="cell">

</div>
<section id="disclaimer" class="level1">
<h1>Disclaimer</h1>
<p>Este é um post antigo que estou repostando porque ainda pode ser útil como um tutorial básico para <code>R</code>. Fiz apenas algumas modificações no código para deixar ele</p>
</section>
<section id="análise-exploratória" class="level1">
<h1>Análise Exploratória</h1>
<section id="preparativos" class="level2">
<h2 class="anchored" data-anchor-id="preparativos">Preparativos</h2>
<section id="carregando-os-pacotes" class="level3">
<h3 class="anchored" data-anchor-id="carregando-os-pacotes">Carregando os pacotes</h3>
<p>Muitos já devem estar familiarizados com a <a href="https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen?language=en">apresentação do historiador Hans Rosling</a> sobre a evolução da expectativa de vida e do PIB per capita dos países em torno do mundo. Este post vai mostrar como usar o <code>ggplot2</code> e o <code>tidyverse</code> para explorar estes dados. Pode-se acessar uma versão simplificada da base de dados pelo pacote <code>gapminder</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Tutorial Gapminder</span></span>
<span id="cb1-2"></span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Pacotes</span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dplyr)</span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(gapminder)</span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(kableExtra)</span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggrepel)</span>
<span id="cb1-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(showtext)</span>
<span id="cb1-10"></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Carregar fontes</span></span>
<span id="cb1-12">sysfonts<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">font_add_google</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Jost"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Jost"</span>)</span>
<span id="cb1-13">showtext<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">showtext_auto</span>()</span>
<span id="cb1-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Carregar os dados</span></span>
<span id="cb1-15"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gapminder"</span>)</span>
<span id="cb1-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"continent_colors"</span>)</span></code></pre></div>
</div>
</section>
<section id="checagem-dos-dados" class="level3">
<h3 class="anchored" data-anchor-id="checagem-dos-dados">Checagem dos dados</h3>
<p>De início é sempre importante verificar se há problemas com os dados. Como estamos usando uma base que já foi tratada é de se esperar que tudo esteja em ordem. Tipicamente, queremos verificar quantas observações ausentes (NAs) existem; se as variáveis estão no formato correto (ex: variáveis de texto como factor, números como numeric, etc.). Neste caso, além destas checagens também vamos criar uma nova variável que é o log do PIB per capita.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Checagens iniciais #</span></span>
<span id="cb2-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Verifica se há valores ausentes</span></span>
<span id="cb2-3">gapminder <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">across</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">everything</span>(), <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(.x))))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 6
  country continent  year lifeExp   pop gdpPercap
    &lt;int&gt;     &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;int&gt;     &lt;int&gt;
1       0         0     0       0     0         0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Informações gerais sobre os dados</span></span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str</span>(gapminder)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [1,704 × 6] (S3: tbl_df/tbl/data.frame)
 $ country  : Factor w/ 142 levels "Afghanistan",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ continent: Factor w/ 5 levels "Africa","Americas",..: 3 3 3 3 3 3 3 3 3 3 ...
 $ year     : int [1:1704] 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
 $ lifeExp  : num [1:1704] 28.8 30.3 32 34 36.1 ...
 $ pop      : int [1:1704] 8425333 9240934 10267083 11537966 13079460 14880372 12881816 13867957 16317921 22227415 ...
 $ gdpPercap: num [1:1704] 779 821 853 836 740 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Nome das variáveis minúsculas</span></span>
<span id="cb6-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(gapminder) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tolower</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(gapminder))</span>
<span id="cb6-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Tranformações #</span></span>
<span id="cb6-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Computa o log do pib per capita</span></span>
<span id="cb6-5">gapminder <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(gapminder, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lgdppc =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log10</span>(gdppercap))</span></code></pre></div>
</div>
</section>
<section id="tema-dos-gráficos" class="level3">
<h3 class="anchored" data-anchor-id="tema-dos-gráficos">Tema dos gráficos</h3>
<p>Para manter o padrão das visualizações pode-se criar um tema personalizado. A maneira mais simples de fazer isto é a partir de um tema padrão do <code>ggplot2</code> mas é possível começar do zero. Aqui, por simplicidade, começo com o tema <code>bw</code> e apenas mudo a posição da legenda e o tamanho e a fonte do texto que será plotado nos eixos e no título do gráfico. Além disso, como o nome dos eixos vai ser repetido muitas vezes defino uma lista com o nome mais comum deles.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Tema customizado #</span></span>
<span id="cb7-2">theme_vini <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb7-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(</span>
<span id="cb7-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Jost"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray20"</span>),</span>
<span id="cb7-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>),</span>
<span id="cb7-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>),</span>
<span id="cb7-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottom"</span></span>
<span id="cb7-8">    )</span>
<span id="cb7-9"></span>
<span id="cb7-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Nomes que serão usados várias vezes para os eixos</span></span>
<span id="cb7-11">nomes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb7-12">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expectativa de vida e PIB per capita"</span>,</span>
<span id="cb7-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Log do PIB per capita (US$ 2010)"</span>,</span>
<span id="cb7-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expectativa de vida ao nascer"</span>,</span>
<span id="cb7-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fonte =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fonte: Gapmineder (www.gapminder.org) e World Bank Open Data."</span></span>
<span id="cb7-16">  )</span></code></pre></div>
</div>
</section>
</section>
<section id="visualizando" class="level2">
<h2 class="anchored" data-anchor-id="visualizando">Visualizando</h2>
<section id="correlações" class="level3">
<h3 class="anchored" data-anchor-id="correlações">Correlações</h3>
<p>Note que não temos dados para todos os anos do período. Os dados estão disponíveis de cinco em cinco anos começando em 1952 e terminando em 2007. Podemos começar com um gráfico de dispersão para ver a relação entre a “economia” (PIB per capita) e a “qualidade da saúde/vida” (expectativa de vida ao nascer) de um país. Apenas como exemplo incluo também uma linha de regressão quadrática no gráfico.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(gapminder<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>year)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 2002 2007</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">gap2007 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(gapminder, year <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2007</span>)</span>
<span id="cb10-2"></span>
<span id="cb10-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(gap2007, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(lgdppc, lifeexp)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_smooth</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">se =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb10-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>title, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"(2007)"</span>),</span>
<span id="cb10-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>fonte,</span>
<span id="cb10-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Relação entre expectativa de vida ao nascer e o logaritmo do PIB per capita (fit linear)"</span>,</span>
<span id="cb10-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x,</span>
<span id="cb10-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>y</span>
<span id="cb10-12">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-13">  theme_vini</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-gapminder/index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Podemos nos valer de outras informações disponíveis na base para alterar atributos estéticos do gráfico. O tamanho de cada círculo pode refletir o tamanho da população daquele país; a cor do círculo, por sua vez, pode representar o continente daquele país. Por conveniência uso as cores pré-definidas do pacote <code>gapminder</code>. Além disso também podemos destacar o nome de alguns países usando o pacote <code>ggrepel</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">destaque <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb11-2">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Australia"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Argentina"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Brazil"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chile"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"India"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Nigeria"</span>, </span>
<span id="cb11-3">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sudan"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Taiwan"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Mozambique"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Angola"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vietnam"</span></span>
<span id="cb11-4">  )</span>
<span id="cb11-5"></span>
<span id="cb11-6">gap_highlight <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> gap2007 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">country =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(country)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb11-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sel =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(country <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> destaque, country, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>))</span>
<span id="cb11-9"></span>
<span id="cb11-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(gap_highlight, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(lgdppc, lifeexp)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> pop, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> continent), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">75</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_smooth</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">se =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text_repel</span>(</span>
<span id="cb11-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> sel),</span>
<span id="cb11-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Jost"</span>,</span>
<span id="cb11-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">force =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>,</span>
<span id="cb11-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max.overlaps =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>,</span>
<span id="cb11-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb11-19">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb11-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb11-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>title, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"(2007)"</span>),</span>
<span id="cb11-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>fonte,</span>
<span id="cb11-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x,</span>
<span id="cb11-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>y</span>
<span id="cb11-25">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-26">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_manual</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values =</span> continent_colors, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_size_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">range =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-28">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">guides</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb11-29">  theme_vini</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-gapminder/index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>O gráfico acima é um retrato do momento, mas pode ser interessante entender como estas variáveis se comportaram ao longo do tempo.</p>
</section>
<section id="expectativa-de-vida-média-mundial" class="level3">
<h3 class="anchored" data-anchor-id="expectativa-de-vida-média-mundial">Expectativa de vida (média mundial)</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calcula a expectativa de vida média</span></span>
<span id="cb12-2">gap_life <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> gapminder <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb12-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">media =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(lifeexp))</span>
<span id="cb12-5"></span>
<span id="cb12-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(gap_life, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(year, media)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb12-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>title, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"(média mundial)"</span>),</span>
<span id="cb12-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>fonte,</span>
<span id="cb12-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x,</span>
<span id="cb12-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>y</span>
<span id="cb12-14">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-15">  theme_vini</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-gapminder/index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="expectativa-de-vida-todos-os-países" class="level3">
<h3 class="anchored" data-anchor-id="expectativa-de-vida-todos-os-países">Expectativa de vida (todos os países)</h3>
<p>Podemos desagregar a análise acima por país. É claro que fica difícil discernir um país específico, mas pode-se ver uma tendência geral de crescimento, ainda que haja alguns outliers. A maior parte das quedas significativas pode ser relacionada com alguma guerra. O país cuja expectativa de vida cai bruscamente no começo dos anos 90, por exemplo, é a Ruanda, que vivia uma guerra civil nesta época.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(gapminder, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(year, lifeexp, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group =</span> country, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> continent)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb13-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb13-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">from =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">to =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">80</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb13-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_brewer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">palette =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qual"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb13-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb13-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expectativa de vida (1952/2007)"</span>,</span>
<span id="cb13-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>fonte,</span>
<span id="cb13-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb13-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>y</span>
<span id="cb13-10">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb13-11">  theme_vini</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-gapminder/index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Se nos atermos somente ao nível de continente a visualização fica mais simples.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">gap_life_continent <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> gapminder <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb14-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, continent) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb14-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">expec_media =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(lifeexp))</span>
<span id="cb14-4"></span>
<span id="cb14-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(gap_life_continent, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(year, expec_media, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> continent)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb14-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb14-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb14-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_brewer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">palette =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qual"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb14-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb14-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expectativa de vida média (1952/2007)"</span>,</span>
<span id="cb14-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>fonte,</span>
<span id="cb14-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb14-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>y</span>
<span id="cb14-14">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb14-15">  theme_vini</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-gapminder/index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="pib-per-capita-continentes" class="level3">
<h3 class="anchored" data-anchor-id="pib-per-capita-continentes">PIB per capita (continentes)</h3>
<p>Podemos fazer o mesmo para o log do PIB per capita. Aqui o gráfico é feito usando o log do PIB per capita, mas no eixo indico o valor equivalente em dólares para facilitar a interpretação.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calcula o PIB per capita médio por continente a cada ano</span></span>
<span id="cb15-2">gap_gdp <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> gapminder <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb15-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(year, continent) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb15-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">avg_gdp =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(gdppercap))</span>
<span id="cb15-5"></span>
<span id="cb15-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(gap_gdp, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(year, avg_gdp, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> continent)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb15-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb15-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb15-9">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Escala log</span></span>
<span id="cb15-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_log10</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb15-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_brewer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">palette =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qual"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb15-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb15-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PIB per capita médio (1952/2007)"</span>,</span>
<span id="cb15-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>fonte,</span>
<span id="cb15-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb15-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x</span>
<span id="cb15-17">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb15-18">  theme_vini</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-gapminder/index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="analisando-os-dados" class="level2">
<h2 class="anchored" data-anchor-id="analisando-os-dados">Analisando os dados</h2>
<p>Antes de começar a análise tabular dos dados vale definir uma função simples para apresentar as tabelas.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">print_table <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(df, ...) {</span>
<span id="cb16-2">  </span>
<span id="cb16-3">  str_title <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(string) {</span>
<span id="cb16-4">    </span>
<span id="cb16-5">    x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_replace_all</span>(string, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>)</span>
<span id="cb16-6">    x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> stringr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_to_title</span>(x)</span>
<span id="cb16-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(x)</span>
<span id="cb16-8">    </span>
<span id="cb16-9">  }</span>
<span id="cb16-10">  </span>
<span id="cb16-11">  knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(df, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col.names =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_title</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colnames</span>(df)), ...) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb16-12">    kableExtra<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable_styling</span>(</span>
<span id="cb16-13">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">full_width =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb16-14">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bootstrap_options =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"hover"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"condensed"</span>)</span>
<span id="cb16-15">    )</span>
<span id="cb16-16">  </span>
<span id="cb16-17">}</span></code></pre></div>
</div>
<p>Podemos encontrar fatos interessantes simplesmente agregando e reorganizando os dados. No gráfico anterior vimos que o continente com maior PIB per capita médio é a Oceania. Curiosamente, a base inclui somente dois países na Oceania: Austrália e Nove Zelândia.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Note que na Oceania os dados só incluem Autrália e Nova Zelândia</span></span>
<span id="cb17-2">gapminder <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb17-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(continent <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Oceania"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb17-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(country) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb17-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print_table</span>()</span></code></pre></div>
<div class="cell-output-display">

<table class="table table-hover table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Country </th>
   <th style="text-align:right;"> N </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Australia </td>
   <td style="text-align:right;"> 12 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> New Zealand </td>
   <td style="text-align:right;"> 12 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Podemos encontrar os países que mais cresceram (em termos absolutos e relativos) durante o período observado. Note como há vários países asiáticos listados qual seja a métrica escolhida.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Países que mais cresceram no período da amostra em termos absolutos</span></span>
<span id="cb18-2">gapminder <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(country) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">growth =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">last</span>(gdppercap) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">first</span>(gdppercap)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_max</span>(growth, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print_table</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Países que mais cresceram de 1952 a 2007"</span>)</span></code></pre></div>
<div class="cell-output-display">

<table class="table table-hover table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>Países que mais cresceram de 1952 a 2007</caption>
 <thead>
  <tr>
   <th style="text-align:left;"> Country </th>
   <th style="text-align:right;"> Growth </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Singapore </td>
   <td style="text-align:right;"> 44828.04 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Norway </td>
   <td style="text-align:right;"> 39261.77 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hong Kong, China </td>
   <td style="text-align:right;"> 36670.56 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Ireland </td>
   <td style="text-align:right;"> 35465.72 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Austria </td>
   <td style="text-align:right;"> 29989.42 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> United States </td>
   <td style="text-align:right;"> 28961.17 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Iceland </td>
   <td style="text-align:right;"> 28913.10 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Japan </td>
   <td style="text-align:right;"> 28439.11 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Netherlands </td>
   <td style="text-align:right;"> 27856.36 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Taiwan </td>
   <td style="text-align:right;"> 27511.33 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Países que mais cresceram no período da amostra em termos relativos</span></span>
<span id="cb19-2">gapminder <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb19-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(country) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb19-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">growth =</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">last</span>(gdppercap) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">first</span>(gdppercap) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb19-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_max</span>(growth, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb19-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print_table</span>(</span>
<span id="cb19-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Países que mais cresceram de 1952 a 2007 (%)"</span>,</span>
<span id="cb19-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">digits =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb19-9">    )</span></code></pre></div>
<div class="cell-output-display">

<table class="table table-hover table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>Países que mais cresceram de 1952 a 2007 (%)</caption>
 <thead>
  <tr>
   <th style="text-align:left;"> Country </th>
   <th style="text-align:right;"> Growth </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Equatorial Guinea </td>
   <td style="text-align:right;"> 3135.54 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Taiwan </td>
   <td style="text-align:right;"> 2279.41 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Korea, Rep. </td>
   <td style="text-align:right;"> 2165.51 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Singapore </td>
   <td style="text-align:right;"> 1936.30 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Botswana </td>
   <td style="text-align:right;"> 1376.65 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hong Kong, China </td>
   <td style="text-align:right;"> 1200.57 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> China </td>
   <td style="text-align:right;"> 1138.39 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Oman </td>
   <td style="text-align:right;"> 1120.64 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Thailand </td>
   <td style="text-align:right;"> 884.22 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Japan </td>
   <td style="text-align:right;"> 884.04 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>A mesma análise também pode ser feita para a expectativa de vida. Adicionalmente também podemos encontrar qual foi a maior variação (negativa) entre um ponto observado e outro dentro da amostra.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">gapminder <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb20-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(country) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb20-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">life_growth =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">last</span>(lifeexp) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">first</span>(lifeexp)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb20-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_max</span>(life_growth, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb20-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print_table</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">digits =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span></code></pre></div>
<div class="cell-output-display">

<table class="table table-hover table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Country </th>
   <th style="text-align:right;"> Life Growth </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Oman </td>
   <td style="text-align:right;"> 38 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Vietnam </td>
   <td style="text-align:right;"> 34 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Indonesia </td>
   <td style="text-align:right;"> 33 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Saudi Arabia </td>
   <td style="text-align:right;"> 33 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Libya </td>
   <td style="text-align:right;"> 31 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Korea, Rep. </td>
   <td style="text-align:right;"> 31 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Nicaragua </td>
   <td style="text-align:right;"> 31 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> West Bank and Gaza </td>
   <td style="text-align:right;"> 30 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Yemen, Rep. </td>
   <td style="text-align:right;"> 30 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Gambia </td>
   <td style="text-align:right;"> 29 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1">gapminder <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb21-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(country) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb21-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">life_growth =</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">last</span>(lifeexp) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">first</span>(lifeexp) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb21-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice_max</span>(life_growth, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb21-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print_table</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">digits =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span></code></pre></div>
<div class="cell-output-display">

<table class="table table-hover table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Country </th>
   <th style="text-align:right;"> Life Growth </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Oman </td>
   <td style="text-align:right;"> 101.29 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Gambia </td>
   <td style="text-align:right;"> 98.16 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Yemen, Rep. </td>
   <td style="text-align:right;"> 92.63 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Indonesia </td>
   <td style="text-align:right;"> 88.56 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Vietnam </td>
   <td style="text-align:right;"> 83.73 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Saudi Arabia </td>
   <td style="text-align:right;"> 82.51 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Nepal </td>
   <td style="text-align:right;"> 76.41 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> India </td>
   <td style="text-align:right;"> 73.11 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Libya </td>
   <td style="text-align:right;"> 73.10 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Nicaragua </td>
   <td style="text-align:right;"> 72.28 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1">gapminder <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb22-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(country) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb22-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb22-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">life_diff =</span> lifeexp <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(lifeexp),</span>
<span id="cb22-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">life_abs  =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(lifeexp <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(lifeexp))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb22-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ungroup</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb22-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(life_abs)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb22-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(country, year, life_diff) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb22-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">slice</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb22-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print_table</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">digits =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span></code></pre></div>
<div class="cell-output-display">

<table class="table table-hover table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Country </th>
   <th style="text-align:right;"> Year </th>
   <th style="text-align:right;"> Life Diff </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Rwanda </td>
   <td style="text-align:right;"> 1992 </td>
   <td style="text-align:right;"> -20.4 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Cambodia </td>
   <td style="text-align:right;"> 1982 </td>
   <td style="text-align:right;"> 19.7 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> China </td>
   <td style="text-align:right;"> 1967 </td>
   <td style="text-align:right;"> 13.9 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Zimbabwe </td>
   <td style="text-align:right;"> 1997 </td>
   <td style="text-align:right;"> -13.6 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Rwanda </td>
   <td style="text-align:right;"> 1997 </td>
   <td style="text-align:right;"> 12.5 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Lesotho </td>
   <td style="text-align:right;"> 2002 </td>
   <td style="text-align:right;"> -11.0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Swaziland </td>
   <td style="text-align:right;"> 2002 </td>
   <td style="text-align:right;"> -10.4 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Botswana </td>
   <td style="text-align:right;"> 1997 </td>
   <td style="text-align:right;"> -10.2 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Cambodia </td>
   <td style="text-align:right;"> 1977 </td>
   <td style="text-align:right;"> -9.1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Namibia </td>
   <td style="text-align:right;"> 2002 </td>
   <td style="text-align:right;"> -7.4 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
</section>
<section id="visualizando-o-brasil" class="level1">
<h1>Visualizando o Brasil</h1>
<p>Agora vamos analisar o Brasil mais de perto. Para tornar a análise mais concreta escolho um pequeno grupo de países para acompanhar.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Visualizando a trajetória do Brasil</span></span>
<span id="cb23-2">countries <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Argentina"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Brazil"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Chile"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Korea, Rep."</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Venezuela"</span>)</span>
<span id="cb23-3">sub_gapminder <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(gapminder, country <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> countries)</span>
<span id="cb23-4"></span>
<span id="cb23-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(</span>
<span id="cb23-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> gapminder,</span>
<span id="cb23-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> gdppercap, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">group =</span> country),</span>
<span id="cb23-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray60"</span>,</span>
<span id="cb23-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(</span>
<span id="cb23-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> sub_gapminder,</span>
<span id="cb23-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> gdppercap, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> country)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_line</span>(</span>
<span id="cb23-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> sub_gapminder,</span>
<span id="cb23-16">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> year, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> gdppercap, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> country),</span>
<span id="cb23-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb23-18">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_log10</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_brewer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">palette =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qual"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb23-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PIB per capita (1952/2007)"</span>,</span>
<span id="cb23-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>fonte,</span>
<span id="cb23-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb23-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>x</span>
<span id="cb23-26">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb23-27">  theme_vini</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-gapminder/index_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>O Brasil em 2007 tinha a 68ª maior expectativa de vida ao nascer a 60º PIB per capita (numa amostra de 142 países). Olhando para a distribuição dos dados, o Brasil não está tão mal em termos de expectativa de vida, mas ainda está bastante atrás dos demais países em termos de PIB. Note que neste último gráfico uso os valores absolutos para facilitar a interpretação. A posição do Brasil é indicada por uma linha vertical em vermelho.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1">bra_life <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> gap2007 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb24-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(country <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Brazil"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb24-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(lifeexp)</span>
<span id="cb24-4"></span>
<span id="cb24-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(gap2007, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(lifeexp)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb24-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_histogram</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bins =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ffffff"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb24-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_vline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xintercept =</span> bra_life, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tomato"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb24-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb24-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Distribuição da expectativa de vida"</span>,</span>
<span id="cb24-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A linha vermelha indica a posição do Brasil."</span>,</span>
<span id="cb24-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb24-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>y,</span>
<span id="cb24-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>fonte</span>
<span id="cb24-14">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb24-15">  theme_vini</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-gapminder/index_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1">bra_gdp <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> gap2007 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb25-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(country <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Brazil"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb25-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>(lgdppc)</span>
<span id="cb25-4"></span>
<span id="cb25-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(gap2007, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(lgdppc)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_histogram</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bins =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ffffff"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_vline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xintercept =</span> bra_gdp, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tomato"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(</span>
<span id="cb25-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>),</span>
<span id="cb25-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">labels =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>))</span>
<span id="cb25-11">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb25-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Distribuição do PIB per capita (2007)"</span>,</span>
<span id="cb25-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A linha vermelha indica a posição do Brasil."</span>,</span>
<span id="cb25-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> nomes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>fonte,</span>
<span id="cb25-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PIB per capita (US$ 2010)"</span>,</span>
<span id="cb25-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span></span>
<span id="cb25-18">    ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-19">  theme_vini</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-gapminder/index_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="gráfico-interativo" class="level1">
<h1>Gráfico interativo</h1>
<p>Também é possível produzir gráficos interativos com o R. Estes dados são particularmente bem adaptados a este de visualização pois eles mudam no tempo.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(plotly)</span></code></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1">info <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb27-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">symbol =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"circle"</span>,</span>
<span id="cb27-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sizemode =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"diameter"</span>,</span>
<span id="cb27-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">line =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#FFFFFF'</span>)</span>
<span id="cb27-5">  )</span>
<span id="cb27-6"></span>
<span id="cb27-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_ly</span>(</span>
<span id="cb27-8">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> gapminder,</span>
<span id="cb27-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>lgdppc,</span>
<span id="cb27-10">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>lifeexp,</span>
<span id="cb27-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>continent,</span>
<span id="cb27-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colors =</span> continent_colors,</span>
<span id="cb27-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>pop,</span>
<span id="cb27-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">frame =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>year,</span>
<span id="cb27-15">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"scatter"</span>,</span>
<span id="cb27-16">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mode =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"markers"</span>,</span>
<span id="cb27-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">marker =</span> info,</span>
<span id="cb27-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(</span>
<span id="cb27-19">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Country:"</span>, country,</span>
<span id="cb27-20">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;br&gt;Life Expectancy:"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(lifeexp, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb27-21">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;br&gt;GDP per capita:"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(gdppercap, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),</span>
<span id="cb27-22">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;br&gt;Pop.:"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">format</span>(pop, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">big.mark =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">","</span>))</span>
<span id="cb27-23">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb27-24">  plotly<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">layout</span>( </span>
<span id="cb27-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expectativa de vida e PIB per capita"</span>,</span>
<span id="cb27-26">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xaxis =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GDP per capita (US$, log)"</span>),</span>
<span id="cb27-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yaxis =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Life Expectancy (years)"</span>)</span>
<span id="cb27-28">    )</span></code></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-e62a7487aff71b8f7a39" style="width:100%;height:533.952px;"></div>
<script type="application/json" data-for="htmlwidget-e62a7487aff71b8f7a39">{"x":{"visdat":{"1088a60ef3bfd":["function () ","plotlyVisDat"]},"cur_data":"1088a60ef3bfd","attrs":{"1088a60ef3bfd":{"x":{},"y":{},"mode":"markers","marker":{"symbol":"circle","sizemode":"diameter","line":{"width":2,"color":"#FFFFFF"}},"text":{},"color":{},"size":{},"frame":{},"colors":["#7F3B08","#A50026","#40004B","#276419","#313695"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Expectativa de vida e PIB per capita","xaxis":{"domain":[0,1],"automargin":true,"title":"GDP per capita (US$, log)","range":[2.24867743229327,5.18872279335025]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Life Expectancy (years)","range":[20.6488,85.5532]},"hovermode":"closest","showlegend":true,"sliders":[{"currentvalue":{"prefix":"year: ","xanchor":"right","font":{"size":16,"color":"rgba(204,204,204,1)"}},"steps":[{"method":"animate","args":[["1952"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false},"mode":"immediate"}],"label":"1952","value":"1952"},{"method":"animate","args":[["1957"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false},"mode":"immediate"}],"label":"1957","value":"1957"},{"method":"animate","args":[["1962"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false},"mode":"immediate"}],"label":"1962","value":"1962"},{"method":"animate","args":[["1967"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false},"mode":"immediate"}],"label":"1967","value":"1967"},{"method":"animate","args":[["1972"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false},"mode":"immediate"}],"label":"1972","value":"1972"},{"method":"animate","args":[["1977"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false},"mode":"immediate"}],"label":"1977","value":"1977"},{"method":"animate","args":[["1982"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false},"mode":"immediate"}],"label":"1982","value":"1982"},{"method":"animate","args":[["1987"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false},"mode":"immediate"}],"label":"1987","value":"1987"},{"method":"animate","args":[["1992"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false},"mode":"immediate"}],"label":"1992","value":"1992"},{"method":"animate","args":[["1997"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false},"mode":"immediate"}],"label":"1997","value":"1997"},{"method":"animate","args":[["2002"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false},"mode":"immediate"}],"label":"2002","value":"2002"},{"method":"animate","args":[["2007"],{"transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false},"mode":"immediate"}],"label":"2007","value":"2007"}],"visible":true,"pad":{"t":40}}],"updatemenus":[{"type":"buttons","direction":"right","showactive":false,"y":0,"x":0,"yanchor":"top","xanchor":"right","pad":{"t":60,"r":5},"buttons":[{"label":"Play","method":"animate","args":[null,{"fromcurrent":true,"mode":"immediate","transition":{"duration":500,"easing":"linear"},"frame":{"duration":500,"redraw":false}}]}]}]},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[3.38899023661283,3.54661795189398,3.02643201267174,2.93005260502055,2.7350039250647,2.5305793268568,3.06917494642867,3.02991544783555,3.07139072908185,3.04257194357223,2.89239645809614,3.32748591742422,3.14257551331311,3.42643472038373,3.15192805015693,2.57477544261792,2.51711742361593,2.55888402796697,3.63280908763635,2.68594823378004,2.95966086373133,2.7077374684251,2.47690451520437,2.93122434615365,2.47544775548677,2.76010041014319,3.3779521224475,3.15926985690029,2.56722061382276,2.65546209483727,2.87105655940933,3.29401531949067,3.22742481432583,2.67073373159289,3.38449327691663,2.88188621742309,3.03232934535076,3.43439088585181,2.69313213434862,2.94427711610338,3.16147491028024,2.94437790363822,3.05528268506973,3.6744289754842,3.20843897238107,3.06008434430642,2.85530714889989,2.93440181335381,3.16686674390612,2.86614165405515,3.05971061802448,2.6094707348536],"y":[43.077,30.015,38.223,47.622,31.975,39.031,38.523,35.463,38.092,40.715,39.143,42.111,40.477,34.812,41.893,34.482,35.928,34.078,37.003,30,43.149,33.609,32.5,42.27,42.138,38.48,42.723,36.681,36.256,33.685,40.543,50.986,42.873,31.286,41.725,37.444,36.324,52.724,40,46.471,37.278,30.331,32.978,45.009,38.635,41.407,41.215,38.596,44.6,39.978,42.038,48.451],"mode":"markers","marker":{"color":"rgba(127,59,8,1)","size":[10.6292596189456,10.284757308037,10.1145493065594,10.0260929225276,10.3009936080408,10.1628248681844,10.3377879889006,10.0840661454065,10.1789901850535,10.0064106643484,10.9582719083065,10.0542525463218,10.1990945881249,10.0002141779582,11.5127118906765,10.0107125153205,10.0941037749237,11.4197261683766,10.0246182479052,10.0153097653375,10.3768242082611,10.1777470929079,10.0355353857619,10.4370946910883,10.0470083079123,10.0548274414595,10.0655036461765,10.3209871682172,10.1950528493895,10.2578706029555,10.0656965974473,10.0311605723178,10.6742855863167,10.4358845651485,10.0290634984598,10.2265629453924,12.2563821943099,10.0134928701025,10.1689204766197,10,10.1839813232149,10.142187272567,10.168379025459,10.9695288779204,10.5763732249538,10.01571402794,10.5639687856671,10.0791122051378,10.2448729767233,10.3934640200843,10.1782761220201,10.2061852572526],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Algeria <br>Life Expectancy: 43.08 <br>GDP per capita: 2449.01 <br>Pop.:     9,279,525","Country: Angola <br>Life Expectancy: 30.02 <br>GDP per capita: 3520.61 <br>Pop.:     4,232,095","Country: Benin <br>Life Expectancy: 38.22 <br>GDP per capita: 1062.75 <br>Pop.:     1,738,315","Country: Botswana <br>Life Expectancy: 47.62 <br>GDP per capita: 851.24 <br>Pop.:       442,308","Country: Burkina Faso <br>Life Expectancy: 31.98 <br>GDP per capita: 543.26 <br>Pop.:     4,469,979","Country: Burundi <br>Life Expectancy: 39.03 <br>GDP per capita: 339.3 <br>Pop.:     2,445,618","Country: Cameroon <br>Life Expectancy: 38.52 <br>GDP per capita: 1172.67 <br>Pop.:     5,009,067","Country: Central African Republic <br>Life Expectancy: 35.46 <br>GDP per capita: 1071.31 <br>Pop.:     1,291,695","Country: Chad <br>Life Expectancy: 38.09 <br>GDP per capita: 1178.67 <br>Pop.:     2,682,462","Country: Comoros <br>Life Expectancy: 40.72 <br>GDP per capita: 1102.99 <br>Pop.:       153,936","Country: Congo, Dem. Rep. <br>Life Expectancy: 39.14 <br>GDP per capita: 780.54 <br>Pop.:    14,100,005","Country: Congo, Rep. <br>Life Expectancy: 42.11 <br>GDP per capita: 2125.62 <br>Pop.:       854,885","Country: Cote d'Ivoire <br>Life Expectancy: 40.48 <br>GDP per capita: 1388.59 <br>Pop.:     2,977,019","Country: Djibouti <br>Life Expectancy: 34.81 <br>GDP per capita: 2669.53 <br>Pop.:        63,149","Country: Egypt <br>Life Expectancy: 41.89 <br>GDP per capita: 1418.82 <br>Pop.:    22,223,309","Country: Equatorial Guinea <br>Life Expectancy: 34.48 <br>GDP per capita: 375.64 <br>Pop.:       216,964","Country: Eritrea <br>Life Expectancy: 35.93 <br>GDP per capita: 328.94 <br>Pop.:     1,438,760","Country: Ethiopia <br>Life Expectancy: 34.08 <br>GDP per capita: 362.15 <br>Pop.:    20,860,941","Country: Gabon <br>Life Expectancy: 37 <br>GDP per capita: 4293.48 <br>Pop.:       420,702","Country: Gambia <br>Life Expectancy: 30 <br>GDP per capita: 485.23 <br>Pop.:       284,320","Country: Ghana <br>Life Expectancy: 43.15 <br>GDP per capita: 911.3 <br>Pop.:     5,581,001","Country: Guinea <br>Life Expectancy: 33.61 <br>GDP per capita: 510.2 <br>Pop.:     2,664,249","Country: Guinea-Bissau <br>Life Expectancy: 32.5 <br>GDP per capita: 299.85 <br>Pop.:       580,653","Country: Kenya <br>Life Expectancy: 42.27 <br>GDP per capita: 853.54 <br>Pop.:     6,464,046","Country: Lesotho <br>Life Expectancy: 42.14 <br>GDP per capita: 298.85 <br>Pop.:       748,747","Country: Liberia <br>Life Expectancy: 38.48 <br>GDP per capita: 575.57 <br>Pop.:       863,308","Country: Libya <br>Life Expectancy: 42.72 <br>GDP per capita: 2387.55 <br>Pop.:     1,019,729","Country: Madagascar <br>Life Expectancy: 36.68 <br>GDP per capita: 1443.01 <br>Pop.:     4,762,912","Country: Malawi <br>Life Expectancy: 36.26 <br>GDP per capita: 369.17 <br>Pop.:     2,917,802","Country: Mali <br>Life Expectancy: 33.69 <br>GDP per capita: 452.34 <br>Pop.:     3,838,168","Country: Mauritania <br>Life Expectancy: 40.54 <br>GDP per capita: 743.12 <br>Pop.:     1,022,556","Country: Mauritius <br>Life Expectancy: 50.99 <br>GDP per capita: 1967.96 <br>Pop.:       516,556","Country: Morocco <br>Life Expectancy: 42.87 <br>GDP per capita: 1688.2 <br>Pop.:     9,939,217","Country: Mozambique <br>Life Expectancy: 31.29 <br>GDP per capita: 468.53 <br>Pop.:     6,446,316","Country: Namibia <br>Life Expectancy: 41.73 <br>GDP per capita: 2423.78 <br>Pop.:       485,831","Country: Niger <br>Life Expectancy: 37.44 <br>GDP per capita: 761.88 <br>Pop.:     3,379,468","Country: Nigeria <br>Life Expectancy: 36.32 <br>GDP per capita: 1077.28 <br>Pop.:    33,119,096","Country: Reunion <br>Life Expectancy: 52.72 <br>GDP per capita: 2718.89 <br>Pop.:       257,700","Country: Rwanda <br>Life Expectancy: 40 <br>GDP per capita: 493.32 <br>Pop.:     2,534,927","Country: Sao Tome and Principe <br>Life Expectancy: 46.47 <br>GDP per capita: 879.58 <br>Pop.:        60,011","Country: Senegal <br>Life Expectancy: 37.28 <br>GDP per capita: 1450.36 <br>Pop.:     2,755,589","Country: Sierra Leone <br>Life Expectancy: 30.33 <br>GDP per capita: 879.79 <br>Pop.:     2,143,249","Country: Somalia <br>Life Expectancy: 32.98 <br>GDP per capita: 1135.75 <br>Pop.:     2,526,994","Country: South Africa <br>Life Expectancy: 45.01 <br>GDP per capita: 4725.3 <br>Pop.:    14,264,935","Country: Sudan <br>Life Expectancy: 38.63 <br>GDP per capita: 1615.99 <br>Pop.:     8,504,667","Country: Swaziland <br>Life Expectancy: 41.41 <br>GDP per capita: 1148.38 <br>Pop.:       290,243","Country: Tanzania <br>Life Expectancy: 41.22 <br>GDP per capita: 716.65 <br>Pop.:     8,322,925","Country: Togo <br>Life Expectancy: 38.6 <br>GDP per capita: 859.81 <br>Pop.:     1,219,113","Country: Tunisia <br>Life Expectancy: 44.6 <br>GDP per capita: 1468.48 <br>Pop.:     3,647,735","Country: Uganda <br>Life Expectancy: 39.98 <br>GDP per capita: 734.75 <br>Pop.:     5,824,797","Country: Zambia <br>Life Expectancy: 42.04 <br>GDP per capita: 1147.39 <br>Pop.:     2,672,000","Country: Zimbabwe <br>Life Expectancy: 48.45 <br>GDP per capita: 406.88 <br>Pop.:     3,080,907"],"frame":"1952","type":"scatter","name":"Africa","textfont":{"color":"rgba(127,59,8,1)","size":[10.6292596189456,10.284757308037,10.1145493065594,10.0260929225276,10.3009936080408,10.1628248681844,10.3377879889006,10.0840661454065,10.1789901850535,10.0064106643484,10.9582719083065,10.0542525463218,10.1990945881249,10.0002141779582,11.5127118906765,10.0107125153205,10.0941037749237,11.4197261683766,10.0246182479052,10.0153097653375,10.3768242082611,10.1777470929079,10.0355353857619,10.4370946910883,10.0470083079123,10.0548274414595,10.0655036461765,10.3209871682172,10.1950528493895,10.2578706029555,10.0656965974473,10.0311605723178,10.6742855863167,10.4358845651485,10.0290634984598,10.2265629453924,12.2563821943099,10.0134928701025,10.1689204766197,10,10.1839813232149,10.142187272567,10.168379025459,10.9695288779204,10.5763732249538,10.01571402794,10.5639687856671,10.0791122051378,10.2448729767233,10.3934640200843,10.1782761220201,10.2061852572526]},"error_y":{"color":"rgba(127,59,8,1)","width":[]},"error_x":{"color":"rgba(127,59,8,1)","width":[]},"line":{"color":"rgba(127,59,8,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.77168410638546,3.4277013118156,3.32406512092713,4.05565201579927,3.59549388379384,3.33124809455434,3.41946163852479,3.74714281784858,3.14541928995783,3.54680300382501,3.48405811924978,3.38529120987805,3.26490442284377,3.34141992333242,3.46217793171264,3.54134525206814,3.49309037603174,3.39451827933144,3.29054848983727,3.57501726271782,3.4888269675211,3.48047721152403,4.14583267954377,3.7571504724556,3.88591503111158],"y":[62.485,40.414,50.917,68.75,54.745,50.643,57.206,59.421,45.928,48.357,45.262,42.023,37.579,41.912,58.53,50.789,42.314,55.191,62.649,43.902,64.28,59.1,68.44,66.071,55.088],"mode":"markers","marker":{"color":"rgba(165,0,38,1)","size":[11.216060198127,10.1926990076926,13.8591993935856,11.0050647414534,10.4311957878396,10.8388814154577,10.0591279956243,10.4059543216627,10.1659459420127,10.2381171568826,10.1353357620006,10.2106540550972,10.2144152739446,10.0994748093615,10.0932393505002,12.0533445613081,10.0754727496675,10.0600673618572,10.1020972949218,10.5436822835541,10.14790353075,10.041145578761,20.7493711973046,10.1496757202609,10.3671709797193],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Argentina <br>Life Expectancy: 62.48 <br>GDP per capita: 5911.32 <br>Pop.:    17,876,956","Country: Bolivia <br>Life Expectancy: 40.41 <br>GDP per capita: 2677.33 <br>Pop.:     2,883,315","Country: Brazil <br>Life Expectancy: 50.92 <br>GDP per capita: 2108.94 <br>Pop.:    56,602,560","Country: Canada <br>Life Expectancy: 68.75 <br>GDP per capita: 11367.16 <br>Pop.:    14,785,584","Country: Chile <br>Life Expectancy: 54.74 <br>GDP per capita: 3939.98 <br>Pop.:     6,377,619","Country: Colombia <br>Life Expectancy: 50.64 <br>GDP per capita: 2144.12 <br>Pop.:    12,350,771","Country: Costa Rica <br>Life Expectancy: 57.21 <br>GDP per capita: 2627.01 <br>Pop.:       926,317","Country: Cuba <br>Life Expectancy: 59.42 <br>GDP per capita: 5586.54 <br>Pop.:     6,007,797","Country: Dominican Republic <br>Life Expectancy: 45.93 <br>GDP per capita: 1397.72 <br>Pop.:     2,491,346","Country: Ecuador <br>Life Expectancy: 48.36 <br>GDP per capita: 3522.11 <br>Pop.:     3,548,753","Country: El Salvador <br>Life Expectancy: 45.26 <br>GDP per capita: 3048.3 <br>Pop.:     2,042,865","Country: Guatemala <br>Life Expectancy: 42.02 <br>GDP per capita: 2428.24 <br>Pop.:     3,146,381","Country: Haiti <br>Life Expectancy: 37.58 <br>GDP per capita: 1840.37 <br>Pop.:     3,201,488","Country: Honduras <br>Life Expectancy: 41.91 <br>GDP per capita: 2194.93 <br>Pop.:     1,517,453","Country: Jamaica <br>Life Expectancy: 58.53 <br>GDP per capita: 2898.53 <br>Pop.:     1,426,095","Country: Mexico <br>Life Expectancy: 50.79 <br>GDP per capita: 3478.13 <br>Pop.:    30,144,317","Country: Nicaragua <br>Life Expectancy: 42.31 <br>GDP per capita: 3112.36 <br>Pop.:     1,165,790","Country: Panama <br>Life Expectancy: 55.19 <br>GDP per capita: 2480.38 <br>Pop.:       940,080","Country: Paraguay <br>Life Expectancy: 62.65 <br>GDP per capita: 1952.31 <br>Pop.:     1,555,876","Country: Peru <br>Life Expectancy: 43.9 <br>GDP per capita: 3758.52 <br>Pop.:     8,025,700","Country: Puerto Rico <br>Life Expectancy: 64.28 <br>GDP per capita: 3081.96 <br>Pop.:     2,227,000","Country: Trinidad and Tobago <br>Life Expectancy: 59.1 <br>GDP per capita: 3023.27 <br>Pop.:       662,850","Country: United States <br>Life Expectancy: 68.44 <br>GDP per capita: 13990.48 <br>Pop.:   157,553,000","Country: Uruguay <br>Life Expectancy: 66.07 <br>GDP per capita: 5716.77 <br>Pop.:     2,252,965","Country: Venezuela <br>Life Expectancy: 55.09 <br>GDP per capita: 7689.8 <br>Pop.:     5,439,568"],"frame":"1952","type":"scatter","name":"Americas","textfont":{"color":"rgba(165,0,38,1)","size":[11.216060198127,10.1926990076926,13.8591993935856,11.0050647414534,10.4311957878396,10.8388814154577,10.0591279956243,10.4059543216627,10.1659459420127,10.2381171568826,10.1353357620006,10.2106540550972,10.2144152739446,10.0994748093615,10.0932393505002,12.0533445613081,10.0754727496675,10.0600673618572,10.1020972949218,10.5436822835541,10.14790353075,10.041145578761,20.7493711973046,10.1496757202609,10.3671709797193]},"error_y":{"color":"rgba(165,0,38,1)","width":[]},"error_x":{"color":"rgba(165,0,38,1)","width":[]},"line":{"color":"rgba(165,0,38,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2.89178565070639,3.99418885910468,2.83521110677235,2.56640129232975,2.60254679160356,3.48492892667285,2.73764241302062,2.8748768833905,3.48220534228651,3.61592545033292,3.61135385491083,3.50744516771402,3.18946443127902,3.0367397532404,3.0130868621518,5.03495857498782,3.68437887876133,3.26271986425609,2.89573564318216,2.51982799377572,2.73708582406826,3.26203090406686,2.83543508289054,3.10478780221552,3.81020258849406,3.3645769259938,3.0348417539084,3.2157658381984,3.08168852810498,2.8795531210227,2.78180310257259,3.18058239847588,2.89304987672292],"y":[28.801,50.939,37.484,39.417,44,60.96,37.373,37.468,44.869,45.32,65.39,63.03,43.158,50.056,47.453,55.565,55.928,48.463,42.244,36.319,36.157,37.578,43.436,47.752,39.875,60.396,57.593,45.883,58.5,50.848,40.412,43.16,32.548],"mode":"markers","marker":{"color":"rgba(64,0,75,1)","size":[10.570958440334,10.0041249391595,13.1960735163377,10.3162725230159,47.9625664144959,10.1410031510255,35.3860253098784,15.5962003804901,11.1747701277352,10.3673209998443,10.1065363344522,15.8969931199104,10.037396031179,10.6010003457508,11.4256389269872,10.0068245506259,10.0941562614915,10.4565012070906,10.0505517313918,11.3673116074712,10.622639827362,10.0305652012758,12.8179314106275,11.5274123613572,10.2693035970927,10.072825215251,10.5407229693692,10.2458158238599,10.5794920464327,11.4489699230467,11.7873299404583,10.0662446008975,10.3347003590492],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Afghanistan <br>Life Expectancy: 28.8 <br>GDP per capita: 779.45 <br>Pop.:     8,425,333","Country: Bahrain <br>Life Expectancy: 50.94 <br>GDP per capita: 9867.08 <br>Pop.:       120,447","Country: Bangladesh <br>Life Expectancy: 37.48 <br>GDP per capita: 684.24 <br>Pop.:    46,886,859","Country: Cambodia <br>Life Expectancy: 39.42 <br>GDP per capita: 368.47 <br>Pop.:     4,693,836","Country: China <br>Life Expectancy: 44 <br>GDP per capita: 400.45 <br>Pop.:   556,263,527","Country: Hong Kong, China <br>Life Expectancy: 60.96 <br>GDP per capita: 3054.42 <br>Pop.:     2,125,900","Country: India <br>Life Expectancy: 37.37 <br>GDP per capita: 546.57 <br>Pop.:   372,000,000","Country: Indonesia <br>Life Expectancy: 37.47 <br>GDP per capita: 749.68 <br>Pop.:    82,052,000","Country: Iran <br>Life Expectancy: 44.87 <br>GDP per capita: 3035.33 <br>Pop.:    17,272,000","Country: Iraq <br>Life Expectancy: 45.32 <br>GDP per capita: 4129.77 <br>Pop.:     5,441,766","Country: Israel <br>Life Expectancy: 65.39 <br>GDP per capita: 4086.52 <br>Pop.:     1,620,914","Country: Japan <br>Life Expectancy: 63.03 <br>GDP per capita: 3216.96 <br>Pop.:    86,459,025","Country: Jordan <br>Life Expectancy: 43.16 <br>GDP per capita: 1546.91 <br>Pop.:       607,914","Country: Korea, Dem. Rep. <br>Life Expectancy: 50.06 <br>GDP per capita: 1088.28 <br>Pop.:     8,865,488","Country: Korea, Rep. <br>Life Expectancy: 47.45 <br>GDP per capita: 1030.59 <br>Pop.:    20,947,571","Country: Kuwait <br>Life Expectancy: 55.56 <br>GDP per capita: 108382.35 <br>Pop.:       160,000","Country: Lebanon <br>Life Expectancy: 55.93 <br>GDP per capita: 4834.8 <br>Pop.:     1,439,529","Country: Malaysia <br>Life Expectancy: 48.46 <br>GDP per capita: 1831.13 <br>Pop.:     6,748,378","Country: Mongolia <br>Life Expectancy: 42.24 <br>GDP per capita: 786.57 <br>Pop.:       800,663","Country: Myanmar <br>Life Expectancy: 36.32 <br>GDP per capita: 331 <br>Pop.:    20,092,996","Country: Nepal <br>Life Expectancy: 36.16 <br>GDP per capita: 545.87 <br>Pop.:     9,182,536","Country: Oman <br>Life Expectancy: 37.58 <br>GDP per capita: 1828.23 <br>Pop.:       507,833","Country: Pakistan <br>Life Expectancy: 43.44 <br>GDP per capita: 684.6 <br>Pop.:    41,346,560","Country: Philippines <br>Life Expectancy: 47.75 <br>GDP per capita: 1272.88 <br>Pop.:    22,438,691","Country: Saudi Arabia <br>Life Expectancy: 39.88 <br>GDP per capita: 6459.55 <br>Pop.:     4,005,677","Country: Singapore <br>Life Expectancy: 60.4 <br>GDP per capita: 2315.14 <br>Pop.:     1,127,000","Country: Sri Lanka <br>Life Expectancy: 57.59 <br>GDP per capita: 1083.53 <br>Pop.:     7,982,342","Country: Syria <br>Life Expectancy: 45.88 <br>GDP per capita: 1643.49 <br>Pop.:     3,661,549","Country: Taiwan <br>Life Expectancy: 58.5 <br>GDP per capita: 1206.95 <br>Pop.:     8,550,362","Country: Thailand <br>Life Expectancy: 50.85 <br>GDP per capita: 757.8 <br>Pop.:    21,289,402","Country: Vietnam <br>Life Expectancy: 40.41 <br>GDP per capita: 605.07 <br>Pop.:    26,246,839","Country: West Bank and Gaza <br>Life Expectancy: 43.16 <br>GDP per capita: 1515.59 <br>Pop.:     1,030,585","Country: Yemen, Rep. <br>Life Expectancy: 32.55 <br>GDP per capita: 781.72 <br>Pop.:     4,963,829"],"frame":"1952","type":"scatter","name":"Asia","textfont":{"color":"rgba(64,0,75,1)","size":[10.570958440334,10.0041249391595,13.1960735163377,10.3162725230159,47.9625664144959,10.1410031510255,35.3860253098784,15.5962003804901,11.1747701277352,10.3673209998443,10.1065363344522,15.8969931199104,10.037396031179,10.6010003457508,11.4256389269872,10.0068245506259,10.0941562614915,10.4565012070906,10.0505517313918,11.3673116074712,10.622639827362,10.0305652012758,12.8179314106275,11.5274123613572,10.2693035970927,10.072825215251,10.5407229693692,10.2458158238599,10.5794920464327,11.4489699230467,11.7873299404583,10.0662446008975,10.3347003590492]},"error_y":{"color":"rgba(64,0,75,1)","width":[]},"error_x":{"color":"rgba(64,0,75,1)","width":[]},"line":{"color":"rgba(64,0,75,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.20440655935692,3.78796153632719,3.9213277159305,2.98835076435393,3.3881521354268,3.49404830692654,3.83734472624362,3.98643066779033,3.80784062264484,3.84694354559525,3.85394839994697,3.54785959575643,3.72128896869472,3.86139630046032,3.71686109021475,3.69297059675009,3.42285001049471,3.95141387106102,4.00412446561185,3.60523280489102,3.48690063208004,3.49756723117478,3.55406003811099,3.70540687333909,3.62480187974278,3.58365604390734,3.93083928091202,4.16832752592624,3.29426798832312,3.99910915184445],"y":[55.23,66.8,68,53.82,59.6,61.21,66.87,70.78,66.55,67.41,67.5,65.86,64.03,72.49,66.91,65.94,59.164,72.13,72.67,61.31,59.82,61.05,57.996,64.36,65.57,64.94,71.86,69.62,43.585,69.18],"mode":"markers","marker":{"color":"rgba(39,100,25,1)","size":[10.0834520047857,10.4687453883003,10.5917805238485,10.1863982306968,10.4924379205753,10.2608778990093,10.6187253122449,10.2917126314378,10.2750930225069,12.8939043183822,14.7153237044989,10.5237216895835,10.6445807142835,10.0060029208422,10.1973976134355,13.2492522379888,10.0241494862044,10.7045060416184,10.2230315344434,11.7520917283198,10.5778326791541,11.1309516926893,10.4641297782224,10.2387576431668,10.0975681614129,11.9445187477512,10.4821844750276,10.3245423312151,11.5135560439547,13.4379035689338],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Albania <br>Life Expectancy: 55.23 <br>GDP per capita: 1601.06 <br>Pop.:     1,282,697","Country: Austria <br>Life Expectancy: 66.8 <br>GDP per capita: 6137.08 <br>Pop.:     6,927,772","Country: Belgium <br>Life Expectancy: 68 <br>GDP per capita: 8343.11 <br>Pop.:     8,730,405","Country: Bosnia and Herzegovina <br>Life Expectancy: 53.82 <br>GDP per capita: 973.53 <br>Pop.:     2,791,000","Country: Bulgaria <br>Life Expectancy: 59.6 <br>GDP per capita: 2444.29 <br>Pop.:     7,274,900","Country: Croatia <br>Life Expectancy: 61.21 <br>GDP per capita: 3119.24 <br>Pop.:     3,882,229","Country: Czech Republic <br>Life Expectancy: 66.87 <br>GDP per capita: 6876.14 <br>Pop.:     9,125,183","Country: Denmark <br>Life Expectancy: 70.78 <br>GDP per capita: 9692.39 <br>Pop.:     4,334,000","Country: Finland <br>Life Expectancy: 66.55 <br>GDP per capita: 6424.52 <br>Pop.:     4,090,500","Country: France <br>Life Expectancy: 67.41 <br>GDP per capita: 7029.81 <br>Pop.:    42,459,667","Country: Germany <br>Life Expectancy: 67.5 <br>GDP per capita: 7144.11 <br>Pop.:    69,145,952","Country: Greece <br>Life Expectancy: 65.86 <br>GDP per capita: 3530.69 <br>Pop.:     7,733,250","Country: Hungary <br>Life Expectancy: 64.03 <br>GDP per capita: 5263.67 <br>Pop.:     9,504,000","Country: Iceland <br>Life Expectancy: 72.49 <br>GDP per capita: 7267.69 <br>Pop.:       147,962","Country: Ireland <br>Life Expectancy: 66.91 <br>GDP per capita: 5210.28 <br>Pop.:     2,952,156","Country: Italy <br>Life Expectancy: 65.94 <br>GDP per capita: 4931.4 <br>Pop.:    47,666,000","Country: Montenegro <br>Life Expectancy: 59.16 <br>GDP per capita: 2647.59 <br>Pop.:       413,834","Country: Netherlands <br>Life Expectancy: 72.13 <br>GDP per capita: 8941.57 <br>Pop.:    10,381,988","Country: Norway <br>Life Expectancy: 72.67 <br>GDP per capita: 10095.42 <br>Pop.:     3,327,728","Country: Poland <br>Life Expectancy: 61.31 <br>GDP per capita: 4029.33 <br>Pop.:    25,730,551","Country: Portugal <br>Life Expectancy: 59.82 <br>GDP per capita: 3068.32 <br>Pop.:     8,526,050","Country: Romania <br>Life Expectancy: 61.05 <br>GDP per capita: 3144.61 <br>Pop.:    16,630,000","Country: Serbia <br>Life Expectancy: 58 <br>GDP per capita: 3581.46 <br>Pop.:     6,860,147","Country: Slovak Republic <br>Life Expectancy: 64.36 <br>GDP per capita: 5074.66 <br>Pop.:     3,558,137","Country: Slovenia <br>Life Expectancy: 65.57 <br>GDP per capita: 4215.04 <br>Pop.:     1,489,518","Country: Spain <br>Life Expectancy: 64.94 <br>GDP per capita: 3834.03 <br>Pop.:    28,549,870","Country: Sweden <br>Life Expectancy: 71.86 <br>GDP per capita: 8527.84 <br>Pop.:     7,124,673","Country: Switzerland <br>Life Expectancy: 69.62 <br>GDP per capita: 14734.23 <br>Pop.:     4,815,000","Country: Turkey <br>Life Expectancy: 43.58 <br>GDP per capita: 1969.1 <br>Pop.:    22,235,677","Country: United Kingdom <br>Life Expectancy: 69.18 <br>GDP per capita: 9979.51 <br>Pop.:    50,430,000"],"frame":"1952","type":"scatter","name":"Europe","textfont":{"color":"rgba(39,100,25,1)","size":[10.0834520047857,10.4687453883003,10.5917805238485,10.1863982306968,10.4924379205753,10.2608778990093,10.6187253122449,10.2917126314378,10.2750930225069,12.8939043183822,14.7153237044989,10.5237216895835,10.6445807142835,10.0060029208422,10.1973976134355,13.2492522379888,10.0241494862044,10.7045060416184,10.2230315344434,11.7520917283198,10.5778326791541,11.1309516926893,10.4641297782224,10.2387576431668,10.0975681614129,11.9445187477512,10.4821844750276,10.3245423312151,11.5135560439547,13.4379035689338]},"error_y":{"color":"rgba(39,100,25,1)","width":[]},"error_x":{"color":"rgba(39,100,25,1)","width":[]},"line":{"color":"rgba(39,100,25,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[4.00171622128976,4.02352306468033],"y":[69.12,69.39],"mode":"markers","marker":{"color":"rgba(49,54,149,1)","size":[10.5891054834672,10.1320547713602],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Australia <br>Life Expectancy: 69.12 <br>GDP per capita: 10039.6 <br>Pop.:     8,691,212","Country: New Zealand <br>Life Expectancy: 69.39 <br>GDP per capita: 10556.58 <br>Pop.:     1,994,794"],"frame":"1952","type":"scatter","name":"Oceania","textfont":{"color":"rgba(49,54,149,1)","size":[10.5891054834672,10.1320547713602]},"error_y":{"color":"rgba(49,54,149,1)","width":[]},"error_x":{"color":"rgba(49,54,149,1)","width":[]},"line":{"color":"rgba(49,54,149,1)"},"xaxis":"x","yaxis":"y","visible":true}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"frames":[{"name":"1952","data":[{"x":[3.38899023661283,3.54661795189398,3.02643201267174,2.93005260502055,2.7350039250647,2.5305793268568,3.06917494642867,3.02991544783555,3.07139072908185,3.04257194357223,2.89239645809614,3.32748591742422,3.14257551331311,3.42643472038373,3.15192805015693,2.57477544261792,2.51711742361593,2.55888402796697,3.63280908763635,2.68594823378004,2.95966086373133,2.7077374684251,2.47690451520437,2.93122434615365,2.47544775548677,2.76010041014319,3.3779521224475,3.15926985690029,2.56722061382276,2.65546209483727,2.87105655940933,3.29401531949067,3.22742481432583,2.67073373159289,3.38449327691663,2.88188621742309,3.03232934535076,3.43439088585181,2.69313213434862,2.94427711610338,3.16147491028024,2.94437790363822,3.05528268506973,3.6744289754842,3.20843897238107,3.06008434430642,2.85530714889989,2.93440181335381,3.16686674390612,2.86614165405515,3.05971061802448,2.6094707348536],"y":[43.077,30.015,38.223,47.622,31.975,39.031,38.523,35.463,38.092,40.715,39.143,42.111,40.477,34.812,41.893,34.482,35.928,34.078,37.003,30,43.149,33.609,32.5,42.27,42.138,38.48,42.723,36.681,36.256,33.685,40.543,50.986,42.873,31.286,41.725,37.444,36.324,52.724,40,46.471,37.278,30.331,32.978,45.009,38.635,41.407,41.215,38.596,44.6,39.978,42.038,48.451],"mode":"markers","marker":{"color":"rgba(127,59,8,1)","size":[10.6292596189456,10.284757308037,10.1145493065594,10.0260929225276,10.3009936080408,10.1628248681844,10.3377879889006,10.0840661454065,10.1789901850535,10.0064106643484,10.9582719083065,10.0542525463218,10.1990945881249,10.0002141779582,11.5127118906765,10.0107125153205,10.0941037749237,11.4197261683766,10.0246182479052,10.0153097653375,10.3768242082611,10.1777470929079,10.0355353857619,10.4370946910883,10.0470083079123,10.0548274414595,10.0655036461765,10.3209871682172,10.1950528493895,10.2578706029555,10.0656965974473,10.0311605723178,10.6742855863167,10.4358845651485,10.0290634984598,10.2265629453924,12.2563821943099,10.0134928701025,10.1689204766197,10,10.1839813232149,10.142187272567,10.168379025459,10.9695288779204,10.5763732249538,10.01571402794,10.5639687856671,10.0791122051378,10.2448729767233,10.3934640200843,10.1782761220201,10.2061852572526],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Algeria <br>Life Expectancy: 43.08 <br>GDP per capita: 2449.01 <br>Pop.:     9,279,525","Country: Angola <br>Life Expectancy: 30.02 <br>GDP per capita: 3520.61 <br>Pop.:     4,232,095","Country: Benin <br>Life Expectancy: 38.22 <br>GDP per capita: 1062.75 <br>Pop.:     1,738,315","Country: Botswana <br>Life Expectancy: 47.62 <br>GDP per capita: 851.24 <br>Pop.:       442,308","Country: Burkina Faso <br>Life Expectancy: 31.98 <br>GDP per capita: 543.26 <br>Pop.:     4,469,979","Country: Burundi <br>Life Expectancy: 39.03 <br>GDP per capita: 339.3 <br>Pop.:     2,445,618","Country: Cameroon <br>Life Expectancy: 38.52 <br>GDP per capita: 1172.67 <br>Pop.:     5,009,067","Country: Central African Republic <br>Life Expectancy: 35.46 <br>GDP per capita: 1071.31 <br>Pop.:     1,291,695","Country: Chad <br>Life Expectancy: 38.09 <br>GDP per capita: 1178.67 <br>Pop.:     2,682,462","Country: Comoros <br>Life Expectancy: 40.72 <br>GDP per capita: 1102.99 <br>Pop.:       153,936","Country: Congo, Dem. Rep. <br>Life Expectancy: 39.14 <br>GDP per capita: 780.54 <br>Pop.:    14,100,005","Country: Congo, Rep. <br>Life Expectancy: 42.11 <br>GDP per capita: 2125.62 <br>Pop.:       854,885","Country: Cote d'Ivoire <br>Life Expectancy: 40.48 <br>GDP per capita: 1388.59 <br>Pop.:     2,977,019","Country: Djibouti <br>Life Expectancy: 34.81 <br>GDP per capita: 2669.53 <br>Pop.:        63,149","Country: Egypt <br>Life Expectancy: 41.89 <br>GDP per capita: 1418.82 <br>Pop.:    22,223,309","Country: Equatorial Guinea <br>Life Expectancy: 34.48 <br>GDP per capita: 375.64 <br>Pop.:       216,964","Country: Eritrea <br>Life Expectancy: 35.93 <br>GDP per capita: 328.94 <br>Pop.:     1,438,760","Country: Ethiopia <br>Life Expectancy: 34.08 <br>GDP per capita: 362.15 <br>Pop.:    20,860,941","Country: Gabon <br>Life Expectancy: 37 <br>GDP per capita: 4293.48 <br>Pop.:       420,702","Country: Gambia <br>Life Expectancy: 30 <br>GDP per capita: 485.23 <br>Pop.:       284,320","Country: Ghana <br>Life Expectancy: 43.15 <br>GDP per capita: 911.3 <br>Pop.:     5,581,001","Country: Guinea <br>Life Expectancy: 33.61 <br>GDP per capita: 510.2 <br>Pop.:     2,664,249","Country: Guinea-Bissau <br>Life Expectancy: 32.5 <br>GDP per capita: 299.85 <br>Pop.:       580,653","Country: Kenya <br>Life Expectancy: 42.27 <br>GDP per capita: 853.54 <br>Pop.:     6,464,046","Country: Lesotho <br>Life Expectancy: 42.14 <br>GDP per capita: 298.85 <br>Pop.:       748,747","Country: Liberia <br>Life Expectancy: 38.48 <br>GDP per capita: 575.57 <br>Pop.:       863,308","Country: Libya <br>Life Expectancy: 42.72 <br>GDP per capita: 2387.55 <br>Pop.:     1,019,729","Country: Madagascar <br>Life Expectancy: 36.68 <br>GDP per capita: 1443.01 <br>Pop.:     4,762,912","Country: Malawi <br>Life Expectancy: 36.26 <br>GDP per capita: 369.17 <br>Pop.:     2,917,802","Country: Mali <br>Life Expectancy: 33.69 <br>GDP per capita: 452.34 <br>Pop.:     3,838,168","Country: Mauritania <br>Life Expectancy: 40.54 <br>GDP per capita: 743.12 <br>Pop.:     1,022,556","Country: Mauritius <br>Life Expectancy: 50.99 <br>GDP per capita: 1967.96 <br>Pop.:       516,556","Country: Morocco <br>Life Expectancy: 42.87 <br>GDP per capita: 1688.2 <br>Pop.:     9,939,217","Country: Mozambique <br>Life Expectancy: 31.29 <br>GDP per capita: 468.53 <br>Pop.:     6,446,316","Country: Namibia <br>Life Expectancy: 41.73 <br>GDP per capita: 2423.78 <br>Pop.:       485,831","Country: Niger <br>Life Expectancy: 37.44 <br>GDP per capita: 761.88 <br>Pop.:     3,379,468","Country: Nigeria <br>Life Expectancy: 36.32 <br>GDP per capita: 1077.28 <br>Pop.:    33,119,096","Country: Reunion <br>Life Expectancy: 52.72 <br>GDP per capita: 2718.89 <br>Pop.:       257,700","Country: Rwanda <br>Life Expectancy: 40 <br>GDP per capita: 493.32 <br>Pop.:     2,534,927","Country: Sao Tome and Principe <br>Life Expectancy: 46.47 <br>GDP per capita: 879.58 <br>Pop.:        60,011","Country: Senegal <br>Life Expectancy: 37.28 <br>GDP per capita: 1450.36 <br>Pop.:     2,755,589","Country: Sierra Leone <br>Life Expectancy: 30.33 <br>GDP per capita: 879.79 <br>Pop.:     2,143,249","Country: Somalia <br>Life Expectancy: 32.98 <br>GDP per capita: 1135.75 <br>Pop.:     2,526,994","Country: South Africa <br>Life Expectancy: 45.01 <br>GDP per capita: 4725.3 <br>Pop.:    14,264,935","Country: Sudan <br>Life Expectancy: 38.63 <br>GDP per capita: 1615.99 <br>Pop.:     8,504,667","Country: Swaziland <br>Life Expectancy: 41.41 <br>GDP per capita: 1148.38 <br>Pop.:       290,243","Country: Tanzania <br>Life Expectancy: 41.22 <br>GDP per capita: 716.65 <br>Pop.:     8,322,925","Country: Togo <br>Life Expectancy: 38.6 <br>GDP per capita: 859.81 <br>Pop.:     1,219,113","Country: Tunisia <br>Life Expectancy: 44.6 <br>GDP per capita: 1468.48 <br>Pop.:     3,647,735","Country: Uganda <br>Life Expectancy: 39.98 <br>GDP per capita: 734.75 <br>Pop.:     5,824,797","Country: Zambia <br>Life Expectancy: 42.04 <br>GDP per capita: 1147.39 <br>Pop.:     2,672,000","Country: Zimbabwe <br>Life Expectancy: 48.45 <br>GDP per capita: 406.88 <br>Pop.:     3,080,907"],"frame":"1952","type":"scatter","name":"Africa","textfont":{"color":"rgba(127,59,8,1)","size":[10.6292596189456,10.284757308037,10.1145493065594,10.0260929225276,10.3009936080408,10.1628248681844,10.3377879889006,10.0840661454065,10.1789901850535,10.0064106643484,10.9582719083065,10.0542525463218,10.1990945881249,10.0002141779582,11.5127118906765,10.0107125153205,10.0941037749237,11.4197261683766,10.0246182479052,10.0153097653375,10.3768242082611,10.1777470929079,10.0355353857619,10.4370946910883,10.0470083079123,10.0548274414595,10.0655036461765,10.3209871682172,10.1950528493895,10.2578706029555,10.0656965974473,10.0311605723178,10.6742855863167,10.4358845651485,10.0290634984598,10.2265629453924,12.2563821943099,10.0134928701025,10.1689204766197,10,10.1839813232149,10.142187272567,10.168379025459,10.9695288779204,10.5763732249538,10.01571402794,10.5639687856671,10.0791122051378,10.2448729767233,10.3934640200843,10.1782761220201,10.2061852572526]},"error_y":{"color":"rgba(127,59,8,1)","width":[]},"error_x":{"color":"rgba(127,59,8,1)","width":[]},"line":{"color":"rgba(127,59,8,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.77168410638546,3.4277013118156,3.32406512092713,4.05565201579927,3.59549388379384,3.33124809455434,3.41946163852479,3.74714281784858,3.14541928995783,3.54680300382501,3.48405811924978,3.38529120987805,3.26490442284377,3.34141992333242,3.46217793171264,3.54134525206814,3.49309037603174,3.39451827933144,3.29054848983727,3.57501726271782,3.4888269675211,3.48047721152403,4.14583267954377,3.7571504724556,3.88591503111158],"y":[62.485,40.414,50.917,68.75,54.745,50.643,57.206,59.421,45.928,48.357,45.262,42.023,37.579,41.912,58.53,50.789,42.314,55.191,62.649,43.902,64.28,59.1,68.44,66.071,55.088],"mode":"markers","marker":{"color":"rgba(165,0,38,1)","size":[11.216060198127,10.1926990076926,13.8591993935856,11.0050647414534,10.4311957878396,10.8388814154577,10.0591279956243,10.4059543216627,10.1659459420127,10.2381171568826,10.1353357620006,10.2106540550972,10.2144152739446,10.0994748093615,10.0932393505002,12.0533445613081,10.0754727496675,10.0600673618572,10.1020972949218,10.5436822835541,10.14790353075,10.041145578761,20.7493711973046,10.1496757202609,10.3671709797193],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Argentina <br>Life Expectancy: 62.48 <br>GDP per capita: 5911.32 <br>Pop.:    17,876,956","Country: Bolivia <br>Life Expectancy: 40.41 <br>GDP per capita: 2677.33 <br>Pop.:     2,883,315","Country: Brazil <br>Life Expectancy: 50.92 <br>GDP per capita: 2108.94 <br>Pop.:    56,602,560","Country: Canada <br>Life Expectancy: 68.75 <br>GDP per capita: 11367.16 <br>Pop.:    14,785,584","Country: Chile <br>Life Expectancy: 54.74 <br>GDP per capita: 3939.98 <br>Pop.:     6,377,619","Country: Colombia <br>Life Expectancy: 50.64 <br>GDP per capita: 2144.12 <br>Pop.:    12,350,771","Country: Costa Rica <br>Life Expectancy: 57.21 <br>GDP per capita: 2627.01 <br>Pop.:       926,317","Country: Cuba <br>Life Expectancy: 59.42 <br>GDP per capita: 5586.54 <br>Pop.:     6,007,797","Country: Dominican Republic <br>Life Expectancy: 45.93 <br>GDP per capita: 1397.72 <br>Pop.:     2,491,346","Country: Ecuador <br>Life Expectancy: 48.36 <br>GDP per capita: 3522.11 <br>Pop.:     3,548,753","Country: El Salvador <br>Life Expectancy: 45.26 <br>GDP per capita: 3048.3 <br>Pop.:     2,042,865","Country: Guatemala <br>Life Expectancy: 42.02 <br>GDP per capita: 2428.24 <br>Pop.:     3,146,381","Country: Haiti <br>Life Expectancy: 37.58 <br>GDP per capita: 1840.37 <br>Pop.:     3,201,488","Country: Honduras <br>Life Expectancy: 41.91 <br>GDP per capita: 2194.93 <br>Pop.:     1,517,453","Country: Jamaica <br>Life Expectancy: 58.53 <br>GDP per capita: 2898.53 <br>Pop.:     1,426,095","Country: Mexico <br>Life Expectancy: 50.79 <br>GDP per capita: 3478.13 <br>Pop.:    30,144,317","Country: Nicaragua <br>Life Expectancy: 42.31 <br>GDP per capita: 3112.36 <br>Pop.:     1,165,790","Country: Panama <br>Life Expectancy: 55.19 <br>GDP per capita: 2480.38 <br>Pop.:       940,080","Country: Paraguay <br>Life Expectancy: 62.65 <br>GDP per capita: 1952.31 <br>Pop.:     1,555,876","Country: Peru <br>Life Expectancy: 43.9 <br>GDP per capita: 3758.52 <br>Pop.:     8,025,700","Country: Puerto Rico <br>Life Expectancy: 64.28 <br>GDP per capita: 3081.96 <br>Pop.:     2,227,000","Country: Trinidad and Tobago <br>Life Expectancy: 59.1 <br>GDP per capita: 3023.27 <br>Pop.:       662,850","Country: United States <br>Life Expectancy: 68.44 <br>GDP per capita: 13990.48 <br>Pop.:   157,553,000","Country: Uruguay <br>Life Expectancy: 66.07 <br>GDP per capita: 5716.77 <br>Pop.:     2,252,965","Country: Venezuela <br>Life Expectancy: 55.09 <br>GDP per capita: 7689.8 <br>Pop.:     5,439,568"],"frame":"1952","type":"scatter","name":"Americas","textfont":{"color":"rgba(165,0,38,1)","size":[11.216060198127,10.1926990076926,13.8591993935856,11.0050647414534,10.4311957878396,10.8388814154577,10.0591279956243,10.4059543216627,10.1659459420127,10.2381171568826,10.1353357620006,10.2106540550972,10.2144152739446,10.0994748093615,10.0932393505002,12.0533445613081,10.0754727496675,10.0600673618572,10.1020972949218,10.5436822835541,10.14790353075,10.041145578761,20.7493711973046,10.1496757202609,10.3671709797193]},"error_y":{"color":"rgba(165,0,38,1)","width":[]},"error_x":{"color":"rgba(165,0,38,1)","width":[]},"line":{"color":"rgba(165,0,38,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2.89178565070639,3.99418885910468,2.83521110677235,2.56640129232975,2.60254679160356,3.48492892667285,2.73764241302062,2.8748768833905,3.48220534228651,3.61592545033292,3.61135385491083,3.50744516771402,3.18946443127902,3.0367397532404,3.0130868621518,5.03495857498782,3.68437887876133,3.26271986425609,2.89573564318216,2.51982799377572,2.73708582406826,3.26203090406686,2.83543508289054,3.10478780221552,3.81020258849406,3.3645769259938,3.0348417539084,3.2157658381984,3.08168852810498,2.8795531210227,2.78180310257259,3.18058239847588,2.89304987672292],"y":[28.801,50.939,37.484,39.417,44,60.96,37.373,37.468,44.869,45.32,65.39,63.03,43.158,50.056,47.453,55.565,55.928,48.463,42.244,36.319,36.157,37.578,43.436,47.752,39.875,60.396,57.593,45.883,58.5,50.848,40.412,43.16,32.548],"mode":"markers","marker":{"color":"rgba(64,0,75,1)","size":[10.570958440334,10.0041249391595,13.1960735163377,10.3162725230159,47.9625664144959,10.1410031510255,35.3860253098784,15.5962003804901,11.1747701277352,10.3673209998443,10.1065363344522,15.8969931199104,10.037396031179,10.6010003457508,11.4256389269872,10.0068245506259,10.0941562614915,10.4565012070906,10.0505517313918,11.3673116074712,10.622639827362,10.0305652012758,12.8179314106275,11.5274123613572,10.2693035970927,10.072825215251,10.5407229693692,10.2458158238599,10.5794920464327,11.4489699230467,11.7873299404583,10.0662446008975,10.3347003590492],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Afghanistan <br>Life Expectancy: 28.8 <br>GDP per capita: 779.45 <br>Pop.:     8,425,333","Country: Bahrain <br>Life Expectancy: 50.94 <br>GDP per capita: 9867.08 <br>Pop.:       120,447","Country: Bangladesh <br>Life Expectancy: 37.48 <br>GDP per capita: 684.24 <br>Pop.:    46,886,859","Country: Cambodia <br>Life Expectancy: 39.42 <br>GDP per capita: 368.47 <br>Pop.:     4,693,836","Country: China <br>Life Expectancy: 44 <br>GDP per capita: 400.45 <br>Pop.:   556,263,527","Country: Hong Kong, China <br>Life Expectancy: 60.96 <br>GDP per capita: 3054.42 <br>Pop.:     2,125,900","Country: India <br>Life Expectancy: 37.37 <br>GDP per capita: 546.57 <br>Pop.:   372,000,000","Country: Indonesia <br>Life Expectancy: 37.47 <br>GDP per capita: 749.68 <br>Pop.:    82,052,000","Country: Iran <br>Life Expectancy: 44.87 <br>GDP per capita: 3035.33 <br>Pop.:    17,272,000","Country: Iraq <br>Life Expectancy: 45.32 <br>GDP per capita: 4129.77 <br>Pop.:     5,441,766","Country: Israel <br>Life Expectancy: 65.39 <br>GDP per capita: 4086.52 <br>Pop.:     1,620,914","Country: Japan <br>Life Expectancy: 63.03 <br>GDP per capita: 3216.96 <br>Pop.:    86,459,025","Country: Jordan <br>Life Expectancy: 43.16 <br>GDP per capita: 1546.91 <br>Pop.:       607,914","Country: Korea, Dem. Rep. <br>Life Expectancy: 50.06 <br>GDP per capita: 1088.28 <br>Pop.:     8,865,488","Country: Korea, Rep. <br>Life Expectancy: 47.45 <br>GDP per capita: 1030.59 <br>Pop.:    20,947,571","Country: Kuwait <br>Life Expectancy: 55.56 <br>GDP per capita: 108382.35 <br>Pop.:       160,000","Country: Lebanon <br>Life Expectancy: 55.93 <br>GDP per capita: 4834.8 <br>Pop.:     1,439,529","Country: Malaysia <br>Life Expectancy: 48.46 <br>GDP per capita: 1831.13 <br>Pop.:     6,748,378","Country: Mongolia <br>Life Expectancy: 42.24 <br>GDP per capita: 786.57 <br>Pop.:       800,663","Country: Myanmar <br>Life Expectancy: 36.32 <br>GDP per capita: 331 <br>Pop.:    20,092,996","Country: Nepal <br>Life Expectancy: 36.16 <br>GDP per capita: 545.87 <br>Pop.:     9,182,536","Country: Oman <br>Life Expectancy: 37.58 <br>GDP per capita: 1828.23 <br>Pop.:       507,833","Country: Pakistan <br>Life Expectancy: 43.44 <br>GDP per capita: 684.6 <br>Pop.:    41,346,560","Country: Philippines <br>Life Expectancy: 47.75 <br>GDP per capita: 1272.88 <br>Pop.:    22,438,691","Country: Saudi Arabia <br>Life Expectancy: 39.88 <br>GDP per capita: 6459.55 <br>Pop.:     4,005,677","Country: Singapore <br>Life Expectancy: 60.4 <br>GDP per capita: 2315.14 <br>Pop.:     1,127,000","Country: Sri Lanka <br>Life Expectancy: 57.59 <br>GDP per capita: 1083.53 <br>Pop.:     7,982,342","Country: Syria <br>Life Expectancy: 45.88 <br>GDP per capita: 1643.49 <br>Pop.:     3,661,549","Country: Taiwan <br>Life Expectancy: 58.5 <br>GDP per capita: 1206.95 <br>Pop.:     8,550,362","Country: Thailand <br>Life Expectancy: 50.85 <br>GDP per capita: 757.8 <br>Pop.:    21,289,402","Country: Vietnam <br>Life Expectancy: 40.41 <br>GDP per capita: 605.07 <br>Pop.:    26,246,839","Country: West Bank and Gaza <br>Life Expectancy: 43.16 <br>GDP per capita: 1515.59 <br>Pop.:     1,030,585","Country: Yemen, Rep. <br>Life Expectancy: 32.55 <br>GDP per capita: 781.72 <br>Pop.:     4,963,829"],"frame":"1952","type":"scatter","name":"Asia","textfont":{"color":"rgba(64,0,75,1)","size":[10.570958440334,10.0041249391595,13.1960735163377,10.3162725230159,47.9625664144959,10.1410031510255,35.3860253098784,15.5962003804901,11.1747701277352,10.3673209998443,10.1065363344522,15.8969931199104,10.037396031179,10.6010003457508,11.4256389269872,10.0068245506259,10.0941562614915,10.4565012070906,10.0505517313918,11.3673116074712,10.622639827362,10.0305652012758,12.8179314106275,11.5274123613572,10.2693035970927,10.072825215251,10.5407229693692,10.2458158238599,10.5794920464327,11.4489699230467,11.7873299404583,10.0662446008975,10.3347003590492]},"error_y":{"color":"rgba(64,0,75,1)","width":[]},"error_x":{"color":"rgba(64,0,75,1)","width":[]},"line":{"color":"rgba(64,0,75,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.20440655935692,3.78796153632719,3.9213277159305,2.98835076435393,3.3881521354268,3.49404830692654,3.83734472624362,3.98643066779033,3.80784062264484,3.84694354559525,3.85394839994697,3.54785959575643,3.72128896869472,3.86139630046032,3.71686109021475,3.69297059675009,3.42285001049471,3.95141387106102,4.00412446561185,3.60523280489102,3.48690063208004,3.49756723117478,3.55406003811099,3.70540687333909,3.62480187974278,3.58365604390734,3.93083928091202,4.16832752592624,3.29426798832312,3.99910915184445],"y":[55.23,66.8,68,53.82,59.6,61.21,66.87,70.78,66.55,67.41,67.5,65.86,64.03,72.49,66.91,65.94,59.164,72.13,72.67,61.31,59.82,61.05,57.996,64.36,65.57,64.94,71.86,69.62,43.585,69.18],"mode":"markers","marker":{"color":"rgba(39,100,25,1)","size":[10.0834520047857,10.4687453883003,10.5917805238485,10.1863982306968,10.4924379205753,10.2608778990093,10.6187253122449,10.2917126314378,10.2750930225069,12.8939043183822,14.7153237044989,10.5237216895835,10.6445807142835,10.0060029208422,10.1973976134355,13.2492522379888,10.0241494862044,10.7045060416184,10.2230315344434,11.7520917283198,10.5778326791541,11.1309516926893,10.4641297782224,10.2387576431668,10.0975681614129,11.9445187477512,10.4821844750276,10.3245423312151,11.5135560439547,13.4379035689338],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Albania <br>Life Expectancy: 55.23 <br>GDP per capita: 1601.06 <br>Pop.:     1,282,697","Country: Austria <br>Life Expectancy: 66.8 <br>GDP per capita: 6137.08 <br>Pop.:     6,927,772","Country: Belgium <br>Life Expectancy: 68 <br>GDP per capita: 8343.11 <br>Pop.:     8,730,405","Country: Bosnia and Herzegovina <br>Life Expectancy: 53.82 <br>GDP per capita: 973.53 <br>Pop.:     2,791,000","Country: Bulgaria <br>Life Expectancy: 59.6 <br>GDP per capita: 2444.29 <br>Pop.:     7,274,900","Country: Croatia <br>Life Expectancy: 61.21 <br>GDP per capita: 3119.24 <br>Pop.:     3,882,229","Country: Czech Republic <br>Life Expectancy: 66.87 <br>GDP per capita: 6876.14 <br>Pop.:     9,125,183","Country: Denmark <br>Life Expectancy: 70.78 <br>GDP per capita: 9692.39 <br>Pop.:     4,334,000","Country: Finland <br>Life Expectancy: 66.55 <br>GDP per capita: 6424.52 <br>Pop.:     4,090,500","Country: France <br>Life Expectancy: 67.41 <br>GDP per capita: 7029.81 <br>Pop.:    42,459,667","Country: Germany <br>Life Expectancy: 67.5 <br>GDP per capita: 7144.11 <br>Pop.:    69,145,952","Country: Greece <br>Life Expectancy: 65.86 <br>GDP per capita: 3530.69 <br>Pop.:     7,733,250","Country: Hungary <br>Life Expectancy: 64.03 <br>GDP per capita: 5263.67 <br>Pop.:     9,504,000","Country: Iceland <br>Life Expectancy: 72.49 <br>GDP per capita: 7267.69 <br>Pop.:       147,962","Country: Ireland <br>Life Expectancy: 66.91 <br>GDP per capita: 5210.28 <br>Pop.:     2,952,156","Country: Italy <br>Life Expectancy: 65.94 <br>GDP per capita: 4931.4 <br>Pop.:    47,666,000","Country: Montenegro <br>Life Expectancy: 59.16 <br>GDP per capita: 2647.59 <br>Pop.:       413,834","Country: Netherlands <br>Life Expectancy: 72.13 <br>GDP per capita: 8941.57 <br>Pop.:    10,381,988","Country: Norway <br>Life Expectancy: 72.67 <br>GDP per capita: 10095.42 <br>Pop.:     3,327,728","Country: Poland <br>Life Expectancy: 61.31 <br>GDP per capita: 4029.33 <br>Pop.:    25,730,551","Country: Portugal <br>Life Expectancy: 59.82 <br>GDP per capita: 3068.32 <br>Pop.:     8,526,050","Country: Romania <br>Life Expectancy: 61.05 <br>GDP per capita: 3144.61 <br>Pop.:    16,630,000","Country: Serbia <br>Life Expectancy: 58 <br>GDP per capita: 3581.46 <br>Pop.:     6,860,147","Country: Slovak Republic <br>Life Expectancy: 64.36 <br>GDP per capita: 5074.66 <br>Pop.:     3,558,137","Country: Slovenia <br>Life Expectancy: 65.57 <br>GDP per capita: 4215.04 <br>Pop.:     1,489,518","Country: Spain <br>Life Expectancy: 64.94 <br>GDP per capita: 3834.03 <br>Pop.:    28,549,870","Country: Sweden <br>Life Expectancy: 71.86 <br>GDP per capita: 8527.84 <br>Pop.:     7,124,673","Country: Switzerland <br>Life Expectancy: 69.62 <br>GDP per capita: 14734.23 <br>Pop.:     4,815,000","Country: Turkey <br>Life Expectancy: 43.58 <br>GDP per capita: 1969.1 <br>Pop.:    22,235,677","Country: United Kingdom <br>Life Expectancy: 69.18 <br>GDP per capita: 9979.51 <br>Pop.:    50,430,000"],"frame":"1952","type":"scatter","name":"Europe","textfont":{"color":"rgba(39,100,25,1)","size":[10.0834520047857,10.4687453883003,10.5917805238485,10.1863982306968,10.4924379205753,10.2608778990093,10.6187253122449,10.2917126314378,10.2750930225069,12.8939043183822,14.7153237044989,10.5237216895835,10.6445807142835,10.0060029208422,10.1973976134355,13.2492522379888,10.0241494862044,10.7045060416184,10.2230315344434,11.7520917283198,10.5778326791541,11.1309516926893,10.4641297782224,10.2387576431668,10.0975681614129,11.9445187477512,10.4821844750276,10.3245423312151,11.5135560439547,13.4379035689338]},"error_y":{"color":"rgba(39,100,25,1)","width":[]},"error_x":{"color":"rgba(39,100,25,1)","width":[]},"line":{"color":"rgba(39,100,25,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[4.00171622128976,4.02352306468033],"y":[69.12,69.39],"mode":"markers","marker":{"color":"rgba(49,54,149,1)","size":[10.5891054834672,10.1320547713602],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Australia <br>Life Expectancy: 69.12 <br>GDP per capita: 10039.6 <br>Pop.:     8,691,212","Country: New Zealand <br>Life Expectancy: 69.39 <br>GDP per capita: 10556.58 <br>Pop.:     1,994,794"],"frame":"1952","type":"scatter","name":"Oceania","textfont":{"color":"rgba(49,54,149,1)","size":[10.5891054834672,10.1320547713602]},"error_y":{"color":"rgba(49,54,149,1)","width":[]},"error_x":{"color":"rgba(49,54,149,1)","width":[]},"line":{"color":"rgba(49,54,149,1)"},"xaxis":"x","yaxis":"y","visible":true}],"traces":[0,1,2,3,4]},{"name":"1957","data":[{"x":[3.47913979306149,3.58296517468395,2.98209072830676,2.96295267666482,2.79041428219618,2.57928573342662,3.11828063526517,3.07585499245729,3.11677225896846,3.08319741285422,2.95706119338084,3.36456160814328,3.1763505784756,3.45711993862626,3.16403007052858,2.62950787320791,2.53676277284848,2.57852937710095,3.69689766098945,2.71677662693916,3.01851806374316,2.76062376883101,2.63527303936051,2.9751735977866,2.52633554851624,2.79307061233617,3.53760307678312,3.20117930789905,2.6194792285491,2.69053468590187,2.9274320948441,3.30835905811707,3.21537376481553,2.69511975956618,3.41854125692006,2.92195861872286,3.04162657384042,3.44239381791495,2.7326264457828,2.93487042298656,3.19524993956246,3.00194321238603,3.09973152894849,3.73934320902181,3.24805596435105,3.09506760786377,2.84418854883211,2.96656798667935,3.14464657403142,2.88894911919509,3.117919523609,2.71497005472619],"y":[45.685,31.999,40.358,49.618,34.906,40.533,40.428,37.464,39.881,42.46,40.652,45.053,42.469,37.328,44.444,35.983,38.047,36.667,38.999,32.065,44.779,34.558,33.489,44.686,45.047,39.486,45.289,38.865,37.207,35.307,42.338,58.089,45.423,33.779,45.226,38.598,37.802,55.09,41.5,48.945,39.329,31.57,34.977,47.985,39.624,43.424,42.974,41.208,47.1,42.571,44.077,50.469],"mode":"markers","marker":{"color":"rgba(127,59,8,1)","size":[10.6969209476565,10.3072307049743,10.1273029282663,10.0282996107261,10.3176089170318,10.177970212011,10.3617349684121,10.0909316478408,10.1934866474752,10.0075704195638,11.0591448806616,10.0600931614966,10.2211390148687,10.0008081156868,11.7028942732335,10.0118016969193,10.1011919186899,11.5531384921871,10.0255875772113,10.0179600298746,10.4321287382892,10.1922492885827,10.0369306138759,10.5047152044968,10.0514168383454,10.0625155974726,10.0779153885358,10.3495692781687,10.2157632709729,10.2854254367919,10.0694024631004,10.0375258484118,10.7744218356377,10.4762711703929,10.0333121803339,10.2479067549466,12.5330965671665,10.016973773821,10.1885196708808,10.0000896844605,10.2043861078012,10.1525910112517,10.1856757725427,11.0982959698449,10.6616024699734,10.0182051264482,10.6410879345404,10.0885537810829,10.2655614208362,10.4515271321827,10.2017551588671,10.2447777637686],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Algeria <br>Life Expectancy: 45.69 <br>GDP per capita: 3013.98 <br>Pop.:    10,270,856","Country: Angola <br>Life Expectancy: 32 <br>GDP per capita: 3827.94 <br>Pop.:     4,561,361","Country: Benin <br>Life Expectancy: 40.36 <br>GDP per capita: 959.6 <br>Pop.:     1,925,173","Country: Botswana <br>Life Expectancy: 49.62 <br>GDP per capita: 918.23 <br>Pop.:       474,639","Country: Burkina Faso <br>Life Expectancy: 34.91 <br>GDP per capita: 617.18 <br>Pop.:     4,713,416","Country: Burundi <br>Life Expectancy: 40.53 <br>GDP per capita: 379.56 <br>Pop.:     2,667,518","Country: Cameroon <br>Life Expectancy: 40.43 <br>GDP per capita: 1313.05 <br>Pop.:     5,359,923","Country: Central African Republic <br>Life Expectancy: 37.46 <br>GDP per capita: 1190.84 <br>Pop.:     1,392,284","Country: Chad <br>Life Expectancy: 39.88 <br>GDP per capita: 1308.5 <br>Pop.:     2,894,855","Country: Comoros <br>Life Expectancy: 42.46 <br>GDP per capita: 1211.15 <br>Pop.:       170,928","Country: Congo, Dem. Rep. <br>Life Expectancy: 40.65 <br>GDP per capita: 905.86 <br>Pop.:    15,577,932","Country: Congo, Rep. <br>Life Expectancy: 45.05 <br>GDP per capita: 2315.06 <br>Pop.:       940,458","Country: Cote d'Ivoire <br>Life Expectancy: 42.47 <br>GDP per capita: 1500.9 <br>Pop.:     3,300,000","Country: Djibouti <br>Life Expectancy: 37.33 <br>GDP per capita: 2864.97 <br>Pop.:        71,851","Country: Egypt <br>Life Expectancy: 44.44 <br>GDP per capita: 1458.92 <br>Pop.:    25,009,741","Country: Equatorial Guinea <br>Life Expectancy: 35.98 <br>GDP per capita: 426.1 <br>Pop.:       232,922","Country: Eritrea <br>Life Expectancy: 38.05 <br>GDP per capita: 344.16 <br>Pop.:     1,542,611","Country: Ethiopia <br>Life Expectancy: 36.67 <br>GDP per capita: 378.9 <br>Pop.:    22,815,614","Country: Gabon <br>Life Expectancy: 39 <br>GDP per capita: 4976.2 <br>Pop.:       434,904","Country: Gambia <br>Life Expectancy: 32.06 <br>GDP per capita: 520.93 <br>Pop.:       323,150","Country: Ghana <br>Life Expectancy: 44.78 <br>GDP per capita: 1043.56 <br>Pop.:     6,391,288","Country: Guinea <br>Life Expectancy: 34.56 <br>GDP per capita: 576.27 <br>Pop.:     2,876,726","Country: Guinea-Bissau <br>Life Expectancy: 33.49 <br>GDP per capita: 431.79 <br>Pop.:       601,095","Country: Kenya <br>Life Expectancy: 44.69 <br>GDP per capita: 944.44 <br>Pop.:     7,454,779","Country: Lesotho <br>Life Expectancy: 45.05 <br>GDP per capita: 336 <br>Pop.:       813,338","Country: Liberia <br>Life Expectancy: 39.49 <br>GDP per capita: 620.97 <br>Pop.:       975,950","Country: Libya <br>Life Expectancy: 45.29 <br>GDP per capita: 3448.28 <br>Pop.:     1,201,578","Country: Madagascar <br>Life Expectancy: 38.87 <br>GDP per capita: 1589.2 <br>Pop.:     5,181,679","Country: Malawi <br>Life Expectancy: 37.21 <br>GDP per capita: 416.37 <br>Pop.:     3,221,238","Country: Mali <br>Life Expectancy: 35.31 <br>GDP per capita: 490.38 <br>Pop.:     4,241,884","Country: Mauritania <br>Life Expectancy: 42.34 <br>GDP per capita: 846.12 <br>Pop.:     1,076,852","Country: Mauritius <br>Life Expectancy: 58.09 <br>GDP per capita: 2034.04 <br>Pop.:       609,816","Country: Morocco <br>Life Expectancy: 45.42 <br>GDP per capita: 1642 <br>Pop.:    11,406,350","Country: Mozambique <br>Life Expectancy: 33.78 <br>GDP per capita: 495.59 <br>Pop.:     7,038,035","Country: Namibia <br>Life Expectancy: 45.23 <br>GDP per capita: 2621.45 <br>Pop.:       548,080","Country: Niger <br>Life Expectancy: 38.6 <br>GDP per capita: 835.52 <br>Pop.:     3,692,184","Country: Nigeria <br>Life Expectancy: 37.8 <br>GDP per capita: 1100.59 <br>Pop.:    37,173,340","Country: Reunion <br>Life Expectancy: 55.09 <br>GDP per capita: 2769.45 <br>Pop.:       308,700","Country: Rwanda <br>Life Expectancy: 41.5 <br>GDP per capita: 540.29 <br>Pop.:     2,822,082","Country: Sao Tome and Principe <br>Life Expectancy: 48.94 <br>GDP per capita: 860.74 <br>Pop.:        61,325","Country: Senegal <br>Life Expectancy: 39.33 <br>GDP per capita: 1567.65 <br>Pop.:     3,054,547","Country: Sierra Leone <br>Life Expectancy: 31.57 <br>GDP per capita: 1004.48 <br>Pop.:     2,295,678","Country: Somalia <br>Life Expectancy: 34.98 <br>GDP per capita: 1258.15 <br>Pop.:     2,780,415","Country: South Africa <br>Life Expectancy: 47.98 <br>GDP per capita: 5487.1 <br>Pop.:    16,151,549","Country: Sudan <br>Life Expectancy: 39.62 <br>GDP per capita: 1770.34 <br>Pop.:     9,753,392","Country: Swaziland <br>Life Expectancy: 43.42 <br>GDP per capita: 1244.71 <br>Pop.:       326,741","Country: Tanzania <br>Life Expectancy: 42.97 <br>GDP per capita: 698.54 <br>Pop.:     9,452,826","Country: Togo <br>Life Expectancy: 41.21 <br>GDP per capita: 925.91 <br>Pop.:     1,357,445","Country: Tunisia <br>Life Expectancy: 47.1 <br>GDP per capita: 1395.23 <br>Pop.:     3,950,849","Country: Uganda <br>Life Expectancy: 42.57 <br>GDP per capita: 774.37 <br>Pop.:     6,675,501","Country: Zambia <br>Life Expectancy: 44.08 <br>GDP per capita: 1311.96 <br>Pop.:     3,016,000","Country: Zimbabwe <br>Life Expectancy: 50.47 <br>GDP per capita: 518.76 <br>Pop.:     3,646,340"],"frame":"1957","type":"scatter","name":"Africa","textfont":{"color":"rgba(127,59,8,1)","size":[10.6969209476565,10.3072307049743,10.1273029282663,10.0282996107261,10.3176089170318,10.177970212011,10.3617349684121,10.0909316478408,10.1934866474752,10.0075704195638,11.0591448806616,10.0600931614966,10.2211390148687,10.0008081156868,11.7028942732335,10.0118016969193,10.1011919186899,11.5531384921871,10.0255875772113,10.0179600298746,10.4321287382892,10.1922492885827,10.0369306138759,10.5047152044968,10.0514168383454,10.0625155974726,10.0779153885358,10.3495692781687,10.2157632709729,10.2854254367919,10.0694024631004,10.0375258484118,10.7744218356377,10.4762711703929,10.0333121803339,10.2479067549466,12.5330965671665,10.016973773821,10.1885196708808,10.0000896844605,10.2043861078012,10.1525910112517,10.1856757725427,11.0982959698449,10.6616024699734,10.0182051264482,10.6410879345404,10.0885537810829,10.2655614208362,10.4515271321827,10.2017551588671,10.2447777637686]},"error_y":{"color":"rgba(127,59,8,1)","width":[]},"error_x":{"color":"rgba(127,59,8,1)","width":[]},"line":{"color":"rgba(127,59,8,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.83612504242298,3.32790760251002,3.39573969170697,4.09656070188816,3.63504347111722,3.36619979040036,3.47567275730119,3.78477232441909,3.18876063516304,3.57755460151657,3.53421949140673,3.41782960479085,3.23726414196274,3.34644836829814,3.67728985502279,3.61611265986739,3.53875163080657,3.47155586148905,3.31093846682584,3.62790395586486,3.59186077254166,3.61282552580583,4.17164242694385,3.78892969708875,3.99133536792217],"y":[64.399,41.89,53.285,69.96,56.074,55.118,60.026,62.325,49.828,51.356,48.57,44.142,40.696,44.665,62.61,55.19,45.432,59.201,63.196,46.263,68.54,61.8,69.49,67.044,57.907],"mode":"markers","marker":{"color":"rgba(165,0,38,1)","size":[11.3343823947993,10.2151148673391,14.4699690662552,11.1568983490077,10.4769803874623,10.9846167527091,10.0718218959438,10.4491554081961,10.1954203236173,10.2729010769594,10.1566948602299,10.2444048292996,10.2353152341482,10.1167385219864,10.100678587771,12.3858207593871,10.0886481750014,10.0684915583743,10.1167734675296,10.6201529605407,10.150155880215,10.0481107988489,21.7343304436385,10.1614148291663,10.4533813618165],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Argentina <br>Life Expectancy: 64.4 <br>GDP per capita: 6856.86 <br>Pop.:    19,610,538","Country: Bolivia <br>Life Expectancy: 41.89 <br>GDP per capita: 2127.69 <br>Pop.:     3,211,738","Country: Brazil <br>Life Expectancy: 53.28 <br>GDP per capita: 2487.37 <br>Pop.:    65,551,171","Country: Canada <br>Life Expectancy: 69.96 <br>GDP per capita: 12489.95 <br>Pop.:    17,010,154","Country: Chile <br>Life Expectancy: 56.07 <br>GDP per capita: 4315.62 <br>Pop.:     7,048,426","Country: Colombia <br>Life Expectancy: 55.12 <br>GDP per capita: 2323.81 <br>Pop.:    14,485,993","Country: Costa Rica <br>Life Expectancy: 60.03 <br>GDP per capita: 2990.01 <br>Pop.:     1,112,300","Country: Cuba <br>Life Expectancy: 62.33 <br>GDP per capita: 6092.17 <br>Pop.:     6,640,752","Country: Dominican Republic <br>Life Expectancy: 49.83 <br>GDP per capita: 1544.4 <br>Pop.:     2,923,186","Country: Ecuador <br>Life Expectancy: 51.36 <br>GDP per capita: 3780.55 <br>Pop.:     4,058,385","Country: El Salvador <br>Life Expectancy: 48.57 <br>GDP per capita: 3421.52 <br>Pop.:     2,355,805","Country: Guatemala <br>Life Expectancy: 44.14 <br>GDP per capita: 2617.16 <br>Pop.:     3,640,876","Country: Haiti <br>Life Expectancy: 40.7 <br>GDP per capita: 1726.89 <br>Pop.:     3,507,701","Country: Honduras <br>Life Expectancy: 44.66 <br>GDP per capita: 2220.49 <br>Pop.:     1,770,390","Country: Jamaica <br>Life Expectancy: 62.61 <br>GDP per capita: 4756.53 <br>Pop.:     1,535,090","Country: Mexico <br>Life Expectancy: 55.19 <br>GDP per capita: 4131.55 <br>Pop.:    35,015,548","Country: Nicaragua <br>Life Expectancy: 45.43 <br>GDP per capita: 3457.42 <br>Pop.:     1,358,828","Country: Panama <br>Life Expectancy: 59.2 <br>GDP per capita: 2961.8 <br>Pop.:     1,063,506","Country: Paraguay <br>Life Expectancy: 63.2 <br>GDP per capita: 2046.15 <br>Pop.:     1,770,902","Country: Peru <br>Life Expectancy: 46.26 <br>GDP per capita: 4245.26 <br>Pop.:     9,146,100","Country: Puerto Rico <br>Life Expectancy: 68.54 <br>GDP per capita: 3907.16 <br>Pop.:     2,260,000","Country: Trinidad and Tobago <br>Life Expectancy: 61.8 <br>GDP per capita: 4100.39 <br>Pop.:       764,900","Country: United States <br>Life Expectancy: 69.49 <br>GDP per capita: 14847.13 <br>Pop.:   171,984,000","Country: Uruguay <br>Life Expectancy: 67.04 <br>GDP per capita: 6150.77 <br>Pop.:     2,424,959","Country: Venezuela <br>Life Expectancy: 57.91 <br>GDP per capita: 9802.47 <br>Pop.:     6,702,668"],"frame":"1957","type":"scatter","name":"Americas","textfont":{"color":"rgba(165,0,38,1)","size":[11.3343823947993,10.2151148673391,14.4699690662552,11.1568983490077,10.4769803874623,10.9846167527091,10.0718218959438,10.4491554081961,10.1954203236173,10.2729010769594,10.1566948602299,10.2444048292996,10.2353152341482,10.1167385219864,10.100678587771,12.3858207593871,10.0886481750014,10.0684915583743,10.1167734675296,10.6201529605407,10.150155880215,10.0481107988489,21.7343304436385,10.1614148291663,10.4533813618165]},"error_y":{"color":"rgba(165,0,38,1)","width":[]},"error_x":{"color":"rgba(165,0,38,1)","width":[]},"line":{"color":"rgba(165,0,38,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2.91426540541726,4.065796227313,2.82062008422877,2.63752809023067,2.76041268220602,3.55979611796728,2.77089764402555,2.93394273961808,3.51722990662846,3.79444158665475,3.73120816382831,3.6352518968468,3.27556024591924,3.19621340809367,3.1724842828549,5.05508436784766,3.78460209805048,3.25769464874627,2.9603102579863,2.54406804435028,2.77665496024957,3.35078019746999,2.87336916171177,3.18975548194558,3.91156194035525,3.45379280883569,3.03041617130128,3.32576904275003,3.1783613920919,2.89958929930828,2.83013004244803,3.26175464994224,2.90570440168043],"y":[30.332,53.832,39.348,41.366,50.54896,64.75,40.249,39.918,47.181,48.437,67.84,65.5,45.669,54.081,52.681,58.033,59.489,52.102,45.248,41.905,37.686,40.08,45.557,51.334,42.868,63.179,61.456,48.284,62.4,53.63,42.887,45.671,33.97],"mode":"markers","marker":{"color":"rgba(64,0,75,1)","size":[10.6266256668789,10.0053676900401,13.5017520795186,10.3591831929744,53.5009212734964,10.1826647908261,37.9113868312111,16.1471387102251,11.3467677232422,10.4223927870943,10.1286152972212,16.2453554117779,10.0468589703175,10.6382591883715,11.5392106456259,10.0104314494085,10.1083449028196,10.5241301838728,10.0561123727028,11.4791679231067,10.6567528203103,10.0342606924707,13.1819509439272,11.7754098928125,10.2975585020946,10.0945930807817,10.6189548471313,10.2791477975679,10.689642377981,11.7050903822149,11.975142032342,10.068964756521,10.3711652826099],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Afghanistan <br>Life Expectancy: 30.33 <br>GDP per capita: 820.85 <br>Pop.:     9,240,934","Country: Bahrain <br>Life Expectancy: 53.83 <br>GDP per capita: 11635.8 <br>Pop.:       138,655","Country: Bangladesh <br>Life Expectancy: 39.35 <br>GDP per capita: 661.64 <br>Pop.:    51,365,468","Country: Cambodia <br>Life Expectancy: 41.37 <br>GDP per capita: 434.04 <br>Pop.:     5,322,536","Country: China <br>Life Expectancy: 50.55 <br>GDP per capita: 575.99 <br>Pop.:   637,408,000","Country: Hong Kong, China <br>Life Expectancy: 64.75 <br>GDP per capita: 3629.08 <br>Pop.:     2,736,300","Country: India <br>Life Expectancy: 40.25 <br>GDP per capita: 590.06 <br>Pop.:   409,000,000","Country: Indonesia <br>Life Expectancy: 39.92 <br>GDP per capita: 858.9 <br>Pop.:    90,124,000","Country: Iran <br>Life Expectancy: 47.18 <br>GDP per capita: 3290.26 <br>Pop.:    19,792,000","Country: Iraq <br>Life Expectancy: 48.44 <br>GDP per capita: 6229.33 <br>Pop.:     6,248,643","Country: Israel <br>Life Expectancy: 67.84 <br>GDP per capita: 5385.28 <br>Pop.:     1,944,401","Country: Japan <br>Life Expectancy: 65.5 <br>GDP per capita: 4317.69 <br>Pop.:    91,563,009","Country: Jordan <br>Life Expectancy: 45.67 <br>GDP per capita: 1886.08 <br>Pop.:       746,559","Country: Korea, Dem. Rep. <br>Life Expectancy: 54.08 <br>GDP per capita: 1571.13 <br>Pop.:     9,411,381","Country: Korea, Rep. <br>Life Expectancy: 52.68 <br>GDP per capita: 1487.59 <br>Pop.:    22,611,552","Country: Kuwait <br>Life Expectancy: 58.03 <br>GDP per capita: 113523.13 <br>Pop.:       212,846","Country: Lebanon <br>Life Expectancy: 59.49 <br>GDP per capita: 6089.79 <br>Pop.:     1,647,412","Country: Malaysia <br>Life Expectancy: 52.1 <br>GDP per capita: 1810.07 <br>Pop.:     7,739,235","Country: Mongolia <br>Life Expectancy: 45.25 <br>GDP per capita: 912.66 <br>Pop.:       882,134","Country: Myanmar <br>Life Expectancy: 41.91 <br>GDP per capita: 350 <br>Pop.:    21,731,844","Country: Nepal <br>Life Expectancy: 37.69 <br>GDP per capita: 597.94 <br>Pop.:     9,682,338","Country: Oman <br>Life Expectancy: 40.08 <br>GDP per capita: 2242.75 <br>Pop.:       561,977","Country: Pakistan <br>Life Expectancy: 45.56 <br>GDP per capita: 747.08 <br>Pop.:    46,679,944","Country: Philippines <br>Life Expectancy: 51.33 <br>GDP per capita: 1547.94 <br>Pop.:    26,072,194","Country: Saudi Arabia <br>Life Expectancy: 42.87 <br>GDP per capita: 8157.59 <br>Pop.:     4,419,650","Country: Singapore <br>Life Expectancy: 63.18 <br>GDP per capita: 2843.1 <br>Pop.:     1,445,929","Country: Sri Lanka <br>Life Expectancy: 61.46 <br>GDP per capita: 1072.55 <br>Pop.:     9,128,546","Country: Syria <br>Life Expectancy: 48.28 <br>GDP per capita: 2117.23 <br>Pop.:     4,149,908","Country: Taiwan <br>Life Expectancy: 62.4 <br>GDP per capita: 1507.86 <br>Pop.:    10,164,215","Country: Thailand <br>Life Expectancy: 53.63 <br>GDP per capita: 793.58 <br>Pop.:    25,041,917","Country: Vietnam <br>Life Expectancy: 42.89 <br>GDP per capita: 676.29 <br>Pop.:    28,998,543","Country: West Bank and Gaza <br>Life Expectancy: 45.67 <br>GDP per capita: 1827.07 <br>Pop.:     1,070,439","Country: Yemen, Rep. <br>Life Expectancy: 33.97 <br>GDP per capita: 804.83 <br>Pop.:     5,498,090"],"frame":"1957","type":"scatter","name":"Asia","textfont":{"color":"rgba(64,0,75,1)","size":[10.6266256668789,10.0053676900401,13.5017520795186,10.3591831929744,53.5009212734964,10.1826647908261,37.9113868312111,16.1471387102251,11.3467677232422,10.4223927870943,10.1286152972212,16.2453554117779,10.0468589703175,10.6382591883715,11.5392106456259,10.0104314494085,10.1083449028196,10.5241301838728,10.0561123727028,11.4791679231067,10.6567528203103,10.0342606924707,13.1819509439272,11.7754098928125,10.2975585020946,10.0945930807817,10.6189548471313,10.2791477975679,10.689642377981,11.7050903822149,11.975142032342,10.068964756521,10.3711652826099]},"error_y":{"color":"rgba(64,0,75,1)","width":[]},"error_x":{"color":"rgba(64,0,75,1)","width":[]},"line":{"color":"rgba(64,0,75,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.28831278714121,3.94657988314917,3.9874410446426,3.13161519254539,3.47837466056434,3.63731273516082,3.91678777519626,4.04530965043662,3.87768315330736,3.93766003740826,4.0080815466578,3.69163836651823,3.78104988176998,3.96586000314456,3.74811650770658,3.79578663274036,3.56611443882719,4.05216251746597,4.06647400906966,3.67525146479271,3.57686768438836,3.59586755291055,3.69732446646629,3.78484992230602,3.76806630806585,3.65942198360003,3.99615595780494,4.25308321228107,3.34610920365656,4.05243143756984],"y":[59.28,67.48,69.24,58.45,66.61,64.77,69.03,71.81,67.49,68.93,69.1,67.86,66.41,73.47,68.9,67.81,61.448,72.99,73.44,65.77,61.51,64.1,61.685,67.45,67.85,66.66,72.49,70.56,48.079,70.42],"mode":"markers","marker":{"color":"rgba(39,100,25,1)","size":[10.0966799849405,10.4713450091009,10.6094379881117,10.2058503397125,10.5181252154402,10.2683183648343,10.645246727195,10.3022120608483,10.2910301012969,13.0202540250537,14.8431695854923,10.5484953496017,10.6674454740037,10.0071733235279,10.1923512585858,13.3527238073494,10.0261284823479,10.748487942633,10.2342393618871,11.9230515367475,10.5977352580628,11.212809375319,10.4921809479773,10.2582875606186,10.1005407166825,12.0326841691839,10.4985057500339,10.3457690185972,11.7480230296438,13.5061565830239],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Albania <br>Life Expectancy: 59.28 <br>GDP per capita: 1942.28 <br>Pop.:     1,476,505","Country: Austria <br>Life Expectancy: 67.48 <br>GDP per capita: 8842.6 <br>Pop.:     6,965,860","Country: Belgium <br>Life Expectancy: 69.24 <br>GDP per capita: 9714.96 <br>Pop.:     8,989,111","Country: Bosnia and Herzegovina <br>Life Expectancy: 58.45 <br>GDP per capita: 1353.99 <br>Pop.:     3,076,000","Country: Bulgaria <br>Life Expectancy: 66.61 <br>GDP per capita: 3008.67 <br>Pop.:     7,651,254","Country: Croatia <br>Life Expectancy: 64.77 <br>GDP per capita: 4338.23 <br>Pop.:     3,991,242","Country: Czech Republic <br>Life Expectancy: 69.03 <br>GDP per capita: 8256.34 <br>Pop.:     9,513,758","Country: Denmark <br>Life Expectancy: 71.81 <br>GDP per capita: 11099.66 <br>Pop.:     4,487,831","Country: Finland <br>Life Expectancy: 67.49 <br>GDP per capita: 7545.42 <br>Pop.:     4,324,000","Country: France <br>Life Expectancy: 68.93 <br>GDP per capita: 8662.83 <br>Pop.:    44,310,863","Country: Germany <br>Life Expectancy: 69.1 <br>GDP per capita: 10187.83 <br>Pop.:    71,019,069","Country: Greece <br>Life Expectancy: 67.86 <br>GDP per capita: 4916.3 <br>Pop.:     8,096,218","Country: Hungary <br>Life Expectancy: 66.41 <br>GDP per capita: 6040.18 <br>Pop.:     9,839,000","Country: Iceland <br>Life Expectancy: 73.47 <br>GDP per capita: 9244 <br>Pop.:       165,110","Country: Ireland <br>Life Expectancy: 68.9 <br>GDP per capita: 5599.08 <br>Pop.:     2,878,220","Country: Italy <br>Life Expectancy: 67.81 <br>GDP per capita: 6248.66 <br>Pop.:    49,182,000","Country: Montenegro <br>Life Expectancy: 61.45 <br>GDP per capita: 3682.26 <br>Pop.:       442,829","Country: Netherlands <br>Life Expectancy: 72.99 <br>GDP per capita: 11276.19 <br>Pop.:    11,026,383","Country: Norway <br>Life Expectancy: 73.44 <br>GDP per capita: 11653.97 <br>Pop.:     3,491,938","Country: Poland <br>Life Expectancy: 65.77 <br>GDP per capita: 4734.25 <br>Pop.:    28,235,346","Country: Portugal <br>Life Expectancy: 61.51 <br>GDP per capita: 3774.57 <br>Pop.:     8,817,650","Country: Romania <br>Life Expectancy: 64.1 <br>GDP per capita: 3943.37 <br>Pop.:    17,829,327","Country: Serbia <br>Life Expectancy: 61.69 <br>GDP per capita: 4981.09 <br>Pop.:     7,271,135","Country: Slovak Republic <br>Life Expectancy: 67.45 <br>GDP per capita: 6093.26 <br>Pop.:     3,844,277","Country: Slovenia <br>Life Expectancy: 67.85 <br>GDP per capita: 5862.28 <br>Pop.:     1,533,070","Country: Spain <br>Life Expectancy: 66.66 <br>GDP per capita: 4564.8 <br>Pop.:    29,841,614","Country: Sweden <br>Life Expectancy: 72.49 <br>GDP per capita: 9911.88 <br>Pop.:     7,363,802","Country: Switzerland <br>Life Expectancy: 70.56 <br>GDP per capita: 17909.49 <br>Pop.:     5,126,000","Country: Turkey <br>Life Expectancy: 48.08 <br>GDP per capita: 2218.75 <br>Pop.:    25,670,939","Country: United Kingdom <br>Life Expectancy: 70.42 <br>GDP per capita: 11283.18 <br>Pop.:    51,430,000"],"frame":"1957","type":"scatter","name":"Europe","textfont":{"color":"rgba(39,100,25,1)","size":[10.0966799849405,10.4713450091009,10.6094379881117,10.2058503397125,10.5181252154402,10.2683183648343,10.645246727195,10.3022120608483,10.2910301012969,13.0202540250537,14.8431695854923,10.5484953496017,10.6674454740037,10.0071733235279,10.1923512585858,13.3527238073494,10.0261284823479,10.748487942633,10.2342393618871,11.9230515367475,10.5977352580628,11.212809375319,10.4921809479773,10.2582875606186,10.1005407166825,12.0326841691839,10.4985057500339,10.3457690185972,11.7480230296438,13.5061565830239]},"error_y":{"color":"rgba(39,100,25,1)","width":[]},"error_x":{"color":"rgba(39,100,25,1)","width":[]},"line":{"color":"rgba(39,100,25,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[4.03940022113372,4.08804373617567],"y":[70.33,70.26],"mode":"markers","marker":{"color":"rgba(49,54,149,1)","size":[10.6588161771792,10.1480678157549],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Australia <br>Life Expectancy: 70.33 <br>GDP per capita: 10949.65 <br>Pop.:     9,712,569","Country: New Zealand <br>Life Expectancy: 70.26 <br>GDP per capita: 12247.4 <br>Pop.:     2,229,407"],"frame":"1957","type":"scatter","name":"Oceania","textfont":{"color":"rgba(49,54,149,1)","size":[10.6588161771792,10.1480678157549]},"error_y":{"color":"rgba(49,54,149,1)","width":[]},"error_x":{"color":"rgba(49,54,149,1)","width":[]},"line":{"color":"rgba(49,54,149,1)"},"xaxis":"x","yaxis":"y","visible":true}],"traces":[0,1,2,3,4]},{"name":"1962","data":[{"x":[3.40667928226323,3.63035430744579,2.97749454099889,2.99284235191855,2.85884507694668,2.55047690303059,3.1460062427396,3.07666547148941,3.14295781270513,3.14818551888514,2.95246048690214,3.39177871758455,3.23776219463864,3.48014918173533,3.22874310379055,2.76555081847731,2.58092023750837,2.62268684184979,3.82160910341721,2.77789803790876,3.07556196728497,2.83656061764481,2.71769909935403,2.95277616187639,2.61468700310939,2.80222292500175,3.82975589956553,3.21573987623756,2.6313433883056,2.6956343031275,3.02362115947219,3.40296041844707,3.19488977990255,2.7456105755398,3.50149957999136,2.99902874983636,3.06104795881945,3.50156906572439,2.77631833699871,3.03001289415532,3.21879503886367,3.04791313314348,3.13655833769812,3.76108019138226,3.29216604939941,3.26862058610807,2.8585394877151,3.02838204533119,3.22018740756113,2.88494920253419,3.16218363938167,2.72203485911935],"y":[48.303,34,42.618,51.52,37.814,42.045,42.643,39.475,41.716,44.467,42.122,48.435,44.93,39.693,46.992,37.485,40.158,40.059,40.489,33.896,46.452,35.753,34.488,47.949,47.747,40.502,47.808,40.848,38.41,36.936,44.248,60.246,47.924,36.161,48.386,39.487,39.36,57.666,43,51.893,41.454,32.767,36.981,49.951,40.87,44.992,44.246,43.922,49.579,45.344,46.023,52.358],"mode":"markers","marker":{"color":"rgba(127,59,8,1)","size":[10.7467519272196,10.3252941381653,10.1427773881268,10.0309017568883,10.3316837805854,10.1980636946,10.3913369831532,10.0998860337714,10.210929524262,10.0089874203894,11.1894058945586,10.0674280399088,10.2574774655943,10.0020398778321,11.9188173245124,10.012914084543,10.1096557702082,11.7121514977876,10.0270043050247,10.0214320607014,10.4979219137514,10.2102187373733,10.0387546756775,10.5882417415739,10.0568637701349,10.0718557494388,10.0943155640264,10.3851731217037,10.2435675013228,10.3160360945751,10.0741736900503,10.0437505232968,10.8870566451519,10.5275229729502,10.0383159453029,10.2741038998267,12.8537499781448,10.0204000751284,10.2041605315897,10.0003640615772,10.2300284921828,10.1643453405793,10.20613379448,11.2488012372391,10.7591930183749,10.0211580931029,10.7374019468194,10.1002013626965,10.2884741624253,10.5206876383481,10.2293976295736,10.2878724438531],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Algeria <br>Life Expectancy: 48.3 <br>GDP per capita: 2550.82 <br>Pop.:    11,000,948","Country: Angola <br>Life Expectancy: 34 <br>GDP per capita: 4269.28 <br>Pop.:     4,826,015","Country: Benin <br>Life Expectancy: 42.62 <br>GDP per capita: 949.5 <br>Pop.:     2,151,895","Country: Botswana <br>Life Expectancy: 51.52 <br>GDP per capita: 983.65 <br>Pop.:       512,764","Country: Burkina Faso <br>Life Expectancy: 37.81 <br>GDP per capita: 722.51 <br>Pop.:     4,919,632","Country: Burundi <br>Life Expectancy: 42.05 <br>GDP per capita: 355.2 <br>Pop.:     2,961,915","Country: Cameroon <br>Life Expectancy: 42.64 <br>GDP per capita: 1399.61 <br>Pop.:     5,793,633","Country: Central African Republic <br>Life Expectancy: 39.48 <br>GDP per capita: 1193.07 <br>Pop.:     1,523,478","Country: Chad <br>Life Expectancy: 41.72 <br>GDP per capita: 1389.82 <br>Pop.:     3,150,417","Country: Comoros <br>Life Expectancy: 44.47 <br>GDP per capita: 1406.65 <br>Pop.:       191,689","Country: Congo, Dem. Rep. <br>Life Expectancy: 42.12 <br>GDP per capita: 896.31 <br>Pop.:    17,486,434","Country: Congo, Rep. <br>Life Expectancy: 48.44 <br>GDP per capita: 2464.78 <br>Pop.:     1,047,924","Country: Cote d'Ivoire <br>Life Expectancy: 44.93 <br>GDP per capita: 1728.87 <br>Pop.:     3,832,408","Country: Djibouti <br>Life Expectancy: 39.69 <br>GDP per capita: 3020.99 <br>Pop.:        89,898","Country: Egypt <br>Life Expectancy: 46.99 <br>GDP per capita: 1693.34 <br>Pop.:    28,173,309","Country: Equatorial Guinea <br>Life Expectancy: 37.48 <br>GDP per capita: 582.84 <br>Pop.:       249,220","Country: Eritrea <br>Life Expectancy: 40.16 <br>GDP per capita: 381 <br>Pop.:     1,666,618","Country: Ethiopia <br>Life Expectancy: 40.06 <br>GDP per capita: 419.46 <br>Pop.:    25,145,372","Country: Gabon <br>Life Expectancy: 40.49 <br>GDP per capita: 6631.46 <br>Pop.:       455,661","Country: Gambia <br>Life Expectancy: 33.9 <br>GDP per capita: 599.65 <br>Pop.:       374,020","Country: Ghana <br>Life Expectancy: 46.45 <br>GDP per capita: 1190.04 <br>Pop.:     7,355,248","Country: Guinea <br>Life Expectancy: 35.75 <br>GDP per capita: 686.37 <br>Pop.:     3,140,003","Country: Guinea-Bissau <br>Life Expectancy: 34.49 <br>GDP per capita: 522.03 <br>Pop.:       627,820","Country: Kenya <br>Life Expectancy: 47.95 <br>GDP per capita: 896.97 <br>Pop.:     8,678,557","Country: Lesotho <br>Life Expectancy: 47.75 <br>GDP per capita: 411.8 <br>Pop.:       893,143","Country: Liberia <br>Life Expectancy: 40.5 <br>GDP per capita: 634.2 <br>Pop.:     1,112,796","Country: Libya <br>Life Expectancy: 47.81 <br>GDP per capita: 6757.03 <br>Pop.:     1,441,863","Country: Madagascar <br>Life Expectancy: 40.85 <br>GDP per capita: 1643.39 <br>Pop.:     5,703,324","Country: Malawi <br>Life Expectancy: 38.41 <br>GDP per capita: 427.9 <br>Pop.:     3,628,608","Country: Mali <br>Life Expectancy: 36.94 <br>GDP per capita: 496.17 <br>Pop.:     4,690,372","Country: Mauritania <br>Life Expectancy: 44.25 <br>GDP per capita: 1055.9 <br>Pop.:     1,146,757","Country: Mauritius <br>Life Expectancy: 60.25 <br>GDP per capita: 2529.07 <br>Pop.:       701,016","Country: Morocco <br>Life Expectancy: 47.92 <br>GDP per capita: 1566.35 <br>Pop.:    13,056,604","Country: Mozambique <br>Life Expectancy: 36.16 <br>GDP per capita: 556.69 <br>Pop.:     7,788,944","Country: Namibia <br>Life Expectancy: 48.39 <br>GDP per capita: 3173.22 <br>Pop.:       621,392","Country: Niger <br>Life Expectancy: 39.49 <br>GDP per capita: 997.77 <br>Pop.:     4,076,008","Country: Nigeria <br>Life Expectancy: 39.36 <br>GDP per capita: 1150.93 <br>Pop.:    41,871,351","Country: Reunion <br>Life Expectancy: 57.67 <br>GDP per capita: 3173.72 <br>Pop.:       358,900","Country: Rwanda <br>Life Expectancy: 43 <br>GDP per capita: 597.47 <br>Pop.:     3,051,242","Country: Sao Tome and Principe <br>Life Expectancy: 51.89 <br>GDP per capita: 1071.55 <br>Pop.:        65,345","Country: Senegal <br>Life Expectancy: 41.45 <br>GDP per capita: 1654.99 <br>Pop.:     3,430,243","Country: Sierra Leone <br>Life Expectancy: 32.77 <br>GDP per capita: 1116.64 <br>Pop.:     2,467,895","Country: Somalia <br>Life Expectancy: 36.98 <br>GDP per capita: 1369.49 <br>Pop.:     3,080,153","Country: South Africa <br>Life Expectancy: 49.95 <br>GDP per capita: 5768.73 <br>Pop.:    18,356,657","Country: Sudan <br>Life Expectancy: 40.87 <br>GDP per capita: 1959.59 <br>Pop.:    11,183,227","Country: Swaziland <br>Life Expectancy: 44.99 <br>GDP per capita: 1856.18 <br>Pop.:       370,006","Country: Tanzania <br>Life Expectancy: 44.25 <br>GDP per capita: 722 <br>Pop.:    10,863,958","Country: Togo <br>Life Expectancy: 43.92 <br>GDP per capita: 1067.53 <br>Pop.:     1,528,098","Country: Tunisia <br>Life Expectancy: 49.58 <br>GDP per capita: 1660.3 <br>Pop.:     4,286,552","Country: Uganda <br>Life Expectancy: 45.34 <br>GDP per capita: 767.27 <br>Pop.:     7,688,797","Country: Zambia <br>Life Expectancy: 46.02 <br>GDP per capita: 1452.73 <br>Pop.:     3,421,000","Country: Zimbabwe <br>Life Expectancy: 52.36 <br>GDP per capita: 527.27 <br>Pop.:     4,277,736"],"frame":"1962","type":"scatter","name":"Africa","textfont":{"color":"rgba(127,59,8,1)","size":[10.7467519272196,10.3252941381653,10.1427773881268,10.0309017568883,10.3316837805854,10.1980636946,10.3913369831532,10.0998860337714,10.210929524262,10.0089874203894,11.1894058945586,10.0674280399088,10.2574774655943,10.0020398778321,11.9188173245124,10.012914084543,10.1096557702082,11.7121514977876,10.0270043050247,10.0214320607014,10.4979219137514,10.2102187373733,10.0387546756775,10.5882417415739,10.0568637701349,10.0718557494388,10.0943155640264,10.3851731217037,10.2435675013228,10.3160360945751,10.0741736900503,10.0437505232968,10.8870566451519,10.5275229729502,10.0383159453029,10.2741038998267,12.8537499781448,10.0204000751284,10.2041605315897,10.0003640615772,10.2300284921828,10.1643453405793,10.20613379448,11.2488012372391,10.7591930183749,10.0211580931029,10.7374019468194,10.1002013626965,10.2884741624253,10.5206876383481,10.2293976295736,10.2878724438531]},"error_y":{"color":"rgba(127,59,8,1)","width":[]},"error_x":{"color":"rgba(127,59,8,1)","width":[]},"line":{"color":"rgba(127,59,8,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.85328233225476,3.33865019873058,3.52330229743376,4.12912525015498,3.65505140683357,3.39660922336439,3.53919369697,3.71439313109482,3.22066691101895,3.61131048729748,3.57712440449197,3.43939024524837,3.25444874402785,3.36005481867163,3.71983718762706,3.66101805971797,3.56042847046256,3.54857861149303,3.33203976552077,3.69522224658516,3.70828018887691,3.69875488592133,4.20879450331745,3.74844834860717,3.92546546862278],"y":[65.142,43.428,55.665,71.3,57.924,57.863,62.842,65.246,53.459,54.64,52.307,46.954,43.59,48.041,65.61,58.299,48.632,61.817,64.361,49.096,69.62,64.9,70.21,68.253,60.77],"mode":"markers","marker":{"color":"rgba(165,0,38,1)","size":[11.4485864093605,10.241199804264,15.185821625442,11.2917454876804,10.5392839228201,11.156879988947,10.0877171356362,10.4910368909551,10.2316113478326,10.315444682208,10.1834419878976,10.2831713127486,10.2607346359328,10.138563924808,10.1095540732172,12.8025693634811,10.1044671078241,10.0788809639261,10.1330798633789,10.7136868910497,10.1629905865026,10.0564784818704,22.7276848107054,10.173257204882,10.5517139569872],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Argentina <br>Life Expectancy: 65.14 <br>GDP per capita: 7133.17 <br>Pop.:    21,283,783","Country: Bolivia <br>Life Expectancy: 43.43 <br>GDP per capita: 2180.97 <br>Pop.:     3,593,918","Country: Brazil <br>Life Expectancy: 55.66 <br>GDP per capita: 3336.59 <br>Pop.:    76,039,390","Country: Canada <br>Life Expectancy: 71.3 <br>GDP per capita: 13462.49 <br>Pop.:    18,985,849","Country: Chile <br>Life Expectancy: 57.92 <br>GDP per capita: 4519.09 <br>Pop.:     7,961,258","Country: Colombia <br>Life Expectancy: 57.86 <br>GDP per capita: 2492.35 <br>Pop.:    17,009,885","Country: Costa Rica <br>Life Expectancy: 62.84 <br>GDP per capita: 3460.94 <br>Pop.:     1,345,187","Country: Cuba <br>Life Expectancy: 65.25 <br>GDP per capita: 5180.76 <br>Pop.:     7,254,373","Country: Dominican Republic <br>Life Expectancy: 53.46 <br>GDP per capita: 1662.14 <br>Pop.:     3,453,434","Country: Ecuador <br>Life Expectancy: 54.64 <br>GDP per capita: 4086.11 <br>Pop.:     4,681,707","Country: El Salvador <br>Life Expectancy: 52.31 <br>GDP per capita: 3776.8 <br>Pop.:     2,747,687","Country: Guatemala <br>Life Expectancy: 46.95 <br>GDP per capita: 2750.36 <br>Pop.:     4,208,858","Country: Haiti <br>Life Expectancy: 43.59 <br>GDP per capita: 1796.59 <br>Pop.:     3,880,130","Country: Honduras <br>Life Expectancy: 48.04 <br>GDP per capita: 2291.16 <br>Pop.:     2,090,162","Country: Jamaica <br>Life Expectancy: 65.61 <br>GDP per capita: 5246.11 <br>Pop.:     1,665,128","Country: Mexico <br>Life Expectancy: 58.3 <br>GDP per capita: 4581.61 <br>Pop.:    41,121,485","Country: Nicaragua <br>Life Expectancy: 48.63 <br>GDP per capita: 3634.36 <br>Pop.:     1,590,597","Country: Panama <br>Life Expectancy: 61.82 <br>GDP per capita: 3536.54 <br>Pop.:     1,215,725","Country: Paraguay <br>Life Expectancy: 64.36 <br>GDP per capita: 2148.03 <br>Pop.:     2,009,813","Country: Peru <br>Life Expectancy: 49.1 <br>GDP per capita: 4957.04 <br>Pop.:    10,516,500","Country: Puerto Rico <br>Life Expectancy: 69.62 <br>GDP per capita: 5108.34 <br>Pop.:     2,448,046","Country: Trinidad and Tobago <br>Life Expectancy: 64.9 <br>GDP per capita: 4997.52 <br>Pop.:       887,498","Country: United States <br>Life Expectancy: 70.21 <br>GDP per capita: 16173.15 <br>Pop.:   186,538,000","Country: Uruguay <br>Life Expectancy: 68.25 <br>GDP per capita: 5603.36 <br>Pop.:     2,598,466","Country: Venezuela <br>Life Expectancy: 60.77 <br>GDP per capita: 8422.97 <br>Pop.:     8,143,375"],"frame":"1962","type":"scatter","name":"Americas","textfont":{"color":"rgba(165,0,38,1)","size":[11.4485864093605,10.241199804264,15.185821625442,11.2917454876804,10.5392839228201,11.156879988947,10.0877171356362,10.4910368909551,10.2316113478326,10.315444682208,10.1834419878976,10.2831713127486,10.2607346359328,10.138563924808,10.1095540732172,12.8025693634811,10.1044671078241,10.0788809639261,10.1330798633789,10.7136868910497,10.1629905865026,10.0564784818704,22.7276848107054,10.173257204882,10.5517139569872]},"error_y":{"color":"rgba(165,0,38,1)","width":[]},"error_x":{"color":"rgba(165,0,38,1)","width":[]},"line":{"color":"rgba(165,0,38,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2.93100030340142,4.10562172928569,2.8365402935719,2.69628092469075,2.68812961839756,3.67141800376416,2.8184549604276,2.92905589293455,3.62193716809161,3.92125653563111,3.85160263257717,3.8180046943436,3.37069978646872,3.20996880223764,3.18648857807127,4.97981283941297,3.75698284338325,3.30896649802464,3.02380946388826,2.58883172559421,2.81451186163868,3.46607213528986,2.90490087418869,3.21736605095263,4.06544599828818,3.5652260934194,3.03119508639222,3.34104598531203,3.26075784846008,3.00095403959985,2.8876449549003,3.34221660105438,2.91678188843888],"y":[31.997,56.923,41.216,43.415,44.50136,67.65,43.605,42.518,49.325,51.457,69.39,68.73,48.126,56.656,55.292,60.47,62.094,55.737,48.251,45.108,39.393,43.165,47.67,54.757,45.914,65.798,62.192,50.305,65.2,56.061,45.363,48.127,35.18],"mode":"markers","marker":{"color":"rgba(64,0,75,1)","size":[10.6966634290344,10.007634236132,13.8753568613581,10.4111294016971,55.4367132591191,10.2214939305419,40.9827724652644,16.7548635476832,11.5571235126678,10.4900736361672,10.1536302316442,16.5367103291689,10.0596222839524,10.7410559401817,11.7991696543065,10.0203568027174,10.1246871315013,10.6037916892681,10.0648587234464,11.6090255616904,10.7010981003719,10.0387781547143,13.6201849143267,12.0656947394486,10.3332806963561,10.1153604936319,10.7072326130253,10.3258815236046,10.8094075116241,11.9932191161358,12.3025924879815,10.0732438792394,10.4136180430968],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Afghanistan <br>Life Expectancy: 32 <br>GDP per capita: 853.1 <br>Pop.:    10,267,083","Country: Bahrain <br>Life Expectancy: 56.92 <br>GDP per capita: 12753.28 <br>Pop.:       171,863","Country: Bangladesh <br>Life Expectancy: 41.22 <br>GDP per capita: 686.34 <br>Pop.:    56,839,289","Country: Cambodia <br>Life Expectancy: 43.42 <br>GDP per capita: 496.91 <br>Pop.:     6,083,619","Country: China <br>Life Expectancy: 44.5 <br>GDP per capita: 487.67 <br>Pop.:   665,770,000","Country: Hong Kong, China <br>Life Expectancy: 67.65 <br>GDP per capita: 4692.65 <br>Pop.:     3,305,200","Country: India <br>Life Expectancy: 43.6 <br>GDP per capita: 658.35 <br>Pop.:   454,000,000","Country: Indonesia <br>Life Expectancy: 42.52 <br>GDP per capita: 849.29 <br>Pop.:    99,028,000","Country: Iran <br>Life Expectancy: 49.33 <br>GDP per capita: 4187.33 <br>Pop.:    22,874,000","Country: Iraq <br>Life Expectancy: 51.46 <br>GDP per capita: 8341.74 <br>Pop.:     7,240,260","Country: Israel <br>Life Expectancy: 69.39 <br>GDP per capita: 7105.63 <br>Pop.:     2,310,904","Country: Japan <br>Life Expectancy: 68.73 <br>GDP per capita: 6576.65 <br>Pop.:    95,831,757","Country: Jordan <br>Life Expectancy: 48.13 <br>GDP per capita: 2348.01 <br>Pop.:       933,559","Country: Korea, Dem. Rep. <br>Life Expectancy: 56.66 <br>GDP per capita: 1621.69 <br>Pop.:    10,917,494","Country: Korea, Rep. <br>Life Expectancy: 55.29 <br>GDP per capita: 1536.34 <br>Pop.:    26,420,307","Country: Kuwait <br>Life Expectancy: 60.47 <br>GDP per capita: 95458.11 <br>Pop.:       358,266","Country: Lebanon <br>Life Expectancy: 62.09 <br>GDP per capita: 5714.56 <br>Pop.:     1,886,848","Country: Malaysia <br>Life Expectancy: 55.74 <br>GDP per capita: 2036.88 <br>Pop.:     8,906,385","Country: Mongolia <br>Life Expectancy: 48.25 <br>GDP per capita: 1056.35 <br>Pop.:     1,010,280","Country: Myanmar <br>Life Expectancy: 45.11 <br>GDP per capita: 388 <br>Pop.:    23,634,436","Country: Nepal <br>Life Expectancy: 39.39 <br>GDP per capita: 652.4 <br>Pop.:    10,332,057","Country: Oman <br>Life Expectancy: 43.16 <br>GDP per capita: 2924.64 <br>Pop.:       628,164","Country: Pakistan <br>Life Expectancy: 47.67 <br>GDP per capita: 803.34 <br>Pop.:    53,100,671","Country: Philippines <br>Life Expectancy: 54.76 <br>GDP per capita: 1649.55 <br>Pop.:    30,325,264","Country: Saudi Arabia <br>Life Expectancy: 45.91 <br>GDP per capita: 11626.42 <br>Pop.:     4,943,029","Country: Singapore <br>Life Expectancy: 65.8 <br>GDP per capita: 3674.74 <br>Pop.:     1,750,200","Country: Sri Lanka <br>Life Expectancy: 62.19 <br>GDP per capita: 1074.47 <br>Pop.:    10,421,936","Country: Syria <br>Life Expectancy: 50.3 <br>GDP per capita: 2193.04 <br>Pop.:     4,834,621","Country: Taiwan <br>Life Expectancy: 65.2 <br>GDP per capita: 1822.88 <br>Pop.:    11,918,938","Country: Thailand <br>Life Expectancy: 56.06 <br>GDP per capita: 1002.2 <br>Pop.:    29,263,397","Country: Vietnam <br>Life Expectancy: 45.36 <br>GDP per capita: 772.05 <br>Pop.:    33,796,140","Country: West Bank and Gaza <br>Life Expectancy: 48.13 <br>GDP per capita: 2198.96 <br>Pop.:     1,133,134","Country: Yemen, Rep. <br>Life Expectancy: 35.18 <br>GDP per capita: 825.62 <br>Pop.:     6,120,081"],"frame":"1962","type":"scatter","name":"Asia","textfont":{"color":"rgba(64,0,75,1)","size":[10.6966634290344,10.007634236132,13.8753568613581,10.4111294016971,55.4367132591191,10.2214939305419,40.9827724652644,16.7548635476832,11.5571235126678,10.4900736361672,10.1536302316442,16.5367103291689,10.0596222839524,10.7410559401817,11.7991696543065,10.0203568027174,10.1246871315013,10.6037916892681,10.0648587234464,11.6090255616904,10.7010981003719,10.0387781547143,13.6201849143267,12.0656947394486,10.3332806963561,10.1153604936319,10.7072326130253,10.3258815236046,10.8094075116241,11.9932191161358,12.3025924879815,10.0732438792394,10.4136180430968]},"error_y":{"color":"rgba(64,0,75,1)","width":[]},"error_x":{"color":"rgba(64,0,75,1)","width":[]},"line":{"color":"rgba(64,0,75,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.36415478275528,4.03143759574841,4.04104537763161,3.23291576584681,3.62883197446838,3.73861330848472,4.0059037539735,4.13300572455237,3.97182498420755,4.02368388582586,4.11067261930134,3.77939377798269,3.87796765214183,4.0149470240296,3.82161814697266,3.91611598019254,3.66741501210734,4.10689939099677,4.12873524872317,3.72743975876275,3.67467332414396,3.67531976192701,3.79862503975108,3.87396590108497,3.86936688136353,3.75540555493978,4.09094341913022,4.31029159428248,3.36602488788039,4.0961163384234],"y":[64.82,69.54,70.25,61.93,69.51,67.13,69.9,72.35,68.75,70.51,70.3,69.51,67.96,73.68,70.29,69.24,63.728,73.23,73.47,67.64,64.39,66.8,64.531,70.33,69.15,69.69,73.37,71.32,52.098,70.76],"mode":"markers","marker":{"color":"rgba(39,100,25,1)","size":[10.113854627382,10.4825387764237,10.6250876534594,10.2244834125591,10.5428117846124,10.2741413707314,10.6525173112679,10.3130689312936,10.3024585907352,13.212259104352,15.028821059962,10.5725214343567,10.6827341491598,10.0083297343456,10.1890600982463,13.4661057143558,10.0282920346416,10.8016779260315,10.2442712581511,12.0659918448189,10.6115326048611,11.2709195819972,10.5157231188623,10.2851182982285,10.1039459960615,12.1225356448238,10.5120052406788,10.3826256462058,12.0290722879313,13.6332436952596],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Albania <br>Life Expectancy: 64.82 <br>GDP per capita: 2312.89 <br>Pop.:     1,728,137","Country: Austria <br>Life Expectancy: 69.54 <br>GDP per capita: 10750.72 <br>Pop.:     7,129,864","Country: Belgium <br>Life Expectancy: 70.25 <br>GDP per capita: 10991.21 <br>Pop.:     9,218,400","Country: Bosnia and Herzegovina <br>Life Expectancy: 61.93 <br>GDP per capita: 1709.68 <br>Pop.:     3,349,000","Country: Bulgaria <br>Life Expectancy: 69.51 <br>GDP per capita: 4254.34 <br>Pop.:     8,012,946","Country: Croatia <br>Life Expectancy: 67.13 <br>GDP per capita: 5477.89 <br>Pop.:     4,076,557","Country: Czech Republic <br>Life Expectancy: 69.9 <br>GDP per capita: 10136.87 <br>Pop.:     9,620,282","Country: Denmark <br>Life Expectancy: 72.35 <br>GDP per capita: 13583.31 <br>Pop.:     4,646,899","Country: Finland <br>Life Expectancy: 68.75 <br>GDP per capita: 9371.84 <br>Pop.:     4,491,443","Country: France <br>Life Expectancy: 70.51 <br>GDP per capita: 10560.49 <br>Pop.:    47,124,000","Country: Germany <br>Life Expectancy: 70.3 <br>GDP per capita: 12902.46 <br>Pop.:    73,739,117","Country: Greece <br>Life Expectancy: 69.51 <br>GDP per capita: 6017.19 <br>Pop.:     8,448,233","Country: Hungary <br>Life Expectancy: 67.96 <br>GDP per capita: 7550.36 <br>Pop.:    10,063,000","Country: Iceland <br>Life Expectancy: 73.68 <br>GDP per capita: 10350.16 <br>Pop.:       182,053","Country: Ireland <br>Life Expectancy: 70.29 <br>GDP per capita: 6631.6 <br>Pop.:     2,830,000","Country: Italy <br>Life Expectancy: 69.24 <br>GDP per capita: 8243.58 <br>Pop.:    50,843,200","Country: Montenegro <br>Life Expectancy: 63.73 <br>GDP per capita: 4649.59 <br>Pop.:       474,528","Country: Netherlands <br>Life Expectancy: 73.23 <br>GDP per capita: 12790.85 <br>Pop.:    11,805,689","Country: Norway <br>Life Expectancy: 73.47 <br>GDP per capita: 13450.4 <br>Pop.:     3,638,919","Country: Poland <br>Life Expectancy: 67.64 <br>GDP per capita: 5338.75 <br>Pop.:    30,329,617","Country: Portugal <br>Life Expectancy: 64.39 <br>GDP per capita: 4727.95 <br>Pop.:     9,019,800","Country: Romania <br>Life Expectancy: 66.8 <br>GDP per capita: 4735 <br>Pop.:    18,680,721","Country: Serbia <br>Life Expectancy: 64.53 <br>GDP per capita: 6289.63 <br>Pop.:     7,616,060","Country: Slovak Republic <br>Life Expectancy: 70.33 <br>GDP per capita: 7481.11 <br>Pop.:     4,237,384","Country: Slovenia <br>Life Expectancy: 69.15 <br>GDP per capita: 7402.3 <br>Pop.:     1,582,962","Country: Spain <br>Life Expectancy: 69.69 <br>GDP per capita: 5693.84 <br>Pop.:    31,158,061","Country: Sweden <br>Life Expectancy: 73.37 <br>GDP per capita: 12329.44 <br>Pop.:     7,561,588","Country: Switzerland <br>Life Expectancy: 71.32 <br>GDP per capita: 20431.09 <br>Pop.:     5,666,000","Country: Turkey <br>Life Expectancy: 52.1 <br>GDP per capita: 2322.87 <br>Pop.:    29,788,695","Country: United Kingdom <br>Life Expectancy: 70.76 <br>GDP per capita: 12477.18 <br>Pop.:    53,292,000"],"frame":"1962","type":"scatter","name":"Europe","textfont":{"color":"rgba(39,100,25,1)","size":[10.113854627382,10.4825387764237,10.6250876534594,10.2244834125591,10.5428117846124,10.2741413707314,10.6525173112679,10.3130689312936,10.3024585907352,13.212259104352,15.028821059962,10.5725214343567,10.6827341491598,10.0083297343456,10.1890600982463,13.4661057143558,10.0282920346416,10.8016779260315,10.2442712581511,12.0659918448189,10.6115326048611,11.2709195819972,10.5157231188623,10.2851182982285,10.1039459960615,12.1225356448238,10.5120052406788,10.3826256462058,12.0290722879313,13.6332436952596]},"error_y":{"color":"rgba(39,100,25,1)","width":[]},"error_x":{"color":"rgba(39,100,25,1)","width":[]},"line":{"color":"rgba(39,100,25,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[4.08697263830624,4.11977297258156],"y":[70.93,71.24],"mode":"markers","marker":{"color":"rgba(49,54,149,1)","size":[10.7326931713773,10.1657551065853],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Australia <br>Life Expectancy: 70.93 <br>GDP per capita: 12217.23 <br>Pop.:    10,794,968","Country: New Zealand <br>Life Expectancy: 71.24 <br>GDP per capita: 13175.68 <br>Pop.:     2,488,550"],"frame":"1962","type":"scatter","name":"Oceania","textfont":{"color":"rgba(49,54,149,1)","size":[10.7326931713773,10.1657551065853]},"error_y":{"color":"rgba(49,54,149,1)","width":[]},"error_x":{"color":"rgba(49,54,149,1)","width":[]},"line":{"color":"rgba(49,54,149,1)"},"xaxis":"x","yaxis":"y","visible":true}],"traces":[0,1,2,3,4]},{"name":"1967","data":[{"x":[3.51148118797499,3.74215745838396,3.01528907661539,3.08447235438054,2.90027237094209,2.61592640520288,3.1785318256936,3.055399974834,3.078025414328,3.27323969635094,2.93530228406906,3.4278007842362,3.31218803864046,3.48001420697493,3.25884808894596,2.96170388787321,2.67098294312012,2.71274954741178,3.9221419590145,2.866159048101,3.05142157041711,2.8504989181547,2.85465858235922,3.02396669067389,2.69778626600553,2.8534570617051,4.27352793571109,3.2132646189128,2.69505661348785,2.73640438110395,3.15263845040986,3.39364320442555,3.23326137313525,2.7533295728751,3.57906238390086,3.02299917399278,3.00625808906951,3.60435305365754,2.70839006005204,3.14139978526705,3.20747403709274,3.08136295976889,3.10881294051872,3.85214303897666,3.22737183535753,3.41715630666173,2.92850782101237,3.16955593013409,3.28608807651144,2.95852495345071,3.24970632372554,2.75571868821708],"y":[51.407,35.985,44.885,53.298,40.697,43.548,44.799,41.478,43.601,46.472,44.056,52.04,47.35,42.074,49.293,38.987,42.189,42.115,44.598,35.857,48.072,37.197,35.492,50.654,48.492,41.536,50.227,42.881,39.487,38.487,46.289,61.557,50.335,38.113,51.159,40.118,41.04,60.542,44.1,54.425,43.563,34.113,38.977,51.927,42.858,46.633,45.757,46.769,52.053,48.051,47.768,53.995],"mode":"markers","marker":{"color":"rgba(127,59,8,1)","size":[10.8668465864148,10.3540596439657,10.1615769300748,10.0336849100439,10.3459010881794,10.2232541075223,10.4283214486572,10.1142300872125,10.2345143532809,10.0107407720683,11.3569424048116,10.0764262442743,10.319755747337,10.0046143132706,12.1582406393257,10.0136405696249,10.1201463267269,11.897453312066,10.0292800652735,10.0259076155943,10.5753866958882,10.2314737497562,10.0369437184546,10.6915054805066,10.0639100065505,10.0832273841164,10.115976408831,10.4282566082938,10.2789665175625,10.3516671710628,10.0798922688359,10.0497767866699,11.004021289374,10.5884022726631,10.044134378248,10.3053674659427,13.2234356719153,10.0241624542771,10.2314506119844,10.0007354944798,10.2665846700234,10.1776065599519,10.229932664951,11.4290345144382,10.8638182001796,10.024617428869,10.8563911119454,10.1143605869755,10.3226302912784,10.6033759601592,10.2620908233227,10.3368573590534],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Algeria <br>Life Expectancy: 51.41 <br>GDP per capita: 3246.99 <br>Pop.:    12,760,499","Country: Angola <br>Life Expectancy: 35.98 <br>GDP per capita: 5522.78 <br>Pop.:     5,247,469","Country: Benin <br>Life Expectancy: 44.88 <br>GDP per capita: 1035.83 <br>Pop.:     2,427,334","Country: Botswana <br>Life Expectancy: 53.3 <br>GDP per capita: 1214.71 <br>Pop.:       553,541","Country: Burkina Faso <br>Life Expectancy: 40.7 <br>GDP per capita: 794.83 <br>Pop.:     5,127,935","Country: Burundi <br>Life Expectancy: 43.55 <br>GDP per capita: 412.98 <br>Pop.:     3,330,989","Country: Cameroon <br>Life Expectancy: 44.8 <br>GDP per capita: 1508.45 <br>Pop.:     6,335,506","Country: Central African Republic <br>Life Expectancy: 41.48 <br>GDP per capita: 1136.06 <br>Pop.:     1,733,638","Country: Chad <br>Life Expectancy: 43.6 <br>GDP per capita: 1196.81 <br>Pop.:     3,495,967","Country: Comoros <br>Life Expectancy: 46.47 <br>GDP per capita: 1876.03 <br>Pop.:       217,378","Country: Congo, Dem. Rep. <br>Life Expectancy: 44.06 <br>GDP per capita: 861.59 <br>Pop.:    19,941,073","Country: Congo, Rep. <br>Life Expectancy: 52.04 <br>GDP per capita: 2677.94 <br>Pop.:     1,179,760","Country: Cote d'Ivoire <br>Life Expectancy: 47.35 <br>GDP per capita: 2052.05 <br>Pop.:     4,744,870","Country: Djibouti <br>Life Expectancy: 42.07 <br>GDP per capita: 3020.05 <br>Pop.:       127,617","Country: Egypt <br>Life Expectancy: 49.29 <br>GDP per capita: 1814.88 <br>Pop.:    31,681,188","Country: Equatorial Guinea <br>Life Expectancy: 38.99 <br>GDP per capita: 915.6 <br>Pop.:       259,864","Country: Eritrea <br>Life Expectancy: 42.19 <br>GDP per capita: 468.79 <br>Pop.:     1,820,319","Country: Ethiopia <br>Life Expectancy: 42.12 <br>GDP per capita: 516.12 <br>Pop.:    27,860,297","Country: Gabon <br>Life Expectancy: 44.6 <br>GDP per capita: 8358.76 <br>Pop.:       489,004","Country: Gambia <br>Life Expectancy: 35.86 <br>GDP per capita: 734.78 <br>Pop.:       439,593","Country: Ghana <br>Life Expectancy: 48.07 <br>GDP per capita: 1125.7 <br>Pop.:     8,490,213","Country: Guinea <br>Life Expectancy: 37.2 <br>GDP per capita: 708.76 <br>Pop.:     3,451,418","Country: Guinea-Bissau <br>Life Expectancy: 35.49 <br>GDP per capita: 715.58 <br>Pop.:       601,287","Country: Kenya <br>Life Expectancy: 50.65 <br>GDP per capita: 1056.74 <br>Pop.:    10,191,512","Country: Lesotho <br>Life Expectancy: 48.49 <br>GDP per capita: 498.64 <br>Pop.:       996,380","Country: Liberia <br>Life Expectancy: 41.54 <br>GDP per capita: 713.6 <br>Pop.:     1,279,406","Country: Libya <br>Life Expectancy: 50.23 <br>GDP per capita: 18772.75 <br>Pop.:     1,759,224","Country: Madagascar <br>Life Expectancy: 42.88 <br>GDP per capita: 1634.05 <br>Pop.:     6,334,556","Country: Malawi <br>Life Expectancy: 39.49 <br>GDP per capita: 495.51 <br>Pop.:     4,147,252","Country: Mali <br>Life Expectancy: 38.49 <br>GDP per capita: 545.01 <br>Pop.:     5,212,416","Country: Mauritania <br>Life Expectancy: 46.29 <br>GDP per capita: 1421.15 <br>Pop.:     1,230,542","Country: Mauritius <br>Life Expectancy: 61.56 <br>GDP per capita: 2475.39 <br>Pop.:       789,309","Country: Morocco <br>Life Expectancy: 50.34 <br>GDP per capita: 1711.04 <br>Pop.:    14,770,296","Country: Mozambique <br>Life Expectancy: 38.11 <br>GDP per capita: 566.67 <br>Pop.:     8,680,909","Country: Namibia <br>Life Expectancy: 51.16 <br>GDP per capita: 3793.69 <br>Pop.:       706,640","Country: Niger <br>Life Expectancy: 40.12 <br>GDP per capita: 1054.38 <br>Pop.:     4,534,062","Country: Nigeria <br>Life Expectancy: 41.04 <br>GDP per capita: 1014.51 <br>Pop.:    47,287,752","Country: Reunion <br>Life Expectancy: 60.54 <br>GDP per capita: 4021.18 <br>Pop.:       414,024","Country: Rwanda <br>Life Expectancy: 44.1 <br>GDP per capita: 510.96 <br>Pop.:     3,451,079","Country: Sao Tome and Principe <br>Life Expectancy: 54.42 <br>GDP per capita: 1384.84 <br>Pop.:        70,787","Country: Senegal <br>Life Expectancy: 43.56 <br>GDP per capita: 1612.4 <br>Pop.:     3,965,841","Country: Sierra Leone <br>Life Expectancy: 34.11 <br>GDP per capita: 1206.04 <br>Pop.:     2,662,190","Country: Somalia <br>Life Expectancy: 38.98 <br>GDP per capita: 1284.73 <br>Pop.:     3,428,839","Country: South Africa <br>Life Expectancy: 51.93 <br>GDP per capita: 7114.48 <br>Pop.:    20,997,321","Country: Sudan <br>Life Expectancy: 42.86 <br>GDP per capita: 1688 <br>Pop.:    12,716,129","Country: Swaziland <br>Life Expectancy: 46.63 <br>GDP per capita: 2613.1 <br>Pop.:       420,690","Country: Tanzania <br>Life Expectancy: 45.76 <br>GDP per capita: 848.22 <br>Pop.:    12,607,312","Country: Togo <br>Life Expectancy: 46.77 <br>GDP per capita: 1477.6 <br>Pop.:     1,735,550","Country: Tunisia <br>Life Expectancy: 52.05 <br>GDP per capita: 1932.36 <br>Pop.:     4,786,986","Country: Uganda <br>Life Expectancy: 48.05 <br>GDP per capita: 908.92 <br>Pop.:     8,900,294","Country: Zambia <br>Life Expectancy: 47.77 <br>GDP per capita: 1777.08 <br>Pop.:     3,900,000","Country: Zimbabwe <br>Life Expectancy: 53.99 <br>GDP per capita: 569.8 <br>Pop.:     4,995,432"],"frame":"1967","type":"scatter","name":"Africa","textfont":{"color":"rgba(127,59,8,1)","size":[10.8668465864148,10.3540596439657,10.1615769300748,10.0336849100439,10.3459010881794,10.2232541075223,10.4283214486572,10.1142300872125,10.2345143532809,10.0107407720683,11.3569424048116,10.0764262442743,10.319755747337,10.0046143132706,12.1582406393257,10.0136405696249,10.1201463267269,11.897453312066,10.0292800652735,10.0259076155943,10.5753866958882,10.2314737497562,10.0369437184546,10.6915054805066,10.0639100065505,10.0832273841164,10.115976408831,10.4282566082938,10.2789665175625,10.3516671710628,10.0798922688359,10.0497767866699,11.004021289374,10.5884022726631,10.044134378248,10.3053674659427,13.2234356719153,10.0241624542771,10.2314506119844,10.0007354944798,10.2665846700234,10.1776065599519,10.229932664951,11.4290345144382,10.8638182001796,10.024617428869,10.8563911119454,10.1143605869755,10.3226302912784,10.6033759601592,10.2620908233227,10.3368573590534]},"error_y":{"color":"rgba(127,59,8,1)","width":[]},"error_x":{"color":"rgba(127,59,8,1)","width":[]},"line":{"color":"rgba(127,59,8,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.90595516552978,3.41277729936084,3.53527694506573,4.206193882909,3.70813645996287,3.42792891541937,3.61927367509308,3.75513272240462,3.21846276740337,3.6607776823798,3.63934655547257,3.51088415650793,3.16198386397309,3.40453770699663,3.78708506565499,3.76002524528695,3.66683549228173,3.64552140726666,3.36161005279027,3.76253552527651,3.84068796748737,3.74984205355686,4.29071037250177,3.73596754383367,3.97961547976198],"y":[65.634,45.032,57.632,72.13,60.523,59.963,65.424,68.29,56.751,56.678,55.855,50.016,46.243,50.924,67.51,60.11,51.884,64.071,64.951,51.445,71.1,65.4,70.76,68.468,63.479],"mode":"markers","marker":{"color":"rgba(165,0,38,1)","size":[11.5612340504413,10.2716916335497,16.0055698782188,11.4169159187745,10.6005512409181,11.344858481679,10.1043387921576,10.5514380100512,10.2722704873622,10.3666833801867,10.2165610804546,10.3160634640338,10.2906299338753,10.1665836299233,10.1229294798824,13.2717456330594,10.1232293836263,10.0918327241328,10.1520659408143,10.823963285915,10.1767036408285,10.0614375411151,23.5585970042379,10.1835028695861,10.6586102578357],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Argentina <br>Life Expectancy: 65.63 <br>GDP per capita: 8052.95 <br>Pop.:    22,934,225","Country: Bolivia <br>Life Expectancy: 45.03 <br>GDP per capita: 2586.89 <br>Pop.:     4,040,665","Country: Brazil <br>Life Expectancy: 57.63 <br>GDP per capita: 3429.86 <br>Pop.:    88,049,823","Country: Canada <br>Life Expectancy: 72.13 <br>GDP per capita: 16076.59 <br>Pop.:    20,819,767","Country: Chile <br>Life Expectancy: 60.52 <br>GDP per capita: 5106.65 <br>Pop.:     8,858,908","Country: Colombia <br>Life Expectancy: 59.96 <br>GDP per capita: 2678.73 <br>Pop.:    19,764,027","Country: Costa Rica <br>Life Expectancy: 65.42 <br>GDP per capita: 4161.73 <br>Pop.:     1,588,717","Country: Cuba <br>Life Expectancy: 68.29 <br>GDP per capita: 5690.27 <br>Pop.:     8,139,332","Country: Dominican Republic <br>Life Expectancy: 56.75 <br>GDP per capita: 1653.72 <br>Pop.:     4,049,146","Country: Ecuador <br>Life Expectancy: 56.68 <br>GDP per capita: 4579.07 <br>Pop.:     5,432,424","Country: El Salvador <br>Life Expectancy: 55.85 <br>GDP per capita: 4358.6 <br>Pop.:     3,232,927","Country: Guatemala <br>Life Expectancy: 50.02 <br>GDP per capita: 3242.53 <br>Pop.:     4,690,773","Country: Haiti <br>Life Expectancy: 46.24 <br>GDP per capita: 1452.06 <br>Pop.:     4,318,137","Country: Honduras <br>Life Expectancy: 50.92 <br>GDP per capita: 2538.27 <br>Pop.:     2,500,689","Country: Jamaica <br>Life Expectancy: 67.51 <br>GDP per capita: 6124.7 <br>Pop.:     1,861,096","Country: Mexico <br>Life Expectancy: 60.11 <br>GDP per capita: 5754.73 <br>Pop.:    47,995,559","Country: Nicaragua <br>Life Expectancy: 51.88 <br>GDP per capita: 4643.39 <br>Pop.:     1,865,490","Country: Panama <br>Life Expectancy: 64.07 <br>GDP per capita: 4421.01 <br>Pop.:     1,405,486","Country: Paraguay <br>Life Expectancy: 64.95 <br>GDP per capita: 2299.38 <br>Pop.:     2,287,985","Country: Peru <br>Life Expectancy: 51.44 <br>GDP per capita: 5788.09 <br>Pop.:    12,132,200","Country: Puerto Rico <br>Life Expectancy: 71.1 <br>GDP per capita: 6929.28 <br>Pop.:     2,648,961","Country: Trinidad and Tobago <br>Life Expectancy: 65.4 <br>GDP per capita: 5621.37 <br>Pop.:       960,155","Country: United States <br>Life Expectancy: 70.76 <br>GDP per capita: 19530.37 <br>Pop.:   198,712,000","Country: Uruguay <br>Life Expectancy: 68.47 <br>GDP per capita: 5444.62 <br>Pop.:     2,748,579","Country: Venezuela <br>Life Expectancy: 63.48 <br>GDP per capita: 9541.47 <br>Pop.:     9,709,552"],"frame":"1967","type":"scatter","name":"Americas","textfont":{"color":"rgba(165,0,38,1)","size":[11.5612340504413,10.2716916335497,16.0055698782188,11.4169159187745,10.6005512409181,11.344858481679,10.1043387921576,10.5514380100512,10.2722704873622,10.3666833801867,10.2165610804546,10.3160634640338,10.2906299338753,10.1665836299233,10.1229294798824,13.2717456330594,10.1232293836263,10.0918327241328,10.1520659408143,10.823963285915,10.1767036408285,10.0614375411151,23.5585970042379,10.1835028695861,10.6586102578357]},"error_y":{"color":"rgba(165,0,38,1)","width":[]},"error_x":{"color":"rgba(165,0,38,1)","width":[]},"line":{"color":"rgba(165,0,38,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2.92230867688807,4.17039881049903,2.85804733931374,2.71886053038935,2.78725191591334,3.7922489662687,2.84557587986314,2.88220098595162,3.77134725217608,3.95092244836757,3.92395558525362,3.99333871744166,3.43803517841855,3.3311317155572,3.30733087662514,4.90792105261074,3.77865640591502,3.35750460546659,3.08850503970313,2.54282542695918,2.83023070963807,3.67402872805872,2.9742390834018,3.25866779000196,4.22796504684151,3.6970041611318,3.05519261778385,3.27460199588512,3.4222382376131,3.11242422905142,2.80422348009232,3.42319916542994,2.9357299717043],"y":[34.02,59.923,43.453,45.415,58.38112,70,47.193,45.964,52.469,54.459,70.75,71.43,51.629,59.942,57.716,64.624,63.87,59.371,51.253,49.379,41.472,46.988,49.8,56.393,49.901,67.946,64.266,53.655,67.5,58.285,47.838,51.631,36.984],"mode":"markers","marker":{"color":"rgba(64,0,75,1)","size":[10.7834050243402,10.0097035992662,14.2836870021883,10.4709496193903,61.4962158500357,10.249996389226,44.5319291979482,17.4588933880222,11.8072025562938,10.5773707427547,10.1797493633292,16.8775332565939,10.0815655597293,10.857052961423,12.0524356359194,10.0351497562323,10.1451661753669,10.6890050995884,10.074360908068,11.7616280394484,10.7645483546195,10.0446896165177,14.1348964552672,12.4090985863485,10.3793630156263,10.130881229036,10.7970167229402,10.3836366098505,10.9274684357585,12.3181616147726,12.6894348736508,10.0738924193793,10.4559829619546],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Afghanistan <br>Life Expectancy: 34.02 <br>GDP per capita: 836.2 <br>Pop.:    11,537,966","Country: Bahrain <br>Life Expectancy: 59.92 <br>GDP per capita: 14804.67 <br>Pop.:       202,182","Country: Bangladesh <br>Life Expectancy: 43.45 <br>GDP per capita: 721.19 <br>Pop.:    62,821,884","Country: Cambodia <br>Life Expectancy: 45.42 <br>GDP per capita: 523.43 <br>Pop.:     6,960,067","Country: China <br>Life Expectancy: 58.38 <br>GDP per capita: 612.71 <br>Pop.:   754,550,000","Country: Hong Kong, China <br>Life Expectancy: 70 <br>GDP per capita: 6197.96 <br>Pop.:     3,722,800","Country: India <br>Life Expectancy: 47.19 <br>GDP per capita: 700.77 <br>Pop.:   506,000,000","Country: Indonesia <br>Life Expectancy: 45.96 <br>GDP per capita: 762.43 <br>Pop.:   109,343,000","Country: Iran <br>Life Expectancy: 52.47 <br>GDP per capita: 5906.73 <br>Pop.:    26,538,000","Country: Iraq <br>Life Expectancy: 54.46 <br>GDP per capita: 8931.46 <br>Pop.:     8,519,282","Country: Israel <br>Life Expectancy: 70.75 <br>GDP per capita: 8393.74 <br>Pop.:     2,693,585","Country: Japan <br>Life Expectancy: 71.43 <br>GDP per capita: 9847.79 <br>Pop.:   100,825,279","Country: Jordan <br>Life Expectancy: 51.63 <br>GDP per capita: 2741.8 <br>Pop.:     1,255,058","Country: Korea, Dem. Rep. <br>Life Expectancy: 59.94 <br>GDP per capita: 2143.54 <br>Pop.:    12,617,009","Country: Korea, Rep. <br>Life Expectancy: 57.72 <br>GDP per capita: 2029.23 <br>Pop.:    30,131,000","Country: Kuwait <br>Life Expectancy: 64.62 <br>GDP per capita: 80894.88 <br>Pop.:       575,003","Country: Lebanon <br>Life Expectancy: 63.87 <br>GDP per capita: 6006.98 <br>Pop.:     2,186,894","Country: Malaysia <br>Life Expectancy: 59.37 <br>GDP per capita: 2277.74 <br>Pop.:    10,154,878","Country: Mongolia <br>Life Expectancy: 51.25 <br>GDP per capita: 1226.04 <br>Pop.:     1,149,500","Country: Myanmar <br>Life Expectancy: 49.38 <br>GDP per capita: 349 <br>Pop.:    25,870,271","Country: Nepal <br>Life Expectancy: 41.47 <br>GDP per capita: 676.44 <br>Pop.:    11,261,690","Country: Oman <br>Life Expectancy: 46.99 <br>GDP per capita: 4720.94 <br>Pop.:       714,775","Country: Pakistan <br>Life Expectancy: 49.8 <br>GDP per capita: 942.41 <br>Pop.:    60,641,899","Country: Philippines <br>Life Expectancy: 56.39 <br>GDP per capita: 1814.13 <br>Pop.:    35,356,600","Country: Saudi Arabia <br>Life Expectancy: 49.9 <br>GDP per capita: 16903.05 <br>Pop.:     5,618,198","Country: Singapore <br>Life Expectancy: 67.95 <br>GDP per capita: 4977.42 <br>Pop.:     1,977,600","Country: Sri Lanka <br>Life Expectancy: 64.27 <br>GDP per capita: 1135.51 <br>Pop.:    11,737,396","Country: Syria <br>Life Expectancy: 53.66 <br>GDP per capita: 1881.92 <br>Pop.:     5,680,812","Country: Taiwan <br>Life Expectancy: 67.5 <br>GDP per capita: 2643.86 <br>Pop.:    13,648,692","Country: Thailand <br>Life Expectancy: 58.28 <br>GDP per capita: 1295.46 <br>Pop.:    34,024,249","Country: Vietnam <br>Life Expectancy: 47.84 <br>GDP per capita: 637.12 <br>Pop.:    39,463,910","Country: West Bank and Gaza <br>Life Expectancy: 51.63 <br>GDP per capita: 2649.72 <br>Pop.:     1,142,636","Country: Yemen, Rep. <br>Life Expectancy: 36.98 <br>GDP per capita: 862.44 <br>Pop.:     6,740,785"],"frame":"1967","type":"scatter","name":"Asia","textfont":{"color":"rgba(64,0,75,1)","size":[10.7834050243402,10.0097035992662,14.2836870021883,10.4709496193903,61.4962158500357,10.249996389226,44.5319291979482,17.4588933880222,11.8072025562938,10.5773707427547,10.1797493633292,16.8775332565939,10.0815655597293,10.857052961423,12.0524356359194,10.0351497562323,10.1451661753669,10.6890050995884,10.074360908068,11.7616280394484,10.7645483546195,10.0446896165177,14.1348964552672,12.4090985863485,10.3793630156263,10.130881229036,10.7970167229402,10.3836366098505,10.9274684357585,12.3181616147726,12.6894348736508,10.0738924193793,10.4559829619546]},"error_y":{"color":"rgba(64,0,75,1)","width":[]},"error_x":{"color":"rgba(64,0,75,1)","width":[]},"line":{"color":"rgba(64,0,75,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.44094006865781,4.10838241931361,4.11889408582397,3.33693028267941,3.74640086253428,3.84262782533193,4.05688370334703,4.2024123287676,4.03828770846528,4.11394060154369,4.16866320301241,3.93008758267857,3.96972543116429,4.12450082349962,3.88397747306288,4.00097178847123,3.7714295289461,4.18648313615635,4.21383310947184,3.81671530247097,3.80356075988127,3.81096244303535,3.90263955655535,3.92494585044061,3.97338139817314,3.90273764724083,4.18350606325153,4.36108808961809,3.451226922958,4.15053696257245],"y":[66.22,70.14,70.94,64.79,70.42,68.5,70.38,72.96,69.83,71.55,70.8,71,69.5,73.73,71.08,71.06,67.178,73.82,74.08,69.61,66.6,66.8,66.914,70.98,69.18,71.44,74.16,72.77,54.336,71.36],"mode":"markers","marker":{"color":"rgba(39,100,25,1)","size":[10.131322143507,10.4994064168079,10.6481639975232,10.2405911238844,10.5631020406411,10.2808171297866,10.6671799015258,10.3261667529505,10.3102599784987,13.3791377238022,15.2082811670175,10.5908274387597,10.6936834341862,10.0094643041988,10.1938446345341,13.5905923867547,10.0301012172861,10.8556751378276,10.2543112765237,12.1653519208637,10.6172112556334,11.3121507500379,10.5399639958525,10.2991002011769,10.1083107763125,12.2380343508092,10.5329140737742,10.4097220927996,12.2763271583403,13.7470214697477],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Albania <br>Life Expectancy: 66.22 <br>GDP per capita: 2760.2 <br>Pop.:     1,984,060","Country: Austria <br>Life Expectancy: 70.14 <br>GDP per capita: 12834.6 <br>Pop.:     7,376,998","Country: Belgium <br>Life Expectancy: 70.94 <br>GDP per capita: 13149.04 <br>Pop.:     9,556,500","Country: Bosnia and Herzegovina <br>Life Expectancy: 64.79 <br>GDP per capita: 2172.35 <br>Pop.:     3,585,000","Country: Bulgaria <br>Life Expectancy: 70.42 <br>GDP per capita: 5577 <br>Pop.:     8,310,226","Country: Croatia <br>Life Expectancy: 68.5 <br>GDP per capita: 6960.3 <br>Pop.:     4,174,366","Country: Czech Republic <br>Life Expectancy: 70.38 <br>GDP per capita: 11399.44 <br>Pop.:     9,835,109","Country: Denmark <br>Life Expectancy: 72.96 <br>GDP per capita: 15937.21 <br>Pop.:     4,838,800","Country: Finland <br>Life Expectancy: 69.83 <br>GDP per capita: 10921.64 <br>Pop.:     4,605,744","Country: France <br>Life Expectancy: 71.55 <br>GDP per capita: 12999.92 <br>Pop.:    49,569,000","Country: Germany <br>Life Expectancy: 70.8 <br>GDP per capita: 14745.63 <br>Pop.:    76,368,453","Country: Greece <br>Life Expectancy: 71 <br>GDP per capita: 8513.1 <br>Pop.:     8,716,441","Country: Hungary <br>Life Expectancy: 69.5 <br>GDP per capita: 9326.64 <br>Pop.:    10,223,422","Country: Iceland <br>Life Expectancy: 73.73 <br>GDP per capita: 13319.9 <br>Pop.:       198,676","Country: Ireland <br>Life Expectancy: 71.08 <br>GDP per capita: 7655.57 <br>Pop.:     2,900,100","Country: Italy <br>Life Expectancy: 71.06 <br>GDP per capita: 10022.4 <br>Pop.:    52,667,100","Country: Montenegro <br>Life Expectancy: 67.18 <br>GDP per capita: 5907.85 <br>Pop.:       501,035","Country: Netherlands <br>Life Expectancy: 73.82 <br>GDP per capita: 15363.25 <br>Pop.:    12,596,822","Country: Norway <br>Life Expectancy: 74.08 <br>GDP per capita: 16361.88 <br>Pop.:     3,786,019","Country: Poland <br>Life Expectancy: 69.61 <br>GDP per capita: 6557.15 <br>Pop.:    31,785,378","Country: Portugal <br>Life Expectancy: 66.6 <br>GDP per capita: 6361.52 <br>Pop.:     9,103,000","Country: Romania <br>Life Expectancy: 66.8 <br>GDP per capita: 6470.87 <br>Pop.:    19,284,814","Country: Serbia <br>Life Expectancy: 66.91 <br>GDP per capita: 7991.71 <br>Pop.:     7,971,222","Country: Slovak Republic <br>Life Expectancy: 70.98 <br>GDP per capita: 8412.9 <br>Pop.:     4,442,238","Country: Slovenia <br>Life Expectancy: 69.18 <br>GDP per capita: 9405.49 <br>Pop.:     1,646,912","Country: Spain <br>Life Expectancy: 71.44 <br>GDP per capita: 7993.51 <br>Pop.:    32,850,275","Country: Sweden <br>Life Expectancy: 74.16 <br>GDP per capita: 15258.3 <br>Pop.:     7,867,931","Country: Switzerland <br>Life Expectancy: 72.77 <br>GDP per capita: 22966.14 <br>Pop.:     6,063,000","Country: Turkey <br>Life Expectancy: 54.34 <br>GDP per capita: 2826.36 <br>Pop.:    33,411,317","Country: United Kingdom <br>Life Expectancy: 71.36 <br>GDP per capita: 14142.85 <br>Pop.:    54,959,000"],"frame":"1967","type":"scatter","name":"Europe","textfont":{"color":"rgba(39,100,25,1)","size":[10.131322143507,10.4994064168079,10.6481639975232,10.2405911238844,10.5631020406411,10.2808171297866,10.6671799015258,10.3261667529505,10.3102599784987,13.3791377238022,15.2082811670175,10.5908274387597,10.6936834341862,10.0094643041988,10.1938446345341,13.5905923867547,10.0301012172861,10.8556751378276,10.2543112765237,12.1653519208637,10.6172112556334,11.3121507500379,10.5399639958525,10.2991002011769,10.1083107763125,12.2380343508092,10.5329140737742,10.4097220927996,12.2763271583403,13.7470214697477]},"error_y":{"color":"rgba(39,100,25,1)","width":[]},"error_x":{"color":"rgba(39,100,25,1)","width":[]},"line":{"color":"rgba(39,100,25,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[4.16214976656191,4.16028597892551],"y":[71.1,71.52],"mode":"markers","marker":{"color":"rgba(49,54,149,1)","size":[10.8062218704445,10.1821085287613],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Australia <br>Life Expectancy: 71.1 <br>GDP per capita: 14526.12 <br>Pop.:    11,872,264","Country: New Zealand <br>Life Expectancy: 71.52 <br>GDP per capita: 14463.92 <br>Pop.:     2,728,150"],"frame":"1967","type":"scatter","name":"Oceania","textfont":{"color":"rgba(49,54,149,1)","size":[10.8062218704445,10.1821085287613]},"error_y":{"color":"rgba(49,54,149,1)","width":[]},"error_x":{"color":"rgba(49,54,149,1)","width":[]},"line":{"color":"rgba(49,54,149,1)"},"xaxis":"x","yaxis":"y","visible":true}],"traces":[0,1,2,3,4]},{"name":"1972","data":[{"x":[3.62145295412403,3.73824830136585,3.03574858899122,3.35480181759101,2.93183198403372,2.66661110417941,3.22637987429751,3.02938916574454,3.04300997815182,3.28725912183523,2.95659870133898,3.50693136290256,3.3762485776605,3.5675218560883,3.30621225628536,2.82763562139798,2.71123696616486,2.75300357040352,4.0569790716354,2.87857167693004,3.07122775728131,2.87020850531013,2.91393278384802,3.08719911842289,2.69599061663994,2.90471849473935,4.32245699990115,3.2426812799066,2.76687513271374,2.76445177786469,3.20053636361687,3.41085888284625,3.28560118066049,2.86028876598719,3.57357715768681,2.97964361601112,3.23003712693577,3.70308997040009,2.77127922362731,3.18553797733498,3.20349851230071,3.13154160135448,3.09849701920418,3.89019529671504,3.22001723642861,3.5269639825025,2.96188838986882,3.21739449350165,3.43985132551065,2.97805987911551,3.24883076794115,2.90274359447453],"y":[54.518,37.928,47.014,56.024,43.591,44.057,47.049,43.457,45.569,48.944,45.989,54.907,49.801,44.366,51.137,40.516,44.142,43.515,48.69,38.308,49.875,38.842,36.486,53.559,49.767,42.614,52.773,44.851,41.766,39.977,48.437,62.944,52.862,40.328,53.867,40.546,42.821,64.274,44.6,56.48,45.815,35.4,40.973,53.696,45.083,49.552,47.62,49.759,55.602,51.016,50.107,55.635],"mode":"markers","marker":{"color":"rgba(127,59,8,1)","size":[11.003372271463,10.3982458945044,10.1843784192509,10.0381766409011,10.3667831660933,10.2368360478082,10.4751103913822,10.1274453723067,10.2620272115136,10.0129691647253,11.5662468248082,10.0873943671326,10.4103156210101,10.0081109834354,12.3716151913115,10.0148513098419,10.1501686435286,12.0960747020442,10.0326226201326,10.0311977702104,10.6343509525317,10.2560427189852,10.0385868415158,10.8179969486883,10.0721276011939,10.0970978981458,10.1449602560234,10.4793012629534,10.3188088732725,10.3936934184646,10.0868707300085,10.0540101798688,11.1330450126315,10.6654385623774,10.0519931667964,10.3412822019569,13.6638268470781,10.0274119120249,10.2683783592337,10.0011319079857,10.3090964011145,10.1924053832259,10.2580066312126,11.6295952455587,10.9921946118515,10.0286726817012,10.9996733676174,10.1362562221486,10.3578844063692,10.6914217340583,10.3034860716093,10.3959441981103],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Algeria <br>Life Expectancy: 54.52 <br>GDP per capita: 4182.66 <br>Pop.:    14,760,787","Country: Angola <br>Life Expectancy: 37.93 <br>GDP per capita: 5473.29 <br>Pop.:     5,894,858","Country: Benin <br>Life Expectancy: 47.01 <br>GDP per capita: 1085.8 <br>Pop.:     2,761,407","Country: Botswana <br>Life Expectancy: 56.02 <br>GDP per capita: 2263.61 <br>Pop.:       619,351","Country: Burkina Faso <br>Life Expectancy: 43.59 <br>GDP per capita: 854.74 <br>Pop.:     5,433,886","Country: Burundi <br>Life Expectancy: 44.06 <br>GDP per capita: 464.1 <br>Pop.:     3,529,983","Country: Cameroon <br>Life Expectancy: 47.05 <br>GDP per capita: 1684.15 <br>Pop.:     7,021,028","Country: Central African Republic <br>Life Expectancy: 43.46 <br>GDP per capita: 1070.01 <br>Pop.:     1,927,260","Country: Chad <br>Life Expectancy: 45.57 <br>GDP per capita: 1104.1 <br>Pop.:     3,899,068","Country: Comoros <br>Life Expectancy: 48.94 <br>GDP per capita: 1937.58 <br>Pop.:       250,027","Country: Congo, Dem. Rep. <br>Life Expectancy: 45.99 <br>GDP per capita: 904.9 <br>Pop.:    23,007,669","Country: Congo, Rep. <br>Life Expectancy: 54.91 <br>GDP per capita: 3213.15 <br>Pop.:     1,340,458","Country: Cote d'Ivoire <br>Life Expectancy: 49.8 <br>GDP per capita: 2378.2 <br>Pop.:     6,071,696","Country: Djibouti <br>Life Expectancy: 44.37 <br>GDP per capita: 3694.21 <br>Pop.:       178,848","Country: Egypt <br>Life Expectancy: 51.14 <br>GDP per capita: 2024.01 <br>Pop.:    34,807,417","Country: Equatorial Guinea <br>Life Expectancy: 40.52 <br>GDP per capita: 672.41 <br>Pop.:       277,603","Country: Eritrea <br>Life Expectancy: 44.14 <br>GDP per capita: 514.32 <br>Pop.:     2,260,187","Country: Ethiopia <br>Life Expectancy: 43.52 <br>GDP per capita: 566.24 <br>Pop.:    30,770,372","Country: Gabon <br>Life Expectancy: 48.69 <br>GDP per capita: 11401.95 <br>Pop.:       537,977","Country: Gambia <br>Life Expectancy: 38.31 <br>GDP per capita: 756.09 <br>Pop.:       517,101","Country: Ghana <br>Life Expectancy: 49.88 <br>GDP per capita: 1178.22 <br>Pop.:     9,354,120","Country: Guinea <br>Life Expectancy: 38.84 <br>GDP per capita: 741.67 <br>Pop.:     3,811,387","Country: Guinea-Bissau <br>Life Expectancy: 36.49 <br>GDP per capita: 820.22 <br>Pop.:       625,361","Country: Kenya <br>Life Expectancy: 53.56 <br>GDP per capita: 1222.36 <br>Pop.:    12,044,785","Country: Lesotho <br>Life Expectancy: 49.77 <br>GDP per capita: 496.58 <br>Pop.:     1,116,779","Country: Liberia <br>Life Expectancy: 42.61 <br>GDP per capita: 803.01 <br>Pop.:     1,482,628","Country: Libya <br>Life Expectancy: 52.77 <br>GDP per capita: 21011.5 <br>Pop.:     2,183,877","Country: Madagascar <br>Life Expectancy: 44.85 <br>GDP per capita: 1748.56 <br>Pop.:     7,082,430","Country: Malawi <br>Life Expectancy: 41.77 <br>GDP per capita: 584.62 <br>Pop.:     4,730,997","Country: Mali <br>Life Expectancy: 39.98 <br>GDP per capita: 581.37 <br>Pop.:     5,828,158","Country: Mauritania <br>Life Expectancy: 48.44 <br>GDP per capita: 1586.85 <br>Pop.:     1,332,786","Country: Mauritius <br>Life Expectancy: 62.94 <br>GDP per capita: 2575.48 <br>Pop.:       851,334","Country: Morocco <br>Life Expectancy: 52.86 <br>GDP per capita: 1930.19 <br>Pop.:    16,660,670","Country: Mozambique <br>Life Expectancy: 40.33 <br>GDP per capita: 724.92 <br>Pop.:     9,809,596","Country: Namibia <br>Life Expectancy: 53.87 <br>GDP per capita: 3746.08 <br>Pop.:       821,782","Country: Niger <br>Life Expectancy: 40.55 <br>GDP per capita: 954.21 <br>Pop.:     5,060,262","Country: Nigeria <br>Life Expectancy: 42.82 <br>GDP per capita: 1698.39 <br>Pop.:    53,740,085","Country: Reunion <br>Life Expectancy: 64.27 <br>GDP per capita: 5047.66 <br>Pop.:       461,633","Country: Rwanda <br>Life Expectancy: 44.6 <br>GDP per capita: 590.58 <br>Pop.:     3,992,121","Country: Sao Tome and Principe <br>Life Expectancy: 56.48 <br>GDP per capita: 1532.99 <br>Pop.:        76,595","Country: Senegal <br>Life Expectancy: 45.81 <br>GDP per capita: 1597.71 <br>Pop.:     4,588,696","Country: Sierra Leone <br>Life Expectancy: 35.4 <br>GDP per capita: 1353.76 <br>Pop.:     2,879,013","Country: Somalia <br>Life Expectancy: 40.97 <br>GDP per capita: 1254.58 <br>Pop.:     3,840,161","Country: South Africa <br>Life Expectancy: 53.7 <br>GDP per capita: 7765.96 <br>Pop.:    23,935,810","Country: Sudan <br>Life Expectancy: 45.08 <br>GDP per capita: 1659.65 <br>Pop.:    14,597,019","Country: Swaziland <br>Life Expectancy: 49.55 <br>GDP per capita: 3364.84 <br>Pop.:       480,105","Country: Tanzania <br>Life Expectancy: 47.62 <br>GDP per capita: 915.99 <br>Pop.:    14,706,593","Country: Togo <br>Life Expectancy: 49.76 <br>GDP per capita: 1649.66 <br>Pop.:     2,056,351","Country: Tunisia <br>Life Expectancy: 55.6 <br>GDP per capita: 2753.29 <br>Pop.:     5,303,507","Country: Uganda <br>Life Expectancy: 51.02 <br>GDP per capita: 950.74 <br>Pop.:    10,190,285","Country: Zambia <br>Life Expectancy: 50.11 <br>GDP per capita: 1773.5 <br>Pop.:     4,506,497","Country: Zimbabwe <br>Life Expectancy: 55.63 <br>GDP per capita: 799.36 <br>Pop.:     5,861,135"],"frame":"1972","type":"scatter","name":"Africa","textfont":{"color":"rgba(127,59,8,1)","size":[11.003372271463,10.3982458945044,10.1843784192509,10.0381766409011,10.3667831660933,10.2368360478082,10.4751103913822,10.1274453723067,10.2620272115136,10.0129691647253,11.5662468248082,10.0873943671326,10.4103156210101,10.0081109834354,12.3716151913115,10.0148513098419,10.1501686435286,12.0960747020442,10.0326226201326,10.0311977702104,10.6343509525317,10.2560427189852,10.0385868415158,10.8179969486883,10.0721276011939,10.0970978981458,10.1449602560234,10.4793012629534,10.3188088732725,10.3936934184646,10.0868707300085,10.0540101798688,11.1330450126315,10.6654385623774,10.0519931667964,10.3412822019569,13.6638268470781,10.0274119120249,10.2683783592337,10.0011319079857,10.3090964011145,10.1924053832259,10.2580066312126,11.6295952455587,10.9921946118515,10.0286726817012,10.9996733676174,10.1362562221486,10.3578844063692,10.6914217340583,10.3034860716093,10.3959441981103]},"error_y":{"color":"rgba(127,59,8,1)","width":[]},"error_x":{"color":"rgba(127,59,8,1)","width":[]},"line":{"color":"rgba(127,59,8,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.97511176153781,3.47426454954607,3.69772714141292,4.27808039981948,3.73989058679744,3.51383796355758,3.70911275007028,3.72472183764533,3.34041922627685,3.72271573245366,3.65516207131792,3.60545678249039,3.21865546998006,3.40309345760668,3.8712160892056,3.83310927307515,3.671042559555,3.72950898259119,3.40197542400774,3.77362756087017,3.96013966196001,3.82082856000559,4.33857672354045,3.75613450884254,4.02140679139323],"y":[67.065,46.714,59.504,72.88,63.441,61.623,67.849,70.723,59.631,58.796,58.207,53.738,48.042,53.884,69,62.361,55.151,66.216,65.815,55.448,72.16,65.9,71.34,68.673,65.712],"mode":"markers","marker":{"color":"rgba(165,0,38,1)","size":[11.6872000386676,10.3075385943209,16.8785419678892,11.5168883608617,10.6591543708641,11.5345242571724,10.1211344256118,10.5986701878498,10.3147363524278,10.4258059838229,10.2546446242445,10.3473784929224,10.3165772727238,10.1982842200886,10.132247381366,13.8170008755762,10.1448941188528,10.1062271482984,10.1743245455164,10.9483544040942,10.1902294088837,10.0624643394591,24.3219387138213,10.1890277463177,10.7818818218248],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Argentina <br>Life Expectancy: 67.06 <br>GDP per capita: 9443.04 <br>Pop.:    24,779,799","Country: Bolivia <br>Life Expectancy: 46.71 <br>GDP per capita: 2980.33 <br>Pop.:     4,565,872","Country: Brazil <br>Life Expectancy: 59.5 <br>GDP per capita: 4985.71 <br>Pop.:   100,840,058","Country: Canada <br>Life Expectancy: 72.88 <br>GDP per capita: 18970.57 <br>Pop.:    22,284,500","Country: Chile <br>Life Expectancy: 63.44 <br>GDP per capita: 5494.02 <br>Pop.:     9,717,524","Country: Colombia <br>Life Expectancy: 61.62 <br>GDP per capita: 3264.66 <br>Pop.:    22,542,890","Country: Costa Rica <br>Life Expectancy: 67.85 <br>GDP per capita: 5118.15 <br>Pop.:     1,834,796","Country: Cuba <br>Life Expectancy: 70.72 <br>GDP per capita: 5305.45 <br>Pop.:     8,831,348","Country: Dominican Republic <br>Life Expectancy: 59.63 <br>GDP per capita: 2189.87 <br>Pop.:     4,671,329","Country: Ecuador <br>Life Expectancy: 58.8 <br>GDP per capita: 5280.99 <br>Pop.:     6,298,651","Country: El Salvador <br>Life Expectancy: 58.21 <br>GDP per capita: 4520.25 <br>Pop.:     3,790,903","Country: Guatemala <br>Life Expectancy: 53.74 <br>GDP per capita: 4031.41 <br>Pop.:     5,149,581","Country: Haiti <br>Life Expectancy: 48.04 <br>GDP per capita: 1654.46 <br>Pop.:     4,698,301","Country: Honduras <br>Life Expectancy: 53.88 <br>GDP per capita: 2529.84 <br>Pop.:     2,965,146","Country: Jamaica <br>Life Expectancy: 69 <br>GDP per capita: 7433.89 <br>Pop.:     1,997,616","Country: Mexico <br>Life Expectancy: 62.36 <br>GDP per capita: 6809.41 <br>Pop.:    55,984,294","Country: Nicaragua <br>Life Expectancy: 55.15 <br>GDP per capita: 4688.59 <br>Pop.:     2,182,908","Country: Panama <br>Life Expectancy: 66.22 <br>GDP per capita: 5364.25 <br>Pop.:     1,616,384","Country: Paraguay <br>Life Expectancy: 65.82 <br>GDP per capita: 2523.34 <br>Pop.:     2,614,104","Country: Peru <br>Life Expectancy: 55.45 <br>GDP per capita: 5937.83 <br>Pop.:    13,954,700","Country: Puerto Rico <br>Life Expectancy: 72.16 <br>GDP per capita: 9123.04 <br>Pop.:     2,847,132","Country: Trinidad and Tobago <br>Life Expectancy: 65.9 <br>GDP per capita: 6619.55 <br>Pop.:       975,199","Country: United States <br>Life Expectancy: 71.34 <br>GDP per capita: 21806.04 <br>Pop.:   209,896,000","Country: Uruguay <br>Life Expectancy: 68.67 <br>GDP per capita: 5703.41 <br>Pop.:     2,829,526","Country: Venezuela <br>Life Expectancy: 65.71 <br>GDP per capita: 10505.26 <br>Pop.:    11,515,649"],"frame":"1972","type":"scatter","name":"Americas","textfont":{"color":"rgba(165,0,38,1)","size":[11.6872000386676,10.3075385943209,16.8785419678892,11.5168883608617,10.6591543708641,11.5345242571724,10.1211344256118,10.5986701878498,10.3147363524278,10.4258059838229,10.2546446242445,10.3473784929224,10.3165772727238,10.1982842200886,10.132247381366,13.8170008755762,10.1448941188528,10.1062271482984,10.1743245455164,10.9483544040942,10.1902294088837,10.0624643394591,24.3219387138213,10.1890277463177,10.7818818218248]},"error_y":{"color":"rgba(165,0,38,1)","width":[]},"error_x":{"color":"rgba(165,0,38,1)","width":[]},"line":{"color":"rgba(165,0,38,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2.86922063087752,4.2617066548942,2.79950157150347,2.62492535061919,2.83052457318799,3.91991072809031,2.85975807721828,3.04575623818387,3.98289592362557,3.98118584246344,4.10676636344731,4.16963877108206,3.32445867085747,3.56839200934875,3.48156826189899,5.0388103158678,3.87427211945096,3.45470689702688,3.15282078556282,2.55266821611219,2.82916743418004,4.02604429776365,3.02116406003658,3.29871645293952,4.39510663253032,3.93438512609999,3.08400239072348,3.41017352648115,3.60879592864655,3.18308724099962,2.84478873958942,3.49601712489568,3.10210667169689],"y":[36.088,63.3,45.252,40.317,63.11888,72,50.651,49.203,55.234,56.95,71.63,73.42,56.528,63.983,62.612,67.712,65.421,63.01,53.754,53.07,43.971,52.143,51.929,58.065,53.886,69.521,65.042,57.296,69.39,60.405,50.254,56.532,39.848],"mode":"markers","marker":{"color":"rgba(64,0,75,1)","size":[10.888616636042,10.0116568640234,14.82543922701,10.504430384669,68.8320498044367,10.276812998462,48.6953630574426,18.2737661232436,12.0854018417249,10.6826321791568,10.2072080969218,17.311826775731,10.1060337875095,11.0047683186132,12.2827213054593,10.0533686015364,10.1788233746871,10.7768183354685,10.0860321734774,11.9388209861349,10.8431009532948,10.0524892297028,14.7276071311917,12.7840493176259,10.437689174841,10.1428118558989,10.8843353292272,10.4532792553074,11.0351271227744,12.6766198924843,13.0437433681058,10.0702706414396,10.5014592627127],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Afghanistan <br>Life Expectancy: 36.09 <br>GDP per capita: 739.98 <br>Pop.:    13,079,460","Country: Bahrain <br>Life Expectancy: 63.3 <br>GDP per capita: 18268.66 <br>Pop.:       230,800","Country: Bangladesh <br>Life Expectancy: 45.25 <br>GDP per capita: 630.23 <br>Pop.:    70,759,295","Country: Cambodia <br>Life Expectancy: 40.32 <br>GDP per capita: 421.62 <br>Pop.:     7,450,606","Country: China <br>Life Expectancy: 63.12 <br>GDP per capita: 676.9 <br>Pop.:   862,030,000","Country: Hong Kong, China <br>Life Expectancy: 72 <br>GDP per capita: 8315.93 <br>Pop.:     4,115,700","Country: India <br>Life Expectancy: 50.65 <br>GDP per capita: 724.03 <br>Pop.:   567,000,000","Country: Indonesia <br>Life Expectancy: 49.2 <br>GDP per capita: 1111.11 <br>Pop.:   121,282,000","Country: Iran <br>Life Expectancy: 55.23 <br>GDP per capita: 9613.82 <br>Pop.:    30,614,000","Country: Iraq <br>Life Expectancy: 56.95 <br>GDP per capita: 9576.04 <br>Pop.:    10,061,506","Country: Israel <br>Life Expectancy: 71.63 <br>GDP per capita: 12786.93 <br>Pop.:     3,095,893","Country: Japan <br>Life Expectancy: 73.42 <br>GDP per capita: 14778.79 <br>Pop.:   107,188,273","Country: Jordan <br>Life Expectancy: 56.53 <br>GDP per capita: 2110.86 <br>Pop.:     1,613,551","Country: Korea, Dem. Rep. <br>Life Expectancy: 63.98 <br>GDP per capita: 3701.62 <br>Pop.:    14,781,241","Country: Korea, Rep. <br>Life Expectancy: 62.61 <br>GDP per capita: 3030.88 <br>Pop.:    33,505,000","Country: Kuwait <br>Life Expectancy: 67.71 <br>GDP per capita: 109347.87 <br>Pop.:       841,934","Country: Lebanon <br>Life Expectancy: 65.42 <br>GDP per capita: 7486.38 <br>Pop.:     2,680,018","Country: Malaysia <br>Life Expectancy: 63.01 <br>GDP per capita: 2849.09 <br>Pop.:    11,441,462","Country: Mongolia <br>Life Expectancy: 53.75 <br>GDP per capita: 1421.74 <br>Pop.:     1,320,500","Country: Myanmar <br>Life Expectancy: 53.07 <br>GDP per capita: 357 <br>Pop.:    28,466,390","Country: Nepal <br>Life Expectancy: 43.97 <br>GDP per capita: 674.79 <br>Pop.:    12,412,593","Country: Oman <br>Life Expectancy: 52.14 <br>GDP per capita: 10618.04 <br>Pop.:       829,050","Country: Pakistan <br>Life Expectancy: 51.93 <br>GDP per capita: 1049.94 <br>Pop.:    69,325,921","Country: Philippines <br>Life Expectancy: 58.06 <br>GDP per capita: 1989.37 <br>Pop.:    40,850,141","Country: Saudi Arabia <br>Life Expectancy: 53.89 <br>GDP per capita: 24837.43 <br>Pop.:     6,472,756","Country: Singapore <br>Life Expectancy: 69.52 <br>GDP per capita: 8597.76 <br>Pop.:     2,152,400","Country: Sri Lanka <br>Life Expectancy: 65.04 <br>GDP per capita: 1213.4 <br>Pop.:    13,016,733","Country: Syria <br>Life Expectancy: 57.3 <br>GDP per capita: 2571.42 <br>Pop.:     6,701,172","Country: Taiwan <br>Life Expectancy: 69.39 <br>GDP per capita: 4062.52 <br>Pop.:    15,226,039","Country: Thailand <br>Life Expectancy: 60.41 <br>GDP per capita: 1524.36 <br>Pop.:    39,276,153","Country: Vietnam <br>Life Expectancy: 50.25 <br>GDP per capita: 699.5 <br>Pop.:    44,655,014","Country: West Bank and Gaza <br>Life Expectancy: 56.53 <br>GDP per capita: 3133.41 <br>Pop.:     1,089,572","Country: Yemen, Rep. <br>Life Expectancy: 39.85 <br>GDP per capita: 1265.05 <br>Pop.:     7,407,075"],"frame":"1972","type":"scatter","name":"Asia","textfont":{"color":"rgba(64,0,75,1)","size":[10.888616636042,10.0116568640234,14.82543922701,10.504430384669,68.8320498044367,10.276812998462,48.6953630574426,18.2737661232436,12.0854018417249,10.6826321791568,10.2072080969218,17.311826775731,10.1060337875095,11.0047683186132,12.2827213054593,10.0533686015364,10.1788233746871,10.7768183354685,10.0860321734774,11.9388209861349,10.8431009532948,10.0524892297028,14.7276071311917,12.7840493176259,10.437689174841,10.1428118558989,10.8843353292272,10.4532792553074,11.0351271227744,12.6766198924843,13.0437433681058,10.0702706414396,10.5014592627127]},"error_y":{"color":"rgba(64,0,75,1)","width":[]},"error_x":{"color":"rgba(64,0,75,1)","width":[]},"line":{"color":"rgba(64,0,75,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.52027677612856,4.22171737130058,4.22199144124559,3.45639180910827,3.81937903012836,3.96208935173804,4.11755146113333,4.2756846000415,4.15712044202774,4.20701982774602,4.255662718746,4.10465197432477,4.00726356033899,4.19860385843004,3.97912812108504,4.08881885753772,3.89089105535981,4.27403645322818,4.27795411820419,3.90344308730428,3.95531473257819,3.90370919682789,4.02210108309511,3.98561360821433,4.09284292451341,4.02689065700032,4.25120065557361,4.43449086835605,3.53790674825367,4.20126371287586],"y":[67.69,70.63,71.44,67.45,70.9,69.61,70.29,73.47,70.87,72.38,71,72.34,69.76,74.46,71.28,72.19,70.636,73.75,74.34,70.85,69.26,69.21,68.7,70.35,69.82,73.06,74.72,73.78,57.005,72.01],"mode":"markers","marker":{"color":"rgba(39,100,25,1)","size":[10.1503984514271,10.5108185255228,10.6585794074734,10.2565623291814,10.5812555678107,10.2842942113364,10.669026077304,10.3365955404914,10.3125746429655,13.5267689932791,15.3685825847649,10.6025797204969,10.7053321078479,10.0101877178951,10.2023284841855,13.7065176740782,10.0319196823405,10.9057081463123,10.2643434457998,12.250952598786,10.6081643186157,11.4061920734537,10.5633110313703,10.3094197156422,10.1115594832772,12.3515313323974,10.5502750469441,10.4328189127676,12.5549111177589,13.8234648455286],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Albania <br>Life Expectancy: 67.69 <br>GDP per capita: 3313.42 <br>Pop.:     2,263,554","Country: Austria <br>Life Expectancy: 70.63 <br>GDP per capita: 16661.63 <br>Pop.:     7,544,201","Country: Belgium <br>Life Expectancy: 71.44 <br>GDP per capita: 16672.14 <br>Pop.:     9,709,100","Country: Bosnia and Herzegovina <br>Life Expectancy: 67.45 <br>GDP per capita: 2860.17 <br>Pop.:     3,819,000","Country: Bulgaria <br>Life Expectancy: 70.9 <br>GDP per capita: 6597.49 <br>Pop.:     8,576,200","Country: Croatia <br>Life Expectancy: 69.61 <br>GDP per capita: 9164.09 <br>Pop.:     4,225,310","Country: Czech Republic <br>Life Expectancy: 70.29 <br>GDP per capita: 13108.45 <br>Pop.:     9,862,158","Country: Denmark <br>Life Expectancy: 73.47 <br>GDP per capita: 18866.21 <br>Pop.:     4,991,596","Country: Finland <br>Life Expectancy: 70.87 <br>GDP per capita: 14358.88 <br>Pop.:     4,639,657","Country: France <br>Life Expectancy: 72.38 <br>GDP per capita: 16107.19 <br>Pop.:    51,732,000","Country: Germany <br>Life Expectancy: 71 <br>GDP per capita: 18016.18 <br>Pop.:    78,717,088","Country: Greece <br>Life Expectancy: 72.34 <br>GDP per capita: 12724.83 <br>Pop.:     8,888,628","Country: Hungary <br>Life Expectancy: 69.76 <br>GDP per capita: 10168.66 <br>Pop.:    10,394,091","Country: Iceland <br>Life Expectancy: 74.46 <br>GDP per capita: 15798.06 <br>Pop.:       209,275","Country: Ireland <br>Life Expectancy: 71.28 <br>GDP per capita: 9530.77 <br>Pop.:     3,024,400","Country: Italy <br>Life Expectancy: 72.19 <br>GDP per capita: 12269.27 <br>Pop.:    54,365,564","Country: Montenegro <br>Life Expectancy: 70.64 <br>GDP per capita: 7778.41 <br>Pop.:       527,678","Country: Netherlands <br>Life Expectancy: 73.75 <br>GDP per capita: 18794.75 <br>Pop.:    13,329,874","Country: Norway <br>Life Expectancy: 74.34 <br>GDP per capita: 18965.06 <br>Pop.:     3,933,004","Country: Poland <br>Life Expectancy: 70.85 <br>GDP per capita: 8006.51 <br>Pop.:    33,039,545","Country: Portugal <br>Life Expectancy: 69.26 <br>GDP per capita: 9022.25 <br>Pop.:     8,970,450","Country: Romania <br>Life Expectancy: 69.21 <br>GDP per capita: 8011.41 <br>Pop.:    20,662,648","Country: Serbia <br>Life Expectancy: 68.7 <br>GDP per capita: 10522.07 <br>Pop.:     8,313,288","Country: Slovak Republic <br>Life Expectancy: 70.35 <br>GDP per capita: 9674.17 <br>Pop.:     4,593,433","Country: Slovenia <br>Life Expectancy: 69.82 <br>GDP per capita: 12383.49 <br>Pop.:     1,694,510","Country: Spain <br>Life Expectancy: 73.06 <br>GDP per capita: 10638.75 <br>Pop.:    34,513,161","Country: Sweden <br>Life Expectancy: 74.72 <br>GDP per capita: 17832.02 <br>Pop.:     8,122,293","Country: Switzerland <br>Life Expectancy: 73.78 <br>GDP per capita: 27195.11 <br>Pop.:     6,401,400","Country: Turkey <br>Life Expectancy: 57.01 <br>GDP per capita: 3450.7 <br>Pop.:    37,492,953","Country: United Kingdom <br>Life Expectancy: 72.01 <br>GDP per capita: 15895.12 <br>Pop.:    56,079,000"],"frame":"1972","type":"scatter","name":"Europe","textfont":{"color":"rgba(39,100,25,1)","size":[10.1503984514271,10.5108185255228,10.6585794074734,10.2565623291814,10.5812555678107,10.2842942113364,10.669026077304,10.3365955404914,10.3125746429655,13.5267689932791,15.3685825847649,10.6025797204969,10.7053321078479,10.0101877178951,10.2023284841855,13.7065176740782,10.0319196823405,10.9057081463123,10.2643434457998,12.250952598786,10.6081643186157,11.4061920734537,10.5633110313703,10.3094197156422,10.1115594832772,12.3515313323974,10.5502750469441,10.4328189127676,12.5549111177589,13.8234648455286]},"error_y":{"color":"rgba(39,100,25,1)","width":[]},"error_x":{"color":"rgba(39,100,25,1)","width":[]},"line":{"color":"rgba(39,100,25,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[4.22501524446638,4.20536779687056],"y":[71.93,71.89],"mode":"markers","marker":{"color":"rgba(49,54,149,1)","size":[10.8952740350363,10.1958239719427],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Australia <br>Life Expectancy: 71.93 <br>GDP per capita: 16788.63 <br>Pop.:    13,177,000","Country: New Zealand <br>Life Expectancy: 71.89 <br>GDP per capita: 16046.04 <br>Pop.:     2,929,100"],"frame":"1972","type":"scatter","name":"Oceania","textfont":{"color":"rgba(49,54,149,1)","size":[10.8952740350363,10.1958239719427]},"error_y":{"color":"rgba(49,54,149,1)","width":[]},"error_x":{"color":"rgba(49,54,149,1)","width":[]},"line":{"color":"rgba(49,54,149,1)"},"xaxis":"x","yaxis":"y","visible":true}],"traces":[0,1,2,3,4]},{"name":"1977","data":[{"x":[3.69111835304969,3.47837128685849,3.0124834262036,3.50716177034781,2.87121498358872,2.74515544499733,3.25125676748187,3.04507811557752,3.05460729073385,3.06915101836112,2.90078062155373,3.51310821042633,3.40101028408395,3.48879895792208,3.44490216214739,2.98162238872728,2.7039391611549,2.74570576546197,4.3373708614867,2.94682314869669,2.99704718642708,2.94185210799775,2.88350583493768,3.10298675433845,2.87237164152654,2.8063987207202,4.34145849934605,3.18871158763867,2.82166002181421,2.83657428165302,3.17536457562432,3.56948896052176,3.37486193965761,2.70098023955392,3.58843821514052,2.90789326381397,3.29709308978461,3.6354640490023,2.82612704524949,3.23994022438144,3.19361683040004,3.12978175413031,3.16166517152032,3.90464260358686,3.34301221488094,3.57765383934322,2.9833972607425,3.185478974435,3.49427662628827,2.92620510614229,3.20103869689067,2.83606300605042],"y":[58.014,39.483,49.19,59.319,46.137,45.91,49.355,46.775,47.383,50.939,47.804,55.625,52.374,46.519,53.319,42.024,44.535,44.51,52.79,41.842,51.756,40.762,37.465,56.155,52.208,43.764,57.442,46.881,43.767,41.714,50.852,64.93,55.73,42.495,56.437,41.291,44.514,67.064,45,58.55,48.879,36.788,41.974,55.527,47.8,52.537,49.919,52.887,59.837,50.35,51.386,57.674],"mode":"markers","marker":{"color":"rgba(127,59,8,1)","size":[11.1666346414677,10.416525211979,10.2121478405636,10.0492418877984,10.397885245578,10.2576144493936,10.5391888463715,10.1438447287611,10.2954160399823,10.0167034236322,11.8033032615988,10.1007931845816,10.5050424776994,10.0115131231758,12.6430196161779,10.0090547178612,10.1673994582007,12.3586731912857,10.0441157451752,10.0374206022641,10.7151606783829,10.2844113335085,10.0467681255558,10.9856003468952,10.0813243535775,10.1121810634765,10.1816739618206,10.542417282191,10.3806630990386,10.4389786790362,10.0953274149603,10.058220776561,11.2515507416587,10.7554145997679,10.0625890377158,10.3837235641904,14.2418676296722,10.0294910353401,10.3137632692059,10.0018281569824,10.3549732788123,10.2102797555679,10.2930548952129,11.8476036994302,11.1633709188399,10.0335404866661,11.1650485096733,10.1534717481455,10.4057675814162,10.7779305865861,10.351949329023,10.4492478910302],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Algeria <br>Life Expectancy: 58.01 <br>GDP per capita: 4910.42 <br>Pop.:    17,152,804","Country: Angola <br>Life Expectancy: 39.48 <br>GDP per capita: 3008.65 <br>Pop.:     6,162,675","Country: Benin <br>Life Expectancy: 49.19 <br>GDP per capita: 1029.16 <br>Pop.:     3,168,267","Country: Botswana <br>Life Expectancy: 59.32 <br>GDP per capita: 3214.86 <br>Pop.:       781,472","Country: Burkina Faso <br>Life Expectancy: 46.14 <br>GDP per capita: 743.39 <br>Pop.:     5,889,574","Country: Burundi <br>Life Expectancy: 45.91 <br>GDP per capita: 556.1 <br>Pop.:     3,834,415","Country: Cameroon <br>Life Expectancy: 49.35 <br>GDP per capita: 1783.43 <br>Pop.:     7,959,865","Country: Central African Republic <br>Life Expectancy: 46.77 <br>GDP per capita: 1109.37 <br>Pop.:     2,167,533","Country: Chad <br>Life Expectancy: 47.38 <br>GDP per capita: 1133.98 <br>Pop.:     4,388,260","Country: Comoros <br>Life Expectancy: 50.94 <br>GDP per capita: 1172.6 <br>Pop.:       304,739","Country: Congo, Dem. Rep. <br>Life Expectancy: 47.8 <br>GDP per capita: 795.76 <br>Pop.:    26,480,870","Country: Congo, Rep. <br>Life Expectancy: 55.62 <br>GDP per capita: 3259.18 <br>Pop.:     1,536,769","Country: Cote d'Ivoire <br>Life Expectancy: 52.37 <br>GDP per capita: 2517.74 <br>Pop.:     7,459,574","Country: Djibouti <br>Life Expectancy: 46.52 <br>GDP per capita: 3081.76 <br>Pop.:       228,694","Country: Egypt <br>Life Expectancy: 53.32 <br>GDP per capita: 2785.49 <br>Pop.:    38,783,863","Country: Equatorial Guinea <br>Life Expectancy: 42.02 <br>GDP per capita: 958.57 <br>Pop.:       192,675","Country: Eritrea <br>Life Expectancy: 44.53 <br>GDP per capita: 505.75 <br>Pop.:     2,512,642","Country: Ethiopia <br>Life Expectancy: 44.51 <br>GDP per capita: 556.81 <br>Pop.:    34,617,799","Country: Gabon <br>Life Expectancy: 52.79 <br>GDP per capita: 21745.57 <br>Pop.:       706,367","Country: Gambia <br>Life Expectancy: 41.84 <br>GDP per capita: 884.76 <br>Pop.:       608,274","Country: Ghana <br>Life Expectancy: 51.76 <br>GDP per capita: 993.22 <br>Pop.:    10,538,093","Country: Guinea <br>Life Expectancy: 40.76 <br>GDP per capita: 874.69 <br>Pop.:     4,227,026","Country: Guinea-Bissau <br>Life Expectancy: 37.47 <br>GDP per capita: 764.73 <br>Pop.:       745,228","Country: Kenya <br>Life Expectancy: 56.16 <br>GDP per capita: 1267.61 <br>Pop.:    14,500,404","Country: Lesotho <br>Life Expectancy: 52.21 <br>GDP per capita: 745.37 <br>Pop.:     1,251,524","Country: Liberia <br>Life Expectancy: 43.76 <br>GDP per capita: 640.32 <br>Pop.:     1,703,617","Country: Libya <br>Life Expectancy: 57.44 <br>GDP per capita: 21951.21 <br>Pop.:     2,721,783","Country: Madagascar <br>Life Expectancy: 46.88 <br>GDP per capita: 1544.23 <br>Pop.:     8,007,166","Country: Malawi <br>Life Expectancy: 43.77 <br>GDP per capita: 663.22 <br>Pop.:     5,637,246","Country: Mali <br>Life Expectancy: 41.71 <br>GDP per capita: 686.4 <br>Pop.:     6,491,649","Country: Mauritania <br>Life Expectancy: 50.85 <br>GDP per capita: 1497.49 <br>Pop.:     1,456,688","Country: Mauritius <br>Life Expectancy: 64.93 <br>GDP per capita: 3710.98 <br>Pop.:       913,025","Country: Morocco <br>Life Expectancy: 55.73 <br>GDP per capita: 2370.62 <br>Pop.:    18,396,941","Country: Mozambique <br>Life Expectancy: 42.49 <br>GDP per capita: 502.32 <br>Pop.:    11,127,868","Country: Namibia <br>Life Expectancy: 56.44 <br>GDP per capita: 3876.49 <br>Pop.:       977,026","Country: Niger <br>Life Expectancy: 41.29 <br>GDP per capita: 808.9 <br>Pop.:     5,682,086","Country: Nigeria <br>Life Expectancy: 44.51 <br>GDP per capita: 1981.95 <br>Pop.:    62,209,173","Country: Reunion <br>Life Expectancy: 67.06 <br>GDP per capita: 4319.8 <br>Pop.:       492,095","Country: Rwanda <br>Life Expectancy: 45 <br>GDP per capita: 670.08 <br>Pop.:     4,657,072","Country: Sao Tome and Principe <br>Life Expectancy: 58.55 <br>GDP per capita: 1737.56 <br>Pop.:        86,796","Country: Senegal <br>Life Expectancy: 48.88 <br>GDP per capita: 1561.77 <br>Pop.:     5,260,855","Country: Sierra Leone <br>Life Expectancy: 36.79 <br>GDP per capita: 1348.29 <br>Pop.:     3,140,897","Country: Somalia <br>Life Expectancy: 41.97 <br>GDP per capita: 1450.99 <br>Pop.:     4,353,666","Country: South Africa <br>Life Expectancy: 55.53 <br>GDP per capita: 8028.65 <br>Pop.:    27,129,932","Country: Sudan <br>Life Expectancy: 47.8 <br>GDP per capita: 2202.99 <br>Pop.:    17,104,986","Country: Swaziland <br>Life Expectancy: 52.54 <br>GDP per capita: 3781.41 <br>Pop.:       551,425","Country: Tanzania <br>Life Expectancy: 49.92 <br>GDP per capita: 962.49 <br>Pop.:    17,129,565","Country: Togo <br>Life Expectancy: 52.89 <br>GDP per capita: 1532.78 <br>Pop.:     2,308,582","Country: Tunisia <br>Life Expectancy: 59.84 <br>GDP per capita: 3120.88 <br>Pop.:     6,005,061","Country: Uganda <br>Life Expectancy: 50.35 <br>GDP per capita: 843.73 <br>Pop.:    11,457,758","Country: Zambia <br>Life Expectancy: 51.39 <br>GDP per capita: 1588.69 <br>Pop.:     5,216,550","Country: Zimbabwe <br>Life Expectancy: 57.67 <br>GDP per capita: 685.59 <br>Pop.:     6,642,107"],"frame":"1977","type":"scatter","name":"Africa","textfont":{"color":"rgba(127,59,8,1)","size":[11.1666346414677,10.416525211979,10.2121478405636,10.0492418877984,10.397885245578,10.2576144493936,10.5391888463715,10.1438447287611,10.2954160399823,10.0167034236322,11.8033032615988,10.1007931845816,10.5050424776994,10.0115131231758,12.6430196161779,10.0090547178612,10.1673994582007,12.3586731912857,10.0441157451752,10.0374206022641,10.7151606783829,10.2844113335085,10.0467681255558,10.9856003468952,10.0813243535775,10.1121810634765,10.1816739618206,10.542417282191,10.3806630990386,10.4389786790362,10.0953274149603,10.058220776561,11.2515507416587,10.7554145997679,10.0625890377158,10.3837235641904,14.2418676296722,10.0294910353401,10.3137632692059,10.0018281569824,10.3549732788123,10.2102797555679,10.2930548952129,11.8476036994302,11.1633709188399,10.0335404866661,11.1650485096733,10.1534717481455,10.4057675814162,10.7779305865861,10.351949329023,10.4492478910302]},"error_y":{"color":"rgba(127,59,8,1)","width":[]},"error_x":{"color":"rgba(127,59,8,1)","width":[]},"line":{"color":"rgba(127,59,8,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[4.00341859740172,3.54999558616307,3.82348196645535,4.34421307668719,3.67731159008544,3.58158649939174,3.77282591203612,3.80485437036137,3.42845697609622,3.82475196835622,3.71087205749874,3.68841917661215,3.27283885748582,3.50558514939778,3.82283441748743,3.88507437266432,3.7392851792172,3.72850897552038,3.51166593362054,3.7980489038637,3.98991789679654,3.89760258369119,4.38152357914239,3.81320321246222,4.11872592974958],"y":[68.481,50.023,61.489,74.21,67.052,63.837,70.75,72.649,61.788,61.31,56.696,56.029,49.923,57.402,70.11,65.032,57.47,68.681,66.353,58.447,73.44,68.3,73.38,69.481,67.456],"mode":"markers","marker":{"color":"rgba(165,0,38,1)","size":[11.8376316610595,10.342609996093,17.7981757766663,11.6200800928644,10.7193718893523,11.7086733241895,10.1398126137008,10.6469004977264,10.3578361514883,10.4927086120292,10.2882034709714,10.3851803565232,10.3309276736953,10.2044330658749,10.1431131247031,14.3477146086821,10.1702630816599,10.1214747351401,10.1996047794052,11.0872765207201,10.2061798652645,10.0668195642882,25.0278796385549,10.1920304694195,10.9175629440766],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Argentina <br>Life Expectancy: 68.48 <br>GDP per capita: 10079.03 <br>Pop.:    26,983,828","Country: Bolivia <br>Life Expectancy: 50.02 <br>GDP per capita: 3548.1 <br>Pop.:     5,079,716","Country: Brazil <br>Life Expectancy: 61.49 <br>GDP per capita: 6660.12 <br>Pop.:   114,313,951","Country: Canada <br>Life Expectancy: 74.21 <br>GDP per capita: 22090.88 <br>Pop.:    23,796,400","Country: Chile <br>Life Expectancy: 67.05 <br>GDP per capita: 4756.76 <br>Pop.:    10,599,793","Country: Colombia <br>Life Expectancy: 63.84 <br>GDP per capita: 3815.81 <br>Pop.:    25,094,412","Country: Costa Rica <br>Life Expectancy: 70.75 <br>GDP per capita: 5926.88 <br>Pop.:     2,108,457","Country: Cuba <br>Life Expectancy: 72.65 <br>GDP per capita: 6380.49 <br>Pop.:     9,537,988","Country: Dominican Republic <br>Life Expectancy: 61.79 <br>GDP per capita: 2681.99 <br>Pop.:     5,302,800","Country: Ecuador <br>Life Expectancy: 61.31 <br>GDP per capita: 6679.62 <br>Pop.:     7,278,866","Country: El Salvador <br>Life Expectancy: 56.7 <br>GDP per capita: 5138.92 <br>Pop.:     4,282,586","Country: Guatemala <br>Life Expectancy: 56.03 <br>GDP per capita: 4879.99 <br>Pop.:     5,703,430","Country: Haiti <br>Life Expectancy: 49.92 <br>GDP per capita: 1874.3 <br>Pop.:     4,908,554","Country: Honduras <br>Life Expectancy: 57.4 <br>GDP per capita: 3203.21 <br>Pop.:     3,055,235","Country: Jamaica <br>Life Expectancy: 70.11 <br>GDP per capita: 6650.2 <br>Pop.:     2,156,814","Country: Mexico <br>Life Expectancy: 65.03 <br>GDP per capita: 7674.93 <br>Pop.:    63,759,976","Country: Nicaragua <br>Life Expectancy: 57.47 <br>GDP per capita: 5486.37 <br>Pop.:     2,554,598","Country: Panama <br>Life Expectancy: 68.68 <br>GDP per capita: 5351.91 <br>Pop.:     1,839,782","Country: Paraguay <br>Life Expectancy: 66.35 <br>GDP per capita: 3248.37 <br>Pop.:     2,984,494","Country: Peru <br>Life Expectancy: 58.45 <br>GDP per capita: 6281.29 <br>Pop.:    15,990,099","Country: Puerto Rico <br>Life Expectancy: 73.44 <br>GDP per capita: 9770.52 <br>Pop.:     3,080,828","Country: Trinidad and Tobago <br>Life Expectancy: 68.3 <br>GDP per capita: 7899.55 <br>Pop.:     1,039,009","Country: United States <br>Life Expectancy: 73.38 <br>GDP per capita: 24072.63 <br>Pop.:   220,239,000","Country: Uruguay <br>Life Expectancy: 69.48 <br>GDP per capita: 6504.34 <br>Pop.:     2,873,520","Country: Venezuela <br>Life Expectancy: 67.46 <br>GDP per capita: 13143.95 <br>Pop.:    13,503,563"],"frame":"1977","type":"scatter","name":"Americas","textfont":{"color":"rgba(165,0,38,1)","size":[11.8376316610595,10.342609996093,17.7981757766663,11.6200800928644,10.7193718893523,11.7086733241895,10.1398126137008,10.6469004977264,10.3578361514883,10.4927086120292,10.2882034709714,10.3851803565232,10.3309276736953,10.2044330658749,10.1431131247031,14.3477146086821,10.1702630816599,10.1214747351401,10.1996047794052,11.0872765207201,10.2061798652645,10.0668195642882,25.0278796385549,10.1920304694195,10.9175629440766]},"error_y":{"color":"rgba(165,0,38,1)","width":[]},"error_x":{"color":"rgba(165,0,38,1)","width":[]},"line":{"color":"rgba(165,0,38,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2.89548517717506,4.28645875933068,2.81946314412135,2.72013629197205,2.86995736499049,4.048680298964,2.91027070197067,3.14072860861607,4.07513053543838,4.16696961434647,4.12406772903255,4.22037948985684,3.45520305365965,3.61345080718246,3.66812684894598,4.7728017852095,3.93750268823479,3.58296303108212,3.21682849824462,2.56937390961505,2.84142982784579,4.07365765189317,3.07037821749517,3.37533512418369,4.53361654092087,4.04960907918865,3.12993971717703,3.50453672644772,3.74791804661293,3.29252733979409,2.85341657088882,3.56618184839601,3.26239535810376],"y":[38.438,65.593,46.923,31.22,63.96736,73.6,54.208,52.702,57.702,60.413,73.06,75.38,61.134,67.159,64.766,69.343,66.099,65.256,55.491,56.059,46.748,57.367,54.043,60.06,58.69,70.795,65.949,61.195,70.59,62.494,55.764,60.765,44.175],"mode":"markers","marker":{"color":"rgba(64,0,75,1)","size":[11.011534308153,10.016203197292,15.4853783710301,10.4722150302715,74.3895514767209,10.3087554090561,53.2683150014775,19.3277974198366,12.4175673520838,10.8069489015506,10.2345110088832,17.7680435725119,10.1281546576291,11.1101563643564,12.4827708897573,10.0737368707602,10.2085659223841,10.8726400387568,10.1001946739011,12.1477910346155,10.9468868277852,10.0644664733744,15.3300604471065,13.1936234378909,10.5506990346677,10.1546128020351,10.9594206747867,10.5373213074,11.1415442874641,13.009157586529,13.4449681654102,10.0819773301633,10.5695017162543],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Afghanistan <br>Life Expectancy: 38.44 <br>GDP per capita: 786.11 <br>Pop.:    14,880,372","Country: Bahrain <br>Life Expectancy: 65.59 <br>GDP per capita: 19340.1 <br>Pop.:       297,410","Country: Bangladesh <br>Life Expectancy: 46.92 <br>GDP per capita: 659.88 <br>Pop.:    80,428,306","Country: Cambodia <br>Life Expectancy: 31.22 <br>GDP per capita: 524.97 <br>Pop.:     6,978,607","Country: China <br>Life Expectancy: 63.97 <br>GDP per capita: 741.24 <br>Pop.:   943,455,000","Country: Hong Kong, China <br>Life Expectancy: 73.6 <br>GDP per capita: 11186.14 <br>Pop.:     4,583,700","Country: India <br>Life Expectancy: 54.21 <br>GDP per capita: 813.34 <br>Pop.:   634,000,000","Country: Indonesia <br>Life Expectancy: 52.7 <br>GDP per capita: 1382.7 <br>Pop.:   136,725,000","Country: Iran <br>Life Expectancy: 57.7 <br>GDP per capita: 11888.6 <br>Pop.:    35,480,679","Country: Iraq <br>Life Expectancy: 60.41 <br>GDP per capita: 14688.24 <br>Pop.:    11,882,916","Country: Israel <br>Life Expectancy: 73.06 <br>GDP per capita: 13306.62 <br>Pop.:     3,495,918","Country: Japan <br>Life Expectancy: 75.38 <br>GDP per capita: 16610.38 <br>Pop.:   113,872,473","Country: Jordan <br>Life Expectancy: 61.13 <br>GDP per capita: 2852.35 <br>Pop.:     1,937,652","Country: Korea, Dem. Rep. <br>Life Expectancy: 67.16 <br>GDP per capita: 4106.3 <br>Pop.:    16,325,320","Country: Korea, Rep. <br>Life Expectancy: 64.77 <br>GDP per capita: 4657.22 <br>Pop.:    36,436,000","Country: Kuwait <br>Life Expectancy: 69.34 <br>GDP per capita: 59265.48 <br>Pop.:     1,140,357","Country: Lebanon <br>Life Expectancy: 66.1 <br>GDP per capita: 8659.7 <br>Pop.:     3,115,787","Country: Malaysia <br>Life Expectancy: 65.26 <br>GDP per capita: 3827.92 <br>Pop.:    12,845,381","Country: Mongolia <br>Life Expectancy: 55.49 <br>GDP per capita: 1647.51 <br>Pop.:     1,528,000","Country: Myanmar <br>Life Expectancy: 56.06 <br>GDP per capita: 371 <br>Pop.:    31,528,087","Country: Nepal <br>Life Expectancy: 46.75 <br>GDP per capita: 694.11 <br>Pop.:    13,933,198","Country: Oman <br>Life Expectancy: 57.37 <br>GDP per capita: 11848.34 <br>Pop.:     1,004,533","Country: Pakistan <br>Life Expectancy: 54.04 <br>GDP per capita: 1175.92 <br>Pop.:    78,152,686","Country: Philippines <br>Life Expectancy: 60.06 <br>GDP per capita: 2373.2 <br>Pop.:    46,850,962","Country: Saudi Arabia <br>Life Expectancy: 58.69 <br>GDP per capita: 34167.76 <br>Pop.:     8,128,505","Country: Singapore <br>Life Expectancy: 70.8 <br>GDP per capita: 11210.09 <br>Pop.:     2,325,300","Country: Sri Lanka <br>Life Expectancy: 65.95 <br>GDP per capita: 1348.78 <br>Pop.:    14,116,836","Country: Syria <br>Life Expectancy: 61.2 <br>GDP per capita: 3195.48 <br>Pop.:     7,932,503","Country: Taiwan <br>Life Expectancy: 70.59 <br>GDP per capita: 5596.52 <br>Pop.:    16,785,196","Country: Thailand <br>Life Expectancy: 62.49 <br>GDP per capita: 1961.22 <br>Pop.:    44,148,285","Country: Vietnam <br>Life Expectancy: 55.76 <br>GDP per capita: 713.54 <br>Pop.:    50,533,506","Country: West Bank and Gaza <br>Life Expectancy: 60.76 <br>GDP per capita: 3682.83 <br>Pop.:     1,261,091","Country: Yemen, Rep. <br>Life Expectancy: 44.17 <br>GDP per capita: 1829.77 <br>Pop.:     8,403,990"],"frame":"1977","type":"scatter","name":"Asia","textfont":{"color":"rgba(64,0,75,1)","size":[11.011534308153,10.016203197292,15.4853783710301,10.4722150302715,74.3895514767209,10.3087554090561,53.2683150014775,19.3277974198366,12.4175673520838,10.8069489015506,10.2345110088832,17.7680435725119,10.1281546576291,11.1101563643564,12.4827708897573,10.0737368707602,10.2085659223841,10.8726400387568,10.1001946739011,12.1477910346155,10.9468868277852,10.0644664733744,15.3300604471065,13.1936234378909,10.5506990346677,10.1546128020351,10.9594206747867,10.5373213074,11.1415442874641,13.009157586529,13.4449681654102,10.0819773301633,10.5695017162543]},"error_y":{"color":"rgba(64,0,75,1)","width":[]},"error_x":{"color":"rgba(64,0,75,1)","width":[]},"line":{"color":"rgba(64,0,75,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.54814411807184,4.29555439638822,4.28144187754483,3.54758782074795,3.88151249733011,4.05328536317461,4.17026642863828,4.31011744274222,4.19327554039949,4.26227627214274,4.31202751232983,4.15215143685527,4.06725083957618,4.29347221889702,4.04731308089082,4.15399722211687,3.98208706693409,4.32652140433408,4.36756741361793,3.97809563416623,4.00742708886894,3.97110865215781,4.11329709452241,4.03832857580155,4.18403893629866,4.12178698250771,4.27544324046184,4.43107881405245,3.63033859911073,4.24126620200209],"y":[68.93,72.17,72.8,69.86,70.81,70.64,70.71,74.69,72.52,73.83,72.5,73.68,69.95,76.11,72.03,73.48,73.066,75.24,75.37,70.67,70.41,69.46,70.3,70.45,70.97,74.39,75.44,75.39,59.507,72.76],"mode":"markers","marker":{"color":"rgba(39,100,25,1)","size":[10.1671541568681,10.5124722278012,10.6662715221613,10.2747858839435,10.5963273348881,10.2906665174909,10.6894853960486,10.3432040020746,10.3193484133489,13.6245768592774,15.3306124092314,10.6312358167156,10.721923050513,10.0110441567159,10.2192211051727,13.8221165072353,10.0341307387319,10.9414123217781,10.2718649962055,12.3589090054494,10.6554056423182,11.4741685945836,10.588774797614,10.3254161745545,10.1151365554927,12.4829756487996,10.5591039155818,10.4270190446423,12.8901071301963,13.8302901469376],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Albania <br>Life Expectancy: 68.93 <br>GDP per capita: 3533 <br>Pop.:     2,509,048","Country: Austria <br>Life Expectancy: 72.17 <br>GDP per capita: 19749.42 <br>Pop.:     7,568,430","Country: Belgium <br>Life Expectancy: 72.8 <br>GDP per capita: 19117.97 <br>Pop.:     9,821,800","Country: Bosnia and Herzegovina <br>Life Expectancy: 69.86 <br>GDP per capita: 3528.48 <br>Pop.:     4,086,000","Country: Bulgaria <br>Life Expectancy: 70.81 <br>GDP per capita: 7612.24 <br>Pop.:     8,797,022","Country: Croatia <br>Life Expectancy: 70.64 <br>GDP per capita: 11305.39 <br>Pop.:     4,318,673","Country: Czech Republic <br>Life Expectancy: 70.71 <br>GDP per capita: 14800.16 <br>Pop.:    10,161,915","Country: Denmark <br>Life Expectancy: 74.69 <br>GDP per capita: 20422.9 <br>Pop.:     5,088,419","Country: Finland <br>Life Expectancy: 72.52 <br>GDP per capita: 15605.42 <br>Pop.:     4,738,902","Country: France <br>Life Expectancy: 73.83 <br>GDP per capita: 18292.64 <br>Pop.:    53,165,019","Country: Germany <br>Life Expectancy: 72.5 <br>GDP per capita: 20512.92 <br>Pop.:    78,160,773","Country: Greece <br>Life Expectancy: 73.68 <br>GDP per capita: 14195.52 <br>Pop.:     9,308,479","Country: Hungary <br>Life Expectancy: 69.95 <br>GDP per capita: 11674.84 <br>Pop.:    10,637,171","Country: Iceland <br>Life Expectancy: 76.11 <br>GDP per capita: 19654.96 <br>Pop.:       221,823","Country: Ireland <br>Life Expectancy: 72.03 <br>GDP per capita: 11150.98 <br>Pop.:     3,271,900","Country: Italy <br>Life Expectancy: 73.48 <br>GDP per capita: 14255.98 <br>Pop.:    56,059,245","Country: Montenegro <br>Life Expectancy: 73.07 <br>GDP per capita: 9595.93 <br>Pop.:       560,073","Country: Netherlands <br>Life Expectancy: 75.24 <br>GDP per capita: 21209.06 <br>Pop.:    13,852,989","Country: Norway <br>Life Expectancy: 75.37 <br>GDP per capita: 23311.35 <br>Pop.:     4,043,205","Country: Poland <br>Life Expectancy: 70.67 <br>GDP per capita: 9508.14 <br>Pop.:    34,621,254","Country: Portugal <br>Life Expectancy: 70.41 <br>GDP per capita: 10172.49 <br>Pop.:     9,662,600","Country: Romania <br>Life Expectancy: 69.46 <br>GDP per capita: 9356.4 <br>Pop.:    21,658,597","Country: Serbia <br>Life Expectancy: 70.3 <br>GDP per capita: 12980.67 <br>Pop.:     8,686,367","Country: Slovak Republic <br>Life Expectancy: 70.45 <br>GDP per capita: 10922.66 <br>Pop.:     4,827,803","Country: Slovenia <br>Life Expectancy: 70.97 <br>GDP per capita: 15277.03 <br>Pop.:     1,746,919","Country: Spain <br>Life Expectancy: 74.39 <br>GDP per capita: 13236.92 <br>Pop.:    36,439,000","Country: Sweden <br>Life Expectancy: 75.44 <br>GDP per capita: 18855.73 <br>Pop.:     8,251,648","Country: Switzerland <br>Life Expectancy: 75.39 <br>GDP per capita: 26982.29 <br>Pop.:     6,316,424","Country: Turkey <br>Life Expectancy: 59.51 <br>GDP per capita: 4269.12 <br>Pop.:    42,404,033","Country: United Kingdom <br>Life Expectancy: 72.76 <br>GDP per capita: 17428.75 <br>Pop.:    56,179,000"],"frame":"1977","type":"scatter","name":"Europe","textfont":{"color":"rgba(39,100,25,1)","size":[10.1671541568681,10.5124722278012,10.6662715221613,10.2747858839435,10.5963273348881,10.2906665174909,10.6894853960486,10.3432040020746,10.3193484133489,13.6245768592774,15.3306124092314,10.6312358167156,10.721923050513,10.0110441567159,10.2192211051727,13.8221165072353,10.0341307387319,10.9414123217781,10.2718649962055,12.3589090054494,10.6554056423182,11.4741685945836,10.588774797614,10.3254161745545,10.1151365554927,12.4829756487996,10.5591039155818,10.4270190446423,12.8901071301963,13.8302901469376]},"error_y":{"color":"rgba(39,100,25,1)","width":[]},"error_x":{"color":"rgba(39,100,25,1)","width":[]},"line":{"color":"rgba(39,100,25,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[4.26326190559163,4.21041798943211],"y":[73.49,72.22],"mode":"markers","marker":{"color":"rgba(49,54,149,1)","size":[10.9565038139765,10.2119180326651],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Australia <br>Life Expectancy: 73.49 <br>GDP per capita: 18334.2 <br>Pop.:    14,074,100","Country: New Zealand <br>Life Expectancy: 72.22 <br>GDP per capita: 16233.72 <br>Pop.:     3,164,900"],"frame":"1977","type":"scatter","name":"Oceania","textfont":{"color":"rgba(49,54,149,1)","size":[10.9565038139765,10.2119180326651]},"error_y":{"color":"rgba(49,54,149,1)","width":[]},"error_x":{"color":"rgba(49,54,149,1)","width":[]},"line":{"color":"rgba(49,54,149,1)"},"xaxis":"x","yaxis":"y","visible":true}],"traces":[0,1,2,3,4]},{"name":"1982","data":[{"x":[3.75930214419082,3.44042946825891,3.10649605993551,3.6581204004364,2.9069803921906,2.74788021332769,3.37437863193569,2.98079982845335,2.90195287418202,3.1028109193649,2.82849737175522,3.68837599182428,3.41542580890366,3.4593122666122,3.54453058661607,2.96746623070101,2.72005659037713,2.76182319473139,4.17936108310694,2.92210736069778,2.94252025259964,2.93310767500262,2.92330825997355,3.12976263075549,2.90160166798988,2.75754752664772,4.23965666469638,3.11490397011402,2.80126916141876,2.79099835840843,3.17059909832327,3.56679535645849,3.43178504352554,2.66484066673129,3.62232807621186,2.95890876211224,3.19782446420713,3.72158140489893,2.94525712122136,3.27651192139224,3.18140907159466,3.16584082156006,3.07070525448101,3.93289295216963,3.2777338865932,3.59055027810034,2.94163196835205,3.1285859858649,3.55147844259796,2.83395387358472,3.14881190625883,2.89699720519387],"y":[61.368,39.942,50.904,61.484,48.122,47.471,52.961,48.295,49.517,52.933,47.784,56.695,53.983,48.812,56.006,43.662,43.89,44.916,56.564,45.58,53.744,42.891,39.327,58.766,55.078,44.852,62.155,48.969,45.642,43.916,53.599,66.711,59.65,42.795,58.968,42.598,45.826,69.885,46.218,60.351,52.379,38.445,42.955,58.161,50.338,55.561,50.608,55.471,64.048,49.849,51.821,60.363],"mode":"markers","marker":{"color":"rgba(127,59,8,1)","size":[11.3632680941575,10.4747934243848,10.2444544492409,10.0621331758347,10.4487352426414,10.3085308566398,10.6273011669593,10.1649648049351,10.3286455659162,10.0197000039628,12.0876197234178,10.1170350813326,10.6119524291507,10.0167888764059,13.1138253582145,10.0153891435929,10.1759075376721,12.5971462876368,10.0473582411156,10.0447406697722,10.774011498517,10.3174096864837,10.0522801707207,11.2013514005786,10.0922641514349,10.129466685319,10.2241471982117,10.6218850172792,10.4397414747217,10.4735561337454,10.1066197396355,10.0636137884694,11.374528271663,10.8550199771453,10.0709148133866,10.4352615516359,14.9810616276296,10.0312461615974,10.3718119799184,10.0026333377896,10.4155087880931,10.2323681372528,10.393743516177,12.1213049064737,11.3860168237537,10.0402617704816,11.3503429526262,10.1764172511814,10.4555265540494,10.8790571188885,10.4122752332976,10.5171198485426],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Algeria <br>Life Expectancy: 61.37 <br>GDP per capita: 5745.16 <br>Pop.:    20,033,753","Country: Angola <br>Life Expectancy: 39.94 <br>GDP per capita: 2756.95 <br>Pop.:     7,016,384","Country: Benin <br>Life Expectancy: 50.9 <br>GDP per capita: 1277.9 <br>Pop.:     3,641,603","Country: Botswana <br>Life Expectancy: 61.48 <br>GDP per capita: 4551.14 <br>Pop.:       970,347","Country: Burkina Faso <br>Life Expectancy: 48.12 <br>GDP per capita: 807.2 <br>Pop.:     6,634,596","Country: Burundi <br>Life Expectancy: 47.47 <br>GDP per capita: 559.6 <br>Pop.:     4,580,410","Country: Cameroon <br>Life Expectancy: 52.96 <br>GDP per capita: 2367.98 <br>Pop.:     9,250,831","Country: Central African Republic <br>Life Expectancy: 48.3 <br>GDP per capita: 956.75 <br>Pop.:     2,476,971","Country: Chad <br>Life Expectancy: 49.52 <br>GDP per capita: 797.91 <br>Pop.:     4,875,118","Country: Comoros <br>Life Expectancy: 52.93 <br>GDP per capita: 1267.1 <br>Pop.:       348,643","Country: Congo, Dem. Rep. <br>Life Expectancy: 47.78 <br>GDP per capita: 673.75 <br>Pop.:    30,646,495","Country: Congo, Rep. <br>Life Expectancy: 56.7 <br>GDP per capita: 4879.51 <br>Pop.:     1,774,735","Country: Cote d'Ivoire <br>Life Expectancy: 53.98 <br>GDP per capita: 2602.71 <br>Pop.:     9,025,951","Country: Djibouti <br>Life Expectancy: 48.81 <br>GDP per capita: 2879.47 <br>Pop.:       305,991","Country: Egypt <br>Life Expectancy: 56.01 <br>GDP per capita: 3503.73 <br>Pop.:    45,681,811","Country: Equatorial Guinea <br>Life Expectancy: 43.66 <br>GDP per capita: 927.83 <br>Pop.:       285,483","Country: Eritrea <br>Life Expectancy: 43.89 <br>GDP per capita: 524.88 <br>Pop.:     2,637,297","Country: Ethiopia <br>Life Expectancy: 44.92 <br>GDP per capita: 577.86 <br>Pop.:    38,111,756","Country: Gabon <br>Life Expectancy: 56.56 <br>GDP per capita: 15113.36 <br>Pop.:       753,874","Country: Gambia <br>Life Expectancy: 45.58 <br>GDP per capita: 835.81 <br>Pop.:       715,523","Country: Ghana <br>Life Expectancy: 53.74 <br>GDP per capita: 876.03 <br>Pop.:    11,400,338","Country: Guinea <br>Life Expectancy: 42.89 <br>GDP per capita: 857.25 <br>Pop.:     4,710,497","Country: Guinea-Bissau <br>Life Expectancy: 39.33 <br>GDP per capita: 838.12 <br>Pop.:       825,987","Country: Kenya <br>Life Expectancy: 58.77 <br>GDP per capita: 1348.23 <br>Pop.:    17,661,452","Country: Lesotho <br>Life Expectancy: 55.08 <br>GDP per capita: 797.26 <br>Pop.:     1,411,807","Country: Liberia <br>Life Expectancy: 44.85 <br>GDP per capita: 572.2 <br>Pop.:     1,956,875","Country: Libya <br>Life Expectancy: 62.16 <br>GDP per capita: 17364.28 <br>Pop.:     3,344,074","Country: Madagascar <br>Life Expectancy: 48.97 <br>GDP per capita: 1302.88 <br>Pop.:     9,171,477","Country: Malawi <br>Life Expectancy: 45.64 <br>GDP per capita: 632.8 <br>Pop.:     6,502,825","Country: Mali <br>Life Expectancy: 43.92 <br>GDP per capita: 618.01 <br>Pop.:     6,998,256","Country: Mauritania <br>Life Expectancy: 53.6 <br>GDP per capita: 1481.15 <br>Pop.:     1,622,136","Country: Mauritius <br>Life Expectancy: 66.71 <br>GDP per capita: 3688.04 <br>Pop.:       992,040","Country: Morocco <br>Life Expectancy: 59.65 <br>GDP per capita: 2702.62 <br>Pop.:    20,198,730","Country: Mozambique <br>Life Expectancy: 42.8 <br>GDP per capita: 462.21 <br>Pop.:    12,587,223","Country: Namibia <br>Life Expectancy: 58.97 <br>GDP per capita: 4191.1 <br>Pop.:     1,099,010","Country: Niger <br>Life Expectancy: 42.6 <br>GDP per capita: 909.72 <br>Pop.:     6,437,188","Country: Nigeria <br>Life Expectancy: 45.83 <br>GDP per capita: 1576.97 <br>Pop.:    73,039,376","Country: Reunion <br>Life Expectancy: 69.89 <br>GDP per capita: 5267.22 <br>Pop.:       517,810","Country: Rwanda <br>Life Expectancy: 46.22 <br>GDP per capita: 881.57 <br>Pop.:     5,507,565","Country: Sao Tome and Principe <br>Life Expectancy: 60.35 <br>GDP per capita: 1890.22 <br>Pop.:        98,593","Country: Senegal <br>Life Expectancy: 52.38 <br>GDP per capita: 1518.48 <br>Pop.:     6,147,783","Country: Sierra Leone <br>Life Expectancy: 38.44 <br>GDP per capita: 1465.01 <br>Pop.:     3,464,522","Country: Somalia <br>Life Expectancy: 42.95 <br>GDP per capita: 1176.81 <br>Pop.:     5,828,892","Country: South Africa <br>Life Expectancy: 58.16 <br>GDP per capita: 8568.27 <br>Pop.:    31,140,029","Country: Sudan <br>Life Expectancy: 50.34 <br>GDP per capita: 1895.54 <br>Pop.:    20,367,053","Country: Swaziland <br>Life Expectancy: 55.56 <br>GDP per capita: 3895.38 <br>Pop.:       649,901","Country: Tanzania <br>Life Expectancy: 50.61 <br>GDP per capita: 874.24 <br>Pop.:    19,844,382","Country: Togo <br>Life Expectancy: 55.47 <br>GDP per capita: 1344.58 <br>Pop.:     2,644,765","Country: Tunisia <br>Life Expectancy: 64.05 <br>GDP per capita: 3560.23 <br>Pop.:     6,734,098","Country: Uganda <br>Life Expectancy: 49.85 <br>GDP per capita: 682.27 <br>Pop.:    12,939,400","Country: Zambia <br>Life Expectancy: 51.82 <br>GDP per capita: 1408.68 <br>Pop.:     6,100,407","Country: Zimbabwe <br>Life Expectancy: 60.36 <br>GDP per capita: 788.86 <br>Pop.:     7,636,524"],"frame":"1982","type":"scatter","name":"Africa","textfont":{"color":"rgba(127,59,8,1)","size":[11.3632680941575,10.4747934243848,10.2444544492409,10.0621331758347,10.4487352426414,10.3085308566398,10.6273011669593,10.1649648049351,10.3286455659162,10.0197000039628,12.0876197234178,10.1170350813326,10.6119524291507,10.0167888764059,13.1138253582145,10.0153891435929,10.1759075376721,12.5971462876368,10.0473582411156,10.0447406697722,10.774011498517,10.3174096864837,10.0522801707207,11.2013514005786,10.0922641514349,10.129466685319,10.2241471982117,10.6218850172792,10.4397414747217,10.4735561337454,10.1066197396355,10.0636137884694,11.374528271663,10.8550199771453,10.0709148133866,10.4352615516359,14.9810616276296,10.0312461615974,10.3718119799184,10.0026333377896,10.4155087880931,10.2323681372528,10.393743516177,12.1213049064737,11.3860168237537,10.0402617704816,11.3503429526262,10.1764172511814,10.4555265540494,10.8790571188885,10.4122752332976,10.5171198485426]},"error_y":{"color":"rgba(127,59,8,1)","width":[]},"error_x":{"color":"rgba(127,59,8,1)","width":[]},"line":{"color":"rgba(127,59,8,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.95414103732296,3.49920723172401,3.84700696024358,4.35981257488279,3.7072009317089,3.64321332010302,3.72121148153542,3.86432819431492,3.45653188160191,3.85816357173594,3.61260842722936,3.68309161781107,3.30344652534648,3.49439962203649,3.78304924728399,3.98277524416916,3.54037179528928,3.84569333484153,3.62925701912801,3.80851492650228,4.01414190543257,3.95997239000937,4.3981060362026,3.84012009275984,4.04736873145292],"y":[69.942,53.859,63.336,75.76,70.565,66.653,73.45,73.717,63.727,64.342,56.604,58.137,51.461,60.909,71.21,67.405,59.298,70.472,66.874,61.406,73.75,68.832,74.65,70.805,68.557],"mode":"markers","marker":{"color":"rgba(165,0,38,1)","size":[11.9985412814155,10.3810028625428,18.7980133610356,11.716009704168,10.7799340855617,11.8909247065093,10.1613744233819,10.6640481119743,10.4032618767629,10.5668985462969,10.3013276382917,10.4324250928763,10.3507104685643,10.2463549544182,10.1527705849318,14.885611698509,10.1992586683707,10.1348880222281,10.2256736768718,11.2329987533928,10.2197057698258,10.0721071252897,25.8434236421699,10.1975232672345,11.0620684302672],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Argentina <br>Life Expectancy: 69.94 <br>GDP per capita: 8997.9 <br>Pop.:    29,341,374","Country: Bolivia <br>Life Expectancy: 53.86 <br>GDP per capita: 3156.51 <br>Pop.:     5,642,224","Country: Brazil <br>Life Expectancy: 63.34 <br>GDP per capita: 7030.84 <br>Pop.:   128,962,939","Country: Canada <br>Life Expectancy: 75.76 <br>GDP per capita: 22898.79 <br>Pop.:    25,201,900","Country: Chile <br>Life Expectancy: 70.56 <br>GDP per capita: 5095.67 <br>Pop.:    11,487,112","Country: Colombia <br>Life Expectancy: 66.65 <br>GDP per capita: 4397.58 <br>Pop.:    27,764,644","Country: Costa Rica <br>Life Expectancy: 73.45 <br>GDP per capita: 5262.73 <br>Pop.:     2,424,367","Country: Cuba <br>Life Expectancy: 73.72 <br>GDP per capita: 7316.92 <br>Pop.:     9,789,224","Country: Dominican Republic <br>Life Expectancy: 63.73 <br>GDP per capita: 2861.09 <br>Pop.:     5,968,349","Country: Ecuador <br>Life Expectancy: 64.34 <br>GDP per capita: 7213.79 <br>Pop.:     8,365,850","Country: El Salvador <br>Life Expectancy: 56.6 <br>GDP per capita: 4098.34 <br>Pop.:     4,474,873","Country: Guatemala <br>Life Expectancy: 58.14 <br>GDP per capita: 4820.49 <br>Pop.:     6,395,630","Country: Haiti <br>Life Expectancy: 51.46 <br>GDP per capita: 2011.16 <br>Pop.:     5,198,399","Country: Honduras <br>Life Expectancy: 60.91 <br>GDP per capita: 3121.76 <br>Pop.:     3,669,448","Country: Jamaica <br>Life Expectancy: 71.21 <br>GDP per capita: 6068.05 <br>Pop.:     2,298,309","Country: Mexico <br>Life Expectancy: 67.4 <br>GDP per capita: 9611.15 <br>Pop.:    71,640,904","Country: Nicaragua <br>Life Expectancy: 59.3 <br>GDP per capita: 3470.34 <br>Pop.:     2,979,423","Country: Panama <br>Life Expectancy: 70.47 <br>GDP per capita: 7009.6 <br>Pop.:     2,036,305","Country: Paraguay <br>Life Expectancy: 66.87 <br>GDP per capita: 4258.5 <br>Pop.:     3,366,439","Country: Peru <br>Life Expectancy: 61.41 <br>GDP per capita: 6434.5 <br>Pop.:    18,125,129","Country: Puerto Rico <br>Life Expectancy: 73.75 <br>GDP per capita: 10330.99 <br>Pop.:     3,279,001","Country: Trinidad and Tobago <br>Life Expectancy: 68.83 <br>GDP per capita: 9119.53 <br>Pop.:     1,116,479","Country: United States <br>Life Expectancy: 74.65 <br>GDP per capita: 25009.56 <br>Pop.:   232,187,835","Country: Uruguay <br>Life Expectancy: 70.81 <br>GDP per capita: 6920.22 <br>Pop.:     2,953,997","Country: Venezuela <br>Life Expectancy: 68.56 <br>GDP per capita: 11152.41 <br>Pop.:    15,620,766"],"frame":"1982","type":"scatter","name":"Americas","textfont":{"color":"rgba(165,0,38,1)","size":[11.9985412814155,10.3810028625428,18.7980133610356,11.716009704168,10.7799340855617,11.8909247065093,10.1613744233819,10.6640481119743,10.4032618767629,10.5668985462969,10.3013276382917,10.4324250928763,10.3507104685643,10.2463549544182,10.1527705849318,14.885611698509,10.1992586683707,10.1348880222281,10.2256736768718,11.2329987533928,10.2197057698258,10.0721071252897,25.8434236421699,10.1975232672345,11.0620684302672]},"error_y":{"color":"rgba(165,0,38,1)","width":[]},"error_x":{"color":"rgba(165,0,38,1)","width":[]},"line":{"color":"rgba(165,0,38,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2.99034393431589,4.28355330216118,2.83057703533901,2.79551538938004,2.98336526243032,4.16317719869737,2.93233347794306,3.18094921762256,3.88128960390396,4.16190401332754,4.18658991650744,4.28744576953352,3.61924112835474,3.6134745020876,3.74996363967246,4.49629344891365,3.88312288965326,3.69199652186561,3.30116094588944,2.62736585659273,2.85635005828879,4.11243041122876,3.15939567680982,3.41551984170779,4.52754194088831,4.18096156423903,3.21697823350406,3.57540005623291,3.87077569262919,3.37898258381719,2.84956422796571,3.6370924868569,3.29612901240816],"y":[39.854,69.052,50.009,50.957,65.525,75.45,56.596,56.159,59.62,62.038,74.45,77.11,63.739,69.1,67.123,71.309,66.983,68,57.489,58.056,49.594,62.728,56.158,62.082,63.012,71.76,68.757,64.59,72.16,64.597,58.816,64.406,49.113],"mode":"markers","marker":{"color":"rgba(64,0,75,1)","size":[10.8751268373252,10.021701455348,16.3485128125146,10.4922730895463,78.2680972554034,10.3552220610486,58.3190380441428,20.4620260079854,12.9357491492726,10.9632757415285,10.2592529312499,18.0808130778326,10.1560960082843,11.2004003630803,12.6800221004776,10.0981125474532,10.2065926594937,10.9816083646071,10.1157585452101,12.3629487648474,11.0740501103847,10.0847045158473,16.2384672493429,13.6444900174033,10.7640693549666,10.1769021205935,11.0476933217046,10.638198647948,11.2586797007274,13.3285049078297,13.8277771392118,10.0932244030901,10.655065605802],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Afghanistan <br>Life Expectancy: 39.85 <br>GDP per capita: 978.01 <br>Pop.:    12,881,816","Country: Bahrain <br>Life Expectancy: 69.05 <br>GDP per capita: 19211.15 <br>Pop.:       377,967","Country: Bangladesh <br>Life Expectancy: 50.01 <br>GDP per capita: 676.98 <br>Pop.:    93,074,406","Country: Cambodia <br>Life Expectancy: 50.96 <br>GDP per capita: 624.48 <br>Pop.:     7,272,485","Country: China <br>Life Expectancy: 65.53 <br>GDP per capita: 962.42 <br>Pop.: 1,000,281,000","Country: Hong Kong, China <br>Life Expectancy: 75.45 <br>GDP per capita: 14560.53 <br>Pop.:     5,264,500","Country: India <br>Life Expectancy: 56.6 <br>GDP per capita: 855.72 <br>Pop.:   708,000,000","Country: Indonesia <br>Life Expectancy: 56.16 <br>GDP per capita: 1516.87 <br>Pop.:   153,343,000","Country: Iran <br>Life Expectancy: 59.62 <br>GDP per capita: 7608.33 <br>Pop.:    43,072,751","Country: Iraq <br>Life Expectancy: 62.04 <br>GDP per capita: 14517.91 <br>Pop.:    14,173,318","Country: Israel <br>Life Expectancy: 74.45 <br>GDP per capita: 15367.03 <br>Pop.:     3,858,421","Country: Japan <br>Life Expectancy: 77.11 <br>GDP per capita: 19384.11 <br>Pop.:   118,454,974","Country: Jordan <br>Life Expectancy: 63.74 <br>GDP per capita: 4161.42 <br>Pop.:     2,347,031","Country: Korea, Dem. Rep. <br>Life Expectancy: 69.1 <br>GDP per capita: 4106.53 <br>Pop.:    17,647,518","Country: Korea, Rep. <br>Life Expectancy: 67.12 <br>GDP per capita: 5622.94 <br>Pop.:    39,326,000","Country: Kuwait <br>Life Expectancy: 71.31 <br>GDP per capita: 31354.04 <br>Pop.:     1,497,494","Country: Lebanon <br>Life Expectancy: 66.98 <br>GDP per capita: 7640.52 <br>Pop.:     3,086,876","Country: Malaysia <br>Life Expectancy: 68 <br>GDP per capita: 4920.36 <br>Pop.:    14,441,916","Country: Mongolia <br>Life Expectancy: 57.49 <br>GDP per capita: 2000.6 <br>Pop.:     1,756,032","Country: Myanmar <br>Life Expectancy: 58.06 <br>GDP per capita: 424 <br>Pop.:    34,680,442","Country: Nepal <br>Life Expectancy: 49.59 <br>GDP per capita: 718.37 <br>Pop.:    15,796,314","Country: Oman <br>Life Expectancy: 62.73 <br>GDP per capita: 12954.79 <br>Pop.:     1,301,048","Country: Pakistan <br>Life Expectancy: 56.16 <br>GDP per capita: 1443.43 <br>Pop.:    91,462,088","Country: Philippines <br>Life Expectancy: 62.08 <br>GDP per capita: 2603.27 <br>Pop.:    53,456,774","Country: Saudi Arabia <br>Life Expectancy: 63.01 <br>GDP per capita: 33693.18 <br>Pop.:    11,254,672","Country: Singapore <br>Life Expectancy: 71.76 <br>GDP per capita: 15169.16 <br>Pop.:     2,651,869","Country: Sri Lanka <br>Life Expectancy: 68.76 <br>GDP per capita: 1648.08 <br>Pop.:    15,410,151","Country: Syria <br>Life Expectancy: 64.59 <br>GDP per capita: 3761.84 <br>Pop.:     9,410,494","Country: Taiwan <br>Life Expectancy: 72.16 <br>GDP per capita: 7426.35 <br>Pop.:    18,501,390","Country: Thailand <br>Life Expectancy: 64.6 <br>GDP per capita: 2393.22 <br>Pop.:    48,827,160","Country: Vietnam <br>Life Expectancy: 58.82 <br>GDP per capita: 707.24 <br>Pop.:    56,142,181","Country: West Bank and Gaza <br>Life Expectancy: 64.41 <br>GDP per capita: 4336.03 <br>Pop.:     1,425,876","Country: Yemen, Rep. <br>Life Expectancy: 49.11 <br>GDP per capita: 1977.56 <br>Pop.:     9,657,618"],"frame":"1982","type":"scatter","name":"Asia","textfont":{"color":"rgba(64,0,75,1)","size":[10.8751268373252,10.021701455348,16.3485128125146,10.4922730895463,78.2680972554034,10.3552220610486,58.3190380441428,20.4620260079854,12.9357491492726,10.9632757415285,10.2592529312499,18.0808130778326,10.1560960082843,11.2004003630803,12.6800221004776,10.0981125474532,10.2065926594937,10.9816083646071,10.1157585452101,12.3629487648474,11.0740501103847,10.0847045158473,16.2384672493429,13.6444900174033,10.7640693549666,10.1769021205935,11.0476933217046,10.638198647948,11.2586797007274,13.3285049078297,13.8277771392118,10.0932244030901,10.655065605802]},"error_y":{"color":"rgba(64,0,75,1)","width":[]},"error_x":{"color":"rgba(64,0,75,1)","width":[]},"line":{"color":"rgba(64,0,75,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.56001198214669,4.33439510979661,4.32180229370652,3.61559375851768,3.91509322206278,4.12129130087923,4.18687806928202,4.33622031516927,4.26794941909068,4.30736546166243,4.34304471219246,4.18379412322395,4.09850495988616,4.36678905788829,4.10100158542625,4.21846942388565,4.05009300482744,4.33040282371374,4.41993321264512,3.92693538899242,4.0701798820755,3.98251156901606,4.18130303219855,4.05494021661463,4.25204487391065,4.14383169147022,4.31528545095118,4.45328339812114,3.6275047619036,4.2608444243129],"y":[70.42,73.18,73.93,70.69,71.08,70.46,70.96,74.63,74.55,74.89,73.8,75.24,69.39,76.99,73.1,74.98,74.101,76.05,75.97,71.32,72.77,69.66,70.162,70.8,71.063,76.3,76.42,76.21,61.036,74.04],"mode":"markers","marker":{"color":"rgba(39,100,25,1)","size":[10.1856540680842,10.5128942361873,10.6686264559065,10.280702942494,10.6028165584557,10.2971297366601,10.6991629226634,10.3452100264118,10.3253567944323,13.7111589472893,15.342522082419,10.6638608257037,10.7265890995682,10.0118750689095,10.2334245574049,13.8546316288707,10.0342996649418,10.972632069459,10.2767506834601,12.4685320142109,10.6688548987446,11.5218180030573,10.6124215321166,10.3404482183777,10.1229401273526,12.588379460989,10.564128156455,10.4373731633858,13.2262367073605,13.841258679314],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Albania <br>Life Expectancy: 70.42 <br>GDP per capita: 3630.88 <br>Pop.:     2,780,097","Country: Austria <br>Life Expectancy: 73.18 <br>GDP per capita: 21597.08 <br>Pop.:     7,574,613","Country: Belgium <br>Life Expectancy: 73.93 <br>GDP per capita: 20979.85 <br>Pop.:     9,856,303","Country: Bosnia and Herzegovina <br>Life Expectancy: 70.69 <br>GDP per capita: 4126.61 <br>Pop.:     4,172,693","Country: Bulgaria <br>Life Expectancy: 71.08 <br>GDP per capita: 8224.19 <br>Pop.:     8,892,098","Country: Croatia <br>Life Expectancy: 70.46 <br>GDP per capita: 13221.82 <br>Pop.:     4,413,368","Country: Czech Republic <br>Life Expectancy: 70.96 <br>GDP per capita: 15377.23 <br>Pop.:    10,303,704","Country: Denmark <br>Life Expectancy: 74.63 <br>GDP per capita: 21688.04 <br>Pop.:     5,117,810","Country: Finland <br>Life Expectancy: 74.55 <br>GDP per capita: 18533.16 <br>Pop.:     4,826,933","Country: France <br>Life Expectancy: 74.89 <br>GDP per capita: 20293.9 <br>Pop.:    54,433,565","Country: Germany <br>Life Expectancy: 73.8 <br>GDP per capita: 22031.53 <br>Pop.:    78,335,266","Country: Greece <br>Life Expectancy: 75.24 <br>GDP per capita: 15268.42 <br>Pop.:     9,786,480","Country: Hungary <br>Life Expectancy: 69.39 <br>GDP per capita: 12545.99 <br>Pop.:    10,705,535","Country: Iceland <br>Life Expectancy: 76.99 <br>GDP per capita: 23269.61 <br>Pop.:       233,997","Country: Ireland <br>Life Expectancy: 73.1 <br>GDP per capita: 12618.32 <br>Pop.:     3,480,000","Country: Italy <br>Life Expectancy: 74.98 <br>GDP per capita: 16537.48 <br>Pop.:    56,535,636","Country: Montenegro <br>Life Expectancy: 74.1 <br>GDP per capita: 11222.59 <br>Pop.:       562,548","Country: Netherlands <br>Life Expectancy: 76.05 <br>GDP per capita: 21399.46 <br>Pop.:    14,310,401","Country: Norway <br>Life Expectancy: 75.97 <br>GDP per capita: 26298.64 <br>Pop.:     4,114,787","Country: Poland <br>Life Expectancy: 71.32 <br>GDP per capita: 8451.53 <br>Pop.:    36,227,381","Country: Portugal <br>Life Expectancy: 72.77 <br>GDP per capita: 11753.84 <br>Pop.:     9,859,650","Country: Romania <br>Life Expectancy: 69.66 <br>GDP per capita: 9605.31 <br>Pop.:    22,356,726","Country: Serbia <br>Life Expectancy: 70.16 <br>GDP per capita: 15181.09 <br>Pop.:     9,032,824","Country: Slovak Republic <br>Life Expectancy: 70.8 <br>GDP per capita: 11348.55 <br>Pop.:     5,048,043","Country: Slovenia <br>Life Expectancy: 71.06 <br>GDP per capita: 17866.72 <br>Pop.:     1,861,252","Country: Spain <br>Life Expectancy: 76.3 <br>GDP per capita: 13926.17 <br>Pop.:    37,983,310","Country: Sweden <br>Life Expectancy: 76.42 <br>GDP per capita: 20667.38 <br>Pop.:     8,325,260","Country: Switzerland <br>Life Expectancy: 76.21 <br>GDP per capita: 28397.72 <br>Pop.:     6,468,126","Country: Turkey <br>Life Expectancy: 61.04 <br>GDP per capita: 4241.36 <br>Pop.:    47,328,791","Country: United Kingdom <br>Life Expectancy: 74.04 <br>GDP per capita: 18232.42 <br>Pop.:    56,339,704"],"frame":"1982","type":"scatter","name":"Europe","textfont":{"color":"rgba(39,100,25,1)","size":[10.1856540680842,10.5128942361873,10.6686264559065,10.280702942494,10.6028165584557,10.2971297366601,10.6991629226634,10.3452100264118,10.3253567944323,13.7111589472893,15.342522082419,10.6638608257037,10.7265890995682,10.0118750689095,10.2334245574049,13.8546316288707,10.0342996649418,10.972632069459,10.2767506834601,12.4685320142109,10.6688548987446,11.5218180030573,10.6124215321166,10.3404482183777,10.1229401273526,12.588379460989,10.564128156455,10.4373731633858,13.2262367073605,13.841258679314]},"error_y":{"color":"rgba(39,100,25,1)","width":[]},"error_x":{"color":"rgba(39,100,25,1)","width":[]},"line":{"color":"rgba(39,100,25,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[4.28952227118181,4.24631168563251],"y":[74.74,73.84],"mode":"markers","marker":{"color":"rgba(49,54,149,1)","size":[11.0322714849179,10.2150406080597],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Australia <br>Life Expectancy: 74.74 <br>GDP per capita: 19477.01 <br>Pop.:    15,184,200","Country: New Zealand <br>Life Expectancy: 73.84 <br>GDP per capita: 17632.41 <br>Pop.:     3,210,650"],"frame":"1982","type":"scatter","name":"Oceania","textfont":{"color":"rgba(49,54,149,1)","size":[11.0322714849179,10.2150406080597]},"error_y":{"color":"rgba(49,54,149,1)","width":[]},"error_x":{"color":"rgba(49,54,149,1)","width":[]},"line":{"color":"rgba(49,54,149,1)"},"xaxis":"x","yaxis":"y","visible":true}],"traces":[0,1,2,3,4]},{"name":"1987","data":[{"x":[3.75445219758492,3.38564350176307,3.08843946061065,3.79280364302125,2.9600249053708,2.79366386151668,3.41541813933915,2.92679315360252,2.97881306150959,3.11924955698062,2.82786972355356,3.62337283343022,3.33384129986139,3.45940795439924,3.58944252170786,2.9853801296046,2.71694951956546,2.75871612386372,4.07424608914852,2.78650927173848,2.9278865449821,2.9061046169924,2.86712285728205,3.13415697268215,2.88873715307069,2.7042482283709,4.07079822499023,3.06274813043252,2.80312742070559,2.83516501572141,3.15277850725301,3.67975366815973,3.44012901072245,2.59092670732778,3.56746530390834,2.82497147594026,3.14145904337212,3.72455254077511,2.92839135411027,3.18084970494792,3.15888114005758,3.11208453770577,3.0387174850598,3.89353004313794,3.17834925734412,3.60041086772391,2.92003044384127,3.07997721529327,3.58097276778054,2.79079476079839,3.08397360825901,2.84890145668142],"y":[65.799,39.906,52.337,63.622,49.557,48.211,54.985,50.485,51.051,54.926,47.412,57.47,54.655,50.04,59.797,45.664,46.453,46.684,60.19,49.265,55.729,45.552,41.245,59.339,57.18,46.027,66.234,49.35,47.457,46.364,56.145,68.74,62.677,42.861,60.835,44.555,46.886,71.913,44.02,61.728,55.769,40.006,44.501,60.834,51.744,57.678,51.535,56.941,66.894,51.509,50.821,62.351],"mode":"markers","marker":{"color":"rgba(127,59,8,1)","size":[11.5831249079035,10.5333439995099,10.2855553905307,10.0744758461437,10.5137090406695,10.3457705884165,10.7317170850228,10.1897432426644,10.3712243214671,10.0228717897806,12.4176332844954,10.1367847734897,10.7303814417901,10.0171324620788,13.5995991910001,10.0191949999116,10.1949270590845,12.9307515953279,10.0559938172173,10.0538103350435,10.962919665554,10.38155148027,10.0592103770123,11.4427370578,10.1050542885043,10.1507984140896,10.2552549426965,10.7172457397104,10.5299666356137,10.5169481239592,10.1215742480346,10.0670689608016,11.5648631997065,10.875818649876,10.0831439789331,10.4963787131028,15.5620411119983,10.0342646511456,10.4292673671795,10.0034673213688,10.4853701162072,10.2599684958496,10.4683417399749,12.4484654915624,11.683525364642,10.0490969183965,11.5684965124056,10.2111920936072,10.5231569641449,11.0390182953607,10.4922676975582,10.6249523759854],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Algeria <br>Life Expectancy: 65.8 <br>GDP per capita: 5681.36 <br>Pop.:    23,254,956","Country: Angola <br>Life Expectancy: 39.91 <br>GDP per capita: 2430.21 <br>Pop.:     7,874,230","Country: Benin <br>Life Expectancy: 52.34 <br>GDP per capita: 1225.86 <br>Pop.:     4,243,788","Country: Botswana <br>Life Expectancy: 63.62 <br>GDP per capita: 6205.88 <br>Pop.:     1,151,184","Country: Burkina Faso <br>Life Expectancy: 49.56 <br>GDP per capita: 912.06 <br>Pop.:     7,586,551","Country: Burundi <br>Life Expectancy: 48.21 <br>GDP per capita: 621.82 <br>Pop.:     5,126,023","Country: Cameroon <br>Life Expectancy: 54.98 <br>GDP per capita: 2602.66 <br>Pop.:    10,780,667","Country: Central African Republic <br>Life Expectancy: 50.48 <br>GDP per capita: 844.88 <br>Pop.:     2,840,009","Country: Chad <br>Life Expectancy: 51.05 <br>GDP per capita: 952.39 <br>Pop.:     5,498,955","Country: Comoros <br>Life Expectancy: 54.93 <br>GDP per capita: 1315.98 <br>Pop.:       395,114","Country: Congo, Dem. Rep. <br>Life Expectancy: 47.41 <br>GDP per capita: 672.77 <br>Pop.:    35,481,645","Country: Congo, Rep. <br>Life Expectancy: 57.47 <br>GDP per capita: 4201.19 <br>Pop.:     2,064,095","Country: Cote d'Ivoire <br>Life Expectancy: 54.66 <br>GDP per capita: 2156.96 <br>Pop.:    10,761,098","Country: Djibouti <br>Life Expectancy: 50.04 <br>GDP per capita: 2880.1 <br>Pop.:       311,025","Country: Egypt <br>Life Expectancy: 59.8 <br>GDP per capita: 3885.46 <br>Pop.:    52,799,062","Country: Equatorial Guinea <br>Life Expectancy: 45.66 <br>GDP per capita: 966.9 <br>Pop.:       341,244","Country: Eritrea <br>Life Expectancy: 46.45 <br>GDP per capita: 521.13 <br>Pop.:     2,915,959","Country: Ethiopia <br>Life Expectancy: 46.68 <br>GDP per capita: 573.74 <br>Pop.:    42,999,530","Country: Gabon <br>Life Expectancy: 60.19 <br>GDP per capita: 11864.41 <br>Pop.:       880,397","Country: Gambia <br>Life Expectancy: 49.26 <br>GDP per capita: 611.66 <br>Pop.:       848,406","Country: Ghana <br>Life Expectancy: 55.73 <br>GDP per capita: 847.01 <br>Pop.:    14,168,101","Country: Guinea <br>Life Expectancy: 45.55 <br>GDP per capita: 805.57 <br>Pop.:     5,650,262","Country: Guinea-Bissau <br>Life Expectancy: 41.24 <br>GDP per capita: 736.42 <br>Pop.:       927,524","Country: Kenya <br>Life Expectancy: 59.34 <br>GDP per capita: 1361.94 <br>Pop.:    21,198,082","Country: Lesotho <br>Life Expectancy: 57.18 <br>GDP per capita: 773.99 <br>Pop.:     1,599,200","Country: Liberia <br>Life Expectancy: 46.03 <br>GDP per capita: 506.11 <br>Pop.:     2,269,414","Country: Libya <br>Life Expectancy: 66.23 <br>GDP per capita: 11770.59 <br>Pop.:     3,799,845","Country: Madagascar <br>Life Expectancy: 49.35 <br>GDP per capita: 1155.44 <br>Pop.:    10,568,642","Country: Malawi <br>Life Expectancy: 47.46 <br>GDP per capita: 635.52 <br>Pop.:     7,824,747","Country: Mali <br>Life Expectancy: 46.36 <br>GDP per capita: 684.17 <br>Pop.:     7,634,008","Country: Mauritania <br>Life Expectancy: 56.15 <br>GDP per capita: 1421.6 <br>Pop.:     1,841,240","Country: Mauritius <br>Life Expectancy: 68.74 <br>GDP per capita: 4783.59 <br>Pop.:     1,042,663","Country: Morocco <br>Life Expectancy: 62.68 <br>GDP per capita: 2755.05 <br>Pop.:    22,987,397","Country: Mozambique <br>Life Expectancy: 42.86 <br>GDP per capita: 389.88 <br>Pop.:    12,891,952","Country: Namibia <br>Life Expectancy: 60.84 <br>GDP per capita: 3693.73 <br>Pop.:     1,278,184","Country: Niger <br>Life Expectancy: 44.56 <br>GDP per capita: 668.3 <br>Pop.:     7,332,638","Country: Nigeria <br>Life Expectancy: 46.89 <br>GDP per capita: 1385.03 <br>Pop.:    81,551,520","Country: Reunion <br>Life Expectancy: 71.91 <br>GDP per capita: 5303.38 <br>Pop.:       562,035","Country: Rwanda <br>Life Expectancy: 44.02 <br>GDP per capita: 847.99 <br>Pop.:     6,349,365","Country: Sao Tome and Principe <br>Life Expectancy: 61.73 <br>GDP per capita: 1516.53 <br>Pop.:       110,812","Country: Senegal <br>Life Expectancy: 55.77 <br>GDP per capita: 1441.72 <br>Pop.:     7,171,347","Country: Sierra Leone <br>Life Expectancy: 40.01 <br>GDP per capita: 1294.45 <br>Pop.:     3,868,905","Country: Somalia <br>Life Expectancy: 44.5 <br>GDP per capita: 1093.24 <br>Pop.:     6,921,858","Country: South Africa <br>Life Expectancy: 60.83 <br>GDP per capita: 7825.82 <br>Pop.:    35,933,379","Country: Sudan <br>Life Expectancy: 51.74 <br>GDP per capita: 1507.82 <br>Pop.:    24,725,960","Country: Swaziland <br>Life Expectancy: 57.68 <br>GDP per capita: 3984.84 <br>Pop.:       779,348","Country: Tanzania <br>Life Expectancy: 51.53 <br>GDP per capita: 831.82 <br>Pop.:    23,040,630","Country: Togo <br>Life Expectancy: 56.94 <br>GDP per capita: 1202.2 <br>Pop.:     3,154,264","Country: Tunisia <br>Life Expectancy: 66.89 <br>GDP per capita: 3810.42 <br>Pop.:     7,724,976","Country: Uganda <br>Life Expectancy: 51.51 <br>GDP per capita: 617.72 <br>Pop.:    15,283,050","Country: Zambia <br>Life Expectancy: 50.82 <br>GDP per capita: 1213.32 <br>Pop.:     7,272,406","Country: Zimbabwe <br>Life Expectancy: 62.35 <br>GDP per capita: 706.16 <br>Pop.:     9,216,418"],"frame":"1987","type":"scatter","name":"Africa","textfont":{"color":"rgba(127,59,8,1)","size":[11.5831249079035,10.5333439995099,10.2855553905307,10.0744758461437,10.5137090406695,10.3457705884165,10.7317170850228,10.1897432426644,10.3712243214671,10.0228717897806,12.4176332844954,10.1367847734897,10.7303814417901,10.0171324620788,13.5995991910001,10.0191949999116,10.1949270590845,12.9307515953279,10.0559938172173,10.0538103350435,10.962919665554,10.38155148027,10.0592103770123,11.4427370578,10.1050542885043,10.1507984140896,10.2552549426965,10.7172457397104,10.5299666356137,10.5169481239592,10.1215742480346,10.0670689608016,11.5648631997065,10.875818649876,10.0831439789331,10.4963787131028,15.5620411119983,10.0342646511456,10.4292673671795,10.0034673213688,10.4853701162072,10.2599684958496,10.4683417399749,12.4484654915624,11.683525364642,10.0490969183965,11.5684965124056,10.2111920936072,10.5231569641449,11.0390182953607,10.4922676975582,10.6249523759854]},"error_y":{"color":"rgba(127,59,8,1)","width":[]},"error_x":{"color":"rgba(127,59,8,1)","width":[]},"line":{"color":"rgba(127,59,8,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.96093058123607,3.43991528243659,3.89248950957774,4.42531432820077,3.74406315737898,3.6904813000981,3.75050186248866,3.87696362982776,3.46237436190178,3.81169408495358,3.61704671552591,3.62802969396312,3.26079047913757,3.48045203906351,3.80285835283347,3.93892761043006,3.47070213409721,3.84725046841405,3.60193790430491,3.8035215342233,4.08924582220159,3.86856202763531,4.47544382010215,3.87229609708263,3.99491448613596],"y":[70.774,57.251,65.205,76.86,72.492,67.768,74.752,74.174,66.046,67.231,63.154,60.782,53.636,64.492,71.77,69.498,62.008,71.523,67.378,64.134,74.63,69.582,75.02,71.918,70.19],"mode":"markers","marker":{"color":"rgba(165,0,38,1)","size":[12.1541270301665,10.4160948084721,19.7518585836073,11.8080011165586,10.846565544543,12.1093071186449,10.186999608004,10.6948039439185,10.4501481482861,10.6473898718374,10.3263984036803,10.495953360319,10.3887822728358,10.2943201013351,10.1547019404715,15.4645056437792,10.2241662408026,10.1497217227924,10.2611702266687,11.3743367537055,10.2309993913082,10.0772163411655,26.5679770273398,10.2037449389869,11.2183279727732],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Argentina <br>Life Expectancy: 70.77 <br>GDP per capita: 9139.67 <br>Pop.:    31,620,918","Country: Bolivia <br>Life Expectancy: 57.25 <br>GDP per capita: 2753.69 <br>Pop.:     6,156,369","Country: Brazil <br>Life Expectancy: 65.2 <br>GDP per capita: 7807.1 <br>Pop.:   142,938,076","Country: Canada <br>Life Expectancy: 76.86 <br>GDP per capita: 26626.52 <br>Pop.:    26,549,700","Country: Chile <br>Life Expectancy: 72.49 <br>GDP per capita: 5547.06 <br>Pop.:    12,463,354","Country: Colombia <br>Life Expectancy: 67.77 <br>GDP per capita: 4903.22 <br>Pop.:    30,964,245","Country: Costa Rica <br>Life Expectancy: 74.75 <br>GDP per capita: 5629.92 <br>Pop.:     2,799,811","Country: Cuba <br>Life Expectancy: 74.17 <br>GDP per capita: 7532.92 <br>Pop.:    10,239,839","Country: Dominican Republic <br>Life Expectancy: 66.05 <br>GDP per capita: 2899.84 <br>Pop.:     6,655,297","Country: Ecuador <br>Life Expectancy: 67.23 <br>GDP per capita: 6481.78 <br>Pop.:     9,545,158","Country: El Salvador <br>Life Expectancy: 63.15 <br>GDP per capita: 4140.44 <br>Pop.:     4,842,194","Country: Guatemala <br>Life Expectancy: 60.78 <br>GDP per capita: 4246.49 <br>Pop.:     7,326,406","Country: Haiti <br>Life Expectancy: 53.64 <br>GDP per capita: 1823.02 <br>Pop.:     5,756,203","Country: Honduras <br>Life Expectancy: 64.49 <br>GDP per capita: 3023.1 <br>Pop.:     4,372,203","Country: Jamaica <br>Life Expectancy: 71.77 <br>GDP per capita: 6351.24 <br>Pop.:     2,326,606","Country: Mexico <br>Life Expectancy: 69.5 <br>GDP per capita: 8688.16 <br>Pop.:    80,122,492","Country: Nicaragua <br>Life Expectancy: 62.01 <br>GDP per capita: 2955.98 <br>Pop.:     3,344,353","Country: Panama <br>Life Expectancy: 71.52 <br>GDP per capita: 7034.78 <br>Pop.:     2,253,639","Country: Paraguay <br>Life Expectancy: 67.38 <br>GDP per capita: 3998.88 <br>Pop.:     3,886,512","Country: Peru <br>Life Expectancy: 64.13 <br>GDP per capita: 6360.94 <br>Pop.:    20,195,924","Country: Puerto Rico <br>Life Expectancy: 74.63 <br>GDP per capita: 12281.34 <br>Pop.:     3,444,468","Country: Trinidad and Tobago <br>Life Expectancy: 69.58 <br>GDP per capita: 7388.6 <br>Pop.:     1,191,336","Country: United States <br>Life Expectancy: 75.02 <br>GDP per capita: 29884.35 <br>Pop.:   242,803,533","Country: Uruguay <br>Life Expectancy: 71.92 <br>GDP per capita: 7452.4 <br>Pop.:     3,045,153","Country: Venezuela <br>Life Expectancy: 70.19 <br>GDP per capita: 9883.58 <br>Pop.:    17,910,182"],"frame":"1987","type":"scatter","name":"Americas","textfont":{"color":"rgba(165,0,38,1)","size":[12.1541270301665,10.4160948084721,19.7518585836073,11.8080011165586,10.846565544543,12.1093071186449,10.186999608004,10.6948039439185,10.4501481482861,10.6473898718374,10.3263984036803,10.495953360319,10.3887822728358,10.2943201013351,10.1547019404715,15.4645056437792,10.2241662408026,10.1497217227924,10.2611702266687,11.3743367537055,10.2309993913082,10.0772163411655,26.5679770273398,10.2037449389869,11.2183279727732]},"error_y":{"color":"rgba(165,0,38,1)","width":[]},"error_x":{"color":"rgba(165,0,38,1)","width":[]},"line":{"color":"rgba(165,0,38,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2.93064137492864,4.26773533640728,2.87620594555335,2.83498979258954,3.13953403709412,4.30186461701644,2.98967788500985,3.24263010699728,3.82235649685219,4.06608625841883,4.23356666405139,4.3497813255084,3.64823115884918,3.61347101441374,3.9311062654171,4.4489910677682,3.73054741295915,3.72014297801091,3.36884604933009,2.5854607295085,2.8896559703455,4.25804368772363,3.23164454298501,3.34037172540222,4.32630024240411,4.27557693735977,3.27341031841906,3.49370535205919,4.04354152996951,3.47460284330426,2.91423705405801,3.70818264288109,3.29484998566756],"y":[40.822,70.75,52.819,53.914,67.274,76.2,58.553,60.137,63.04,65.044,75.6,78.67,65.869,70.647,69.81,74.174,67.926,69.5,60.222,58.339,52.537,67.734,58.245,64.151,66.295,73.56,69.011,66.974,73.4,66.084,62.82,67.046,52.922],"mode":"markers","marker":{"color":"rgba(64,0,75,1)","size":[10.942433932893,10.026932707613,17.0781262713901,10.5673040374536,83.9845601975033,10.3770637080876,63.7792791713486,21.5495012814826,13.537532220589,11.1250265802832,10.2827815880381,18.3290049938721,10.188380434732,11.2973221001967,12.8367310208284,10.1250037572336,10.2067617222096,11.1105976200925,10.1334429694138,12.5914691384309,11.2188056073658,10.1046913189754,17.1752257393552,14.0922989983904,10.9937457298497,10.1866406654029,11.1217582847035,10.763262263075,11.3444334019073,13.607194386408,14.2840014438243,10.1113342483307,10.7616578394728],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Afghanistan <br>Life Expectancy: 40.82 <br>GDP per capita: 852.4 <br>Pop.:    13,867,957","Country: Bahrain <br>Life Expectancy: 70.75 <br>GDP per capita: 18524.02 <br>Pop.:       454,612","Country: Bangladesh <br>Life Expectancy: 52.82 <br>GDP per capita: 751.98 <br>Pop.:   103,764,241","Country: Cambodia <br>Life Expectancy: 53.91 <br>GDP per capita: 683.9 <br>Pop.:     8,371,791","Country: China <br>Life Expectancy: 67.27 <br>GDP per capita: 1378.9 <br>Pop.: 1,084,035,000","Country: Hong Kong, China <br>Life Expectancy: 76.2 <br>GDP per capita: 20038.47 <br>Pop.:     5,584,510","Country: India <br>Life Expectancy: 58.55 <br>GDP per capita: 976.51 <br>Pop.:   788,000,000","Country: Indonesia <br>Life Expectancy: 60.14 <br>GDP per capita: 1748.36 <br>Pop.:   169,276,000","Country: Iran <br>Life Expectancy: 63.04 <br>GDP per capita: 6642.88 <br>Pop.:    51,889,696","Country: Iraq <br>Life Expectancy: 65.04 <br>GDP per capita: 11643.57 <br>Pop.:    16,543,189","Country: Israel <br>Life Expectancy: 75.6 <br>GDP per capita: 17122.48 <br>Pop.:     4,203,148","Country: Japan <br>Life Expectancy: 78.67 <br>GDP per capita: 22375.94 <br>Pop.:   122,091,325","Country: Jordan <br>Life Expectancy: 65.87 <br>GDP per capita: 4448.68 <br>Pop.:     2,820,042","Country: Korea, Dem. Rep. <br>Life Expectancy: 70.65 <br>GDP per capita: 4106.49 <br>Pop.:    19,067,554","Country: Korea, Rep. <br>Life Expectancy: 69.81 <br>GDP per capita: 8533.09 <br>Pop.:    41,622,000","Country: Kuwait <br>Life Expectancy: 74.17 <br>GDP per capita: 28118.43 <br>Pop.:     1,891,487","Country: Lebanon <br>Life Expectancy: 67.93 <br>GDP per capita: 5377.09 <br>Pop.:     3,089,353","Country: Malaysia <br>Life Expectancy: 69.5 <br>GDP per capita: 5249.8 <br>Pop.:    16,331,785","Country: Mongolia <br>Life Expectancy: 60.22 <br>GDP per capita: 2338.01 <br>Pop.:     2,015,133","Country: Myanmar <br>Life Expectancy: 58.34 <br>GDP per capita: 385 <br>Pop.:    38,028,578","Country: Nepal <br>Life Expectancy: 52.54 <br>GDP per capita: 775.63 <br>Pop.:    17,917,180","Country: Oman <br>Life Expectancy: 67.73 <br>GDP per capita: 18115.22 <br>Pop.:     1,593,882","Country: Pakistan <br>Life Expectancy: 58.24 <br>GDP per capita: 1704.69 <br>Pop.:   105,186,881","Country: Philippines <br>Life Expectancy: 64.15 <br>GDP per capita: 2189.63 <br>Pop.:    60,017,788","Country: Saudi Arabia <br>Life Expectancy: 66.3 <br>GDP per capita: 21198.26 <br>Pop.:    14,619,745","Country: Singapore <br>Life Expectancy: 73.56 <br>GDP per capita: 18861.53 <br>Pop.:     2,794,552","Country: Sri Lanka <br>Life Expectancy: 69.01 <br>GDP per capita: 1876.77 <br>Pop.:    16,495,304","Country: Syria <br>Life Expectancy: 66.97 <br>GDP per capita: 3116.77 <br>Pop.:    11,242,847","Country: Taiwan <br>Life Expectancy: 73.4 <br>GDP per capita: 11054.56 <br>Pop.:    19,757,799","Country: Thailand <br>Life Expectancy: 66.08 <br>GDP per capita: 2982.65 <br>Pop.:    52,910,342","Country: Vietnam <br>Life Expectancy: 62.82 <br>GDP per capita: 820.8 <br>Pop.:    62,826,491","Country: West Bank and Gaza <br>Life Expectancy: 67.05 <br>GDP per capita: 5107.2 <br>Pop.:     1,691,210","Country: Yemen, Rep. <br>Life Expectancy: 52.92 <br>GDP per capita: 1971.74 <br>Pop.:    11,219,340"],"frame":"1987","type":"scatter","name":"Asia","textfont":{"color":"rgba(64,0,75,1)","size":[10.942433932893,10.026932707613,17.0781262713901,10.5673040374536,83.9845601975033,10.3770637080876,63.7792791713486,21.5495012814826,13.537532220589,11.1250265802832,10.2827815880381,18.3290049938721,10.188380434732,11.2973221001967,12.8367310208284,10.1250037572336,10.2067617222096,11.1105976200925,10.1334429694138,12.5914691384309,11.2188056073658,10.1046913189754,17.1752257393552,14.0922989983904,10.9937457298497,10.1866406654029,11.1217582847035,10.763262263075,11.3444334019073,13.607194386408,14.2840014438243,10.1113342483307,10.7616578394728]},"error_y":{"color":"rgba(64,0,75,1)","width":[]},"error_x":{"color":"rgba(64,0,75,1)","width":[]},"line":{"color":"rgba(64,0,75,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.57274765208091,4.37452520554653,4.35267565600983,3.63489169330918,3.91591956003557,4.14058923594614,4.21246576751212,4.39995351440246,4.32512577745481,4.343732315784,4.39162635003408,4.20737927277307,4.11349145034739,4.43012677868692,4.14216620766251,4.28346484592075,4.06939093934078,4.37385545037759,4.49887511143166,3.95819829002402,4.11525456918159,3.9866048478327,4.20060096717612,4.08052791469559,4.27134280866535,4.19769351034863,4.37267140473045,4.48118031842363,3.70663617901385,4.33575443700302],"y":[72,74.94,75.35,71.14,71.34,71.52,71.58,74.8,74.83,76.34,74.847,76.67,69.58,77.23,74.36,76.42,74.865,76.83,75.89,70.98,74.06,69.53,71.218,71.08,72.25,76.9,77.19,77.41,63.108,75.007],"mode":"markers","marker":{"color":"rgba(39,100,25,1)","size":[10.2058039959159,10.5131870416177,10.6695749680433,10.2920523266889,10.608267244161,10.3019717419857,10.6997016437036,10.3458389096836,10.3325094372969,13.7928260675036,15.3004121568219,10.6766930748827,10.7202555611257,10.0126039428469,10.2375129129489,13.8678772865561,10.0347723170644,10.9968534943403,10.2816212185456,12.5718212797708,10.6726524281956,11.5443172678871,10.6259328305328,10.3507731930842,10.1287155608989,12.6496291698094,10.5706902059886,10.4497826533956,13.6052140934572,13.8850713811066],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Albania <br>Life Expectancy: 72 <br>GDP per capita: 3738.93 <br>Pop.:     3,075,321","Country: Austria <br>Life Expectancy: 74.94 <br>GDP per capita: 23687.83 <br>Pop.:     7,578,903","Country: Belgium <br>Life Expectancy: 75.35 <br>GDP per capita: 22525.56 <br>Pop.:     9,870,200","Country: Bosnia and Herzegovina <br>Life Expectancy: 71.14 <br>GDP per capita: 4314.11 <br>Pop.:     4,338,977","Country: Bulgaria <br>Life Expectancy: 71.34 <br>GDP per capita: 8239.85 <br>Pop.:     8,971,958","Country: Croatia <br>Life Expectancy: 71.52 <br>GDP per capita: 13822.58 <br>Pop.:     4,484,310","Country: Czech Republic <br>Life Expectancy: 71.58 <br>GDP per capita: 16310.44 <br>Pop.:    10,311,597","Country: Denmark <br>Life Expectancy: 74.8 <br>GDP per capita: 25116.18 <br>Pop.:     5,127,024","Country: Finland <br>Life Expectancy: 74.83 <br>GDP per capita: 21141.01 <br>Pop.:     4,931,729","Country: France <br>Life Expectancy: 76.34 <br>GDP per capita: 22066.44 <br>Pop.:    55,630,100","Country: Germany <br>Life Expectancy: 74.85 <br>GDP per capita: 24639.19 <br>Pop.:    77,718,298","Country: Greece <br>Life Expectancy: 76.67 <br>GDP per capita: 16120.53 <br>Pop.:     9,974,490","Country: Hungary <br>Life Expectancy: 69.58 <br>GDP per capita: 12986.48 <br>Pop.:    10,612,740","Country: Iceland <br>Life Expectancy: 77.23 <br>GDP per capita: 26923.21 <br>Pop.:       244,676","Country: Ireland <br>Life Expectancy: 74.36 <br>GDP per capita: 13872.87 <br>Pop.:     3,539,900","Country: Italy <br>Life Expectancy: 76.42 <br>GDP per capita: 19207.23 <br>Pop.:    56,729,703","Country: Montenegro <br>Life Expectancy: 74.86 <br>GDP per capita: 11732.51 <br>Pop.:       569,473","Country: Netherlands <br>Life Expectancy: 76.83 <br>GDP per capita: 23651.32 <br>Pop.:    14,665,278","Country: Norway <br>Life Expectancy: 75.89 <br>GDP per capita: 31540.97 <br>Pop.:     4,186,147","Country: Poland <br>Life Expectancy: 70.98 <br>GDP per capita: 9082.35 <br>Pop.:    37,740,710","Country: Portugal <br>Life Expectancy: 74.06 <br>GDP per capita: 13039.31 <br>Pop.:     9,915,289","Country: Romania <br>Life Expectancy: 69.53 <br>GDP per capita: 9696.27 <br>Pop.:    22,686,371","Country: Serbia <br>Life Expectancy: 71.22 <br>GDP per capita: 15870.88 <br>Pop.:     9,230,783","Country: Slovak Republic <br>Life Expectancy: 71.08 <br>GDP per capita: 12037.27 <br>Pop.:     5,199,318","Country: Slovenia <br>Life Expectancy: 72.25 <br>GDP per capita: 18678.53 <br>Pop.:     1,945,870","Country: Spain <br>Life Expectancy: 76.9 <br>GDP per capita: 15764.98 <br>Pop.:    38,880,702","Country: Sweden <br>Life Expectancy: 77.19 <br>GDP per capita: 23586.93 <br>Pop.:     8,421,403","Country: Switzerland <br>Life Expectancy: 77.41 <br>GDP per capita: 30281.7 <br>Pop.:     6,649,942","Country: Turkey <br>Life Expectancy: 63.11 <br>GDP per capita: 5089.04 <br>Pop.:    52,881,328","Country: United Kingdom <br>Life Expectancy: 75.01 <br>GDP per capita: 21664.79 <br>Pop.:    56,981,620"],"frame":"1987","type":"scatter","name":"Europe","textfont":{"color":"rgba(39,100,25,1)","size":[10.2058039959159,10.5131870416177,10.6695749680433,10.2920523266889,10.608267244161,10.3019717419857,10.6997016437036,10.3458389096836,10.3325094372969,13.7928260675036,15.3004121568219,10.6766930748827,10.7202555611257,10.0126039428469,10.2375129129489,13.8678772865561,10.0347723170644,10.9968534943403,10.2816212185456,12.5718212797708,10.6726524281956,11.5443172678871,10.6259328305328,10.3507731930842,10.1287155608989,12.6496291698094,10.5706902059886,10.4497826533956,13.6052140934572,13.8850713811066]},"error_y":{"color":"rgba(39,100,25,1)","width":[]},"error_x":{"color":"rgba(39,100,25,1)","width":[]},"line":{"color":"rgba(39,100,25,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[4.34022371952203,4.27891794551479],"y":[76.32,74.32],"mode":"markers","marker":{"color":"rgba(49,54,149,1)","size":[11.1055103134343,10.2223106461086],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Australia <br>Life Expectancy: 76.32 <br>GDP per capita: 21888.89 <br>Pop.:    16,257,249","Country: New Zealand <br>Life Expectancy: 74.32 <br>GDP per capita: 19007.19 <br>Pop.:     3,317,166"],"frame":"1987","type":"scatter","name":"Oceania","textfont":{"color":"rgba(49,54,149,1)","size":[11.1055103134343,10.2223106461086]},"error_y":{"color":"rgba(49,54,149,1)","width":[]},"error_x":{"color":"rgba(49,54,149,1)","width":[]},"line":{"color":"rgba(49,54,149,1)"},"xaxis":"x","yaxis":"y","visible":true}],"traces":[0,1,2,3,4]},{"name":"1992","data":[{"x":[3.70098190930978,3.41959985855871,3.07598748511783,3.90059168250955,2.96930069398315,2.80051079288172,3.25361983641433,2.87384674161361,3.0245120611648,3.09583419189709,2.66059911189776,3.60381960628358,3.21697665293553,3.37605771815862,3.57918376418673,3.05386754026351,2.76556314189948,2.6246465700016,4.13104599073842,2.82322924186296,2.96616997457778,2.90001104610526,2.87247087397084,3.12772718265169,2.99011066701996,2.80388226962819,3.98408327350739,3.01731561829776,2.75066265731529,2.86865288619247,3.13397610708267,3.78234746668706,3.46953444021768,2.61373278431849,3.5803019261087,2.76431269690493,3.20947432219226,3.78541923515268,2.86750790712676,3.15496469789093,3.13605414921486,3.02885429685477,2.96706113282447,3.85884201450444,3.17382617503834,3.55059794550389,2.91681305580586,3.01464606448196,3.6367606403025,2.80900103244787,3.08310276771926,2.84099685568797],"y":[67.744,40.647,53.919,62.745,50.26,44.736,54.314,49.396,51.724,57.939,45.548,56.433,52.044,51.604,63.674,47.545,49.991,48.091,61.366,52.644,57.501,48.576,43.266,59.285,59.685,40.802,68.755,52.214,49.42,48.388,58.333,69.745,65.393,44.284,61.999,47.391,47.472,73.615,23.599,62.742,58.196,38.333,39.658,61.888,53.556,58.474,50.44,58.061,70.001,48.825,46.1,60.377],"mode":"markers","marker":{"color":"rgba(127,59,8,1)","size":[11.7908472912864,10.5921615804261,10.3359181293265,10.087541520631,10.6018750081264,10.392401934932,10.8468260662978,10.2187586227493,10.4347311574634,10.0269202173114,12.840153431714,10.1603305617845,10.8676722431262,10.0221238732522,14.0502831254467,10.0223751808501,10.24628615538,13.55110521973,10.0631837262276,10.0658896169712,11.106977002454,10.4730318140911,10.0676337544932,11.7036312692797,10.1189775621136,10.1264703097474,10.2937944166206,10.8293003303518,10.6794067464699,10.5703361093515,10.1405639428799,10.070723158923,11.7567116383375,10.8941636267501,10.10198652028,10.5687391935809,16.3682951296124,10.0383704794612,10.4934823964499,10.0044978736285,10.5629446491906,10.2867222440596,10.4122337354651,12.7235783756963,11.9225220298642,10.0615869469629,11.8118077919135,10.2516858560837,10.5776297629432,11.2416710496161,10.5679437047016,10.7265075372164],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Algeria <br>Life Expectancy: 67.74 <br>GDP per capita: 5023.22 <br>Pop.:    26,298,373","Country: Angola <br>Life Expectancy: 40.65 <br>GDP per capita: 2627.85 <br>Pop.:     8,735,988","Country: Benin <br>Life Expectancy: 53.92 <br>GDP per capita: 1191.21 <br>Pop.:     4,981,671","Country: Botswana <br>Life Expectancy: 62.74 <br>GDP per capita: 7954.11 <br>Pop.:     1,342,614","Country: Burkina Faso <br>Life Expectancy: 50.26 <br>GDP per capita: 931.75 <br>Pop.:     8,878,303","Country: Burundi <br>Life Expectancy: 44.74 <br>GDP per capita: 631.7 <br>Pop.:     5,809,236","Country: Cameroon <br>Life Expectancy: 54.31 <br>GDP per capita: 1793.16 <br>Pop.:    12,467,171","Country: Central African Republic <br>Life Expectancy: 49.4 <br>GDP per capita: 747.91 <br>Pop.:     3,265,124","Country: Chad <br>Life Expectancy: 51.72 <br>GDP per capita: 1058.06 <br>Pop.:     6,429,417","Country: Comoros <br>Life Expectancy: 57.94 <br>GDP per capita: 1246.91 <br>Pop.:       454,429","Country: Congo, Dem. Rep. <br>Life Expectancy: 45.55 <br>GDP per capita: 457.72 <br>Pop.:    41,672,143","Country: Congo, Rep. <br>Life Expectancy: 56.43 <br>GDP per capita: 4016.24 <br>Pop.:     2,409,073","Country: Cote d'Ivoire <br>Life Expectancy: 52.04 <br>GDP per capita: 1648.07 <br>Pop.:    12,772,596","Country: Djibouti <br>Life Expectancy: 51.6 <br>GDP per capita: 2377.16 <br>Pop.:       384,156","Country: Egypt <br>Life Expectancy: 63.67 <br>GDP per capita: 3794.76 <br>Pop.:    59,402,198","Country: Equatorial Guinea <br>Life Expectancy: 47.55 <br>GDP per capita: 1132.06 <br>Pop.:       387,838","Country: Eritrea <br>Life Expectancy: 49.99 <br>GDP per capita: 582.86 <br>Pop.:     3,668,440","Country: Ethiopia <br>Life Expectancy: 48.09 <br>GDP per capita: 421.35 <br>Pop.:    52,088,559","Country: Gabon <br>Life Expectancy: 61.37 <br>GDP per capita: 13522.16 <br>Pop.:       985,739","Country: Gambia <br>Life Expectancy: 52.64 <br>GDP per capita: 665.62 <br>Pop.:     1,025,384","Country: Ghana <br>Life Expectancy: 57.5 <br>GDP per capita: 925.06 <br>Pop.:    16,278,738","Country: Guinea <br>Life Expectancy: 48.58 <br>GDP per capita: 794.35 <br>Pop.:     6,990,574","Country: Guinea-Bissau <br>Life Expectancy: 43.27 <br>GDP per capita: 745.54 <br>Pop.:     1,050,938","Country: Kenya <br>Life Expectancy: 59.28 <br>GDP per capita: 1341.92 <br>Pop.:    25,020,539","Country: Lesotho <br>Life Expectancy: 59.69 <br>GDP per capita: 977.49 <br>Pop.:     1,803,195","Country: Liberia <br>Life Expectancy: 40.8 <br>GDP per capita: 636.62 <br>Pop.:     1,912,974","Country: Libya <br>Life Expectancy: 68.75 <br>GDP per capita: 9640.14 <br>Pop.:     4,364,501","Country: Madagascar <br>Life Expectancy: 52.21 <br>GDP per capita: 1040.68 <br>Pop.:    12,210,395","Country: Malawi <br>Life Expectancy: 49.42 <br>GDP per capita: 563.2 <br>Pop.:    10,014,249","Country: Mali <br>Life Expectancy: 48.39 <br>GDP per capita: 739.01 <br>Pop.:     8,416,215","Country: Mauritania <br>Life Expectancy: 58.33 <br>GDP per capita: 1361.37 <br>Pop.:     2,119,465","Country: Mauritius <br>Life Expectancy: 69.75 <br>GDP per capita: 6058.25 <br>Pop.:     1,096,202","Country: Morocco <br>Life Expectancy: 65.39 <br>GDP per capita: 2948.05 <br>Pop.:    25,798,239","Country: Mozambique <br>Life Expectancy: 44.28 <br>GDP per capita: 410.9 <br>Pop.:    13,160,731","Country: Namibia <br>Life Expectancy: 62 <br>GDP per capita: 3804.54 <br>Pop.:     1,554,253","Country: Niger <br>Life Expectancy: 47.39 <br>GDP per capita: 581.18 <br>Pop.:     8,392,818","Country: Nigeria <br>Life Expectancy: 47.47 <br>GDP per capita: 1619.85 <br>Pop.:    93,364,244","Country: Reunion <br>Life Expectancy: 73.61 <br>GDP per capita: 6101.26 <br>Pop.:       622,191","Country: Rwanda <br>Life Expectancy: 23.6 <br>GDP per capita: 737.07 <br>Pop.:     7,290,203","Country: Sao Tome and Principe <br>Life Expectancy: 62.74 <br>GDP per capita: 1428.78 <br>Pop.:       125,911","Country: Senegal <br>Life Expectancy: 58.2 <br>GDP per capita: 1367.9 <br>Pop.:     8,307,920","Country: Sierra Leone <br>Life Expectancy: 38.33 <br>GDP per capita: 1068.7 <br>Pop.:     4,260,884","Country: Somalia <br>Life Expectancy: 39.66 <br>GDP per capita: 926.96 <br>Pop.:     6,099,799","Country: South Africa <br>Life Expectancy: 61.89 <br>GDP per capita: 7225.07 <br>Pop.:    39,964,159","Country: Sudan <br>Life Expectancy: 53.56 <br>GDP per capita: 1492.2 <br>Pop.:    28,227,588","Country: Swaziland <br>Life Expectancy: 58.47 <br>GDP per capita: 3553.02 <br>Pop.:       962,344","Country: Tanzania <br>Life Expectancy: 50.44 <br>GDP per capita: 825.68 <br>Pop.:    26,605,473","Country: Togo <br>Life Expectancy: 58.06 <br>GDP per capita: 1034.3 <br>Pop.:     3,747,553","Country: Tunisia <br>Life Expectancy: 70 <br>GDP per capita: 4332.72 <br>Pop.:     8,523,077","Country: Uganda <br>Life Expectancy: 48.83 <br>GDP per capita: 644.17 <br>Pop.:    18,252,190","Country: Zambia <br>Life Expectancy: 46.1 <br>GDP per capita: 1210.88 <br>Pop.:     8,381,163","Country: Zimbabwe <br>Life Expectancy: 60.38 <br>GDP per capita: 693.42 <br>Pop.:    10,704,340"],"frame":"1992","type":"scatter","name":"Africa","textfont":{"color":"rgba(127,59,8,1)","size":[11.7908472912864,10.5921615804261,10.3359181293265,10.087541520631,10.6018750081264,10.392401934932,10.8468260662978,10.2187586227493,10.4347311574634,10.0269202173114,12.840153431714,10.1603305617845,10.8676722431262,10.0221238732522,14.0502831254467,10.0223751808501,10.24628615538,13.55110521973,10.0631837262276,10.0658896169712,11.106977002454,10.4730318140911,10.0676337544932,11.7036312692797,10.1189775621136,10.1264703097474,10.2937944166206,10.8293003303518,10.6794067464699,10.5703361093515,10.1405639428799,10.070723158923,11.7567116383375,10.8941636267501,10.10198652028,10.5687391935809,16.3682951296124,10.0383704794612,10.4934823964499,10.0044978736285,10.5629446491906,10.2867222440596,10.4122337354651,12.7235783756963,11.9225220298642,10.0615869469629,11.8118077919135,10.2516858560837,10.5776297629432,11.2416710496161,10.5679437047016,10.7265075372164]},"error_y":{"color":"rgba(127,59,8,1)","width":[]},"error_x":{"color":"rgba(127,59,8,1)","width":[]},"line":{"color":"rgba(127,59,8,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.96887591042825,3.47154102047466,3.84200248976363,4.42066332376266,3.8805921578839,3.73596985679663,3.78961006249988,3.74763270294109,3.48347520942733,3.85148477089356,3.64779669279996,3.64732925121639,3.1632536876415,3.48878959778161,3.86952058704978,3.97645930908032,3.33649009817687,3.82077552142161,3.62287802484146,3.64800666621377,4.16558815566746,3.86752587691881,4.5052033422329,3.91046457085066,4.03075860946506],"y":[71.868,59.957,67.057,77.95,74.126,68.421,75.713,74.414,68.457,69.613,66.798,63.373,55.089,66.399,71.766,71.455,65.843,72.462,68.225,66.458,73.911,69.862,76.09,72.752,71.15],"mode":"markers","marker":{"color":"rgba(165,0,38,1)","size":[12.3137045564465,10.4664028766037,20.6417344195062,11.9427190522757,10.9223018190979,12.3303428667033,10.2124856247303,10.727798884243,10.4976443287431,10.7295143554991,10.3559147608886,10.5751639180502,10.4277191840608,10.3424483047026,10.1582519162403,16.0097474404523,10.2701405155515,10.1655126036262,10.3019468296356,11.5268498200151,10.2406031364148,10.0766930453064,27.5297067698462,10.2108506920308,11.3790898253537],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Argentina <br>Life Expectancy: 71.87 <br>GDP per capita: 9308.42 <br>Pop.:    33,958,947","Country: Bolivia <br>Life Expectancy: 59.96 <br>GDP per capita: 2961.7 <br>Pop.:     6,893,451","Country: Brazil <br>Life Expectancy: 67.06 <br>GDP per capita: 6950.28 <br>Pop.:   155,975,974","Country: Canada <br>Life Expectancy: 77.95 <br>GDP per capita: 26342.88 <br>Pop.:    28,523,502","Country: Chile <br>Life Expectancy: 74.13 <br>GDP per capita: 7596.13 <br>Pop.:    13,572,994","Country: Colombia <br>Life Expectancy: 68.42 <br>GDP per capita: 5444.65 <br>Pop.:    34,202,721","Country: Costa Rica <br>Life Expectancy: 75.71 <br>GDP per capita: 6160.42 <br>Pop.:     3,173,216","Country: Cuba <br>Life Expectancy: 74.41 <br>GDP per capita: 5592.84 <br>Pop.:    10,723,260","Country: Dominican Republic <br>Life Expectancy: 68.46 <br>GDP per capita: 3044.21 <br>Pop.:     7,351,181","Country: Ecuador <br>Life Expectancy: 69.61 <br>GDP per capita: 7103.7 <br>Pop.:    10,748,394","Country: El Salvador <br>Life Expectancy: 66.8 <br>GDP per capita: 4444.23 <br>Pop.:     5,274,649","Country: Guatemala <br>Life Expectancy: 63.37 <br>GDP per capita: 4439.45 <br>Pop.:     8,486,949","Country: Haiti <br>Life Expectancy: 55.09 <br>GDP per capita: 1456.31 <br>Pop.:     6,326,682","Country: Honduras <br>Life Expectancy: 66.4 <br>GDP per capita: 3081.69 <br>Pop.:     5,077,347","Country: Jamaica <br>Life Expectancy: 71.77 <br>GDP per capita: 7404.92 <br>Pop.:     2,378,618","Country: Mexico <br>Life Expectancy: 71.46 <br>GDP per capita: 9472.38 <br>Pop.:    88,111,030","Country: Nicaragua <br>Life Expectancy: 65.84 <br>GDP per capita: 2170.15 <br>Pop.:     4,017,939","Country: Panama <br>Life Expectancy: 72.46 <br>GDP per capita: 6618.74 <br>Pop.:     2,484,997","Country: Paraguay <br>Life Expectancy: 68.22 <br>GDP per capita: 4196.41 <br>Pop.:     4,483,945","Country: Peru <br>Life Expectancy: 66.46 <br>GDP per capita: 4446.38 <br>Pop.:    22,430,449","Country: Puerto Rico <br>Life Expectancy: 73.91 <br>GDP per capita: 14641.59 <br>Pop.:     3,585,176","Country: Trinidad and Tobago <br>Life Expectancy: 69.86 <br>GDP per capita: 7370.99 <br>Pop.:     1,183,669","Country: United States <br>Life Expectancy: 76.09 <br>GDP per capita: 32003.93 <br>Pop.:   256,894,189","Country: Uruguay <br>Life Expectancy: 72.75 <br>GDP per capita: 8137 <br>Pop.:     3,149,262","Country: Venezuela <br>Life Expectancy: 71.15 <br>GDP per capita: 10733.93 <br>Pop.:    20,265,563"],"frame":"1992","type":"scatter","name":"Americas","textfont":{"color":"rgba(165,0,38,1)","size":[12.3137045564465,10.4664028766037,20.6417344195062,11.9427190522757,10.9223018190979,12.3303428667033,10.2124856247303,10.727798884243,10.4976443287431,10.7295143554991,10.3559147608886,10.5751639180502,10.4277191840608,10.3424483047026,10.1582519162403,16.0097474404523,10.2701405155515,10.1655126036262,10.3019468296356,11.5268498200151,10.2406031364148,10.0766930453064,27.5297067698462,10.2108506920308,11.3790898253537]},"error_y":{"color":"rgba(165,0,38,1)","width":[]},"error_x":{"color":"rgba(165,0,38,1)","width":[]},"line":{"color":"rgba(165,0,38,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2.81247308981853,4.27956609504629,2.92314562491112,2.83397739252997,3.21900372308954,4.39370859471309,3.06610473636011,3.37714971981812,3.8594777425234,3.57352611389943,4.25651383797765,4.42853803247444,3.53549585513414,3.57125025273538,4.08293891544179,4.54323488420159,3.83827007701996,3.86200684792003,3.25173602082497,2.54032947479087,2.95315075053154,4.26990286153798,3.29486935175814,3.35780606664274,4.3951798751481,4.39392409898215,3.33319311711301,3.52381703627158,4.18229073527864,3.66435014302872,2.99520645664776,3.7794272678399,3.27404156128206],"y":[41.674,72.601,56.018,55.803,68.69,77.601,60.223,62.681,65.742,59.461,76.93,79.36,68.015,69.978,72.244,75.19,69.292,70.693,61.271,59.32,55.727,71.197,60.838,66.458,68.768,75.788,70.379,69.249,74.26,67.298,67.662,69.718,55.599],"mode":"markers","marker":{"color":"rgba(64,0,75,1)","size":[11.1096513603051,10.032043425055,17.7565843009642,10.688678577169,89.5086178928833,10.3937983916003,69.5125323549148,22.6101531204423,14.1182477705523,11.215032922012,10.3328384850778,18.4817514172369,10.2598663893405,11.4095178380712,12.9857580644434,10.0926933263875,10.2156783642234,11.2462652965006,10.153759775865,12.7633274977891,11.3832290976462,10.1266227869809,18.1907024781081,14.5815351018218,11.1525098849608,10.21676160781,11.1962739223544,10.898144893315,11.4078485741056,13.8636041018499,14.7695695620254,10.1395615791149,10.9083101559685],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Afghanistan <br>Life Expectancy: 41.67 <br>GDP per capita: 649.34 <br>Pop.:    16,317,921","Country: Bahrain <br>Life Expectancy: 72.6 <br>GDP per capita: 19035.58 <br>Pop.:       529,491","Country: Bangladesh <br>Life Expectancy: 56.02 <br>GDP per capita: 837.81 <br>Pop.:   113,704,579","Country: Cambodia <br>Life Expectancy: 55.8 <br>GDP per capita: 682.3 <br>Pop.:    10,150,094","Country: China <br>Life Expectancy: 68.69 <br>GDP per capita: 1655.78 <br>Pop.: 1,164,970,000","Country: Hong Kong, China <br>Life Expectancy: 77.6 <br>GDP per capita: 24757.6 <br>Pop.:     5,829,696","Country: India <br>Life Expectancy: 60.22 <br>GDP per capita: 1164.41 <br>Pop.:   872,000,000","Country: Indonesia <br>Life Expectancy: 62.68 <br>GDP per capita: 2383.14 <br>Pop.:   184,816,000","Country: Iran <br>Life Expectancy: 65.74 <br>GDP per capita: 7235.65 <br>Pop.:    60,397,973","Country: Iraq <br>Life Expectancy: 59.46 <br>GDP per capita: 3745.64 <br>Pop.:    17,861,905","Country: Israel <br>Life Expectancy: 76.93 <br>GDP per capita: 18051.52 <br>Pop.:     4,936,550","Country: Japan <br>Life Expectancy: 79.36 <br>GDP per capita: 26824.9 <br>Pop.:   124,329,269","Country: Jordan <br>Life Expectancy: 68.02 <br>GDP per capita: 3431.59 <br>Pop.:     3,867,409","Country: Korea, Dem. Rep. <br>Life Expectancy: 69.98 <br>GDP per capita: 3726.06 <br>Pop.:    20,711,375","Country: Korea, Rep. <br>Life Expectancy: 72.24 <br>GDP per capita: 12104.28 <br>Pop.:    43,805,450","Country: Kuwait <br>Life Expectancy: 75.19 <br>GDP per capita: 34932.92 <br>Pop.:     1,418,095","Country: Lebanon <br>Life Expectancy: 69.29 <br>GDP per capita: 6890.81 <br>Pop.:     3,219,994","Country: Malaysia <br>Life Expectancy: 70.69 <br>GDP per capita: 7277.91 <br>Pop.:    18,319,502","Country: Mongolia <br>Life Expectancy: 61.27 <br>GDP per capita: 1785.4 <br>Pop.:     2,312,802","Country: Myanmar <br>Life Expectancy: 59.32 <br>GDP per capita: 347 <br>Pop.:    40,546,538","Country: Nepal <br>Life Expectancy: 55.73 <br>GDP per capita: 897.74 <br>Pop.:    20,326,209","Country: Oman <br>Life Expectancy: 71.2 <br>GDP per capita: 18616.71 <br>Pop.:     1,915,208","Country: Pakistan <br>Life Expectancy: 60.84 <br>GDP per capita: 1971.83 <br>Pop.:   120,065,004","Country: Philippines <br>Life Expectancy: 66.46 <br>GDP per capita: 2279.32 <br>Pop.:    67,185,766","Country: Saudi Arabia <br>Life Expectancy: 68.77 <br>GDP per capita: 24841.62 <br>Pop.:    16,945,857","Country: Singapore <br>Life Expectancy: 75.79 <br>GDP per capita: 24769.89 <br>Pop.:     3,235,865","Country: Sri Lanka <br>Life Expectancy: 70.38 <br>GDP per capita: 2153.74 <br>Pop.:    17,587,060","Country: Syria <br>Life Expectancy: 69.25 <br>GDP per capita: 3340.54 <br>Pop.:    13,219,062","Country: Taiwan <br>Life Expectancy: 74.26 <br>GDP per capita: 15215.66 <br>Pop.:    20,686,918","Country: Thailand <br>Life Expectancy: 67.3 <br>GDP per capita: 4616.9 <br>Pop.:    56,667,095","Country: Vietnam <br>Life Expectancy: 67.66 <br>GDP per capita: 989.02 <br>Pop.:    69,940,728","Country: West Bank and Gaza <br>Life Expectancy: 69.72 <br>GDP per capita: 6017.65 <br>Pop.:     2,104,779","Country: Yemen, Rep. <br>Life Expectancy: 55.6 <br>GDP per capita: 1879.5 <br>Pop.:    13,367,997"],"frame":"1992","type":"scatter","name":"Asia","textfont":{"color":"rgba(64,0,75,1)","size":[11.1096513603051,10.032043425055,17.7565843009642,10.688678577169,89.5086178928833,10.3937983916003,69.5125323549148,22.6101531204423,14.1182477705523,11.215032922012,10.3328384850778,18.4817514172369,10.2598663893405,11.4095178380712,12.9857580644434,10.0926933263875,10.2156783642234,11.2462652965006,10.153759775865,12.7633274977891,11.3832290976462,10.1266227869809,18.1907024781081,14.5815351018218,11.1525098849608,10.21676160781,11.1962739223544,10.898144893315,11.4078485741056,13.8636041018499,14.7695695620254,10.1395615791149,10.9083101559685]},"error_y":{"color":"rgba(64,0,75,1)","width":[]},"error_x":{"color":"rgba(64,0,75,1)","width":[]},"line":{"color":"rgba(64,0,75,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.39749469826406,4.43203910845529,4.40782533328362,3.40599167707862,3.79952136016638,3.92674335990023,4.1552455617675,4.42171478694898,4.31486042820919,4.39276369497302,4.42333277608952,4.24406663717638,4.02266045049501,4.40044113886749,4.24449521672678,4.34269195584422,3.845305151385,4.42798810752661,4.53104007265859,3.88867818246945,4.20970977687171,3.81943929106406,3.96965201852667,3.97765355127639,4.15273821196319,4.26958449230923,4.37803462853663,4.50340291646683,3.75422202565638,4.35612327631095],"y":[71.581,76.04,76.46,72.178,71.19,72.527,72.4,75.33,75.7,77.46,76.07,77.03,69.17,78.77,75.467,77.44,75.435,77.42,77.32,70.99,74.86,69.36,71.659,71.38,73.64,77.57,78.16,78.03,66.146,76.42],"mode":"markers","marker":{"color":"rgba(39,100,25,1)","size":[10.222947583236,10.5361245590509,10.681548048281,10.286389783628,10.5868732003884,10.3026340009814,10.6999818223264,10.3488672276657,10.339970174267,13.9118647160648,15.4969443902918,10.7006457193945,10.7022329432371,10.0135824180569,10.2387319800336,13.8754631995541,10.0383315752431,11.0315919579096,10.2884608530875,12.6148197913583,10.6734981512932,11.5518698734142,10.6665852812671,10.3578421577535,10.1323561766705,12.6952724174399,10.5909930205719,10.4733644110288,13.9668060035518,13.9454568020095],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Albania <br>Life Expectancy: 71.58 <br>GDP per capita: 2497.44 <br>Pop.:     3,326,498","Country: Austria <br>Life Expectancy: 76.04 <br>GDP per capita: 27042.02 <br>Pop.:     7,914,969","Country: Belgium <br>Life Expectancy: 76.46 <br>GDP per capita: 25575.57 <br>Pop.:    10,045,622","Country: Bosnia and Herzegovina <br>Life Expectancy: 72.18 <br>GDP per capita: 2546.78 <br>Pop.:     4,256,013","Country: Bulgaria <br>Life Expectancy: 71.19 <br>GDP per capita: 6302.62 <br>Pop.:     8,658,506","Country: Croatia <br>Life Expectancy: 72.53 <br>GDP per capita: 8447.79 <br>Pop.:     4,494,013","Country: Czech Republic <br>Life Expectancy: 72.4 <br>GDP per capita: 14297.02 <br>Pop.:    10,315,702","Country: Denmark <br>Life Expectancy: 75.33 <br>GDP per capita: 26406.74 <br>Pop.:     5,171,393","Country: Finland <br>Life Expectancy: 75.7 <br>GDP per capita: 20647.16 <br>Pop.:     5,041,039","Country: France <br>Life Expectancy: 77.46 <br>GDP per capita: 24703.8 <br>Pop.:    57,374,179","Country: Germany <br>Life Expectancy: 76.07 <br>GDP per capita: 26505.3 <br>Pop.:    80,597,764","Country: Greece <br>Life Expectancy: 77.03 <br>GDP per capita: 17541.5 <br>Pop.:    10,325,429","Country: Hungary <br>Life Expectancy: 69.17 <br>GDP per capita: 10535.63 <br>Pop.:    10,348,684","Country: Iceland <br>Life Expectancy: 78.77 <br>GDP per capita: 25144.39 <br>Pop.:       259,012","Country: Ireland <br>Life Expectancy: 75.47 <br>GDP per capita: 17558.82 <br>Pop.:     3,557,761","Country: Italy <br>Life Expectancy: 77.44 <br>GDP per capita: 22013.64 <br>Pop.:    56,840,847","Country: Montenegro <br>Life Expectancy: 75.44 <br>GDP per capita: 7003.34 <br>Pop.:       621,621","Country: Netherlands <br>Life Expectancy: 77.42 <br>GDP per capita: 26790.95 <br>Pop.:    15,174,244","Country: Norway <br>Life Expectancy: 77.32 <br>GDP per capita: 33965.66 <br>Pop.:     4,286,357","Country: Poland <br>Life Expectancy: 70.99 <br>GDP per capita: 7738.88 <br>Pop.:    38,370,697","Country: Portugal <br>Life Expectancy: 74.86 <br>GDP per capita: 16207.27 <br>Pop.:     9,927,680","Country: Romania <br>Life Expectancy: 69.36 <br>GDP per capita: 6598.41 <br>Pop.:    22,797,027","Country: Serbia <br>Life Expectancy: 71.66 <br>GDP per capita: 9325.07 <br>Pop.:     9,826,397","Country: Slovak Republic <br>Life Expectancy: 71.38 <br>GDP per capita: 9498.47 <br>Pop.:     5,302,888","Country: Slovenia <br>Life Expectancy: 73.64 <br>GDP per capita: 14214.72 <br>Pop.:     1,999,210","Country: Spain <br>Life Expectancy: 77.57 <br>GDP per capita: 18603.06 <br>Pop.:    39,549,438","Country: Sweden <br>Life Expectancy: 78.16 <br>GDP per capita: 23880.02 <br>Pop.:     8,718,867","Country: Switzerland <br>Life Expectancy: 78.03 <br>GDP per capita: 31871.53 <br>Pop.:     6,995,447","Country: Turkey <br>Life Expectancy: 66.15 <br>GDP per capita: 5678.35 <br>Pop.:    58,179,144","Country: United Kingdom <br>Life Expectancy: 76.42 <br>GDP per capita: 22705.09 <br>Pop.:    57,866,349"],"frame":"1992","type":"scatter","name":"Europe","textfont":{"color":"rgba(39,100,25,1)","size":[10.222947583236,10.5361245590509,10.681548048281,10.286389783628,10.5868732003884,10.3026340009814,10.6999818223264,10.3488672276657,10.339970174267,13.9118647160648,15.4969443902918,10.7006457193945,10.7022329432371,10.0135824180569,10.2387319800336,13.8754631995541,10.0383315752431,11.0315919579096,10.2884608530875,12.6148197913583,10.6734981512932,11.5518698734142,10.6665852812671,10.3578421577535,10.1323561766705,12.6952724174399,10.5909930205719,10.4733644110288,13.9668060035518,13.9454568020095]},"error_y":{"color":"rgba(39,100,25,1)","width":[]},"error_x":{"color":"rgba(39,100,25,1)","width":[]},"line":{"color":"rgba(39,100,25,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[4.36967527661645,4.26395131915053],"y":[77.56,76.33],"mode":"markers","marker":{"color":"rgba(49,54,149,1)","size":[11.1891016908748,10.2305356803305],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Australia <br>Life Expectancy: 77.56 <br>GDP per capita: 23424.77 <br>Pop.:    17,481,977","Country: New Zealand <br>Life Expectancy: 76.33 <br>GDP per capita: 18363.32 <br>Pop.:     3,437,674"],"frame":"1992","type":"scatter","name":"Oceania","textfont":{"color":"rgba(49,54,149,1)","size":[11.1891016908748,10.2305356803305]},"error_y":{"color":"rgba(49,54,149,1)","width":[]},"error_x":{"color":"rgba(49,54,149,1)","width":[]},"line":{"color":"rgba(49,54,149,1)"},"xaxis":"x","yaxis":"y","visible":true}],"traces":[0,1,2,3,4]},{"name":"1997","data":[{"x":[3.68099642996904,3.35738990072978,3.09095437371205,3.93687260656924,2.97602652785581,2.66568898634557,3.22899991504306,2.86952877630843,3.00214936075992,3.06952684870363,2.49441679392038,3.54209863597563,3.25194598771714,3.27761310666527,3.62046730436524,3.44939828336542,2.96069466450231,2.71255660559339,4.16799164788718,2.81539852861878,3.00227227244485,2.93924449533036,2.90127544770125,3.13369376454073,3.07413887871439,2.78474132397179,3.97623283925911,2.99400722584187,2.84027915663416,2.89776889255363,3.17118101643639,3.87073770932658,3.47452247332618,2.674260312831,3.59101162654969,2.76365646909402,3.21083767029686,3.7833275723403,2.77081116034997,3.12680523801102,3.14375414181744,2.75940201863393,2.9687613813918,3.87385446413688,3.21277623758705,3.58846986354341,2.89717949512568,2.99223836297973,3.68813482189578,2.91198761298453,3.02993292165226,2.89897184798542],"y":[69.152,40.963,54.777,52.556,50.324,45.326,52.199,46.066,51.573,60.66,42.587,52.962,47.991,53.157,67.217,48.245,53.378,49.402,60.461,55.861,58.556,51.455,44.873,54.407,55.558,42.221,71.555,54.978,47.495,49.903,60.43,70.736,67.66,46.344,58.909,51.313,47.464,74.772,36.087,63.306,60.187,39.897,43.795,60.236,55.373,54.289,48.466,58.39,71.973,44.578,40.238,46.809],"mode":"markers","marker":{"color":"rgba(127,59,8,1)","size":[11.9801567177932,10.6699042205832,10.4099323120829,10.1007772816293,10.7025168075228,10.4137224019554,10.9648108200684,10.2482022222446,10.5120341117037,10.0319404312567,13.2583289333206,10.187077143428,10.9941704001034,10.0244275489838,14.5097687638314,10.0259334152337,10.2728965722604,14.0816182889745,10.0727698620565,10.0802488908345,11.2530077387505,10.5452612487821,10.0773782373149,11.9249954508418,10.1312377145286,10.1461101828048,10.3207658919455,10.9627157938009,10.7070998609129,10.6364575135585,10.162765010291,10.0743826125265,11.9431285021072,11.1291316578156,10.117037197176,10.6556549023256,17.2449092001146,10.0426444149505,10.4881845974963,10.0058422532471,10.6467179891667,10.3083808365148,10.4486613928801,12.9195222681848,12.1909707579554,10.0678759161872,12.0903767356689,10.2908178344231,10.6259933027033,11.4435678334875,10.6386965536858,10.774326144912],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Algeria <br>Life Expectancy: 69.15 <br>GDP per capita: 4797.3 <br>Pop.:    29,072,015","Country: Angola <br>Life Expectancy: 40.96 <br>GDP per capita: 2277.14 <br>Pop.:     9,875,024","Country: Benin <br>Life Expectancy: 54.78 <br>GDP per capita: 1232.98 <br>Pop.:     6,066,080","Country: Botswana <br>Life Expectancy: 52.56 <br>GDP per capita: 8647.14 <br>Pop.:     1,536,536","Country: Burkina Faso <br>Life Expectancy: 50.32 <br>GDP per capita: 946.29 <br>Pop.:    10,352,843","Country: Burundi <br>Life Expectancy: 45.33 <br>GDP per capita: 463.12 <br>Pop.:     6,121,610","Country: Cameroon <br>Life Expectancy: 52.2 <br>GDP per capita: 1694.34 <br>Pop.:    14,195,809","Country: Central African Republic <br>Life Expectancy: 46.07 <br>GDP per capita: 740.51 <br>Pop.:     3,696,513","Country: Chad <br>Life Expectancy: 51.57 <br>GDP per capita: 1004.96 <br>Pop.:     7,562,011","Country: Comoros <br>Life Expectancy: 60.66 <br>GDP per capita: 1173.62 <br>Pop.:       527,982","Country: Congo, Dem. Rep. <br>Life Expectancy: 42.59 <br>GDP per capita: 312.19 <br>Pop.:    47,798,986","Country: Congo, Rep. <br>Life Expectancy: 52.96 <br>GDP per capita: 3484.16 <br>Pop.:     2,800,947","Country: Cote d'Ivoire <br>Life Expectancy: 47.99 <br>GDP per capita: 1786.27 <br>Pop.:    14,625,967","Country: Djibouti <br>Life Expectancy: 53.16 <br>GDP per capita: 1895.02 <br>Pop.:       417,908","Country: Egypt <br>Life Expectancy: 67.22 <br>GDP per capita: 4173.18 <br>Pop.:    66,134,291","Country: Equatorial Guinea <br>Life Expectancy: 48.24 <br>GDP per capita: 2814.48 <br>Pop.:       439,971","Country: Eritrea <br>Life Expectancy: 53.38 <br>GDP per capita: 913.47 <br>Pop.:     4,058,319","Country: Ethiopia <br>Life Expectancy: 49.4 <br>GDP per capita: 515.89 <br>Pop.:    59,861,301","Country: Gabon <br>Life Expectancy: 60.46 <br>GDP per capita: 14722.84 <br>Pop.:     1,126,189","Country: Gambia <br>Life Expectancy: 55.86 <br>GDP per capita: 653.73 <br>Pop.:     1,235,767","Country: Ghana <br>Life Expectancy: 58.56 <br>GDP per capita: 1005.25 <br>Pop.:    18,418,288","Country: Guinea <br>Life Expectancy: 51.45 <br>GDP per capita: 869.45 <br>Pop.:     8,048,834","Country: Guinea-Bissau <br>Life Expectancy: 44.87 <br>GDP per capita: 796.66 <br>Pop.:     1,193,708","Country: Kenya <br>Life Expectancy: 54.41 <br>GDP per capita: 1360.49 <br>Pop.:    28,263,827","Country: Lesotho <br>Life Expectancy: 55.56 <br>GDP per capita: 1186.15 <br>Pop.:     1,982,823","Country: Liberia <br>Life Expectancy: 42.22 <br>GDP per capita: 609.17 <br>Pop.:     2,200,725","Country: Libya <br>Life Expectancy: 71.56 <br>GDP per capita: 9467.45 <br>Pop.:     4,759,670","Country: Madagascar <br>Life Expectancy: 54.98 <br>GDP per capita: 986.3 <br>Pop.:    14,165,114","Country: Malawi <br>Life Expectancy: 47.49 <br>GDP per capita: 692.28 <br>Pop.:    10,419,991","Country: Mali <br>Life Expectancy: 49.9 <br>GDP per capita: 790.26 <br>Pop.:     9,384,984","Country: Mauritania <br>Life Expectancy: 60.43 <br>GDP per capita: 1483.14 <br>Pop.:     2,444,741","Country: Mauritius <br>Life Expectancy: 70.74 <br>GDP per capita: 7425.71 <br>Pop.:     1,149,818","Country: Morocco <br>Life Expectancy: 67.66 <br>GDP per capita: 2982.1 <br>Pop.:    28,529,501","Country: Mozambique <br>Life Expectancy: 46.34 <br>GDP per capita: 472.35 <br>Pop.:    16,603,334","Country: Namibia <br>Life Expectancy: 58.91 <br>GDP per capita: 3899.52 <br>Pop.:     1,774,766","Country: Niger <br>Life Expectancy: 51.31 <br>GDP per capita: 580.31 <br>Pop.:     9,666,252","Country: Nigeria <br>Life Expectancy: 47.46 <br>GDP per capita: 1624.94 <br>Pop.:   106,207,839","Country: Reunion <br>Life Expectancy: 74.77 <br>GDP per capita: 6071.94 <br>Pop.:       684,810","Country: Rwanda <br>Life Expectancy: 36.09 <br>GDP per capita: 589.94 <br>Pop.:     7,212,583","Country: Sao Tome and Principe <br>Life Expectancy: 63.31 <br>GDP per capita: 1339.08 <br>Pop.:       145,608","Country: Senegal <br>Life Expectancy: 60.19 <br>GDP per capita: 1392.37 <br>Pop.:     9,535,314","Country: Sierra Leone <br>Life Expectancy: 39.9 <br>GDP per capita: 574.65 <br>Pop.:     4,578,212","Country: Somalia <br>Life Expectancy: 43.8 <br>GDP per capita: 930.6 <br>Pop.:     6,633,514","Country: South Africa <br>Life Expectancy: 60.24 <br>GDP per capita: 7479.19 <br>Pop.:    42,835,005","Country: Sudan <br>Life Expectancy: 55.37 <br>GDP per capita: 1632.21 <br>Pop.:    32,160,729","Country: Swaziland <br>Life Expectancy: 54.29 <br>GDP per capita: 3876.77 <br>Pop.:     1,054,486","Country: Tanzania <br>Life Expectancy: 48.47 <br>GDP per capita: 789.19 <br>Pop.:    30,686,889","Country: Togo <br>Life Expectancy: 58.39 <br>GDP per capita: 982.29 <br>Pop.:     4,320,890","Country: Tunisia <br>Life Expectancy: 71.97 <br>GDP per capita: 4876.8 <br>Pop.:     9,231,669","Country: Uganda <br>Life Expectancy: 44.58 <br>GDP per capita: 816.56 <br>Pop.:    21,210,254","Country: Zambia <br>Life Expectancy: 40.24 <br>GDP per capita: 1071.35 <br>Pop.:     9,417,789","Country: Zimbabwe <br>Life Expectancy: 46.81 <br>GDP per capita: 792.45 <br>Pop.:    11,404,948"],"frame":"1997","type":"scatter","name":"Africa","textfont":{"color":"rgba(127,59,8,1)","size":[11.9801567177932,10.6699042205832,10.4099323120829,10.1007772816293,10.7025168075228,10.4137224019554,10.9648108200684,10.2482022222446,10.5120341117037,10.0319404312567,13.2583289333206,10.187077143428,10.9941704001034,10.0244275489838,14.5097687638314,10.0259334152337,10.2728965722604,14.0816182889745,10.0727698620565,10.0802488908345,11.2530077387505,10.5452612487821,10.0773782373149,11.9249954508418,10.1312377145286,10.1461101828048,10.3207658919455,10.9627157938009,10.7070998609129,10.6364575135585,10.162765010291,10.0743826125265,11.9431285021072,11.1291316578156,10.117037197176,10.6556549023256,17.2449092001146,10.0426444149505,10.4881845974963,10.0058422532471,10.6467179891667,10.3083808365148,10.4486613928801,12.9195222681848,12.1909707579554,10.0678759161872,12.0903767356689,10.2908178344231,10.6259933027033,11.4435678334875,10.6386965536858,10.774326144912]},"error_y":{"color":"rgba(127,59,8,1)","width":[]},"error_x":{"color":"rgba(127,59,8,1)","width":[]},"line":{"color":"rgba(127,59,8,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[4.04009900857932,3.52194094173334,3.90080288831112,4.46172245769608,4.00509695770942,3.78656416296411,3.82458432359807,3.73495899494029,3.55800031947567,3.87095700780234,3.71221396789169,3.67064598120892,3.12766413697526,3.49974959810783,3.85259737781757,3.98977441733576,3.35276562601556,3.85209507308631,3.62812318939961,3.76628995242336,4.23043444380268,3.94411598894078,4.55348777266477,3.96521302678897,4.00712853877373],"y":[73.275,62.05,69.388,78.61,75.816,70.313,77.26,76.151,69.957,72.312,69.535,66.322,56.671,67.659,72.262,73.67,68.426,73.738,69.4,68.386,74.917,69.465,76.81,74.223,72.146],"mode":"markers","marker":{"color":"rgba(165,0,38,1)","size":[12.4668995386199,10.520987337333,21.4997256551139,12.064369197662,10.9923932281225,12.566164469963,10.2360254750128,10.7455273998938,10.5414065233053,10.8089216184168,10.3906412119275,10.6650480868838,10.4677743526688,10.3964098201724,10.1686736737208,16.541036819479,10.3105212510366,10.1825440512442,10.3476884981124,11.6850379879403,10.2524964971321,10.0735828919604,28.622954268998,10.2186025963591,11.5230241703223],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Argentina <br>Life Expectancy: 73.28 <br>GDP per capita: 10967.28 <br>Pop.:    36,203,463","Country: Bolivia <br>Life Expectancy: 62.05 <br>GDP per capita: 3326.14 <br>Pop.:     7,693,188","Country: Brazil <br>Life Expectancy: 69.39 <br>GDP per capita: 7957.98 <br>Pop.:   168,546,719","Country: Canada <br>Life Expectancy: 78.61 <br>GDP per capita: 28954.93 <br>Pop.:    30,305,843","Country: Chile <br>Life Expectancy: 75.82 <br>GDP per capita: 10118.05 <br>Pop.:    14,599,929","Country: Colombia <br>Life Expectancy: 70.31 <br>GDP per capita: 6117.36 <br>Pop.:    37,657,830","Country: Costa Rica <br>Life Expectancy: 77.26 <br>GDP per capita: 6677.05 <br>Pop.:     3,518,107","Country: Cuba <br>Life Expectancy: 76.15 <br>GDP per capita: 5431.99 <br>Pop.:    10,983,007","Country: Dominican Republic <br>Life Expectancy: 69.96 <br>GDP per capita: 3614.1 <br>Pop.:     7,992,357","Country: Ecuador <br>Life Expectancy: 72.31 <br>GDP per capita: 7429.46 <br>Pop.:    11,911,819","Country: El Salvador <br>Life Expectancy: 69.53 <br>GDP per capita: 5154.83 <br>Pop.:     5,783,439","Country: Guatemala <br>Life Expectancy: 66.32 <br>GDP per capita: 4684.31 <br>Pop.:     9,803,875","Country: Haiti <br>Life Expectancy: 56.67 <br>GDP per capita: 1341.73 <br>Pop.:     6,913,545","Country: Honduras <br>Life Expectancy: 67.66 <br>GDP per capita: 3160.45 <br>Pop.:     5,867,957","Country: Jamaica <br>Life Expectancy: 72.26 <br>GDP per capita: 7121.92 <br>Pop.:     2,531,311","Country: Mexico <br>Life Expectancy: 73.67 <br>GDP per capita: 9767.3 <br>Pop.:    95,895,146","Country: Nicaragua <br>Life Expectancy: 68.43 <br>GDP per capita: 2253.02 <br>Pop.:     4,609,572","Country: Panama <br>Life Expectancy: 73.74 <br>GDP per capita: 7113.69 <br>Pop.:     2,734,531","Country: Paraguay <br>Life Expectancy: 69.4 <br>GDP per capita: 4247.4 <br>Pop.:     5,154,123","Country: Peru <br>Life Expectancy: 68.39 <br>GDP per capita: 5838.35 <br>Pop.:    24,748,122","Country: Puerto Rico <br>Life Expectancy: 74.92 <br>GDP per capita: 16999.43 <br>Pop.:     3,759,430","Country: Trinidad and Tobago <br>Life Expectancy: 69.47 <br>GDP per capita: 8792.57 <br>Pop.:     1,138,101","Country: United States <br>Life Expectancy: 76.81 <br>GDP per capita: 35767.43 <br>Pop.:   272,911,760","Country: Uruguay <br>Life Expectancy: 74.22 <br>GDP per capita: 9230.24 <br>Pop.:     3,262,838","Country: Venezuela <br>Life Expectancy: 72.15 <br>GDP per capita: 10165.5 <br>Pop.:    22,374,398"],"frame":"1997","type":"scatter","name":"Americas","textfont":{"color":"rgba(165,0,38,1)","size":[12.4668995386199,10.520987337333,21.4997256551139,12.064369197662,10.9923932281225,12.566164469963,10.2360254750128,10.7455273998938,10.5414065233053,10.8089216184168,10.3906412119275,10.6650480868838,10.4677743526688,10.3964098201724,10.1686736737208,16.541036819479,10.3105212510366,10.1825440512442,10.3476884981124,11.6850379879403,10.2524964971321,10.0735828919604,28.622954268998,10.2186025963591,11.5230241703223]},"error_y":{"color":"rgba(165,0,38,1)","width":[]},"error_x":{"color":"rgba(165,0,38,1)","width":[]},"line":{"color":"rgba(165,0,38,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2.80300712218037,4.30732521298902,2.9880101843097,2.86586475706223,3.35969021328296,4.45297615540202,3.16400094721034,3.49406210213458,3.91716877724031,3.48802018600138,4.32007582162183,4.45964251194375,3.56174275554633,3.2280811463719,4.20394427391255,4.60531172711223,3.94225435718384,4.00573416985715,3.27926807221425,2.61804809671209,3.0047048189239,4.2945115449614,3.31161624650109,3.40424084640125,4.31358652885387,4.52529722858871,3.42561201761444,3.60360322294262,4.3054979938992,3.76735073498212,3.14173088227915,3.85191037845634,3.32582024530859],"y":[41.763,73.925,59.412,56.534,70.426,80,61.765,66.041,68.042,58.811,78.269,80.69,69.772,67.727,74.647,76.156,70.265,71.938,63.625,60.328,59.426,72.499,61.818,68.564,70.533,77.158,70.457,71.527,75.25,67.521,70.672,71.096,58.02],"mode":"markers","marker":{"color":"rgba(64,0,75,1)","size":[11.5129921375523,10.0367576607382,18.4125441577568,10.8001267397802,93.9522303752175,10.4392700511534,75.4505445807511,23.5972282102129,14.3182300573784,11.4139084179616,10.3734379032201,18.5928147693547,10.3048332496014,11.4691525440721,13.1474061824119,10.1163941855303,10.2300383888699,11.393458995904,10.1661818926824,12.947701344088,11.5657993580478,10.151769040203,19.2486125934918,15.1157665952739,11.4448991085273,10.2554231181233,11.2721436315518,11.0252288659121,11.4721215501851,14.1058737721098,15.1864772638953,10.1887902258286,11.0761101911089],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Afghanistan <br>Life Expectancy: 41.76 <br>GDP per capita: 635.34 <br>Pop.:    22,227,415","Country: Bahrain <br>Life Expectancy: 73.92 <br>GDP per capita: 20292.02 <br>Pop.:       598,561","Country: Bangladesh <br>Life Expectancy: 59.41 <br>GDP per capita: 972.77 <br>Pop.:   123,315,288","Country: Cambodia <br>Life Expectancy: 56.53 <br>GDP per capita: 734.29 <br>Pop.:    11,782,962","Country: China <br>Life Expectancy: 70.43 <br>GDP per capita: 2289.23 <br>Pop.: 1,230,075,000","Country: Hong Kong, China <br>Life Expectancy: 80 <br>GDP per capita: 28377.63 <br>Pop.:     6,495,918","Country: India <br>Life Expectancy: 61.76 <br>GDP per capita: 1458.82 <br>Pop.:   959,000,000","Country: Indonesia <br>Life Expectancy: 66.04 <br>GDP per capita: 3119.34 <br>Pop.:   199,278,000","Country: Iran <br>Life Expectancy: 68.04 <br>GDP per capita: 8263.59 <br>Pop.:    63,327,987","Country: Iraq <br>Life Expectancy: 58.81 <br>GDP per capita: 3076.24 <br>Pop.:    20,775,703","Country: Israel <br>Life Expectancy: 78.27 <br>GDP per capita: 20896.61 <br>Pop.:     5,531,387","Country: Japan <br>Life Expectancy: 80.69 <br>GDP per capita: 28816.58 <br>Pop.:   125,956,499","Country: Jordan <br>Life Expectancy: 69.77 <br>GDP per capita: 3645.38 <br>Pop.:     4,526,235","Country: Korea, Dem. Rep. <br>Life Expectancy: 67.73 <br>GDP per capita: 1690.76 <br>Pop.:    21,585,105","Country: Korea, Rep. <br>Life Expectancy: 74.65 <br>GDP per capita: 15993.53 <br>Pop.:    46,173,816","Country: Kuwait <br>Life Expectancy: 76.16 <br>GDP per capita: 40300.62 <br>Pop.:     1,765,345","Country: Lebanon <br>Life Expectancy: 70.26 <br>GDP per capita: 8754.96 <br>Pop.:     3,430,388","Country: Malaysia <br>Life Expectancy: 71.94 <br>GDP per capita: 10132.91 <br>Pop.:    20,476,091","Country: Mongolia <br>Life Expectancy: 63.62 <br>GDP per capita: 1902.25 <br>Pop.:     2,494,803","Country: Myanmar <br>Life Expectancy: 60.33 <br>GDP per capita: 415 <br>Pop.:    43,247,867","Country: Nepal <br>Life Expectancy: 59.43 <br>GDP per capita: 1010.89 <br>Pop.:    23,001,113","Country: Oman <br>Life Expectancy: 72.5 <br>GDP per capita: 19702.06 <br>Pop.:     2,283,635","Country: Pakistan <br>Life Expectancy: 61.82 <br>GDP per capita: 2049.35 <br>Pop.:   135,564,834","Country: Philippines <br>Life Expectancy: 68.56 <br>GDP per capita: 2536.53 <br>Pop.:    75,012,988","Country: Saudi Arabia <br>Life Expectancy: 70.53 <br>GDP per capita: 20586.69 <br>Pop.:    21,229,759","Country: Singapore <br>Life Expectancy: 77.16 <br>GDP per capita: 33519.48 <br>Pop.:     3,802,309","Country: Sri Lanka <br>Life Expectancy: 70.46 <br>GDP per capita: 2664.48 <br>Pop.:    18,698,655","Country: Syria <br>Life Expectancy: 71.53 <br>GDP per capita: 4014.24 <br>Pop.:    15,081,016","Country: Taiwan <br>Life Expectancy: 75.25 <br>GDP per capita: 20206.82 <br>Pop.:    21,628,605","Country: Thailand <br>Life Expectancy: 67.52 <br>GDP per capita: 5852.63 <br>Pop.:    60,216,677","Country: Vietnam <br>Life Expectancy: 70.67 <br>GDP per capita: 1385.9 <br>Pop.:    76,048,996","Country: West Bank and Gaza <br>Life Expectancy: 71.1 <br>GDP per capita: 7110.67 <br>Pop.:     2,826,046","Country: Yemen, Rep. <br>Life Expectancy: 58.02 <br>GDP per capita: 2117.48 <br>Pop.:    15,826,497"],"frame":"1997","type":"scatter","name":"Asia","textfont":{"color":"rgba(64,0,75,1)","size":[11.5129921375523,10.0367576607382,18.4125441577568,10.8001267397802,93.9522303752175,10.4392700511534,75.4505445807511,23.5972282102129,14.3182300573784,11.4139084179616,10.3734379032201,18.5928147693547,10.3048332496014,11.4691525440721,13.1474061824119,10.1163941855303,10.2300383888699,11.393458995904,10.1661818926824,12.947701344088,11.5657993580478,10.151769040203,19.2486125934918,15.1157665952739,11.4448991085273,10.2554231181233,11.2721436315518,11.0252288659121,11.4721215501851,14.1058737721098,15.1864772638953,10.1887902258286,11.0761101911089]},"error_y":{"color":"rgba(64,0,75,1)","width":[]},"error_x":{"color":"rgba(64,0,75,1)","width":[]},"line":{"color":"rgba(64,0,75,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.50420634541484,4.46383210379552,4.44029806949553,3.67818646800884,3.77600261099969,3.99456368956363,4.2054348319286,4.47427959169049,4.37518700371537,4.41312844169945,4.44387110838644,4.27294795225229,4.06865986739997,4.44810468618315,4.38955495174527,4.39225759185182,3.81060972975025,4.48066982350009,4.61577297830881,4.00687591176845,4.24652397692489,3.86608329429534,3.89841362281209,4.08372582458422,4.23454530801608,4.31059346537845,4.40254671890085,4.50698266960368,3.81963801689525,4.41621651155322],"y":[72.95,77.51,77.53,73.244,70.32,73.68,74.01,76.11,77.13,78.64,77.34,77.869,71.04,78.95,76.122,78.82,75.445,78.03,78.32,72.75,75.97,69.72,72.232,72.71,75.13,78.77,79.39,79.37,68.835,77.218],"mode":"markers","marker":{"color":"rgba(39,100,25,1)","size":[10.2298779942867,10.5466974287046,10.6920702741982,10.2420926901943,10.5464367704438,10.2992610735311,10.6989583683802,10.3565299935576,10.3463427534336,13.9971297256638,15.5934069893824,10.7127226124666,10.6951346297718,10.0144137397686,10.246203773992,13.9190510759183,10.0431795868339,11.0609557696315,10.2966044614637,12.6342213931436,10.6891100044711,11.5358598321521,10.7014077642968,10.3633107257484,10.1332026505512,12.7161581127635,10.6031933833465,10.4868999392651,14.2990960074084,14.0097454762822],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Albania <br>Life Expectancy: 72.95 <br>GDP per capita: 3193.05 <br>Pop.:     3,428,038","Country: Austria <br>Life Expectancy: 77.51 <br>GDP per capita: 29095.92 <br>Pop.:     8,069,876","Country: Belgium <br>Life Expectancy: 77.53 <br>GDP per capita: 27561.2 <br>Pop.:    10,199,787","Country: Bosnia and Herzegovina <br>Life Expectancy: 73.24 <br>GDP per capita: 4766.36 <br>Pop.:     3,607,000","Country: Bulgaria <br>Life Expectancy: 70.32 <br>GDP per capita: 5970.39 <br>Pop.:     8,066,057","Country: Croatia <br>Life Expectancy: 73.68 <br>GDP per capita: 9875.6 <br>Pop.:     4,444,595","Country: Czech Republic <br>Life Expectancy: 74.01 <br>GDP per capita: 16048.51 <br>Pop.:    10,300,707","Country: Denmark <br>Life Expectancy: 76.11 <br>GDP per capita: 29804.35 <br>Pop.:     5,283,663","Country: Finland <br>Life Expectancy: 77.13 <br>GDP per capita: 23723.95 <br>Pop.:     5,134,406","Country: France <br>Life Expectancy: 78.64 <br>GDP per capita: 25889.78 <br>Pop.:    58,623,428","Country: Germany <br>Life Expectancy: 77.34 <br>GDP per capita: 27788.88 <br>Pop.:    82,011,073","Country: Greece <br>Life Expectancy: 77.87 <br>GDP per capita: 18747.7 <br>Pop.:    10,502,372","Country: Hungary <br>Life Expectancy: 71.04 <br>GDP per capita: 11712.78 <br>Pop.:    10,244,684","Country: Iceland <br>Life Expectancy: 78.95 <br>GDP per capita: 28061.1 <br>Pop.:       271,192","Country: Ireland <br>Life Expectancy: 76.12 <br>GDP per capita: 24521.95 <br>Pop.:     3,667,233","Country: Italy <br>Life Expectancy: 78.82 <br>GDP per capita: 24675.02 <br>Pop.:    57,479,469","Country: Montenegro <br>Life Expectancy: 75.44 <br>GDP per capita: 6465.61 <br>Pop.:       692,651","Country: Netherlands <br>Life Expectancy: 78.03 <br>GDP per capita: 30246.13 <br>Pop.:    15,604,464","Country: Norway <br>Life Expectancy: 78.32 <br>GDP per capita: 41283.16 <br>Pop.:     4,405,672","Country: Poland <br>Life Expectancy: 72.75 <br>GDP per capita: 10159.58 <br>Pop.:    38,654,957","Country: Portugal <br>Life Expectancy: 75.97 <br>GDP per capita: 17641.03 <br>Pop.:    10,156,415","Country: Romania <br>Life Expectancy: 69.72 <br>GDP per capita: 7346.55 <br>Pop.:    22,562,458","Country: Serbia <br>Life Expectancy: 72.23 <br>GDP per capita: 7914.32 <br>Pop.:    10,336,594","Country: Slovak Republic <br>Life Expectancy: 72.71 <br>GDP per capita: 12126.23 <br>Pop.:     5,383,010","Country: Slovenia <br>Life Expectancy: 75.13 <br>GDP per capita: 17161.11 <br>Pop.:     2,011,612","Country: Spain <br>Life Expectancy: 78.77 <br>GDP per capita: 20445.3 <br>Pop.:    39,855,442","Country: Sweden <br>Life Expectancy: 79.39 <br>GDP per capita: 25266.59 <br>Pop.:     8,897,619","Country: Switzerland <br>Life Expectancy: 79.37 <br>GDP per capita: 32135.32 <br>Pop.:     7,193,761","Country: Turkey <br>Life Expectancy: 68.83 <br>GDP per capita: 6601.43 <br>Pop.:    63,047,647","Country: United Kingdom <br>Life Expectancy: 77.22 <br>GDP per capita: 26074.53 <br>Pop.:    58,808,266"],"frame":"1997","type":"scatter","name":"Europe","textfont":{"color":"rgba(39,100,25,1)","size":[10.2298779942867,10.5466974287046,10.6920702741982,10.2420926901943,10.5464367704438,10.2992610735311,10.6989583683802,10.3565299935576,10.3463427534336,13.9971297256638,15.5934069893824,10.7127226124666,10.6951346297718,10.0144137397686,10.246203773992,13.9190510759183,10.0431795868339,11.0609557696315,10.2966044614637,12.6342213931436,10.6891100044711,11.5358598321521,10.7014077642968,10.3633107257484,10.1332026505512,12.7161581127635,10.6031933833465,10.4868999392651,14.2990960074084,14.0097454762822]},"error_y":{"color":"rgba(39,100,25,1)","width":[]},"error_x":{"color":"rgba(39,100,25,1)","width":[]},"line":{"color":"rgba(39,100,25,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[4.43133057265871,4.3232606368112],"y":[78.83,77.55],"mode":"markers","marker":{"color":"rgba(49,54,149,1)","size":[11.2630378604361,10.2468149114802],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Australia <br>Life Expectancy: 78.83 <br>GDP per capita: 26997.94 <br>Pop.:    18,565,243","Country: New Zealand <br>Life Expectancy: 77.55 <br>GDP per capita: 21050.41 <br>Pop.:     3,676,187"],"frame":"1997","type":"scatter","name":"Oceania","textfont":{"color":"rgba(49,54,149,1)","size":[11.2630378604361,10.2468149114802]},"error_y":{"color":"rgba(49,54,149,1)","width":[]},"error_x":{"color":"rgba(49,54,149,1)","width":[]},"line":{"color":"rgba(49,54,149,1)"},"xaxis":"x","yaxis":"y","visible":true}],"traces":[0,1,2,3,4]},{"name":"2002","data":[{"x":[3.72329476297017,3.44299486472841,3.1376319237991,4.04153499514417,3.01604889021829,2.64972760326105,3.28645904069983,2.86846257656144,3.06302615119746,3.03173620582114,2.38231585779586,3.54208587107434,3.21716819554958,3.28063774424357,3.67711438920957,3.88668785576092,2.88386008738691,2.72431973268524,4.0976637773612,2.81992910214529,3.0460987641022,2.97569992380538,2.76019978828656,3.10975220702562,3.10557305073264,2.72548886123795,3.97930600659322,2.95164689546985,2.82309788536057,2.97836759855668,3.19838750516,3.95529396031038,3.51301713676457,2.80182746971617,3.60984240389245,2.77892830470623,3.20824953517551,3.80045348050506,2.89523119595633,3.13132745151062,3.18173936247833,2.84478133195124,2.94550887210244,3.88710768676435,3.29959408660236,3.61575199166669,2.95379554061093,2.94754182937497,3.75761582753152,2.96741738829156,3.03003835364569,2.82739423308876],"y":[70.994,41.003,54.406,46.634,50.65,47.36,49.856,43.308,50.525,62.974,44.966,52.97,46.832,53.373,69.806,49.348,55.24,50.725,56.761,58.041,58.453,53.676,45.504,50.992,44.593,43.753,72.737,57.286,45.009,51.818,62.247,71.954,69.615,44.026,51.479,54.496,46.608,75.744,43.413,64.337,61.6,41.012,45.936,53.365,56.369,43.869,49.651,57.561,73.042,47.813,39.193,39.989],"mode":"markers","marker":{"color":"rgba(127,59,8,1)","size":[12.1313458121355,10.7375485542937,10.4754574579589,10.1071801651341,10.8320860088689,10.4751138040329,11.0831737637901,10.2721931566972,10.5989698868346,10.0378374916741,13.7757458872336,10.2231043604094,11.1052016050515,10.0264415589236,14.9997071907777,10.0297321049859,10.2972319114222,14.6334777613877,10.0845854825907,10.0954009917095,11.398554765936,10.5970641944282,10.0868484112729,12.1381506376403,10.1356024265266,10.1880124827331,10.3623261760202,11.1202685261649,10.8029614922144,10.7180329699749,10.1889821533043,10.0778217454004,12.1231992006268,11.2567952350083,10.1305094548682,10.7562873510591,18.1795274121111,10.0466830140472,10.5318541044653,10.007532470888,10.7378168568921,10.3616782501574,10.5250908450461,13.0286326968104,12.5274287003704,10.073048334354,12.3570337538873,10.3356251191371,10.6627752615146,11.684474695815,10.7191001058502,10.8099279408566],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Algeria <br>Life Expectancy: 70.99 <br>GDP per capita: 5288.04 <br>Pop.:    31,287,142","Country: Angola <br>Life Expectancy: 41 <br>GDP per capita: 2773.29 <br>Pop.:    10,866,106","Country: Benin <br>Life Expectancy: 54.41 <br>GDP per capita: 1372.88 <br>Pop.:     7,026,113","Country: Botswana <br>Life Expectancy: 46.63 <br>GDP per capita: 11003.61 <br>Pop.:     1,630,347","Country: Burkina Faso <br>Life Expectancy: 50.65 <br>GDP per capita: 1037.65 <br>Pop.:    12,251,209","Country: Burundi <br>Life Expectancy: 47.36 <br>GDP per capita: 446.4 <br>Pop.:     7,021,078","Country: Cameroon <br>Life Expectancy: 49.86 <br>GDP per capita: 1934.01 <br>Pop.:    15,929,988","Country: Central African Republic <br>Life Expectancy: 43.31 <br>GDP per capita: 738.69 <br>Pop.:     4,048,013","Country: Chad <br>Life Expectancy: 50.52 <br>GDP per capita: 1156.18 <br>Pop.:     8,835,739","Country: Comoros <br>Life Expectancy: 62.97 <br>GDP per capita: 1075.81 <br>Pop.:       614,382","Country: Congo, Dem. Rep. <br>Life Expectancy: 44.97 <br>GDP per capita: 241.17 <br>Pop.:    55,379,852","Country: Congo, Rep. <br>Life Expectancy: 52.97 <br>GDP per capita: 3484.06 <br>Pop.:     3,328,795","Country: Cote d'Ivoire <br>Life Expectancy: 46.83 <br>GDP per capita: 1648.8 <br>Pop.:    16,252,726","Country: Djibouti <br>Life Expectancy: 53.37 <br>GDP per capita: 1908.26 <br>Pop.:       447,416","Country: Egypt <br>Life Expectancy: 69.81 <br>GDP per capita: 4754.6 <br>Pop.:    73,312,559","Country: Equatorial Guinea <br>Life Expectancy: 49.35 <br>GDP per capita: 7703.5 <br>Pop.:       495,627","Country: Eritrea <br>Life Expectancy: 55.24 <br>GDP per capita: 765.35 <br>Pop.:     4,414,865","Country: Ethiopia <br>Life Expectancy: 50.73 <br>GDP per capita: 530.05 <br>Pop.:    67,946,797","Country: Gabon <br>Life Expectancy: 56.76 <br>GDP per capita: 12521.71 <br>Pop.:     1,299,304","Country: Gambia <br>Life Expectancy: 58.04 <br>GDP per capita: 660.59 <br>Pop.:     1,457,766","Country: Ghana <br>Life Expectancy: 58.45 <br>GDP per capita: 1111.98 <br>Pop.:    20,550,751","Country: Guinea <br>Life Expectancy: 53.68 <br>GDP per capita: 945.58 <br>Pop.:     8,807,818","Country: Guinea-Bissau <br>Life Expectancy: 45.5 <br>GDP per capita: 575.7 <br>Pop.:     1,332,459","Country: Kenya <br>Life Expectancy: 50.99 <br>GDP per capita: 1287.51 <br>Pop.:    31,386,842","Country: Lesotho <br>Life Expectancy: 44.59 <br>GDP per capita: 1275.18 <br>Pop.:     2,046,772","Country: Liberia <br>Life Expectancy: 43.75 <br>GDP per capita: 531.48 <br>Pop.:     2,814,651","Country: Libya <br>Life Expectancy: 72.74 <br>GDP per capita: 9534.68 <br>Pop.:     5,368,585","Country: Madagascar <br>Life Expectancy: 57.29 <br>GDP per capita: 894.64 <br>Pop.:    16,473,477","Country: Malawi <br>Life Expectancy: 45.01 <br>GDP per capita: 665.42 <br>Pop.:    11,824,495","Country: Mali <br>Life Expectancy: 51.82 <br>GDP per capita: 951.41 <br>Pop.:    10,580,176","Country: Mauritania <br>Life Expectancy: 62.25 <br>GDP per capita: 1579.02 <br>Pop.:     2,828,858","Country: Mauritius <br>Life Expectancy: 71.95 <br>GDP per capita: 9021.82 <br>Pop.:     1,200,206","Country: Morocco <br>Life Expectancy: 69.61 <br>GDP per capita: 3258.5 <br>Pop.:    31,167,783","Country: Mozambique <br>Life Expectancy: 44.03 <br>GDP per capita: 633.62 <br>Pop.:    18,473,780","Country: Namibia <br>Life Expectancy: 51.48 <br>GDP per capita: 4072.32 <br>Pop.:     1,972,153","Country: Niger <br>Life Expectancy: 54.5 <br>GDP per capita: 601.07 <br>Pop.:    11,140,655","Country: Nigeria <br>Life Expectancy: 46.61 <br>GDP per capita: 1615.29 <br>Pop.:   119,901,274","Country: Reunion <br>Life Expectancy: 75.74 <br>GDP per capita: 6316.17 <br>Pop.:       743,981","Country: Rwanda <br>Life Expectancy: 43.41 <br>GDP per capita: 785.65 <br>Pop.:     7,852,401","Country: Sao Tome and Principe <br>Life Expectancy: 64.34 <br>GDP per capita: 1353.09 <br>Pop.:       170,372","Country: Senegal <br>Life Expectancy: 61.6 <br>GDP per capita: 1519.64 <br>Pop.:    10,870,037","Country: Sierra Leone <br>Life Expectancy: 41.01 <br>GDP per capita: 699.49 <br>Pop.:     5,359,092","Country: Somalia <br>Life Expectancy: 45.94 <br>GDP per capita: 882.08 <br>Pop.:     7,753,310","Country: South Africa <br>Life Expectancy: 53.37 <br>GDP per capita: 7710.95 <br>Pop.:    44,433,622","Country: Sudan <br>Life Expectancy: 56.37 <br>GDP per capita: 1993.4 <br>Pop.:    37,090,298","Country: Swaziland <br>Life Expectancy: 43.87 <br>GDP per capita: 4128.12 <br>Pop.:     1,130,269","Country: Tanzania <br>Life Expectancy: 49.65 <br>GDP per capita: 899.07 <br>Pop.:    34,593,779","Country: Togo <br>Life Expectancy: 57.56 <br>GDP per capita: 886.22 <br>Pop.:     4,977,378","Country: Tunisia <br>Life Expectancy: 73.04 <br>GDP per capita: 5722.9 <br>Pop.:     9,770,575","Country: Uganda <br>Life Expectancy: 47.81 <br>GDP per capita: 927.72 <br>Pop.:    24,739,869","Country: Zambia <br>Life Expectancy: 39.19 <br>GDP per capita: 1071.61 <br>Pop.:    10,595,811","Country: Zimbabwe <br>Life Expectancy: 39.99 <br>GDP per capita: 672.04 <br>Pop.:    11,926,563"],"frame":"2002","type":"scatter","name":"Africa","textfont":{"color":"rgba(127,59,8,1)","size":[12.1313458121355,10.7375485542937,10.4754574579589,10.1071801651341,10.8320860088689,10.4751138040329,11.0831737637901,10.2721931566972,10.5989698868346,10.0378374916741,13.7757458872336,10.2231043604094,11.1052016050515,10.0264415589236,14.9997071907777,10.0297321049859,10.2972319114222,14.6334777613877,10.0845854825907,10.0954009917095,11.398554765936,10.5970641944282,10.0868484112729,12.1381506376403,10.1356024265266,10.1880124827331,10.3623261760202,11.1202685261649,10.8029614922144,10.7180329699749,10.1889821533043,10.0778217454004,12.1231992006268,11.2567952350083,10.1305094548682,10.7562873510591,18.1795274121111,10.0466830140472,10.5318541044653,10.007532470888,10.7378168568921,10.3616782501574,10.5250908450461,13.0286326968104,12.5274287003704,10.073048334354,12.3570337538873,10.3356251191371,10.6627752615146,11.684474695815,10.7191001058502,10.8099279408566]},"error_y":{"color":"rgba(127,59,8,1)","width":[]},"error_x":{"color":"rgba(127,59,8,1)","width":[]},"line":{"color":"rgba(127,59,8,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.9443662219913,3.533169713543,3.91015532932556,4.52282182817099,4.0325697629816,3.76006494525725,3.88781118163342,3.80213355386532,3.65932737995951,3.76140490605942,3.72848110223266,3.68648857464444,3.10392849669425,3.49132367879482,3.84477374052922,4.03110295811444,3.39349602618644,3.86664360592899,3.57791373857608,3.77151546528485,4.27544049889477,4.0592073636829,4.59214454010295,3.88801102487943,3.93475328868817],"y":[74.34,63.883,71.006,79.77,77.86,71.682,78.123,77.158,70.847,74.173,70.734,68.978,58.137,68.565,72.047,74.902,70.836,74.712,70.755,69.906,77.778,68.976,77.31,75.307,72.766],"mode":"markers","marker":{"color":"rgba(165,0,38,1)","size":[12.6121186100727,10.572309918266,22.2755913150118,12.1733300156807,11.0536241673639,12.7948391636113,10.2576498727079,10.7621805893077,10.5863146177211,10.8778172346346,10.4295619471883,10.7588806243294,10.5151491792668,10.4516518304395,10.1777750766437,16.9904679698521,10.3471919574349,10.2000403018881,10.3975383155073,11.8229987608627,10.2593338110716,10.0711074233923,29.6306257978185,10.2254447562626,11.6536107510965],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Argentina <br>Life Expectancy: 74.34 <br>GDP per capita: 8797.64 <br>Pop.:    38,331,121","Country: Bolivia <br>Life Expectancy: 63.88 <br>GDP per capita: 3413.26 <br>Pop.:     8,445,134","Country: Brazil <br>Life Expectancy: 71.01 <br>GDP per capita: 8131.21 <br>Pop.:   179,914,212","Country: Canada <br>Life Expectancy: 79.77 <br>GDP per capita: 33328.97 <br>Pop.:    31,902,268","Country: Chile <br>Life Expectancy: 77.86 <br>GDP per capita: 10778.78 <br>Pop.:    15,497,046","Country: Colombia <br>Life Expectancy: 71.68 <br>GDP per capita: 5755.26 <br>Pop.:    41,008,227","Country: Costa Rica <br>Life Expectancy: 78.12 <br>GDP per capita: 7723.45 <br>Pop.:     3,834,934","Country: Cuba <br>Life Expectancy: 77.16 <br>GDP per capita: 6340.65 <br>Pop.:    11,226,999","Country: Dominican Republic <br>Life Expectancy: 70.85 <br>GDP per capita: 4563.81 <br>Pop.:     8,650,322","Country: Ecuador <br>Life Expectancy: 74.17 <br>GDP per capita: 5773.04 <br>Pop.:    12,921,234","Country: El Salvador <br>Life Expectancy: 70.73 <br>GDP per capita: 5351.57 <br>Pop.:     6,353,681","Country: Guatemala <br>Life Expectancy: 68.98 <br>GDP per capita: 4858.35 <br>Pop.:    11,178,650","Country: Haiti <br>Life Expectancy: 58.14 <br>GDP per capita: 1270.36 <br>Pop.:     7,607,651","Country: Honduras <br>Life Expectancy: 68.56 <br>GDP per capita: 3099.73 <br>Pop.:     6,677,328","Country: Jamaica <br>Life Expectancy: 72.05 <br>GDP per capita: 6994.77 <br>Pop.:     2,664,659","Country: Mexico <br>Life Expectancy: 74.9 <br>GDP per capita: 10742.44 <br>Pop.:   102,479,927","Country: Nicaragua <br>Life Expectancy: 70.84 <br>GDP per capita: 2474.55 <br>Pop.:     5,146,848","Country: Panama <br>Life Expectancy: 74.71 <br>GDP per capita: 7356.03 <br>Pop.:     2,990,875","Country: Paraguay <br>Life Expectancy: 70.75 <br>GDP per capita: 3783.67 <br>Pop.:     5,884,491","Country: Peru <br>Life Expectancy: 69.91 <br>GDP per capita: 5909.02 <br>Pop.:    26,769,436","Country: Puerto Rico <br>Life Expectancy: 77.78 <br>GDP per capita: 18855.61 <br>Pop.:     3,859,606","Country: Trinidad and Tobago <br>Life Expectancy: 68.98 <br>GDP per capita: 11460.6 <br>Pop.:     1,101,832","Country: United States <br>Life Expectancy: 77.31 <br>GDP per capita: 39097.1 <br>Pop.:   287,675,526","Country: Uruguay <br>Life Expectancy: 75.31 <br>GDP per capita: 7727 <br>Pop.:     3,363,085","Country: Venezuela <br>Life Expectancy: 72.77 <br>GDP per capita: 8605.05 <br>Pop.:    24,287,670"],"frame":"2002","type":"scatter","name":"Americas","textfont":{"color":"rgba(165,0,38,1)","size":[12.6121186100727,10.572309918266,22.2755913150118,12.1733300156807,11.0536241673639,12.7948391636113,10.2576498727079,10.7621805893077,10.5863146177211,10.8778172346346,10.4295619471883,10.7588806243294,10.5151491792668,10.4516518304395,10.1777750766437,16.9904679698521,10.3471919574349,10.2000403018881,10.3975383155073,11.8229987608627,10.2593338110716,10.0711074233923,29.6306257978185,10.2254447562626,11.6536107510965]},"error_y":{"color":"rgba(165,0,38,1)","width":[]},"error_x":{"color":"rgba(165,0,38,1)","width":[]},"line":{"color":"rgba(165,0,38,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2.86137551173474,4.36928191099016,3.05552756769812,2.95241754629121,3.49405448539833,4.48013656712865,3.24223558874779,3.45847359725269,3.96570778376274,3.64253547677859,4.34055505676126,4.45643575609251,3.58488699106174,3.21662982175713,4.28406934482008,4.54543213642878,3.96913338134411,4.00889717614582,3.33056378664279,2.78604121024255,3.02415974699117,4.29611290952744,3.32070955616155,3.42339679667222,4.27908585036826,4.5565811487931,3.47934188189776,3.61182155267593,4.36615058862194,3.77182165229835,3.24661099952182,3.6547046515929,3.34924271003421],"y":[42.129,74.795,62.013,56.752,72.028,81.495,62.879,68.588,69.451,57.046,79.696,82,71.263,66.662,77.045,76.904,71.028,73.044,65.033,59.908,61.34,74.193,63.61,70.303,71.626,78.77,70.815,73.053,76.99,68.564,73.017,72.37,60.308],"mode":"markers","marker":{"color":"rgba(64,0,75,1)","size":[11.7205488708701,10.0407051420611,19.2548888676555,10.8781907833807,97.3870633093004,10.4574634380832,80.5812974903287,24.4013852222222,14.5625648590856,11.6341003540068,10.4074375961649,18.6685307045114,10.3581548930641,11.5121696887325,13.2699431392102,10.1400244710565,10.2469236385316,11.5426787860308,10.1784285992536,13.1081105333447,11.7618768899378,10.1811060284903,20.4661569534102,15.6605689790423,11.6682073406898,10.2824149328464,11.3320785143087,11.1668400830401,11.5284735592203,14.2826539245671,15.5181289655641,10.2272529833648,11.2723212258945],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Afghanistan <br>Life Expectancy: 42.13 <br>GDP per capita: 726.73 <br>Pop.:    25,268,405","Country: Bahrain <br>Life Expectancy: 74.8 <br>GDP per capita: 23403.56 <br>Pop.:       656,397","Country: Bangladesh <br>Life Expectancy: 62.01 <br>GDP per capita: 1136.39 <br>Pop.:   135,656,790","Country: Cambodia <br>Life Expectancy: 56.75 <br>GDP per capita: 896.23 <br>Pop.:    12,926,707","Country: China <br>Life Expectancy: 72.03 <br>GDP per capita: 3119.28 <br>Pop.: 1,280,400,000","Country: Hong Kong, China <br>Life Expectancy: 81.5 <br>GDP per capita: 30209.02 <br>Pop.:     6,762,476","Country: India <br>Life Expectancy: 62.88 <br>GDP per capita: 1746.77 <br>Pop.: 1,034,172,547","Country: Indonesia <br>Life Expectancy: 68.59 <br>GDP per capita: 2873.91 <br>Pop.:   211,060,000","Country: Iran <br>Life Expectancy: 69.45 <br>GDP per capita: 9240.76 <br>Pop.:    66,907,826","Country: Iraq <br>Life Expectancy: 57.05 <br>GDP per capita: 4390.72 <br>Pop.:    24,001,816","Country: Israel <br>Life Expectancy: 79.7 <br>GDP per capita: 21905.6 <br>Pop.:     6,029,529","Country: Japan <br>Life Expectancy: 82 <br>GDP per capita: 28604.59 <br>Pop.:   127,065,841","Country: Jordan <br>Life Expectancy: 71.26 <br>GDP per capita: 3844.92 <br>Pop.:     5,307,470","Country: Korea, Dem. Rep. <br>Life Expectancy: 66.66 <br>GDP per capita: 1646.76 <br>Pop.:    22,215,365","Country: Korea, Rep. <br>Life Expectancy: 77.04 <br>GDP per capita: 19233.99 <br>Pop.:    47,969,150","Country: Kuwait <br>Life Expectancy: 76.9 <br>GDP per capita: 35110.11 <br>Pop.:     2,111,561","Country: Lebanon <br>Life Expectancy: 71.03 <br>GDP per capita: 9313.94 <br>Pop.:     3,677,780","Country: Malaysia <br>Life Expectancy: 73.04 <br>GDP per capita: 10206.98 <br>Pop.:    22,662,365","Country: Mongolia <br>Life Expectancy: 65.03 <br>GDP per capita: 2140.74 <br>Pop.:     2,674,234","Country: Myanmar <br>Life Expectancy: 59.91 <br>GDP per capita: 611 <br>Pop.:    45,598,081","Country: Nepal <br>Life Expectancy: 61.34 <br>GDP per capita: 1057.21 <br>Pop.:    25,873,917","Country: Oman <br>Life Expectancy: 74.19 <br>GDP per capita: 19774.84 <br>Pop.:     2,713,462","Country: Pakistan <br>Life Expectancy: 63.61 <br>GDP per capita: 2092.71 <br>Pop.:   153,403,524","Country: Philippines <br>Life Expectancy: 70.3 <br>GDP per capita: 2650.92 <br>Pop.:    82,995,088","Country: Saudi Arabia <br>Life Expectancy: 71.63 <br>GDP per capita: 19014.54 <br>Pop.:    24,501,530","Country: Singapore <br>Life Expectancy: 78.77 <br>GDP per capita: 36023.11 <br>Pop.:     4,197,776","Country: Sri Lanka <br>Life Expectancy: 70.82 <br>GDP per capita: 3015.38 <br>Pop.:    19,576,783","Country: Syria <br>Life Expectancy: 73.05 <br>GDP per capita: 4090.93 <br>Pop.:    17,155,814","Country: Taiwan <br>Life Expectancy: 76.99 <br>GDP per capita: 23235.42 <br>Pop.:    22,454,239","Country: Thailand <br>Life Expectancy: 68.56 <br>GDP per capita: 5913.19 <br>Pop.:    62,806,748","Country: Vietnam <br>Life Expectancy: 73.02 <br>GDP per capita: 1764.46 <br>Pop.:    80,908,147","Country: West Bank and Gaza <br>Life Expectancy: 72.37 <br>GDP per capita: 4515.49 <br>Pop.:     3,389,578","Country: Yemen, Rep. <br>Life Expectancy: 60.31 <br>GDP per capita: 2234.82 <br>Pop.:    18,701,257"],"frame":"2002","type":"scatter","name":"Asia","textfont":{"color":"rgba(64,0,75,1)","size":[11.7205488708701,10.0407051420611,19.2548888676555,10.8781907833807,97.3870633093004,10.4574634380832,80.5812974903287,24.4013852222222,14.5625648590856,11.6341003540068,10.4074375961649,18.6685307045114,10.3581548930641,11.5121696887325,13.2699431392102,10.1400244710565,10.2469236385316,11.5426787860308,10.1784285992536,13.1081105333447,11.7618768899378,10.1811060284903,20.4661569534102,15.6605689790423,11.6682073406898,10.2824149328464,11.3320785143087,11.1668400830401,11.5284735592203,14.2826539245671,15.5181289655641,10.2272529833648,11.2723212258945]},"error_y":{"color":"rgba(64,0,75,1)","width":[]},"error_x":{"color":"rgba(64,0,75,1)","width":[]},"line":{"color":"rgba(64,0,75,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.66315528761115,4.5107809622285,4.48409878922788,3.77952255671775,3.886308944764,4.06551954975935,4.24541914180452,4.50740380919791,4.45031979970118,4.4612888674186,4.47763923244914,4.35245757681066,4.17154906033606,4.49364207422891,4.53246198371447,4.44666293536129,3.81671805149487,4.52794883913899,4.6501518025891,4.07926227349578,4.30039780818413,3.89682152995671,3.85950307462284,4.13477547215859,4.31513072415055,4.3950724122632,4.46748425007351,4.53757931986706,3.81345326439531,4.46951273516943],"y":[75.651,78.98,78.32,74.09,72.14,74.876,75.51,77.18,78.37,79.59,78.67,78.256,72.59,80.5,77.783,80.24,73.981,78.53,79.05,74.67,77.29,71.322,73.213,73.8,76.66,79.78,80.04,80.62,70.845,78.471],"mode":"markers","marker":{"color":"rgba(39,100,25,1)","size":[10.2353705873426,10.5520509221177,10.6997271020778,10.2802062653105,10.5188449434737,10.3017471895693,10.6959271155184,10.3627430654303,10.3503446324087,14.0859683265745,15.6165855764614,10.7196496791196,10.6841205726351,10.0155629840198,10.260668089244,13.9495963473141,10.0450619367095,11.0963358115333,10.3054718248012,12.6322433525422,10.7080469397364,11.5250675973112,10.686048447271,10.3651564237555,10.1331948014546,12.7364343769243,10.6070535008114,10.4983661726201,14.5899412795431,14.0851080655849],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Albania <br>Life Expectancy: 75.65 <br>GDP per capita: 4604.21 <br>Pop.:     3,508,512","Country: Austria <br>Life Expectancy: 78.98 <br>GDP per capita: 32417.61 <br>Pop.:     8,148,312","Country: Belgium <br>Life Expectancy: 78.32 <br>GDP per capita: 30485.88 <br>Pop.:    10,311,970","Country: Bosnia and Herzegovina <br>Life Expectancy: 74.09 <br>GDP per capita: 6018.98 <br>Pop.:     4,165,416","Country: Bulgaria <br>Life Expectancy: 72.14 <br>GDP per capita: 7696.78 <br>Pop.:     7,661,799","Country: Croatia <br>Life Expectancy: 74.88 <br>GDP per capita: 11628.39 <br>Pop.:     4,481,020","Country: Czech Republic <br>Life Expectancy: 75.51 <br>GDP per capita: 17596.21 <br>Pop.:    10,256,295","Country: Denmark <br>Life Expectancy: 77.18 <br>GDP per capita: 32166.5 <br>Pop.:     5,374,693","Country: Finland <br>Life Expectancy: 78.37 <br>GDP per capita: 28204.59 <br>Pop.:     5,193,039","Country: France <br>Life Expectancy: 79.59 <br>GDP per capita: 28926.03 <br>Pop.:    59,925,035","Country: Germany <br>Life Expectancy: 78.67 <br>GDP per capita: 30035.8 <br>Pop.:    82,350,671","Country: Greece <br>Life Expectancy: 78.26 <br>GDP per capita: 22514.25 <br>Pop.:    10,603,863","Country: Hungary <br>Life Expectancy: 72.59 <br>GDP per capita: 14843.94 <br>Pop.:    10,083,313","Country: Iceland <br>Life Expectancy: 80.5 <br>GDP per capita: 31163.2 <br>Pop.:       288,030","Country: Ireland <br>Life Expectancy: 77.78 <br>GDP per capita: 34077.05 <br>Pop.:     3,879,155","Country: Italy <br>Life Expectancy: 80.24 <br>GDP per capita: 27968.1 <br>Pop.:    57,926,999","Country: Montenegro <br>Life Expectancy: 73.98 <br>GDP per capita: 6557.19 <br>Pop.:       720,230","Country: Netherlands <br>Life Expectancy: 78.53 <br>GDP per capita: 33724.76 <br>Pop.:    16,122,830","Country: Norway <br>Life Expectancy: 79.05 <br>GDP per capita: 44683.98 <br>Pop.:     4,535,591","Country: Poland <br>Life Expectancy: 74.67 <br>GDP per capita: 12002.24 <br>Pop.:    38,625,976","Country: Portugal <br>Life Expectancy: 77.29 <br>GDP per capita: 19970.91 <br>Pop.:    10,433,867","Country: Romania <br>Life Expectancy: 71.32 <br>GDP per capita: 7885.36 <br>Pop.:    22,404,337","Country: Serbia <br>Life Expectancy: 73.21 <br>GDP per capita: 7236.08 <br>Pop.:    10,111,559","Country: Slovak Republic <br>Life Expectancy: 73.8 <br>GDP per capita: 13638.78 <br>Pop.:     5,410,052","Country: Slovenia <br>Life Expectancy: 76.66 <br>GDP per capita: 20660.02 <br>Pop.:     2,011,497","Country: Spain <br>Life Expectancy: 79.78 <br>GDP per capita: 24835.47 <br>Pop.:    40,152,517","Country: Sweden <br>Life Expectancy: 80.04 <br>GDP per capita: 29341.63 <br>Pop.:     8,954,175","Country: Switzerland <br>Life Expectancy: 80.62 <br>GDP per capita: 34480.96 <br>Pop.:     7,361,757","Country: Turkey <br>Life Expectancy: 70.84 <br>GDP per capita: 6508.09 <br>Pop.:    67,308,928","Country: United Kingdom <br>Life Expectancy: 78.47 <br>GDP per capita: 29479 <br>Pop.:    59,912,431"],"frame":"2002","type":"scatter","name":"Europe","textfont":{"color":"rgba(39,100,25,1)","size":[10.2353705873426,10.5520509221177,10.6997271020778,10.2802062653105,10.5188449434737,10.3017471895693,10.6959271155184,10.3627430654303,10.3503446324087,14.0859683265745,15.6165855764614,10.7196496791196,10.6841205726351,10.0155629840198,10.260668089244,13.9495963473141,10.0450619367095,11.0963358115333,10.3054718248012,12.6322433525422,10.7080469397364,11.5250675973112,10.686048447271,10.3651564237555,10.1331948014546,12.7364343769243,10.6070535008114,10.4983661726201,14.5899412795431,14.0851080655849]},"error_y":{"color":"rgba(39,100,25,1)","width":[]},"error_x":{"color":"rgba(39,100,25,1)","width":[]},"line":{"color":"rgba(39,100,25,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[4.4869651144324,4.365297028372],"y":[80.37,79.11],"mode":"markers","marker":{"color":"rgba(49,54,149,1)","size":[11.3300315381632,10.262639372797],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Australia <br>Life Expectancy: 80.37 <br>GDP per capita: 30687.75 <br>Pop.:    19,546,792","Country: New Zealand <br>Life Expectancy: 79.11 <br>GDP per capita: 23189.8 <br>Pop.:     3,908,037"],"frame":"2002","type":"scatter","name":"Oceania","textfont":{"color":"rgba(49,54,149,1)","size":[11.3300315381632,10.262639372797]},"error_y":{"color":"rgba(49,54,149,1)","width":[]},"error_x":{"color":"rgba(49,54,149,1)","width":[]},"line":{"color":"rgba(49,54,149,1)"},"xaxis":"x","yaxis":"y","visible":true}],"traces":[0,1,2,3,4]},{"name":"2007","data":[{"x":[3.79402544509666,3.68099065562682,3.1587498285201,4.09933015629768,3.08530235219712,2.63353984732021,3.31007599301138,2.848814873635,3.23148583131337,2.99394204506796,2.44334414004637,3.56021253312911,3.18885823537455,3.31858116595608,3.74672610693845,4.08472243900371,2.80710831941093,2.83935583435696,4.12078722664154,2.87665060639063,3.1230701584329,2.9743524119827,2.76285235400399,3.16531831968284,3.19571467604724,2.61753222691212,4.08125724466051,3.01902074595738,2.88044194586588,3.0181100381011,3.25603221652431,4.03969130967891,3.58208328429303,2.91576148434958,3.68224081186337,2.79216530171644,3.30405457229069,3.88480230343241,2.93605531183875,3.20369500466057,3.23362351372365,2.93577962517273,2.96667714274902,3.96706370233863,3.41537321502711,3.65451158423759,3.04433674769752,2.94594592049266,3.85082524675123,3.02382022004224,3.10421784482941,2.67182915731664],"y":[72.301,42.731,56.728,50.728,52.295,49.58,50.43,44.741,50.651,65.152,46.462,55.322,48.328,54.791,71.338,51.579,58.04,52.947,56.735,59.448,60.022,56.007,46.388,54.11,42.592,45.678,73.952,59.443,48.303,54.467,64.164,72.801,71.164,42.082,52.906,56.867,46.859,76.442,46.242,65.528,63.062,42.568,48.159,49.339,58.556,39.613,52.517,58.42,73.923,51.542,42.384,43.487],"mode":"markers","marker":{"color":"rgba(127,59,8,1)","size":[12.2709965296869,10.8436389918048,10.5472733476375,10.1077796996099,10.9737106035877,10.5685813243593,11.2037294038425,10.2941040805455,10.694733506808,10.0444292312689,14.4055101007124,10.2553071562523,11.2253735266587,10.0297830899874,15.4742010526837,10.0335251979909,10.3307932835106,15.2180709698405,10.0952031262216,10.1111396589875,11.5570783291724,10.6748723574789,10.0963753034856,12.4264059809024,10.1332734289268,10.2139002367003,10.407941644674,11.3041542269071,10.905517379138,10.8171103420353,10.2190958608919,10.0812805351425,12.2999330092875,11.3576647264597,10.1361694725677,10.876017470906,19.2121880074623,10.0503763893986,10.6006659059818,10.0095259366705,10.8331974409503,10.4152889451348,10.6182878104246,12.998888442788,12.8825239473189,10.0732392380344,12.5990494546817,10.3850540201941,10.6972828251373,11.9868716540785,10.7976063607289,10.8361766850153],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Algeria <br>Life Expectancy: 72.3 <br>GDP per capita: 6223.37 <br>Pop.:    33,333,216","Country: Angola <br>Life Expectancy: 42.73 <br>GDP per capita: 4797.23 <br>Pop.:    12,420,476","Country: Benin <br>Life Expectancy: 56.73 <br>GDP per capita: 1441.28 <br>Pop.:     8,078,314","Country: Botswana <br>Life Expectancy: 50.73 <br>GDP per capita: 12569.85 <br>Pop.:     1,639,131","Country: Burkina Faso <br>Life Expectancy: 52.3 <br>GDP per capita: 1217.03 <br>Pop.:    14,326,203","Country: Burundi <br>Life Expectancy: 49.58 <br>GDP per capita: 430.07 <br>Pop.:     8,390,505","Country: Cameroon <br>Life Expectancy: 50.43 <br>GDP per capita: 2042.1 <br>Pop.:    17,696,293","Country: Central African Republic <br>Life Expectancy: 44.74 <br>GDP per capita: 706.02 <br>Pop.:     4,369,038","Country: Chad <br>Life Expectancy: 50.65 <br>GDP per capita: 1704.06 <br>Pop.:    10,238,807","Country: Comoros <br>Life Expectancy: 65.15 <br>GDP per capita: 986.15 <br>Pop.:       710,960","Country: Congo, Dem. Rep. <br>Life Expectancy: 46.46 <br>GDP per capita: 277.55 <br>Pop.:    64,606,759","Country: Congo, Rep. <br>Life Expectancy: 55.32 <br>GDP per capita: 3632.56 <br>Pop.:     3,800,610","Country: Cote d'Ivoire <br>Life Expectancy: 48.33 <br>GDP per capita: 1544.75 <br>Pop.:    18,013,409","Country: Djibouti <br>Life Expectancy: 54.79 <br>GDP per capita: 2082.48 <br>Pop.:       496,374","Country: Egypt <br>Life Expectancy: 71.34 <br>GDP per capita: 5581.18 <br>Pop.:    80,264,543","Country: Equatorial Guinea <br>Life Expectancy: 51.58 <br>GDP per capita: 12154.09 <br>Pop.:       551,201","Country: Eritrea <br>Life Expectancy: 58.04 <br>GDP per capita: 641.37 <br>Pop.:     4,906,585","Country: Ethiopia <br>Life Expectancy: 52.95 <br>GDP per capita: 690.81 <br>Pop.:    76,511,887","Country: Gabon <br>Life Expectancy: 56.74 <br>GDP per capita: 13206.48 <br>Pop.:     1,454,867","Country: Gambia <br>Life Expectancy: 59.45 <br>GDP per capita: 752.75 <br>Pop.:     1,688,359","Country: Ghana <br>Life Expectancy: 60.02 <br>GDP per capita: 1327.61 <br>Pop.:    22,873,338","Country: Guinea <br>Life Expectancy: 56.01 <br>GDP per capita: 942.65 <br>Pop.:     9,947,814","Country: Guinea-Bissau <br>Life Expectancy: 46.39 <br>GDP per capita: 579.23 <br>Pop.:     1,472,041","Country: Kenya <br>Life Expectancy: 54.11 <br>GDP per capita: 1463.25 <br>Pop.:    35,610,177","Country: Lesotho <br>Life Expectancy: 42.59 <br>GDP per capita: 1569.33 <br>Pop.:     2,012,649","Country: Liberia <br>Life Expectancy: 45.68 <br>GDP per capita: 414.51 <br>Pop.:     3,193,942","Country: Libya <br>Life Expectancy: 73.95 <br>GDP per capita: 12057.5 <br>Pop.:     6,036,914","Country: Madagascar <br>Life Expectancy: 59.44 <br>GDP per capita: 1044.77 <br>Pop.:    19,167,654","Country: Malawi <br>Life Expectancy: 48.3 <br>GDP per capita: 759.35 <br>Pop.:    13,327,079","Country: Mali <br>Life Expectancy: 54.47 <br>GDP per capita: 1042.58 <br>Pop.:    12,031,795","Country: Mauritania <br>Life Expectancy: 64.16 <br>GDP per capita: 1803.15 <br>Pop.:     3,270,065","Country: Mauritius <br>Life Expectancy: 72.8 <br>GDP per capita: 10956.99 <br>Pop.:     1,250,882","Country: Morocco <br>Life Expectancy: 71.16 <br>GDP per capita: 3820.18 <br>Pop.:    33,757,175","Country: Mozambique <br>Life Expectancy: 42.08 <br>GDP per capita: 823.69 <br>Pop.:    19,951,656","Country: Namibia <br>Life Expectancy: 52.91 <br>GDP per capita: 4811.06 <br>Pop.:     2,055,080","Country: Niger <br>Life Expectancy: 56.87 <br>GDP per capita: 619.68 <br>Pop.:    12,894,865","Country: Nigeria <br>Life Expectancy: 46.86 <br>GDP per capita: 2013.98 <br>Pop.:   135,031,164","Country: Reunion <br>Life Expectancy: 76.44 <br>GDP per capita: 7670.12 <br>Pop.:       798,094","Country: Rwanda <br>Life Expectancy: 46.24 <br>GDP per capita: 863.09 <br>Pop.:     8,860,588","Country: Sao Tome and Principe <br>Life Expectancy: 65.53 <br>GDP per capita: 1598.44 <br>Pop.:       199,579","Country: Senegal <br>Life Expectancy: 63.06 <br>GDP per capita: 1712.47 <br>Pop.:    12,267,493","Country: Sierra Leone <br>Life Expectancy: 42.57 <br>GDP per capita: 862.54 <br>Pop.:     6,144,562","Country: Somalia <br>Life Expectancy: 48.16 <br>GDP per capita: 926.14 <br>Pop.:     9,118,773","Country: South Africa <br>Life Expectancy: 49.34 <br>GDP per capita: 9269.66 <br>Pop.:    43,997,828","Country: Sudan <br>Life Expectancy: 58.56 <br>GDP per capita: 2602.39 <br>Pop.:    42,292,929","Country: Swaziland <br>Life Expectancy: 39.61 <br>GDP per capita: 4513.48 <br>Pop.:     1,133,066","Country: Tanzania <br>Life Expectancy: 52.52 <br>GDP per capita: 1107.48 <br>Pop.:    38,139,640","Country: Togo <br>Life Expectancy: 58.42 <br>GDP per capita: 882.97 <br>Pop.:     5,701,579","Country: Tunisia <br>Life Expectancy: 73.92 <br>GDP per capita: 7092.92 <br>Pop.:    10,276,158","Country: Uganda <br>Life Expectancy: 51.54 <br>GDP per capita: 1056.38 <br>Pop.:    29,170,398","Country: Zambia <br>Life Expectancy: 42.38 <br>GDP per capita: 1271.21 <br>Pop.:    11,746,035","Country: Zimbabwe <br>Life Expectancy: 43.49 <br>GDP per capita: 469.71 <br>Pop.:    12,311,143"],"frame":"2007","type":"scatter","name":"Africa","textfont":{"color":"rgba(127,59,8,1)","size":[12.2709965296869,10.8436389918048,10.5472733476375,10.1077796996099,10.9737106035877,10.5685813243593,11.2037294038425,10.2941040805455,10.694733506808,10.0444292312689,14.4055101007124,10.2553071562523,11.2253735266587,10.0297830899874,15.4742010526837,10.0335251979909,10.3307932835106,15.2180709698405,10.0952031262216,10.1111396589875,11.5570783291724,10.6748723574789,10.0963753034856,12.4264059809024,10.1332734289268,10.2139002367003,10.407941644674,11.3041542269071,10.905517379138,10.8171103420353,10.2190958608919,10.0812805351425,12.2999330092875,11.3576647264597,10.1361694725677,10.876017470906,19.2121880074623,10.0503763893986,10.6006659059818,10.0095259366705,10.8331974409503,10.4152889451348,10.6182878104246,12.998888442788,12.8825239473189,10.0732392380344,12.5990494546817,10.3850540201941,10.6972828251373,11.9868716540785,10.7976063607289,10.8361766850153]},"error_y":{"color":"rgba(127,59,8,1)","width":[]},"error_x":{"color":"rgba(127,59,8,1)","width":[]},"line":{"color":"rgba(127,59,8,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[4.10650977201769,3.58230625931688,3.95740617340857,4.56013669242519,4.11963981438709,3.84550611104731,3.98430499758718,3.95173097080165,3.77998406330737,3.83716291957619,3.75802981175127,3.71483669984604,3.0797733480287,3.55002410662006,3.86456330372846,4.07836889751077,3.43922544380543,3.99163295350919,3.6204315729333,3.86975405900188,4.28620284789525,4.25547776303394,4.632979883279,4.02577526370184,4.05750656798335],"y":[75.32,65.554,72.39,80.653,78.553,72.889,78.782,78.273,72.235,74.994,71.878,70.259,60.916,70.198,72.567,76.195,72.899,75.537,71.752,71.421,78.746,69.819,78.242,76.384,73.747],"mode":"markers","marker":{"color":"rgba(165,0,38,1)","size":[12.7466320597595,10.618313678317,22.9647034353262,12.274881832514,11.1073867252976,13.0145676616908,10.2780541112702,10.7751478429486,10.6319963600516,10.93477068923,10.4695586912161,10.8540443003089,10.5762467521187,10.5066934498572,10.1856564569397,17.4150675133979,10.3832642214056,10.2171921478229,10.450956946503,11.9530426619218,10.2649909621444,10.0680207490831,30.5496131140462,10.2312060614349,11.7762608713922],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Argentina <br>Life Expectancy: 75.32 <br>GDP per capita: 12779.38 <br>Pop.:    40,301,927","Country: Bolivia <br>Life Expectancy: 65.55 <br>GDP per capita: 3822.14 <br>Pop.:     9,119,152","Country: Brazil <br>Life Expectancy: 72.39 <br>GDP per capita: 9065.8 <br>Pop.:   190,010,647","Country: Canada <br>Life Expectancy: 80.65 <br>GDP per capita: 36319.24 <br>Pop.:    33,390,141","Country: Chile <br>Life Expectancy: 78.55 <br>GDP per capita: 13171.64 <br>Pop.:    16,284,741","Country: Colombia <br>Life Expectancy: 72.89 <br>GDP per capita: 7006.58 <br>Pop.:    44,227,550","Country: Costa Rica <br>Life Expectancy: 78.78 <br>GDP per capita: 9645.06 <br>Pop.:     4,133,884","Country: Cuba <br>Life Expectancy: 78.27 <br>GDP per capita: 8948.1 <br>Pop.:    11,416,987","Country: Dominican Republic <br>Life Expectancy: 72.24 <br>GDP per capita: 6025.37 <br>Pop.:     9,319,622","Country: Ecuador <br>Life Expectancy: 74.99 <br>GDP per capita: 6873.26 <br>Pop.:    13,755,680","Country: El Salvador <br>Life Expectancy: 71.88 <br>GDP per capita: 5728.35 <br>Pop.:     6,939,688","Country: Guatemala <br>Life Expectancy: 70.26 <br>GDP per capita: 5186.05 <br>Pop.:    12,572,928","Country: Haiti <br>Life Expectancy: 60.92 <br>GDP per capita: 1201.64 <br>Pop.:     8,502,814","Country: Honduras <br>Life Expectancy: 70.2 <br>GDP per capita: 3548.33 <br>Pop.:     7,483,763","Country: Jamaica <br>Life Expectancy: 72.57 <br>GDP per capita: 7320.88 <br>Pop.:     2,780,132","Country: Mexico <br>Life Expectancy: 76.19 <br>GDP per capita: 11977.57 <br>Pop.:   108,700,891","Country: Nicaragua <br>Life Expectancy: 72.9 <br>GDP per capita: 2749.32 <br>Pop.:     5,675,356","Country: Panama <br>Life Expectancy: 75.54 <br>GDP per capita: 9809.19 <br>Pop.:     3,242,173","Country: Paraguay <br>Life Expectancy: 71.75 <br>GDP per capita: 4172.84 <br>Pop.:     6,667,147","Country: Peru <br>Life Expectancy: 71.42 <br>GDP per capita: 7408.91 <br>Pop.:    28,674,757","Country: Puerto Rico <br>Life Expectancy: 78.75 <br>GDP per capita: 19328.71 <br>Pop.:     3,942,491","Country: Trinidad and Tobago <br>Life Expectancy: 69.82 <br>GDP per capita: 18008.51 <br>Pop.:     1,056,608","Country: United States <br>Life Expectancy: 78.24 <br>GDP per capita: 42951.65 <br>Pop.:   301,139,947","Country: Uruguay <br>Life Expectancy: 76.38 <br>GDP per capita: 10611.46 <br>Pop.:     3,447,496","Country: Venezuela <br>Life Expectancy: 73.75 <br>GDP per capita: 11415.81 <br>Pop.:    26,084,662"],"frame":"2007","type":"scatter","name":"Americas","textfont":{"color":"rgba(165,0,38,1)","size":[12.7466320597595,10.618313678317,22.9647034353262,12.274881832514,11.1073867252976,13.0145676616908,10.2780541112702,10.7751478429486,10.6319963600516,10.93477068923,10.4695586912161,10.8540443003089,10.5762467521187,10.5066934498572,10.1856564569397,17.4150675133979,10.3832642214056,10.2171921478229,10.450956946503,11.9530426619218,10.2649909621444,10.0680207490831,30.5496131140462,10.2312060614349,11.7762608713922]},"error_y":{"color":"rgba(165,0,38,1)","width":[]},"error_x":{"color":"rgba(165,0,38,1)","width":[]},"line":{"color":"rgba(165,0,38,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[2.98881764549129,4.47415867018597,3.143406361057,3.23395473727517,3.6954041667466,4.59906367268864,3.38955773121288,3.54908318988216,4.06467188236304,3.65041068311967,4.40693643553008,4.50045697098462,3.65508665949928,3.20223362703668,4.3682522837381,4.67492531406996,4.01957563822304,4.09522710701315,3.49076900592376,2.97497199429807,3.03796794384465,4.34862010618943,3.41596567540354,3.50385616482709,4.33555481758265,4.67341887079622,3.59880094359832,3.62164856315343,4.45815837772449,3.87264545733796,3.38767031916547,3.4807755960326,3.35808147396803],"y":[43.828,75.635,64.062,59.723,72.961,82.208,64.698,70.65,70.964,59.545,80.745,82.603,72.535,67.297,78.623,77.588,71.993,74.241,66.803,62.069,63.785,75.64,65.483,71.688,72.777,79.972,72.396,74.143,78.4,70.616,74.249,73.422,62.698],"mode":"markers","marker":{"color":"rgba(64,0,75,1)","size":[12.1724874322218,10.0442663113243,20.2644566699665,10.9604459715643,100,10.472338226962,85.7838004936794,25.2536606091649,14.7363195601873,11.8728372482573,10.4345442807108,18.6959773573204,10.4090527354904,11.5863170331194,13.3433588112861,10.1669160221019,10.2635431109565,11.6900316514632,10.1920718989991,13.2558031622812,11.9685383484698,10.2146479484697,21.5491338755077,16.212203421268,11.8797581038861,10.3066606558007,11.3867803019693,11.3141937675086,11.5776194832809,14.4370013588834,15.8153168537922,10.270167338986,11.5119224763155],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Afghanistan <br>Life Expectancy: 43.83 <br>GDP per capita: 974.58 <br>Pop.:    31,889,923","Country: Bahrain <br>Life Expectancy: 75.64 <br>GDP per capita: 29796.05 <br>Pop.:       708,573","Country: Bangladesh <br>Life Expectancy: 64.06 <br>GDP per capita: 1391.25 <br>Pop.:   150,448,339","Country: Cambodia <br>Life Expectancy: 59.72 <br>GDP per capita: 1713.78 <br>Pop.:    14,131,858","Country: China <br>Life Expectancy: 72.96 <br>GDP per capita: 4959.11 <br>Pop.: 1,318,683,096","Country: Hong Kong, China <br>Life Expectancy: 82.21 <br>GDP per capita: 39724.98 <br>Pop.:     6,980,412","Country: India <br>Life Expectancy: 64.7 <br>GDP per capita: 2452.21 <br>Pop.: 1,110,396,331","Country: Indonesia <br>Life Expectancy: 70.65 <br>GDP per capita: 3540.65 <br>Pop.:   223,547,000","Country: Iran <br>Life Expectancy: 70.96 <br>GDP per capita: 11605.71 <br>Pop.:    69,453,570","Country: Iraq <br>Life Expectancy: 59.55 <br>GDP per capita: 4471.06 <br>Pop.:    27,499,638","Country: Israel <br>Life Expectancy: 80.75 <br>GDP per capita: 25523.28 <br>Pop.:     6,426,679","Country: Japan <br>Life Expectancy: 82.6 <br>GDP per capita: 31656.07 <br>Pop.:   127,467,972","Country: Jordan <br>Life Expectancy: 72.53 <br>GDP per capita: 4519.46 <br>Pop.:     6,053,193","Country: Korea, Dem. Rep. <br>Life Expectancy: 67.3 <br>GDP per capita: 1593.07 <br>Pop.:    23,301,725","Country: Korea, Rep. <br>Life Expectancy: 78.62 <br>GDP per capita: 23348.14 <br>Pop.:    49,044,790","Country: Kuwait <br>Life Expectancy: 77.59 <br>GDP per capita: 47306.99 <br>Pop.:     2,505,559","Country: Lebanon <br>Life Expectancy: 71.99 <br>GDP per capita: 10461.06 <br>Pop.:     3,921,278","Country: Malaysia <br>Life Expectancy: 74.24 <br>GDP per capita: 12451.66 <br>Pop.:    24,821,286","Country: Mongolia <br>Life Expectancy: 66.8 <br>GDP per capita: 3095.77 <br>Pop.:     2,874,127","Country: Myanmar <br>Life Expectancy: 62.07 <br>GDP per capita: 944 <br>Pop.:    47,761,980","Country: Nepal <br>Life Expectancy: 63.78 <br>GDP per capita: 1091.36 <br>Pop.:    28,901,790","Country: Oman <br>Life Expectancy: 75.64 <br>GDP per capita: 22316.19 <br>Pop.:     3,204,897","Country: Pakistan <br>Life Expectancy: 65.48 <br>GDP per capita: 2605.95 <br>Pop.:   169,270,617","Country: Philippines <br>Life Expectancy: 71.69 <br>GDP per capita: 3190.48 <br>Pop.:    91,077,287","Country: Saudi Arabia <br>Life Expectancy: 72.78 <br>GDP per capita: 21654.83 <br>Pop.:    27,601,038","Country: Singapore <br>Life Expectancy: 79.97 <br>GDP per capita: 47143.18 <br>Pop.:     4,553,009","Country: Sri Lanka <br>Life Expectancy: 72.4 <br>GDP per capita: 3970.1 <br>Pop.:    20,378,239","Country: Syria <br>Life Expectancy: 74.14 <br>GDP per capita: 4184.55 <br>Pop.:    19,314,747","Country: Taiwan <br>Life Expectancy: 78.4 <br>GDP per capita: 28718.28 <br>Pop.:    23,174,294","Country: Thailand <br>Life Expectancy: 70.62 <br>GDP per capita: 7458.4 <br>Pop.:    65,068,149","Country: Vietnam <br>Life Expectancy: 74.25 <br>GDP per capita: 2441.58 <br>Pop.:    85,262,356","Country: West Bank and Gaza <br>Life Expectancy: 73.42 <br>GDP per capita: 3025.35 <br>Pop.:     4,018,332","Country: Yemen, Rep. <br>Life Expectancy: 62.7 <br>GDP per capita: 2280.77 <br>Pop.:    22,211,743"],"frame":"2007","type":"scatter","name":"Asia","textfont":{"color":"rgba(64,0,75,1)","size":[12.1724874322218,10.0442663113243,20.2644566699665,10.9604459715643,100,10.472338226962,85.7838004936794,25.2536606091649,14.7363195601873,11.8728372482573,10.4345442807108,18.6959773573204,10.4090527354904,11.5863170331194,13.3433588112861,10.1669160221019,10.2635431109565,11.6900316514632,10.1920718989991,13.2558031622812,11.9685383484698,10.2146479484697,21.5491338755077,16.212203421268,11.8797581038861,10.3066606558007,11.3867803019693,11.3141937675086,11.5776194832809,14.4370013588834,15.8153168537922,10.270167338986,11.5119224763155]},"error_y":{"color":"rgba(64,0,75,1)","width":[]},"error_x":{"color":"rgba(64,0,75,1)","width":[]},"line":{"color":"rgba(64,0,75,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[3.77356920876217,4.55782580062218,4.52753459151331,3.87194045947979,4.02860349094832,4.16492428251317,4.35856884462783,4.54750911081685,4.52123074598147,4.48387269225076,4.50745611553652,4.43993889119905,4.25548825822109,4.55847803563392,4.60933819969144,4.45590597950278,3.96632461957789,4.56582342810493,4.69335042800253,4.18723649435127,4.31195820191596,4.03376444688129,3.990628940935,4.27133768016358,4.41108505321789,4.4597100052953,4.52968372605252,4.57410560181062,3.92728187211911,4.52118074293136],"y":[76.423,79.829,79.441,74.852,73.005,75.748,76.486,78.332,79.313,80.657,79.406,79.483,73.338,81.757,78.885,80.546,74.543,79.762,80.196,75.563,78.098,72.476,74.002,74.663,77.926,80.941,80.884,81.701,71.777,79.425],"mode":"markers","marker":{"color":"rgba(39,100,25,1)","size":[10.2416506154221,10.555563973006,10.7052048159767,10.3066053026062,10.495711198625,10.3025861556185,10.6940466767272,10.3691197397776,10.3534447525617,14.1650654477963,15.6200204093955,10.7266406305938,10.6754384479777,10.0165117691687,10.2763615730268,13.9646621081262,10.0426393642274,11.1268983509416,10.3117739668573,12.6248901140693,10.7223097038378,11.5163120324107,10.6886902484344,10.3677124991331,10.1330410956668,12.7566150186124,10.6123030448841,10.5115324520502,14.8526962046929,14.144065496927],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Albania <br>Life Expectancy: 76.42 <br>GDP per capita: 5937.03 <br>Pop.:     3,600,523","Country: Austria <br>Life Expectancy: 79.83 <br>GDP per capita: 36126.49 <br>Pop.:     8,199,783","Country: Belgium <br>Life Expectancy: 79.44 <br>GDP per capita: 33692.61 <br>Pop.:    10,392,226","Country: Bosnia and Herzegovina <br>Life Expectancy: 74.85 <br>GDP per capita: 7446.3 <br>Pop.:     4,552,198","Country: Bulgaria <br>Life Expectancy: 73 <br>GDP per capita: 10680.79 <br>Pop.:     7,322,858","Country: Croatia <br>Life Expectancy: 75.75 <br>GDP per capita: 14619.22 <br>Pop.:     4,493,312","Country: Czech Republic <br>Life Expectancy: 76.49 <br>GDP per capita: 22833.31 <br>Pop.:    10,228,744","Country: Denmark <br>Life Expectancy: 78.33 <br>GDP per capita: 35278.42 <br>Pop.:     5,468,120","Country: Finland <br>Life Expectancy: 79.31 <br>GDP per capita: 33207.08 <br>Pop.:     5,238,460","Country: France <br>Life Expectancy: 80.66 <br>GDP per capita: 30470.02 <br>Pop.:    61,083,916","Country: Germany <br>Life Expectancy: 79.41 <br>GDP per capita: 32170.37 <br>Pop.:    82,400,996","Country: Greece <br>Life Expectancy: 79.48 <br>GDP per capita: 27538.41 <br>Pop.:    10,706,290","Country: Hungary <br>Life Expectancy: 73.34 <br>GDP per capita: 18008.94 <br>Pop.:     9,956,108","Country: Iceland <br>Life Expectancy: 81.76 <br>GDP per capita: 36180.79 <br>Pop.:       301,931","Country: Ireland <br>Life Expectancy: 78.89 <br>GDP per capita: 40676 <br>Pop.:     4,109,086","Country: Italy <br>Life Expectancy: 80.55 <br>GDP per capita: 28569.72 <br>Pop.:    58,147,733","Country: Montenegro <br>Life Expectancy: 74.54 <br>GDP per capita: 9253.9 <br>Pop.:       684,736","Country: Netherlands <br>Life Expectancy: 79.76 <br>GDP per capita: 36797.93 <br>Pop.:    16,570,613","Country: Norway <br>Life Expectancy: 80.2 <br>GDP per capita: 49357.19 <br>Pop.:     4,627,926","Country: Poland <br>Life Expectancy: 75.56 <br>GDP per capita: 15389.92 <br>Pop.:    38,518,241","Country: Portugal <br>Life Expectancy: 78.1 <br>GDP per capita: 20509.65 <br>Pop.:    10,642,836","Country: Romania <br>Life Expectancy: 72.48 <br>GDP per capita: 10808.48 <br>Pop.:    22,276,056","Country: Serbia <br>Life Expectancy: 74 <br>GDP per capita: 9786.53 <br>Pop.:    10,150,265","Country: Slovak Republic <br>Life Expectancy: 74.66 <br>GDP per capita: 18678.31 <br>Pop.:     5,447,502","Country: Slovenia <br>Life Expectancy: 77.93 <br>GDP per capita: 25768.26 <br>Pop.:     2,009,245","Country: Spain <br>Life Expectancy: 80.94 <br>GDP per capita: 28821.06 <br>Pop.:    40,448,191","Country: Sweden <br>Life Expectancy: 80.88 <br>GDP per capita: 33859.75 <br>Pop.:     9,031,088","Country: Switzerland <br>Life Expectancy: 81.7 <br>GDP per capita: 37506.42 <br>Pop.:     7,554,661","Country: Turkey <br>Life Expectancy: 71.78 <br>GDP per capita: 8458.28 <br>Pop.:    71,158,647","Country: United Kingdom <br>Life Expectancy: 79.42 <br>GDP per capita: 33203.26 <br>Pop.:    60,776,238"],"frame":"2007","type":"scatter","name":"Europe","textfont":{"color":"rgba(39,100,25,1)","size":[10.2416506154221,10.555563973006,10.7052048159767,10.3066053026062,10.495711198625,10.3025861556185,10.6940466767272,10.3691197397776,10.3534447525617,14.1650654477963,15.6200204093955,10.7266406305938,10.6754384479777,10.0165117691687,10.2763615730268,13.9646621081262,10.0426393642274,11.1268983509416,10.3117739668573,12.6248901140693,10.7223097038378,11.5163120324107,10.6886902484344,10.3677124991331,10.1330410956668,12.7566150186124,10.6123030448841,10.5115324520502,14.8526962046929,14.144065496927]},"error_y":{"color":"rgba(39,100,25,1)","width":[]},"error_x":{"color":"rgba(39,100,25,1)","width":[]},"line":{"color":"rgba(39,100,25,1)"},"xaxis":"x","yaxis":"y","visible":true},{"x":[4.53700472145269,4.40114211228811],"y":[81.235,80.204],"mode":"markers","marker":{"color":"rgba(49,54,149,1)","size":[11.3905981708185,10.276817844426],"sizemode":"diameter","symbol":"circle","line":{"color":"#FFFFFF","width":2}},"text":["Country: Australia <br>Life Expectancy: 81.24 <br>GDP per capita: 34435.37 <br>Pop.:    20,434,176","Country: New Zealand <br>Life Expectancy: 80.2 <br>GDP per capita: 25185.01 <br>Pop.:     4,115,771"],"frame":"2007","type":"scatter","name":"Oceania","textfont":{"color":"rgba(49,54,149,1)","size":[11.3905981708185,10.276817844426]},"error_y":{"color":"rgba(49,54,149,1)","width":[]},"error_x":{"color":"rgba(49,54,149,1)","width":[]},"line":{"color":"rgba(49,54,149,1)"},"xaxis":"x","yaxis":"y","visible":true}],"traces":[0,1,2,3,4]}],"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>


</section>

 ]]></description>
  <category>data-visualization</category>
  <category>economia</category>
  <category>repost</category>
  <category>tutorial-R</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/repost-gapminder/index.html</guid>
  <pubDate>Mon, 06 May 2019 03:00:00 GMT</pubDate>
  <media:content url="https:://www.restateinsight.com/static/gapminder.png" medium="image" type="image/png" height="89" width="144"/>
</item>
<item>
  <title>MQO - teoria assintótica</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/repost-mqo-teoria-assintotica/index.html</link>
  <description><![CDATA[ 




<section id="disclaimer" class="level1">
<h1>Disclaimer</h1>
<p>Este é um repost antigo que fiz ainda na época do mestrado em economia. Apesar de intuitivo o código dos loops abaixo é muito ineficiente. De maneira geral, <code>for</code>-loops são melhores do que loops feitos com <code>repeat</code>; melhor ainda é montar funções e usar <code>parallel::mclapply</code> ou <code>replicate</code>. Além disso, é importante pre-definir o tamanho do objeto antes de um loop, e.g., <code>x &lt;- vector("numeric", length = 10000)</code>.</p>
</section>
<section id="mínimos-quadrados" class="level1">
<h1>Mínimos Quadrados</h1>
<p>A maior parte dos resultados assintóticos dos estimadores de mínimos quadrados (MQO) são um misto da LGN, do TCL e de outros resultados de convergência como o método delta e o teorema de Slutsky. Um resultado simples que podemos visualizar através de uma simulação é a propriedade de não-viés dos estimadores de MQO. Em linhas gerais, desde que o termo de erro seja ortogonal às variáveis independentes, os estimadores de MQO não serão viesados, i.e., os estimadores <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Cbeta%7D"> vão convergir para os verdadeiros <img src="https://latex.codecogs.com/png.latex?%5Cbeta">. Dizer que eles são ortogonais costuma ser o mesmo que dizer que eles são independentes. Isto é, na prática queremos que a esperança condicional de <img src="https://latex.codecogs.com/png.latex?u_%7Bt%7D">, o erro, dado <img src="https://latex.codecogs.com/png.latex?x_%7Bt%7D">, as variáveis explicativas, seja nulo:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cmathbb%7BE%7D(u_%7Bt%7D%20%7C%20x_%7Bt%7D)%20=%200%0A"></p>
<p>Suponha que o modelo verdadeiro (o processo gerador de dados) seja da forma:</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Bequation%7D%0A%20%20%20%20y_%7Bt%7D%20=%205%20+%202.5x_%7B1t%7D%20-1.75x_%7B2t%7D%20+%205x_%7B3t%7D%20+%20u_%7Bt%7D%0A%5Cend%7Bequation%7D"> onde <img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Balign%7D%0A%20%20%20%20x_%7B1%7D%20&amp;%20%5Csim%20N(0,1)%5C%5C%0A%20%20%20%20x_%7B2%7D%20&amp;%20%5Csim%20%5Ctext%7BBeta%7D(2,%205)%5C%5C%0A%20%20%20%20x_%7B3%7D%20&amp;%20%5Csim%20U(0,1)%5C%5C%0A%20%20%20%20u_%7Bt%7D%20&amp;%20%5Csim%20N(0,1)%0A%5Cend%7Balign%7D"></p>
<p>Se as variáveis <img src="https://latex.codecogs.com/png.latex?x_%7B1%7D,%20x_%7B2%7D"> e <img src="https://latex.codecogs.com/png.latex?x_%7B3%7D"> forem independentes de <img src="https://latex.codecogs.com/png.latex?u_%7Bt%7D"> então o modelo: <img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Bequation%7D%0A%20%20%20%20y_%7Bt%7D%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7Dx_%7B1t%7D%20+%20%5Cbeta_%7B2%7Dx_%7B2t%7D%20+%20%5Cbeta_%7B3%7Dx_%7B3t%7D%0A%5Cend%7Bequation%7D"> fornecerá estimativas consistentes para os betas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Modelo verdadeiro (DGP)</span></span>
<span id="cb1-2">x1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>)</span>
<span id="cb1-3">x2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbeta</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape1 =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape2 =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb1-4">x3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runif</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>)</span>
<span id="cb1-5">y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.5</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.75</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>)</span>
<span id="cb1-6"></span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> x1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> x2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> x3))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = y ~ x1 + x2 + x3)

Residuals:
     Min       1Q   Median       3Q      Max 
-2.40891 -0.71728 -0.03212  0.67974  2.85561 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  5.19288    0.18462  28.128  &lt; 2e-16 ***
x1           2.55059    0.06534  39.035  &lt; 2e-16 ***
x2          -1.79698    0.42362  -4.242 3.41e-05 ***
x3           4.58214    0.24240  18.903  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.9608 on 196 degrees of freedom
Multiple R-squared:  0.9122,    Adjusted R-squared:  0.9109 
F-statistic: 678.7 on 3 and 196 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p>Note que os valores estimados estão bastante próximos dos valores verdadeiros. Podemos ver o impacto que o tamanho da amostra tem sobre as estimativas fazendo um loop para diferentes tamanhos. Para conseguir resultados mais consistentes podemos gerar os valores do DGP várias vezes. Abaixo os dados são gerados e estimados 100 vezes para diferentes amostras com <img src="https://latex.codecogs.com/png.latex?n%20=%2010,%2050,%2010000">.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mfrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))</span>
<span id="cb3-2">tabela <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">matrix</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ncol =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)</span>
<span id="cb3-3"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (n <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10000</span>)) {</span>
<span id="cb3-4">    i <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb3-5">    X <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">matrix</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ncol =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nrow =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>)</span>
<span id="cb3-6">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">repeat</span>{</span>
<span id="cb3-7"></span>
<span id="cb3-8">        x1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(n) </span>
<span id="cb3-9">        x2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbeta</span>(n, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb3-10">        x3 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runif</span>(n)</span>
<span id="cb3-11">        y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.5</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.75</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x3 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(n)</span>
<span id="cb3-12"></span>
<span id="cb3-13">        fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> x1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> x2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> x3)</span>
<span id="cb3-14"></span>
<span id="cb3-15">        coeficientes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coef</span>(fit)</span>
<span id="cb3-16"></span>
<span id="cb3-17">        X[i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, ] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> coeficientes</span>
<span id="cb3-18"></span>
<span id="cb3-19">        i <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb3-20">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>) {<span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">break</span>}</span>
<span id="cb3-21">    }</span>
<span id="cb3-22"></span>
<span id="cb3-23">    tabela <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbind</span>(tabela, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colMeans</span>(X, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>))</span>
<span id="cb3-24"></span>
<span id="cb3-25">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(X[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb3-26">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(beta[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">", n = "</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>.(n)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)</span>
<span id="cb3-27">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span>
<span id="cb3-28">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(X[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb3-29">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(beta[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">", n = "</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>.(n)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)</span>
<span id="cb3-30">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.5</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span>
<span id="cb3-31">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(X[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb3-32">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(beta[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">", n = "</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>.(n)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)</span>
<span id="cb3-33">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.75</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span>
<span id="cb3-34">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(X[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb3-35">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(beta[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">", n = "</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>.(n)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)</span>
<span id="cb3-36">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span>
<span id="cb3-37">}</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-mqo-teoria-assintotica/index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-mqo-teoria-assintotica/index_files/figure-html/unnamed-chunk-2-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-mqo-teoria-assintotica/index_files/figure-html/unnamed-chunk-2-3.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>A tabela abaixo mostra a média dos valores estimados para cada coeficiente</p>
<div class="cell">
<div class="cell-output-display">

<table class="table table-bordered" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:center;"> b0 = 5 </th>
   <th style="text-align:center;"> b1 = 2,5 </th>
   <th style="text-align:center;"> b2 = -1,75 </th>
   <th style="text-align:center;"> b3 = 5 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> n = 10 </td>
   <td style="text-align:center;"> 5.092687 </td>
   <td style="text-align:center;"> 2.563573 </td>
   <td style="text-align:center;"> -1.852012 </td>
   <td style="text-align:center;"> 4.862016 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> n = 50 </td>
   <td style="text-align:center;"> 5.011683 </td>
   <td style="text-align:center;"> 2.510650 </td>
   <td style="text-align:center;"> -1.792762 </td>
   <td style="text-align:center;"> 5.019113 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> n = 10000 </td>
   <td style="text-align:center;"> 4.995774 </td>
   <td style="text-align:center;"> 2.499198 </td>
   <td style="text-align:center;"> -1.736876 </td>
   <td style="text-align:center;"> 5.003811 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="mqo-viesado" class="level1">
<h1>MQO viesado</h1>
<section id="processo-não-estacionário" class="level3">
<h3 class="anchored" data-anchor-id="processo-não-estacionário">Processo não-estacionário</h3>
<p>Um dos casos em que os estimadores de MQO se tornam viesados acontece quando o processo é auto-regressivo e não-estacionário, isto é, quando o DGP é da forma</p>
<img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Bequation%7D%0A%20%20%20%20y_%7Bt%7D%20=%20%5Cphi%20y_%7Bt-1%7D%20+%20u_%7Bt%7D%0A%5Cend%7Bequation%7D">
<p>em que <img src="https://latex.codecogs.com/png.latex?%7C%5Cphi%7C%20%5Cgeq%201">. O código abaixo simula o modelo acima mil vezes para diferentes valores de <img src="https://latex.codecogs.com/png.latex?%5Cphi">. Quando o processo é estacionário temos estimativas boas para o parâmetro, mas quando <img src="https://latex.codecogs.com/png.latex?%5Cphi%20=%201.1"> as estimativas tornam-se muito ruins. Quando <img src="https://latex.codecogs.com/png.latex?%5Cphi%20=%201"> temos um caso de raiz unitária que tem propriedades bastante específicas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dynlm)</span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mfrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))</span>
<span id="cb4-3"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(phi <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>)){</span>
<span id="cb4-4">    j <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb4-5">    x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>()</span>
<span id="cb4-6">    </span>
<span id="cb4-7">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">repeat</span>{</span>
<span id="cb4-8"></span>
<span id="cb4-9">    y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb4-10">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">99</span>) { </span>
<span id="cb4-11">        y[i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> phi <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> y[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb4-12">    }</span>
<span id="cb4-13">    </span>
<span id="cb4-14">    y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts</span>(y)</span>
<span id="cb4-15">    fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dynlm</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(y))</span>
<span id="cb4-16">    phi_hat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coef</span>(fit)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]</span>
<span id="cb4-17">    x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(x, phi_hat)</span>
<span id="cb4-18"></span>
<span id="cb4-19">    j <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> j <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb4-20">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (j <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>) {<span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">break</span>}</span>
<span id="cb4-21">    }</span>
<span id="cb4-22"></span>
<span id="cb4-23">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb4-24">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(phi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span>.(phi)),</span>
<span id="cb4-25">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlim =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(phi <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb4-26">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)</span>
<span id="cb4-27">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v =</span> phi, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span>
<span id="cb4-28">}</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-mqo-teoria-assintotica/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="erros-arma" class="level3">
<h3 class="anchored" data-anchor-id="erros-arma">Erros ARMA</h3>
<p>Quando os erros do modelo são autocorrelacionados os estimadores de MQO perdem algumas de suas boas propriedades. Ainda assim, desde que o erro seja ortogonal aos regressores os estimadores continuaram sendo não-viesados. Há, contudo, um caso em que os estimadores de MQO são viesados: quando algum dos regressores independentes é uma defasagem da variável depedente.</p>
<p>Isto acontece porque este tipo de autocorrelação implica que os regressores não são ortogonais aos erros. Tome o caso simples em que o erro <img src="https://latex.codecogs.com/png.latex?u_%7Bt%7D"> segue um processo AR(1) da forma</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Bequation%7D%0A%20%20%20%20u_%7Bt%7D%20=%20%5Cphi%20u_%7Bt-1%7D%20+%20%5Ceta_%7Bt%7D%0A%5Cend%7Bequation%7D"> em que <img src="https://latex.codecogs.com/png.latex?%5Ceta_%7Bt%7D"> é ruído branco. E o modelo é <img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Bequation%7D%0A%20%20%20%20y_%7Bt%7D%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7Dy_%7Bt-1%7D%20+%20u_%7Bt%7D%0A%5Cend%7Bequation%7D"> Agora note que <img src="https://latex.codecogs.com/png.latex?y_%7Bt%20-%201%7D%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7Dy_%7Bt%20-%202%7D%20+%20u_%7Bt%20-%201%7D"> Reescrevendo a expressão do erro e substituindo na equação acima temos que: <img src="https://latex.codecogs.com/png.latex?y_%7Bt%20-%201%7D%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7Dy_%7Bt%20-%202%7D%20+%20%5Cfrac%7Bu_%7Bt%7D%20-%20%5Ceta_%7Bt%7D%7D%7B%5Cphi%7D"> logo <img src="https://latex.codecogs.com/png.latex?y_%7Bt%20-%201%7D%20%5Cpropto%20u_%7Bt%7D">, isto é, <img src="https://latex.codecogs.com/png.latex?y_%7Bt%20-%201%7D"> é correlacionado com o termo de erro <img src="https://latex.codecogs.com/png.latex?u_%7Bt%7D">.</p>
<p>Para exemplificar este resultado, o código abaixo simula a seguinte série 1000 vezes para diferentes valores de <img src="https://latex.codecogs.com/png.latex?%5Cphi">. O termo de erro segue um processo AR(1). Note como as estimativas <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Cphi%7D"> são bastante ruins. Para remediar este problema teríamos que levar em conta a estrutura autoregressiva do erro no modelo.</p>
<img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Balign%7D%0A%20%20%20%20y_%7Bt%7D%20&amp;%20=%20%5Cphi%20y_%7Bt-1%7D%20+%20u_%7Bt%7D%5C%5C%0A%20%20%20%20u_%7Bt%7D%20&amp;%20=%200.7u_%7Bt-1%7D%20+%20%5Ceta_%7Bt%7D%5C%5C%0A%5Cend%7Balign%7D">
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mfrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))</span>
<span id="cb5-2"></span>
<span id="cb5-3"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(phi <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.25</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)) {</span>
<span id="cb5-4">    j <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb5-5">    x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>()</span>
<span id="cb5-6">    </span>
<span id="cb5-7">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">repeat</span>{</span>
<span id="cb5-8"></span>
<span id="cb5-9">    y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb5-10">    erro <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arima.sim</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ar =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>))</span>
<span id="cb5-11"></span>
<span id="cb5-12">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">99</span>) { y[i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> phi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>y[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> erro[i] }</span>
<span id="cb5-13">    </span>
<span id="cb5-14">    y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts</span>(y)</span>
<span id="cb5-15"></span>
<span id="cb5-16">    fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dynlm</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(y))</span>
<span id="cb5-17">    </span>
<span id="cb5-18">    phi_hat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coef</span>(fit)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]</span>
<span id="cb5-19"></span>
<span id="cb5-20">    x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(x, phi_hat)</span>
<span id="cb5-21"></span>
<span id="cb5-22">    j <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> j <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb5-23">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (j <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>) {<span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">break</span>}</span>
<span id="cb5-24">    }</span>
<span id="cb5-25"></span>
<span id="cb5-26">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(phi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span>.(phi)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlim =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(phi <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)</span>
<span id="cb5-27">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v =</span> phi, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span>
<span id="cb5-28"></span>
<span id="cb5-29">}</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-mqo-teoria-assintotica/index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Este resultado não muda assintoticamente, isto é, não importa qual o tamanho da amostra: as estimativas de <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Cphi%7D"> serão viesadas. Na verdade, os resultados vão piorando à medida que cresce o tamanho da amostra. Abaixo mostro isto para o caso de <img src="https://latex.codecogs.com/png.latex?%5Cphi%20=%200.5"> e n = <img src="https://latex.codecogs.com/png.latex?100,%20200,%20500,%2010000">.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mfrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))</span>
<span id="cb6-2">phi <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span></span>
<span id="cb6-3"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(n <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10000</span>)){</span>
<span id="cb6-4">    j <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb6-5">    x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>()</span>
<span id="cb6-6">    </span>
<span id="cb6-7">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">repeat</span>{</span>
<span id="cb6-8"></span>
<span id="cb6-9">    y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb6-10">    erro <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arima.sim</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ar =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>))</span>
<span id="cb6-11"></span>
<span id="cb6-12">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>(n<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>)) { y[i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> phi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>y[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> erro[i] }</span>
<span id="cb6-13">    </span>
<span id="cb6-14">    y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts</span>(y)</span>
<span id="cb6-15"></span>
<span id="cb6-16">    fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dynlm</span>(y <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(y))</span>
<span id="cb6-17">    </span>
<span id="cb6-18">    phi_hat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coef</span>(fit)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]</span>
<span id="cb6-19"></span>
<span id="cb6-20">    x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(x, phi_hat)</span>
<span id="cb6-21"></span>
<span id="cb6-22">    j <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> j <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb6-23">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (j <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>) {<span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">break</span>}</span>
<span id="cb6-24">    }</span>
<span id="cb6-25"></span>
<span id="cb6-26">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(x,</span>
<span id="cb6-27">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb6-28">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(phi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span>.(phi)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">", n = "</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>.(n)),</span>
<span id="cb6-29">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlim =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb6-30">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)</span>
<span id="cb6-31">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v =</span> phi, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span>
<span id="cb6-32"></span>
<span id="cb6-33">}</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-mqo-teoria-assintotica/index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Considerando a estrutura autoregressiva do modelo chegamos em estimativas melhores para os parâmetros. O código abaixo faz um ARMAX, isto é, uma estimativa de mínimos quadrados com erros ARMA. O modelo segue o processo <img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Balign%7D%0A%20%20%20%20y_%7Bt%7D%20&amp;%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7Dy_%7Bt-1%7D%20+%20u_%7Bt%7D%5C%5C%0A%20%20%20%20u_%7Bt%7D%20&amp;%20=%20%5Cbeta_%7B2%7D%20u_%7Bt-1%7D%20+%20%5Ceta_%7Bt%7D%5C%5C%0A%5Cend%7Balign%7D"></p>
<p>onde os valores foram definidos como <img src="https://latex.codecogs.com/png.latex?%5Cbeta_%7B0%7D%20=%200">, <img src="https://latex.codecogs.com/png.latex?%5Cbeta_%7B1%7D%20=%200.5"> e <img src="https://latex.codecogs.com/png.latex?%5Cbeta_%7B2%7D%20=%200.7">.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mfrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>))</span>
<span id="cb7-2">n <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span></span>
<span id="cb7-3">param <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">matrix</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nrow =</span> n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ncol =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb7-4">j <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb7-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">repeat</span> {</span>
<span id="cb7-6"></span>
<span id="cb7-7">    y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb7-8">    erro <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arima.sim</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ar =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>))</span>
<span id="cb7-9"></span>
<span id="cb7-10">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>(n<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>)) {</span>
<span id="cb7-11">        y[i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> y[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> erro[i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb7-12">    }</span>
<span id="cb7-13">    </span>
<span id="cb7-14">    y <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts</span>(y)</span>
<span id="cb7-15">    ly <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(y, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb7-16">    x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts.intersect</span>(y, ly, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dframe =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb7-17">    fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arima</span>(x<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>y, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xreg =</span> x<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>ly)</span>
<span id="cb7-18">    param[j <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, ] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coef</span>(fit)</span>
<span id="cb7-19"></span>
<span id="cb7-20">    j <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> j <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb7-21">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (j <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>) {<span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">break</span>}</span>
<span id="cb7-22">}</span>
<span id="cb7-23"></span>
<span id="cb7-24"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(param[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(beta[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">", n = 1000"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> F)</span>
<span id="cb7-25"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span>
<span id="cb7-26"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(param[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(beta[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">", n = 1000"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> F)</span>
<span id="cb7-27"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span>
<span id="cb7-28"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(param[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>], <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bquote</span>(beta[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">", n = 1000"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> F)</span>
<span id="cb7-29"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-mqo-teoria-assintotica/index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>
</section>

 ]]></description>
  <category>econometria</category>
  <category>tutorial-R</category>
  <category>repost</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/repost-mqo-teoria-assintotica/index.html</guid>
  <pubDate>Sat, 23 Mar 2019 03:00:00 GMT</pubDate>
  <media:content url="https:://www.restateinsight.com/static/mqo-teoria-assintotica.png" medium="image" type="image/png" height="103" width="144"/>
</item>
<item>
  <title>Teoria Assintótica - LGN e TCL</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/repost-teoria-assintotica/index.html</link>
  <description><![CDATA[ 




<section id="disclaimer" class="level1">
<h1>Disclaimer</h1>
<p>Este é um repost antigo que fiz ainda na época do mestrado em economia. Apesar de intuitivo o código dos loops abaixo pode ser muito ineficiente. De maneira geral, <code>for</code>-loops são melhores do que loops feitos com <code>repeat</code>; melhor ainda é montar funções e usar <code>parallel::mclapply</code> ou <code>furrr::future_map</code>. Vale notar que é sempre bom pré-alocar (ou pré-definir) vetores antes de um <code>for</code>-loop</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Bom</span></span>
<span id="cb1-2">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vector</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"numeric"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>)</span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Ruim</span></span>
<span id="cb1-4">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>()</span></code></pre></div>
</div>
</section>
<section id="resultados-assintóticos" class="level1">
<h1>Resultados assintóticos</h1>
<section id="lei-dos-grande-números" class="level2">
<h2 class="anchored" data-anchor-id="lei-dos-grande-números">Lei dos Grande Números</h2>
<p>A Lei dos Grandes Números (LGN) é um resultado assintótico bastante utilizado em econometria. Numa definição informal, a LGN nos diz que uma média amostral converge para para a média verdadeira dos dados. Isto é, se temos uma sequência de variáveis aleatórias <img src="https://latex.codecogs.com/png.latex?x_%7B1%7D,%20x_%7B2%7D,%20%5Cdots%20,%20x_%7Bn%7D"> independentes e identicamente distribuídas:</p>
<img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Bequation%7D%0A%20%20%5Cfrac%7B1%7D%7Bn%7D%5Csum_%7Bi%20=%201%7D%5E%7Bn%7D%20x_%7B1%7D%20%5Cto%20%5Cmathbb%7BE%7D(x)%0A%5Cend%7Bequation%7D">
<p>Vamos criar uma amostra de cinco observações a partir de uma distribuição uniforme e tirar a média destas observações. Lembre-se que este distribuição depende de dois parâmetros, digamos <img src="https://latex.codecogs.com/png.latex?a"> e <img src="https://latex.codecogs.com/png.latex?b">. A esperança de uma uniforme é simplesmente <img src="https://latex.codecogs.com/png.latex?%5Cfrac%7Bb-a%7D%7B2%7D">. Podemos repetir este processo 1000 vezes e fazer um histograma dos resultados.</p>
<p>No código abaixo cria-se um vetor <img src="https://latex.codecogs.com/png.latex?x%20=%20(x_%7B1%7D,%20x_%7B2%7D,%20%5Cdots)"> genérico para armazenar valoes. O loop vai inserindo neste vetor a média de uma amostra de cinco observações a partir de uma distribuição uniforme com <img src="https://latex.codecogs.com/png.latex?a%20=%200"> e <img src="https://latex.codecogs.com/png.latex?b%20=%205">. A cada iteração do loop uma nova amostra é gerada e sua média é salva no vetor <img src="https://latex.codecogs.com/png.latex?x"> na posição <img src="https://latex.codecogs.com/png.latex?x_%7Bi%7D">. Depois de gerar estes valores faz-se um histograma deles.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vector</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"numeric"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># cria um vetor para armazenar os valores</span></span>
<span id="cb2-2"></span>
<span id="cb2-3"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>){ <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#loop para gerar os valores</span></span>
<span id="cb2-4">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># computa a media de uma amostra com 5 observacoes</span></span>
<span id="cb2-5">  x[i] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runif</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">min =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)) </span>
<span id="cb2-6"></span>
<span id="cb2-7">}</span>
<span id="cb2-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Histograma</span></span>
<span id="cb2-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Histograma da media das amostras para n = 5"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)</span>
<span id="cb2-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Linha vertical</span></span>
<span id="cb2-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.5</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-teoria-assintotica/index_files/figure-html/unnamed-chunk-3-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Podemos fazer o mesmo para diferentes tamanhos de amostra. O código abaixo simplesmente faz um loop do código acima; o loop de fora varia <code>n</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mfrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># para exibir 4 graficos</span></span>
<span id="cb3-2"></span>
<span id="cb3-3"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (n <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>)) { <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># loop para os diferentes tamanhos de amostra</span></span>
<span id="cb3-4">  x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vector</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"numeric"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>)</span>
<span id="cb3-5">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>) { <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># mesmo loop que o anterior</span></span>
<span id="cb3-6">    </span>
<span id="cb3-7">    x[i] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runif</span>(n, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>))</span>
<span id="cb3-8">    </span>
<span id="cb3-9">  }</span>
<span id="cb3-10">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plotando o histograma</span></span>
<span id="cb3-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Histograma para n = "</span>, n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>),</span>
<span id="cb3-12">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)</span>
<span id="cb3-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">v =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.5</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span>
<span id="cb3-14">}</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-teoria-assintotica/index_files/figure-html/unnamed-chunk-4-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Note que as escalas dos gráficos são diferentes. Como era de se esperar, à medida que cresce o tamanho da amostra os valores vão se acumulando em torno da média verdadeira.</p>
<p>Outra maneira de visualizar a LGN é fazendo o seguinte experimento: sorteie um número a partir de uma distribuição particular e grave seu valor. Agora sorteie dois números a partir da mesma distribuição, tire a média dos valores e grave o resultado. Agora faça o mesmo com três números, quatro números e assim por diante. O código abaixo faz isto para uma distribuição normal padrão.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vector</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"numeric"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>)</span>
<span id="cb4-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (n <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>){</span>
<span id="cb4-3"></span>
<span id="cb4-4">    x[n] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(n))</span>
<span id="cb4-5"></span>
<span id="cb4-6">}</span>
<span id="cb4-7"></span>
<span id="cb4-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(x, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"l"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)</span>
<span id="cb4-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">h =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lty =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-teoria-assintotica/index_files/figure-html/unnamed-chunk-5-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="teorema-central-do-limite" class="level2">
<h2 class="anchored" data-anchor-id="teorema-central-do-limite">Teorema Central do Limite</h2>
<p>O segundo resultado importante que se usa em econometria é o Teorema Central do Limite (TCL). Existem algumas variantes do TCL que usam diferentes hipóteses, mas, novamente sendo informal, o TCL diz que se tivermos uma amostra qualquer <img src="https://latex.codecogs.com/png.latex?x_%7B1%7D,%20x_%7B2%7D,%20%5Cdots%20,%20x_%7Bn%7D">, então <img src="https://latex.codecogs.com/png.latex?%5Csqrt%7Bn%7D%5Cfrac%7B%5Coverline%7Bx%7D%20-%20%5Cmu%7D%7B%5Csigma%7D"> segue uma distribuição normal padrão, onde <img src="https://latex.codecogs.com/png.latex?%5Coverline%7Bx%7D"> é a média amostral, <img src="https://latex.codecogs.com/png.latex?%5Cmathbb%7BE%7D(x)%20=%20%5Cmu"> e <img src="https://latex.codecogs.com/png.latex?%5Ctext%7BVar%7D(x)%20=%20%5Csigma%5E%7B2%7D">. Para visualizar este resultado podemos novamente fazer o experimento usando a distribuição uniforme.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mfrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># para exibir 4 graficos</span></span>
<span id="cb5-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (n <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>)){ <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># loop para os diferentes tamanhos de amostra</span></span>
<span id="cb5-3">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>){ <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># mesmo loop que o anterior</span></span>
<span id="cb5-4"></span>
<span id="cb5-5">    x[i] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runif</span>(n, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>))</span>
<span id="cb5-6">    </span>
<span id="cb5-7">  }</span>
<span id="cb5-8"></span>
<span id="cb5-9">  x_normalizado <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(n)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>(x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># transforma a variavel</span></span>
<span id="cb5-10">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plota o histograma usando a densidade da frequencia de cada observacao</span></span>
<span id="cb5-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(x_normalizado, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Histograma para n = "</span>, n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>),</span>
<span id="cb5-12">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> F, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">breaks =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb5-13">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># superimpoe uma curva normal padrao </span></span>
<span id="cb5-14">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lines</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dnorm</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb5-15">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dodgerblue4"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lwd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)  </span>
<span id="cb5-16">}</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-teoria-assintotica/index_files/figure-html/unnamed-chunk-6-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Note que este resultado vale para qualquer sequência de variáveis i.i.d (independentes e identicamente distribuídas). Considere, por exemplo, uma sequência de variáveis aleatórias independentes que segue uma distribuição beta.</p>
<img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Bequation%7D%0Af(x)%20=%20%5Cfrac%7Bx%5E%7B%5Calpha%20-%201%7D(1-x)%5E%7B%5Cbeta%20-%201%7D%7D%7BB(%5Calpha,%20%5Cbeta)%7D%0A%5Cend%7Bequation%7D">
<p>onde <img src="https://latex.codecogs.com/png.latex?B(%5Calpha,%20%5Cbeta)%20=%20%5Cfrac%7B%5CGamma(%5Calpha)%5CGamma(%5Cbeta)%7D%7B%5CGamma(%5Calpha%20+%20%5Cbeta)%7D">. A esperança da distribuição beta é dada por</p>
<img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Bequation%7D%0A%20%20%20%20%5Cmathbb%7BE%7D(x)%20=%20%5Cfrac%7B%5Calpha%7D%7B%5Calpha%20+%20%5Cbeta%7D%0A%5Cend%7Bequation%7D">
<p>Uma distribuição beta depende de dois parâmetros. Usando a função <code>dbeta</code> podemos simular algumas pdfs.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-teoria-assintotica/index_files/figure-html/unnamed-chunk-7-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Note que uma implicação do TCL é que, se <img src="https://latex.codecogs.com/png.latex?x_%7Bi%7D"> for i.i.d. com esperança igual a <img src="https://latex.codecogs.com/png.latex?%5Cmu">, então</p>
<img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Bequation%7D%0A%20%20%20%20%5Csqrt%7BN%7D%20%5Cleft%20(%20%20%5Cfrac%7B1%7D%7Bn%7D%5Csum_%7Bi%20=%201%7D%5E%7BN%7Dx_%7Bi%7D%20-%20%5Cmu%20%5Cright%20)%20%5Cto%20%5Ctext%7BN%7D(0,%20%5Csigma%5E%7B2%7D)%0A%5Cend%7Bequation%7D">
<p>Isto é, não precisamos saber qual a forma da variância da distribuição para aplicar o TCL. Os loops abaixo são essencialmente idênticos aos anteriores: a diferença é que desta vez os histogramas vão representar variáveis normais de média zero com variância <img src="https://latex.codecogs.com/png.latex?%5Csigma%5E%7B2%7D">, que é aproximadamente igual à variância da distribuição beta.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mfrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># para exibir 4 graficos</span></span>
<span id="cb6-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (n <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>)){ <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># loop para os diferentes tamanhos de amostra</span></span>
<span id="cb6-3"> </span>
<span id="cb6-4">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>){ <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># mesmo loop que o anterior</span></span>
<span id="cb6-5"></span>
<span id="cb6-6">    x[i] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbeta</span>(n, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>))</span>
<span id="cb6-7">    </span>
<span id="cb6-8">  }</span>
<span id="cb6-9"></span>
<span id="cb6-10">  x_normalizado <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(n)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>(x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># transforma a variavel</span></span>
<span id="cb6-11"></span>
<span id="cb6-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(x_normalizado, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Histograma para n = "</span>, n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>),</span>
<span id="cb6-13">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> F, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plota o histograma usando a densidade da frequencia de cada observacao</span></span>
<span id="cb6-14">}</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-teoria-assintotica/index_files/figure-html/unnamed-chunk-8-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<section id="dois-casos-anômalos" class="level3">
<h3 class="anchored" data-anchor-id="dois-casos-anômalos">Dois casos anômalos</h3>
<p>O TCL nos diz: <img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Bequation%7D%0A%20%20%20%20%5Csqrt%7Bn%7D%20%5Cleft%20(%20%5Cfrac%7B%5Coverline%7Bx%7D%20-%20%5Cmu%7D%7B%5Csigma%7D%20%5Cright%20)%20%5Cto%20N(0,1)%0A%5Cend%7Bequation%7D"> O termo <img src="https://latex.codecogs.com/png.latex?%5Csqrt%7Bn%7D"> é essencial para garantir este resultado. Qualquer transformação maior do que <img src="https://latex.codecogs.com/png.latex?%5Csqrt%7Bn%7D"> faz a variância crescer indefinidamente; qualquer transformação menor do que <img src="https://latex.codecogs.com/png.latex?%5Csqrt%7Bn%7D"> faz a variância diminuir indefinidamente, isto é, faz a distribuição colapsar num único ponto. Os dois códigos abaixo apresentam exemplos destes casos. O primeiro usa <img src="https://latex.codecogs.com/png.latex?n%5E%7B%5Cfrac%7B3%7D%7B4%7D%7D">, o segundo <img src="https://latex.codecogs.com/png.latex?n%5E%7B%5Cfrac%7B1%7D%7B4%7D%7D">.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mfrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># para exibir 4 graficos</span></span>
<span id="cb7-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (n <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>)){ <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># mesmo loop que o anterior</span></span>
<span id="cb7-3">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>){ </span>
<span id="cb7-4">    </span>
<span id="cb7-5">    x[i] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runif</span>(n, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>))</span>
<span id="cb7-6">    </span>
<span id="cb7-7">  }</span>
<span id="cb7-8">  </span>
<span id="cb7-9">  x_normalizado <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> n<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>(x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># muda apenas o expoente de n</span></span>
<span id="cb7-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(x_normalizado, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Histograma para n = "</span>, n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>),</span>
<span id="cb7-11">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> F, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)</span>
<span id="cb7-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lines</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dnorm</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb7-13">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dodgerblue4"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lwd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb7-14">}</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-teoria-assintotica/index_files/figure-html/unnamed-chunk-9-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">par</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mfrow =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># para exibir 4 graficos</span></span>
<span id="cb8-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (n <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>)){ <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># mesmo loop que o anterior</span></span>
<span id="cb8-3">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>){ </span>
<span id="cb8-4">    </span>
<span id="cb8-5">    x[i] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runif</span>(n, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>))</span>
<span id="cb8-6">    </span>
<span id="cb8-7">  }</span>
<span id="cb8-8">  </span>
<span id="cb8-9">  x_normalizado <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> n<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>(x <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sqrt</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># muda apenas o expoente de n</span></span>
<span id="cb8-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hist</span>(x_normalizado, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Histograma para n = "</span>, n, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>),</span>
<span id="cb8-11">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">freq =</span> F, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xlab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)</span>
<span id="cb8-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lines</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dnorm</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> .<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb8-13">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dodgerblue4"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lwd =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb8-14">}</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-teoria-assintotica/index_files/figure-html/unnamed-chunk-10-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>


</section>
</section>
</section>

 ]]></description>
  <category>econometria</category>
  <category>tutorial-R</category>
  <category>repost</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/repost-teoria-assintotica/index.html</guid>
  <pubDate>Sat, 23 Mar 2019 03:00:00 GMT</pubDate>
  <media:content url="https:://www.restateinsight.com/static/repost-lgn.svg" medium="image" type="image/svg+xml"/>
</item>
<item>
  <title>Regressão Linear com Séries de Tempo</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index.html</link>
  <description><![CDATA[ 




<section id="introdução" class="level1">
<h1>Introdução</h1>
<p>[Este post foi originalmente escrito no início de 2019. Muitos dos pacotes apresentados aqui evoluíram bastante, mas acredito que o post original ainda tenha bastante valor didático para quem está iniciando seus estudos em econometria e R.]</p>
<p>Os cursos de econometria de séries de tempo, usualmente, começam pelo ensino de modelos lineares univariados para séries estacionárias. Estes modelos são da família ARMA e tentam representar uma série de tempo <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D"> em função de suas defasagens <img src="https://latex.codecogs.com/png.latex?y_%7Bt-1%7D,%20y_%7Bt-2%7D,%20%5Cdots,%20y_%7Bt-n%7D"> e de choques aleatórios (inovações) <img src="https://latex.codecogs.com/png.latex?%5Cepsilon_%7Bt%7D,%20%5Cepsilon_%7Bt-1%7D,%20%5Cepsilon_%7Bt-2%7D,%20%5Cdots,%20y_%7Bt-n%7D">. Contudo, pode ser mais interessante relacionar duas séries de tempo <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D"> e <img src="https://latex.codecogs.com/png.latex?x_%7Bt%7D"> diferentes via um modelo linear. Em alguns casos isto pode ser equivalente a um VAR ou VARMA, mas o modelo linear tem a vantagem de ser mais simples de implementar e de interpretar. O tipo de modelo linear que estamos interessados é da forma</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20y_%7Bt%7D%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7Dx_%7Bt%7D%20+%20w_%7Bt%7D%0A"></p>
<p>onde <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D"> é a série que queremos “explicar” em função da série <img src="https://latex.codecogs.com/png.latex?x_%7Bt%7D">. É evidente que podemos estender este modelo para incluir defasagens das variáveis <img src="https://latex.codecogs.com/png.latex?x_%7Bt%7D"> e <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D">, além de incluir outras séries, dummies, efeitos sazonais e tendências temporais.</p>
<p>Quando se usa dados em forma de séries de tempo numa regressão linear, é bastante comum que se enfrente algum nível de autocorrelação nos resíduos. Uma das hipóteses do modelo “clássico” de regressão linear é de que as observações são i.i.d., isto é, que os dados são independentes e identicamente distribuídos. Isto obviamente não se aplica no contexto de séries de tempo (os dados não são independentes), então é preciso algum cuidado no uso de modelos de regressão linear. Neste sentido, o diagnósito dos resíduos é o mais importante passo para verificar a qualidade do modelo. Idealmente, os resíduos do modelo devem se comportar como ruído branco (i.e., não devem apresentar autocorrelação).</p>
<p>Outro problema típico deste tipo de análise, chamado de “regressão espúria”, acontece quando se faz a regressão de séries não-estacionárias. Quaisquer duas séries com tendência serão fortemente linearmente relacionadas. Isto leva a uma regressão com <img src="https://latex.codecogs.com/png.latex?R%5E2"> altíssimo e estatísticas-t muito significativas e a vários modelos sem sentido. <a href="https://www.tylervigen.com/spurious-correlations">Exemplos disto podem ser vistos neste site</a> (em inglês).</p>
<p>Ainda assim, há casos em que podemos utilizar estas regressões para encontrar relações úteis. Em particular, se as séries forem cointegradas podemos usar uma metodologia <a href="https://en.wikipedia.org/wiki/Error_correction_model#Engle_and_Granger_2-step_approach">Engle-Granger</a>. Esta abordagem não será discutida neste post.</p>
</section>
<section id="pacotes" class="level1">
<h1>Pacotes</h1>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Bases de dados</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AER"</span>)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"astsa"</span>)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GetBCBData"</span>)</span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Funções para séries de tempo</span></span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"forecast"</span>)</span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tseries"</span>)</span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dyn"</span>)</span>
<span id="cb1-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Funções para facilitar a manipulação de dados com datas</span></span>
<span id="cb1-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"xts"</span>)</span>
<span id="cb1-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lubridate"</span>)</span>
<span id="cb1-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Visualização</span></span>
<span id="cb1-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ggplot2"</span>)</span></code></pre></div>
</details>
</div>
</section>
<section id="exemplo-pib-e-consumo" class="level1">
<h1>Exemplo: PIB e Consumo</h1>
<p>Como primeiro exemplo vamos analisar a variação do PIB. A base de dados <code>USMacroG</code> é um conjunto de 12 séries macroeconômicas dos EUA, disponibilizadas pelo livro de econometria do Greene. Como as séries do PIB e do consumo estão em nível precisamos fazer alguma transformação para convertê-los em taxas percentuais. O importante do código abaixo é notar o uso da função <code>ts.instersect</code> que serve para emparelhar as séries e transformá-las em colunas de um <code>data.frame</code>. O modelo que queremos estimar relaciona as variações do PIB com as variações do consumo da seguinte forma.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20%5CDelta%20PIB_%7Bt%7D%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7D%20%5CDelta%20C_%7Bt%7D%20+%20u_%7Bt%7D%0A"></p>
<p>onde <img src="https://latex.codecogs.com/png.latex?%5CDelta"> representa a variação percentual, isto é, <img src="https://latex.codecogs.com/png.latex?%5CDelta%20x_%7Bt%7D%20=%20%5Cfrac%7Bx_%7Bt%7D%20-%20x_%7Bt-1%7D%7D%7Bx_%7Bt-1%7D%7D">. Para estimar o modelo uso a função <code>lm</code>. A saída abaixo é essencialmente idêntica à de uma regressão linear de dados em cross-section.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20%5Chat%7BPIB%7D_%7Bt%7D%20=%20%5Cunderset%7B(0.00007)%7D%7B0.00264%7D%20+%20%5Cunderset%7B(0.06316)%7D%7B0.68428%7DC_%7Bt%7D%0A"></p>
<div class="cell" data-layout-align="center">

<table style="text-align:center">
<tbody><tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="1" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
PIB (variação)
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Consumo (variação)
</td>
<td>
0.684<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.063)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
constante
</td>
<td>
0.003<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.001)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
203
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
0.369
</td>
</tr>
<tr>
<td style="text-align:left">
Adjusted R<sup>2</sup>
</td>
<td>
0.366
</td>
</tr>
<tr>
<td style="text-align:left">
Residual Std. Error
</td>
<td>
0.008 (df = 201)
</td>
</tr>
<tr>
<td style="text-align:left">
F Statistic
</td>
<td>
117.364<sup>***</sup> (df = 1; 201)
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td style="text-align:right">
<sup><em></em></sup><em>p&lt;0.1; <sup><strong></strong></sup><strong>p&lt;0.05; <sup></sup></strong></em>p&lt;0.01
</td>
</tr>

</tbody></table>
</div>
<p>Como há apenas duas séries podemos visualizar a sua relação num gráfico de dispersão ou mesmo num gráfico de linha.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Scatterplot</span></span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(pib <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> cons, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> dados)</span>
<span id="cb2-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Linha de regressão em vermelho</span></span>
<span id="cb2-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abline</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coef</span>(fit), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Gráfico de linha</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot.ts</span>(pib)</span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lines</span>(cons, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span>
<span id="cb3-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">legend</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"topright"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PIB"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Consumo"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lty =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Ainda que práticas, as funções base do R para visualização não são muito elegantes e há vários pacotes que oferecem opções mais interessantes. O popular pacote <code>ggplot2</code>, em particular, foi atualmente integrado ao pacote <code>forecast</code> nas funções <code>autoplot</code> e <code>autolayer</code>.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(dados, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> cons, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> pib)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_smooth</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">se =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(pib) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autolayer</span>(cons) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-7-2.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>É sempre importante verificar a presença de autocorrelação nos resíduos do modelo - este problema é especialmente presente em contextos de séries de tempo.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">u <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">resid</span>(fit)</span></code></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">forecast<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggAcf</span>(u)</span>
<span id="cb7-2">forecast<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggPacf</span>(u)</span></code></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Neste caso parece não haver grande problema já que a maior parte das autocorrelações estão dentro do intervalo de confiança (com exceção do segundo lag). Há testes mais formais, como o Breusch-Godfrey ou Ljung-Box, para verificar a presença de autocorrelação nos resíduos de um modelo. Em ambos os casos, queremos testar se os resíduos do modelo se comportam como ruído branco e, idealmente, queremos não-rejeitar a hipótese nula (isto é, busca-se um p-valor “grande”).</p>
<p>O teste BG está implementado no pacote <code>lmtest</code> que é carregado automaticamente junto com o pacote <code>AER</code>. Ele essencialmente faz uma regressão linear entre os resíduos do modelo com defasagens da variável explicada (<img src="https://latex.codecogs.com/png.latex?y">) e dos próprios resíduos e verifica se os coeficientes estimados são significativos (diferentes de zero). O código abaixo mostra como fazer o teste para a segunda ordem.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20%5Chat%7Bu%7D_%7Bt%7D%20=%20%5Calpha_%7B0%7D%20+%20%5Calpha_%7B1%7DC_%7Bt%7D%20+%20%5Calpha_%7B2%7D%5Chat%7Bu%7D_%7Bt-1%7D%20+%20%5Calpha_%7B3%7D%5Chat%7Bu%7D_%7Bt-2%7D%20+%20%5Cepsilon_%7Bt%7D%0A"></p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bgtest</span>(fit, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Breusch-Godfrey test for serial correlation of order up to 2

data:  fit
LM test = 4.8858, df = 2, p-value = 0.08691</code></pre>
</div>
</div>
<p>A tabela abaixo reporta o valor do teste para diversas ordens. Como se vê, não há evidências de que exista correlação serial nos resíduos do modelo. Caso houvesse autocorrelação, uma saída seria modelar os resíduos como um processo ARMA e estimar o modelo conjuntamente por máxima verossimilhança. Isto é, seria um modelo de <a href="https://pt.wikipedia.org/wiki/ARMA#Generaliza%C3%A7%C3%B5es">regressão linear com erros ARMA</a>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="table table-bordered table-striped table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Ordem da defasagem</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Estatística LM</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">p-valor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">0.1074866</td>
<td style="text-align: center;">0.7430239</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;">4.8857641</td>
<td style="text-align: center;">0.0869100</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;">4.8859138</td>
<td style="text-align: center;">0.1803443</td>
</tr>
<tr class="even">
<td style="text-align: center;">4</td>
<td style="text-align: center;">7.3978074</td>
<td style="text-align: center;">0.1163009</td>
</tr>
<tr class="odd">
<td style="text-align: center;">5</td>
<td style="text-align: center;">8.3037142</td>
<td style="text-align: center;">0.1402726</td>
</tr>
<tr class="even">
<td style="text-align: center;">6</td>
<td style="text-align: center;">8.3038739</td>
<td style="text-align: center;">0.2166753</td>
</tr>
<tr class="odd">
<td style="text-align: center;">7</td>
<td style="text-align: center;">8.3473089</td>
<td style="text-align: center;">0.3029668</td>
</tr>
<tr class="even">
<td style="text-align: center;">8</td>
<td style="text-align: center;">8.4821106</td>
<td style="text-align: center;">0.3878461</td>
</tr>
<tr class="odd">
<td style="text-align: center;">9</td>
<td style="text-align: center;">8.5054023</td>
<td style="text-align: center;">0.4841218</td>
</tr>
<tr class="even">
<td style="text-align: center;">10</td>
<td style="text-align: center;">8.8502628</td>
<td style="text-align: center;">0.5463708</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11</td>
<td style="text-align: center;">8.8803034</td>
<td style="text-align: center;">0.6329399</td>
</tr>
<tr class="even">
<td style="text-align: center;">12</td>
<td style="text-align: center;">11.6353655</td>
<td style="text-align: center;">0.4753901</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Também seria importante verificar se as séries das variações trimestrais do PIB e do consumo são estacionárias. Caso elas não fossem, os resultados da regressão provavelmente seriam espúrios e mesmo os seus resíduos teriam sido contaminados. Contudo, em geral, quando tiramos a diferença percentual de uma série ela se torna estacionária, então deixo esta questão de lado.</p>
</section>
<section id="decomposição-de-tendência-e-sazonalidade" class="level1">
<h1>Decomposição de tendência e sazonalidade</h1>
<p>Pode-se propor um modelo linear que separa efeitos de tendência e sazonalidade da seguinte forma:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20y_%7Bt%7D%20=%20T_%7Bt%7D%20+%20S_%7Bt%7D%20+%20u_%7Bt%7D%0A"></p>
<p>onde <img src="https://latex.codecogs.com/png.latex?T_%7Bt%7D"> é uma componente de tendência (em geral, um polinômio ou média móvel) e <img src="https://latex.codecogs.com/png.latex?S_%7Bt%7D"> é um componente sazonal. Talvez a forma mais simples deste modelo seja assumir uma tendência linear e incluir dummies sazonais.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20y_%7Bt%7D%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7Dt%20+%20%5Csum_%7Bk%20=%202%7D%5E%7Bk%20=%2012%7D%5Calpha_%7Bk%7Dd_%7Bk%7D%20+%20u_%7Bt%7D%0A"></p>
<p>Para facilitar a notação a equação acima assume dados mensais, onde <img src="https://latex.codecogs.com/png.latex?d_%7Bk%7D"> é uma variável dummy igual a <img src="https://latex.codecogs.com/png.latex?1"> quando a observação for referente ao mês <img src="https://latex.codecogs.com/png.latex?k">. Isto é, <img src="https://latex.codecogs.com/png.latex?d_%7B2%7D%20=%201"> quando os dados forem do mês de fevereiro, logo, <img src="https://latex.codecogs.com/png.latex?%5Calpha_%7B2%7D"> captura o efeito marginal do mês de fevereiro. Não se pode colocar uma dummy para cada mês pois haveria um problema de singularidade na matriz de regressores, mas é claro que quando o dado for do mês de janeiro, todas as dummies terão valor igual a zero.</p>
<section id="exemplo-tendência-linear" class="level3">
<h3 class="anchored" data-anchor-id="exemplo-tendência-linear">Exemplo: Tendência linear</h3>
<p>Considere o modelo linear abaixo</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20y_%7Bt%7D%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7Dt%20+%20%5Cepsilon_%7Bt%7D%0A"></p>
<p>Temos duas opções para montar a variável <img src="https://latex.codecogs.com/png.latex?t"> : pode-se usar a função <code>time(x)</code> se <code>x</code> for um objeto da classe <code>ts</code> ou, de maneira mais geral, pode-se usar a função <code>seq_along(x)</code>.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">gdp <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> d[, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gdp"</span>]</span>
<span id="cb10-2">time_trend <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq_along</span>(gdp)</span>
<span id="cb10-3">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tslm</span>(gdp <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> time_trend)</span></code></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">

<table style="text-align:center">
<tbody><tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="1" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
PIB
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
t
</td>
<td>
35.236<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.449)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
constante
</td>
<td>
950.919<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(53.065)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
204
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
0.968
</td>
</tr>
<tr>
<td style="text-align:left">
Adjusted R<sup>2</sup>
</td>
<td>
0.968
</td>
</tr>
<tr>
<td style="text-align:left">
Residual Std. Error
</td>
<td>
377.571 (df = 202)
</td>
</tr>
<tr>
<td style="text-align:left">
F Statistic
</td>
<td>
6,161.458<sup>***</sup> (df = 1; 202)
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td style="text-align:right">
<sup><em></em></sup><em>p&lt;0.1; <sup><strong></strong></sup><strong>p&lt;0.05; <sup></sup></strong></em>p&lt;0.01
</td>
</tr>

</tbody></table>
</div>
<p>O gráfico abaixo mostra o ajuste com a linha de tendência em vermelho. Fica claro que os dados nas extremidades da série fogem bastante da tendência. Isto pode tanto ser indício de um mau ajuste, como de que o crescimento recente foi “acima da tendência”.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(gdp) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autolayer</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fitted</span>(fit)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_discrete</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tendência Linear"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"PIB (tendência linear)"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb11-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottom"</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Parte do motivo de se estimar uma tendência para a série é para poder removê-la da série original. Isto é, queremos fazer</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20y_%7Bt%7D%5E%7B%5Ctext%7Bdetrend%7D%7D%20=%20y_%7Bt%7D%20-%20%5Chat%7By_%7Bt%7D%7D%20=%20y_%7Bt%7D%20-%20%5Chat%7B%5Cbeta_%7B0%7D%7D%20+%20%5Chat%7B%5Cbeta_%7B1%7D%7Dt%0A"></p>
<p>onde <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D%5E%7B%5Ctext%7Bdetrend%7D%7D"> é a série sem tendência. Isto é particularmente útil quando estamos lidando com séries “tendência-estacionárias”, i.e., séries que se tornam estacionárias quando subtraímos a sua tendência. No caso da série do PIB há algum debate sobre como torná-la estacionária. Em geral, é mais comum tratá-la como “diferença-estacionária” e tirar a primeira diferença da série (implicitamente assumindo que ela possui uma raiz unitária). Contudo, há alguma evidência de que a série possa ser “tendência-estacionária” quando se considera uma tendência com quebra.</p>
<p>De qualquer forma, para este modelo simples podemos facilmente computar a série sem tendência. Visualmente, a série não parece estacionária, mas seria necessário fazer algum teste formal para concluir isto com mais certeza.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">detrend <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> gdp <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fitted</span>(fit)</span>
<span id="cb12-2"></span>
<span id="cb12-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(detrend) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb12-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="exemplo-tendências-polinomiais-ordens-mais-altas" class="level3">
<h3 class="anchored" data-anchor-id="exemplo-tendências-polinomiais-ordens-mais-altas">Exemplo: Tendências polinomiais (ordens mais altas)</h3>
<p>Uma forma de estender o modelo acima é considerar ordens polinomiais mais elevadas. De forma geral, o modelo teria a seguinte forma:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20y_%7Bt%7D%20=%20%5Csum_%7Bi%20=%200%7D%5E%7Bk%7D%5Cbeta_%7Bk%7Dt%5E%7Bk%7D%20+%20%5Cepsilon_%7Bt%7D%0A"></p>
<p>onde <img src="https://latex.codecogs.com/png.latex?k"> é a ordem que estamos considerando. Para uma tendência cúbica, por exemplo, teríamos:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20y_%7Bt%7D%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7Dt%20+%20%5Cbeta_%7B2%7Dt%5E%7B2%7D%20+%20%5Cbeta_%7B3%7Dt%5E%7B3%7D+%20%5Cepsilon_%7Bt%7D%0A"></p>
<p>O código abaixo estima justamente este modelo e os resultados são reportados na tabela.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">trend <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq_along</span>(time_trend)</span>
<span id="cb13-2">fit_poly <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tslm</span>(gdp <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">poly</span>(trend, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">raw =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>))</span></code></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">

<table style="text-align:center">
<tbody><tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="1" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
PIB
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
t
</td>
<td>
22.411<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1.566)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
t2
</td>
<td>
-0.011
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.018)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
t3
</td>
<td>
0.0004<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.0001)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
constante
</td>
<td>
1,563.528<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(37.166)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
204
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
0.996
</td>
</tr>
<tr>
<td style="text-align:left">
Adjusted R<sup>2</sup>
</td>
<td>
0.996
</td>
</tr>
<tr>
<td style="text-align:left">
Residual Std. Error
</td>
<td>
130.279 (df = 200)
</td>
</tr>
<tr>
<td style="text-align:left">
F Statistic
</td>
<td>
17,749.800<sup>***</sup> (df = 3; 200)
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td style="text-align:right">
<sup><em></em></sup><em>p&lt;0.1; <sup><strong></strong></sup><strong>p&lt;0.05; <sup></sup></strong></em>p&lt;0.01
</td>
</tr>

</tbody></table>
</div>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(gdp) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb14-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autolayer</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fitted</span>(fit_poly)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb14-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_discrete</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tendência Cúbica"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb14-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb14-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottom"</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Como se vê no gráfico, a tendência cúbica oferece uma aproximação melhor da série original, contudo, há motivos para ter cuidado com este tipo de modelo. À medida que se aumenta a ordem do polinômio, o ajuste da tendência vai progressivamente melhorando. Isto é problemático por pelo menos três motivos:</p>
<ul>
<li><p>(1) enquanto talvez exista algum argumento que justifique uma tendência cúbica nos dados do PIB, é difícil imaginar algum para explicar por que o PIB exibe uma tendência polinomial de ordem 10, 17, 21, etc;</p></li>
<li><p>(2) ordens altas geralmente implicam num <a href="https://pt.wikipedia.org/wiki/Sobreajuste"><em>sobreajuste</em></a> dos dados, isto é, o modelo vai se tornar muito bom em explicar o conjunto atual de dados, mas será péssimo para fazer previsões;</p></li>
<li><p>(3) cada parâmetro do modelo é estimado com algum erro, então quanto mais parâmetros forem incluídos no modelo, maior será este erro.</p></li>
</ul>
<p>O gráfico abaixo mostra o ajuste com polinômios de ordens diferentes. Note como as tendências com ordens de polinômios mais elevados apresentam um ajuste melhor aos dados. Isto é especialmente verdadeiro no começo e no final da série.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-20-2.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="exemplo-tendência-e-sazonalidade-aditiva-na-produção-industrial" class="level3">
<h3 class="anchored" data-anchor-id="exemplo-tendência-e-sazonalidade-aditiva-na-produção-industrial">Exemplo: tendência e sazonalidade (aditiva) na produção industrial</h3>
<p>O código abaixo estima um modelo como da equação acima para o índice de produção industrial mensal do FED. Os resultados estão apresentados na tabela. A regressão encontra efeitos significativos e positivos para os meses de junho, setembro e outubro.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data</span>(prodn)</span>
<span id="cb15-2">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tslm</span>(prodn <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> trend <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> season)</span></code></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">

<table style="text-align:center">
<tbody><tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="1" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
Production
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Trend
</td>
<td>
0.291<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.003)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Feb
</td>
<td>
1.806
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1.610)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Mar
</td>
<td>
2.128
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1.610)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Apr
</td>
<td>
1.950
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1.610)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
May
</td>
<td>
1.936
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1.610)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Jun
</td>
<td>
3.649<sup>**</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1.610)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Jul
</td>
<td>
-1.429
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1.610)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Aug
</td>
<td>
1.776
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1.611)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Sep
</td>
<td>
4.105<sup>**</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1.611)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Oct
</td>
<td>
4.208<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1.611)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Nov
</td>
<td>
2.294
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1.611)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Dec
</td>
<td>
-0.320
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1.611)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Intercept
</td>
<td>
28.727<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(1.266)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
372
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
0.962
</td>
</tr>
<tr>
<td style="text-align:left">
Adjusted R<sup>2</sup>
</td>
<td>
0.961
</td>
</tr>
<tr>
<td style="text-align:left">
Residual Std. Error
</td>
<td>
6.340 (df = 359)
</td>
</tr>
<tr>
<td style="text-align:left">
F Statistic
</td>
<td>
755.242<sup>***</sup> (df = 12; 359)
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td style="text-align:right">
<sup><em></em></sup><em>p&lt;0.1; <sup><strong></strong></sup><strong>p&lt;0.05; <sup></sup></strong></em>p&lt;0.01
</td>
</tr>

</tbody></table>
</div>
<p>Ao visualizar o ajuste dos dados vê-se também a limitação desta abordagem. Implicitamente se assume que o efeito sazonal é sempre o mesmo.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(prodn) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb16-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autolayer</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fitted</span>(fit)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb16-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb16-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottom"</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Outra opção seria utilizar uma média móvel para estimar o componente de tendência da série. Uma média móvel calcula uma média dos valores da série em janelas de tempo:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0AT_%7Bt%7D%20=%20%5Cfrac%7B1%7D%7Bk%7D%5Csum_%7Bi%20=%20n-k+1%7D%5E%7Bn%7Dy_%7Bi%7D%0A"></p>
<p>Assim uma média móvel de 3 períodos centrada teria a forma</p>
<p><img src="https://latex.codecogs.com/png.latex?%0AT_%7Bt%7D%20=%20%5Cfrac%7B1%7D%7B3%7Dy_%7Bt-1%7D%20+%20%5Cfrac%7B1%7D%7B3%7Dy_%7Bt%7D%20+%20%5Cfrac%7B1%7D%7B3%7Dy_%7Bt+1%7D%0A"></p>
<p>Também é possível fazer uma média móvel de uma <em>média móvel</em>. Por exemplo, pode-se ter uma média móvel de 2 períodos sobre uma média móvel de 4 períodos</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Balign%7D%0AT_%7Bt%7D%20=%20%20&amp;%20%5Cfrac%7B1%7D%7B2%7D%5B%5Cfrac%7B1%7D%7B4%7D(y_%7Bt-2%7D%20+%20y_%7Bt-1%7D%20+%20y_%7Bt%7D%20+%20y_%7Bt%20+%201%7D)%20+%20%5Cfrac%7B1%7D%7B4%7D(y_%7Bt-1%7D%20+%20y_%7Bt%7D%20+%20y_%7Bt%20+%201%7D%20+%20y_%7Bt%20+%201%7D%20)%5D%20%5C%5C%0A=%20&amp;%20%5Cfrac%7B1%7D%7B8%7Dy_%7Bt-2%7D%20+%20%5Cfrac%7B1%7D%7B4%7Dy_%7Bt-1%7D%20+%20%5Cfrac%7B1%7D%7B4%7Dy_%7Bt%7D%20+%20%5Cfrac%7B1%7D%7B4%7Dy_%7Bt%20+%201%7D%5Cfrac%7B1%7D%7B8%7Dy_%7Bt%20+%202%7D%0A%5Cend%7Balign%7D%0A"></p>
<p>Neste caso faço um filtro neste estilo para 12 meses.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1">trend <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(prodn, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">filter =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep_len</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>), <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)</span>
<span id="cb17-2"></span>
<span id="cb17-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(prodn) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb17-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autolayer</span>(trend) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb17-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb17-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottom"</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Agora faz-se uma regressão sobre a série sem tendência. Da mesma forma como o modelo anterior, a sazonalidade é sempre igual ao longo do tempo então apresento apenas dois “ciclos” do ajuste.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">detrend <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> prodn <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> trend</span>
<span id="cb18-2">fit_season <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tslm</span>(detrend <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> season)</span></code></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Este tipo de decomposição também é conhecida como “decomposição clássica”. Apesar de simples e intuitiva, ela pode ser inadequada. Um tipo de decomposição mais sofisticada é a STL (<em>Seasonal Decomposition of Time Series by Loess</em>) que permite maior flexibilidade tanto na tendência como na sazonalidade, além de ser mais robusta a outliers.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stl</span>(prodn, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">s.window =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"periodic"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb19-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="regressão-com-variáveis-defasadas" class="level1">
<h1>Regressão com variáveis defasadas</h1>
<p>Uma especificação bastante comum é descrever o comportamento de uma variável em função de seus valores passados. Isto pode refletir, por exemplo, algum componente inercial nos dados em que o valor da inflação do mês de outubro está correlacionada ao valor da inflação no mês de setembro. Também é possível estender este modelo incluindo os valores contemporâneos e defasados de outras variáveis. Pode-se especular, por exemplo, que o desempenho das vendas de um setor seja função da renda no mesmo período (mês, trimestre, etc.) e em períodos anteriores. Ou seja, queremos “explicar” a série <img src="https://latex.codecogs.com/png.latex?y"> em função de seus valores passados (<img src="https://latex.codecogs.com/png.latex?y_%7Bt-1%7D,%20y_%7Bt-2%7D,%20%5Cdots">) e dos valores contemporâneos e passados de outras séries (<img src="https://latex.codecogs.com/png.latex?x_%7Bt-1%7D,%20z_%7Bt-1%7D,%20%5Cdots">).</p>
<section id="exemplo-simples" class="level2">
<h2 class="anchored" data-anchor-id="exemplo-simples">Exemplo simples</h2>
<p>Um modelo para explicar <img src="https://latex.codecogs.com/png.latex?y"> em função de seu valor defasado em um período, do valor contemporâneo de <img src="https://latex.codecogs.com/png.latex?x"> e do valor defasado de <img src="https://latex.codecogs.com/png.latex?x"> em um período.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20y_%7Bt%7D%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7Dy_%7Bt%20-%201%7D%20+%20%5Cbeta_%7B2%7Dx_%7Bt%7D%20+%20%5Cbeta_%7B3%7Dx_%7Bt%20-%201%7D%20+%20w_%7Bt%7D%0A"></p>
<p>Note que o modelo acima não seria muito útil para gerar previsões de <img src="https://latex.codecogs.com/png.latex?y_%7Bt%20+%201%7D"> pois ele exigiria conhecimento de <img src="https://latex.codecogs.com/png.latex?x_%7Bt%20+%201%7D">. Então, seria necessário primeiro prever o valor de <img src="https://latex.codecogs.com/png.latex?x_%7Bt%20+%201%7D"> para computar uma estimativa para <img src="https://latex.codecogs.com/png.latex?y_%7Bt%20+%201%7D">.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cmathbb%7BE%7D(y_%7Bt%20+%201%7D%20%7C%20%5Cmathbb%7BI%7D_%7Bt%7D)%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7Dy_%7Bt%7D%20+%20%5Cbeta_%7B2%7Dx_%7Bt%20+%201%7D%20+%20%5Cbeta_%7B3%7Dx_%7Bt%7D%0A"></p>
</section>
<section id="exemplo-índice-de-produção-industrial" class="level2">
<h2 class="anchored" data-anchor-id="exemplo-índice-de-produção-industrial">Exemplo: Índice de Produção Industrial</h2>
<p>Para o exemplo abaixo uso o pacote <code>GetBCBData</code> para carregar a série do Índice de Produção Industrial (IPI).</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Baixa os dados</span></span>
<span id="cb20-2">ipi <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gbcbd_get_series</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">21859</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">first.date =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.Date</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2002-01-01"</span>))</span>
<span id="cb20-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Converte a série para ts</span></span>
<span id="cb20-4">prod <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts</span>(ipi<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2002</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">01</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">frequency =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)</span>
<span id="cb20-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Gráfico da série</span></span>
<span id="cb20-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(prod) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Índice de Produção Industiral - geral (2012 = 100)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Pode-se visualizar a relação linear entre valores correntes e defasados do IPI usando a função <code>lag.plot</code>. Na imagem abaixo, cada quadrado mostra um gráfico de dispersão dos valores do IPI em <img src="https://latex.codecogs.com/png.latex?t"> contra os valores do IPI em <img src="https://latex.codecogs.com/png.latex?t-k">. Alguns lags parecem não exibir muita relação como o lag 6. Já o primeiro e último lag parecem apresentar uma relação linear mais acentuada.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gglagplot</span>(prod, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">do.lines =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb21-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Como exemplo, podemos propor o modelo abaixo para o IPI. A escolha dos lags aqui foi um tanto arbitrária e há métodos mais apropriados para escolhê-los.</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20IPI_%7Bt%7D%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7DIPI_%7Bt%20-%201%7D%20+%20%5Cbeta_%7B2%7DIPI_%7Bt%20-%202%7D%20+%20%5Cbeta_%7B3%7DIPI_%7Bt%20-%204%7D%20+%20%5Cbeta_%7B2%7DIPI_%7Bt%20-%2012%7D%0A"></p>
<p>Para estimar este modelo no R há um pequeno inconveniente da função <code>lag</code> que, na verdade, funciona como um operador <em>foreward</em>. Além disso, agora a função base <code>lm</code> (e por conseguinte, também a função <code>tslm</code>) se prova um tanto inconveniente, pois ela não funciona bem com variáveis defasadas. Para usar a função <code>lm</code> seria necessário primeiro “emparelhar” as diferentes defasagens da série, isto é, seria necessário criar um <code>data.frame</code> (ou <code>ts</code>) em que cada coluna mostra os valores das defasagens escolhidas. Por motivo de completude, deixo um código de exemplo que faz isto. Na prática, vale mais a pena escolher alguma outra função como <code>dynlm::dynlm</code> ou <code>dyn::dyn$lm</code>. O código abaixo usa o <code>forecast::tslm</code>, mas nos exemplos seguintes uso o <code>dyn::dyn$lm</code>.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Exemplo usando forecast::tslm (tb funcionaria com stats::lm)</span></span>
<span id="cb22-2">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts.intersect</span>(</span>
<span id="cb22-3">  prod, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(prod, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(prod, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(prod, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>), <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(prod, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>),</span>
<span id="cb22-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dframe =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb22-5">  )</span>
<span id="cb22-6"></span>
<span id="cb22-7">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tslm</span>(prod <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> ., <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df)</span></code></pre></div>
</details>
</div>
<p>Pode-se contornar o problema da função <code>lag</code> definindo uma nova função, <code>L</code>, que funciona da maneira desejada. O código abaixo estima a regressão usando <code>dyn::dyn$lm</code>. A sintaxe dentro da função é praticamente idêntica à que vimos acima com as funções <code>lm</code> e <code>tslm</code>.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define uma função L</span></span>
<span id="cb23-2">L <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(x, k) {<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(x, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>k)}</span>
<span id="cb23-3">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dyn<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(prod <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">L</span>(prod, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">L</span>(prod, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">L</span>(prod, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">L</span>(prod, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>))</span></code></pre></div>
</details>
</div>
<p>Os resultados da regressão acima estão resumidos na tabela abaixo.</p>
<div class="cell" data-layout-align="center">

<table style="text-align:center">
<tbody><tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="1" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
ipi
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
ipi [1]
</td>
<td>
0.442<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.056)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
ipi [4]
</td>
<td>
0.139<sup>**</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.062)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
ipi [8]
</td>
<td>
-0.114<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.042)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
ipi [12]
</td>
<td>
0.446<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.040)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
constante
</td>
<td>
9.478<sup>**</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(3.960)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
245
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
0.783
</td>
</tr>
<tr>
<td style="text-align:left">
Adjusted R<sup>2</sup>
</td>
<td>
0.779
</td>
</tr>
<tr>
<td style="text-align:left">
Residual Std. Error
</td>
<td>
5.304 (df = 240)
</td>
</tr>
<tr>
<td style="text-align:left">
F Statistic
</td>
<td>
216.286<sup>***</sup> (df = 4; 240)
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td style="text-align:right">
<sup><em></em></sup><em>p&lt;0.1; <sup><strong></strong></sup><strong>p&lt;0.05; <sup></sup></strong></em>p&lt;0.01
</td>
</tr>

</tbody></table>
</div>
<p>Podemos combinar a informação de outros indicadores industriais para adicionar informação potencialmente relevante para nossa regressão. Neste exemplo, uso outros indicadores industriais para encontrar aqueles que “ajudam a explicar” o indicador geral.</p>
<p>O código abaixo importa uma série de indicadores industriais e junta todos eles num único objeto <code>ts</code>.</p>
<p>Os códigos utilizados são diretamente copiados do <a href="https://www3.bcb.gov.br/sgspub/localizarseries/localizarSeries.do?method=prepararTelaLocalizarSeries">sistema de séries temporais do BCB</a>.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Codigos das series do BACEN</span></span>
<span id="cb24-2">codigos_series <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">21859</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">21861</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">21868</span>)</span>
<span id="cb24-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Vetor com nomes para facilitar o uso dos dados</span></span>
<span id="cb24-4">nomes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb24-5">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"geral"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"extrativa_mineral"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"transformacao"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"capital"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"intermediarios"</span>,</span>
<span id="cb24-6">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"consumo"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"consumo_duraveis"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"semiduraveis_e_nao_duraveis"</span>,</span>
<span id="cb24-7">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"insumos_da_construcao_civil"</span></span>
<span id="cb24-8">  )</span>
<span id="cb24-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Junta estes dados num data.frame que serve de dicionário (metadata)</span></span>
<span id="cb24-10">dicionario <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id.num =</span> codigos_series, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nome_serie =</span> nomes)</span>
<span id="cb24-11"></span>
<span id="cb24-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Baixa todas as series</span></span>
<span id="cb24-13">series <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gbcbd_get_series</span>(codigos_series, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">first.date =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.Date</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2002-01-01"</span>))</span>
<span id="cb24-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Junta as séries com o dicionário</span></span>
<span id="cb24-15">series <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">merge</span>(series, dicionario, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id.num"</span>)</span>
<span id="cb24-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Converte para wide usando os nomes do dicionario como nome das colunas</span></span>
<span id="cb24-17">series_wide <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> reshape2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dcast</span>(series, ref.date <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> nome_serie, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">value.var =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"value"</span>)</span>
<span id="cb24-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Convert para ts</span></span>
<span id="cb24-19">series <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.matrix</span>(series_wide[, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2002</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">frequency =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)</span>
<span id="cb24-20"></span>
<span id="cb24-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Visualizar todas as series</span></span>
<span id="cb24-22"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(series) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb24-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">facet_wrap</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vars</span>(series)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb24-24">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_color_viridis_d</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb24-25">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb24-26">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Feito o trabalho de importação dos dados podemos propor um modelo simples que toma o valor defasado das variáveis. Novamente a escolha das defasagens e dos regressores foi completamente arbitrária. O modelo estimado usa defasagens de outras séries para modelar o comportamento da série do índice de produção da indústria de tranformação</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20Transf_%7Bt%7D%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7DDurav_%7Bt%20-%201%7D%20+%20%5Cbeta_%7B2%7DDurav_%7Bt%20-%2012%7D%20+%20%5Cbeta_%7B3%7DCapital_%7Bt%20-%201%7D%20+%20%5Cbeta_%7B4%7DCapital_%7Bt%20-%206%7D%20+%20%5Cbeta_%7B5%7DTransf_%7Bt%20-%201%7D%20+%20%5Calpha_%7B1%7Dt%20+%20%5Csum_%7Bk%20=%202%7D%5E%7B12%7D%5Calpha_%7Bk%7Dd_%7Bk%7D%0A"></p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dyn<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(</span>
<span id="cb25-2">  transformacao <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">L</span>(consumo_duraveis, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">L</span>(consumo_duraveis, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-3">                  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">L</span>(capital, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">L</span>(capital, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-4">                  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">L</span>(intermediarios, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-5">                  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">L</span>(transformacao, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-6">                  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">time</span>(transformacao) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.factor</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cycle</span>(transformacao)),</span>
<span id="cb25-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> series</span>
<span id="cb25-8">  )</span>
<span id="cb25-9"></span>
<span id="cb25-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(series[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autolayer</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fitted</span>(fit)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb25-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Olhando apenas para as observações mais recentes vemos que, com exceção do período da pandemia, o ajuste aos dados é relativamente satisfatório.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Filtra apenas as observações mais recentes, após jan/2015</span></span>
<span id="cb26-2">prod_recente <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">window</span>(prod, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2015</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb26-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Reestima o modelo</span></span>
<span id="cb26-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tslm</span>(prod_recente <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> trend <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> season))</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
tslm(formula = prod_recente ~ trend + season)

Residuals:
     Min       1Q   Median       3Q      Max 
-22.8428  -1.8730   0.5559   2.3254   8.8825 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 95.60468    1.73833  54.998  &lt; 2e-16 ***
trend       -0.04273    0.01593  -2.682 0.008745 ** 
season2     -2.56839    2.19658  -1.169 0.245455    
season3      5.54101    2.19676   2.522 0.013456 *  
season4      0.17262    2.19705   0.079 0.937553    
season5      7.93757    2.19745   3.612 0.000505 ***
season6      8.27116    2.26418   3.653 0.000440 ***
season7     14.48889    2.26413   6.399 7.35e-09 ***
season8     17.80661    2.26418   7.864 8.76e-12 ***
season9     14.04934    2.26435   6.205 1.75e-08 ***
season10    16.35457    2.26463   7.222 1.75e-10 ***
season11     9.44729    2.26502   4.171 7.09e-05 ***
season12    -1.25998    2.26553  -0.556 0.579517    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 4.66 on 88 degrees of freedom
Multiple R-squared:  0.722, Adjusted R-squared:  0.6841 
F-statistic: 19.05 on 12 and 88 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(prod_recente) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb28-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autolayer</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fitted</span>(fit)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb28-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb28-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottom"</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="dummies" class="level1">
<h1>Dummies</h1>
<p>Na análise de sazonalidade já lidamos com dummies, mas vale a pena discutí-las num contexto mais amplo. Pode-se usar variáveis dummy para estimar o efeito de certos eventos extraordinários (greves, atentados, crise externa, etc.) ou mesmo o efeito de eventos recorrentes e previsíveis (feriados, dias úteis, alguma estação do ano, etc.).</p>
<section id="exemplo-efeito-de-greves-e-preços-administrados-no-ipca" class="level3">
<h3 class="anchored" data-anchor-id="exemplo-efeito-de-greves-e-preços-administrados-no-ipca">Exemplo: Efeito de greves e preços administrados no IPCA</h3>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20%5Ctext%7BIPCA%7D_%7Bt%7D%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7D%5Ctext%7Bgcam%7D_%7Bt%7D%20+%20%5Cbeta_%7B2%7D%5Ctext%7Bg2013%7D_%7Bt%7D%20+%20%5Cbeta_%7B3%7D%5Ctext%7Bpadm%7D_%7Bt%7D%20+%20%5Ctext%7Bdsaz%7D%20+%20%5Cvarepsilon_%7Bt%7D%0A"></p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1">ipca <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gbcbd_get_series</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">433</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">first.date =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.Date</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1995-01-01"</span>))</span>
<span id="cb29-2">ipca<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>ref.date <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.Date</span>(ipca<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>ref.date, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">format =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%d/%m/%Y"</span>)</span>
<span id="cb29-3">index <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.POSIXct</span>(ipca<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>ref.date)</span>
<span id="cb29-4">ipca <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xts</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> ipca<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>value, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order.by =</span> index)</span>
<span id="cb29-5">ipca <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> ipca[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2003-05/2019-06-01"</span>]</span></code></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># dummy greve caminhoneiro</span></span>
<span id="cb30-2">greve_caminhao <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xts</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(ipca)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order.by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">index</span>(ipca))</span>
<span id="cb30-3">greve_caminhao[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2018-05"</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb30-4"></span>
<span id="cb30-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># greves 2013</span></span>
<span id="cb30-6">greve_2013 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xts</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(ipca)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order.by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">index</span>(ipca))</span>
<span id="cb30-7">greve_2013[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2018-07"</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb30-8"></span>
<span id="cb30-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># precos_adm</span></span>
<span id="cb30-10">precos_adm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">xts</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(ipca)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order.by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">index</span>(ipca))</span>
<span id="cb30-11">precos_adm[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2015-01/2015-04"</span>] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span></code></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(ipca, greve_caminhao, greve_2013, precos_adm)</span>
<span id="cb31-2">x <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coredata</span>(x), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">year</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">index</span>(x))[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>], <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">month</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">index</span>(x))[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">frequency =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)</span>
<span id="cb31-3"></span>
<span id="cb31-4">ipca <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> x[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]</span>
<span id="cb31-5">greve_caminhao <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> x[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>]</span>
<span id="cb31-6">greve_2013 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> x[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>]</span>
<span id="cb31-7">precos_adm <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> x[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>]</span>
<span id="cb31-8"></span>
<span id="cb31-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tslm</span>(ipca <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> greve_caminhao <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> greve_2013 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> precos_adm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> season)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
tslm(formula = ipca ~ greve_caminhao + greve_2013 + precos_adm + 
    season)

Coefficients:
   (Intercept)  greve_caminhao      greve_2013      precos_adm         season2  
      0.568698        1.040000       -0.377333        0.510833       -0.081250  
       season3         season4         season5         season6         season7  
     -0.089375       -0.157500       -0.348698       -0.261823       -0.281365  
       season8         season9        season10        season11        season12  
     -0.188698       -0.096823       -0.112448       -0.001198        0.083802  </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> dyn<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(ipca <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">L</span>(ipca, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> greve_caminhao <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> greve_2013 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> precos_adm <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb33-2">                     <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.factor</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cycle</span>(ipca)))</span></code></pre></div>
</details>
</div>
<p>Na tabela abaixo omito os interceptos das dummies sazonais</p>
<div class="cell" data-layout-align="center">

<table style="text-align:center">
<tbody><tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
<em>Dependent variable:</em>
</td>
</tr>
<tr>
<td>
</td>
<td colspan="1" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
IPCA
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
ipca [1]
</td>
<td>
0.508<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.061)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Greve (2018)
</td>
<td>
1.039<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.206)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Greve (2013)
</td>
<td>
-0.390<sup>*</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.206)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Preços adm
</td>
<td>
0.212<sup>*</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.109)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
constante
</td>
<td>
0.108
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.071)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td style="text-align:left">
Constant
</td>
<td>
0.256<sup>***</sup>
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
(0.063)
</td>
</tr>
<tr>
<td style="text-align:left">
</td>
<td>
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
Observations
</td>
<td>
192
</td>
</tr>
<tr>
<td style="text-align:left">
R<sup>2</sup>
</td>
<td>
0.517
</td>
</tr>
<tr>
<td style="text-align:left">
Adjusted R<sup>2</sup>
</td>
<td>
0.476
</td>
</tr>
<tr>
<td style="text-align:left">
Residual Std. Error
</td>
<td>
0.199 (df = 176)
</td>
</tr>
<tr>
<td style="text-align:left">
F Statistic
</td>
<td>
12.567<sup>***</sup> (df = 15; 176)
</td>
</tr>
<tr>
<td colspan="2" style="border-bottom: 1px solid black">
</td>
</tr>
<tr>
<td style="text-align:left">
<em>Note:</em>
</td>
<td style="text-align:right">
<sup><em></em></sup><em>p&lt;0.1; <sup><strong></strong></sup><strong>p&lt;0.05; <sup></sup></strong></em>p&lt;0.01
</td>
</tr>

</tbody></table>
</div>
</section>
</section>
<section id="previsão-alguns-problemas" class="level1">
<h1>Previsão (alguns problemas)</h1>
<p>Modelos de regressão linear podem também ser usados para fazer previsões. A princípio os valores futuros de uma série podem ser computados usando os valores estimados dos <img src="https://latex.codecogs.com/png.latex?%5Cbeta_%7Bi%7D">. Num modelo linear de <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D"> em função de <img src="https://latex.codecogs.com/png.latex?k"> séries de tempo, como o abaixo, podemos calcular o valor de <img src="https://latex.codecogs.com/png.latex?%5Chat%7By_%7Bt%7D%7D"></p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20%5Chat%7By_%7Bt%7D%7D%20=%20%5Chat%7B%5Cbeta_%7B0%7D%7D%20+%20%5Chat%7B%5Cbeta_%7B1%7D%7Dx_%7B1,%20t%7D%20+%20%5Chat%7B%5Cbeta_%7B2%7D%7Dx_%7B2,%20t%7D%20+%20%5Cdots%20+%20%5Chat%7B%5Cbeta_%7Bk%7D%7Dx_%7Bk,%20t%7D%0A"></p>
<p>contudo, o valor de <img src="https://latex.codecogs.com/png.latex?y_%7Bt%20+%201%7D"> exige o conhecimento do valor de todas as <img src="https://latex.codecogs.com/png.latex?k"> séries em <img src="https://latex.codecogs.com/png.latex?t+1">. O mesmo vale quando usamos variáveis defasadas como regressores. Há diversas formas de resolver este problema. Uma solução simples seria tomar o valor médio dos regressores para formar as previsões. Outra solução seria propor modelos ARMA simples para cada uma das séries <img src="https://latex.codecogs.com/png.latex?x_%7Bk,%20t%7D"> e usar estas previsões dentro do modelo linear para <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D">. Alternativamente, pode-se também montar cenários futuros hipotéticos definindo valores pré-estabelecidos para as variáveis regressoras.</p>
<p>Há também alguns casos mais simples, em que o valor futuro das variáveis regressoras é conhecido. Por exemplo, pode-se modelar a demanda por energia elétrica numa região como função de uma dummy de estação (verão x não-verão) e de dia útil (dia útil x dia não-útil). É bastante simples fazer previsões futuras neste caso pois sabe-se de antemão todos os valores futuros das séries que se está usando para “explicar” a demanda por energia elétrica. Já se o mesmo modelo considerasse também o PIB desta região como variável na regressão, seria mais complexo prever os valores futuros da demanda por energia, pois seria necessário saber também os valores futuros do PIB.</p>
<section id="exemplo-tendência-e-sazonalidade" class="level2">
<h2 class="anchored" data-anchor-id="exemplo-tendência-e-sazonalidade">Exemplo: tendência e sazonalidade</h2>
<p>É relativamente simples prever os valores futuros de modelos de tendência e sazonalidade determinísticas. Como o adjetivo “determinístico” sugere sabe-se de antemão todos os valores que esta série vai exibir. O exemplo abaixo estima um modelo simples para a demanda por passagens aéreas (voos internacionais).</p>
<p>Vale notar que não se costuma fazer previsões de longo prazo com este tipo de modelo, pois a hipótese de que a sazonalidade/tendência continua exatamente igual ao longo do tempo vai se tornando cada vez mais frágil. A curto prazo, contudo, pode ser razoável supor que este modelo linear simples ofereça uma boa aproximação da realidade.</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tslm</span>(AirPassengers <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> trend <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> season)</span>
<span id="cb34-2"></span>
<span id="cb34-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forecast</span>(fit, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">h =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">include =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb34-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="exemplo-previsão-de-cenário" class="level2">
<h2 class="anchored" data-anchor-id="exemplo-previsão-de-cenário">Exemplo: previsão de cenário</h2>
<p>No caso da regressão acima do IPCA, pode-se estimar o impacto de uma nova greve dos caminhoneiros. [Mal sabiamos que em 2020 teriamos um evento extraordinário…].</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1">dummies <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(greve_caminhao, greve_2013, precos_adm)</span>
<span id="cb35-2">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Arima</span>(ipca, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xreg =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coredata</span>(dummies))</span>
<span id="cb35-3">greve_caminhao_2020 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb35-4">novo_xreg <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">greve_caminhao =</span> greve_caminhao_2020, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">greve_2013 =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">precos_adm =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>))</span>
<span id="cb35-5"></span>
<span id="cb35-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forecast</span>(fit, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xreg =</span> novo_xreg), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">include =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb35-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="exemplo-variáveis-defasadas" class="level2">
<h2 class="anchored" data-anchor-id="exemplo-variáveis-defasadas">Exemplo: variáveis defasadas</h2>
<p>Pode ser um tanto difícil fazer previsões com modelos que usam informação de outras séries. Num modelo simples como <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D%20=%20%5Cbeta_%7B0%7D%20+%20%5Cbeta_%7B1%7Dx_%7Bt%20-%201%7D"> para prever valores futuros de <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D"> é preciso fazer previsõs para a série <img src="https://latex.codecogs.com/png.latex?x_%7Bt%7D">, pois, <img src="https://latex.codecogs.com/png.latex?y_%7Bt%20+%202%7D"> é função linear de <img src="https://latex.codecogs.com/png.latex?x_%7Bt%20+%201%7D">. Há muitas maneiras de abordar este problema e eu provavelmente vou discutir mais sobre as alternativas num post futuro. O exemplo abaixo mostra como usar informação disponível de outras séries</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1">df_ajustada <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb36-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ts.intersect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">transf =</span> series[, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"transformacao"</span>],</span>
<span id="cb36-3">               <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(series[, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"consumo_duraveis"</span>], <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb36-4">               <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(series[, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"consumo_duraveis"</span>], <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>),</span>
<span id="cb36-5">               <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(series[, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"capital"</span>], <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb36-6">               <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(series[, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"capital"</span>], <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>),</span>
<span id="cb36-7">               <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(series[, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"intermediarios"</span>], <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>),</span>
<span id="cb36-8">               <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lag</span>(series[, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"transformacao"</span>], <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb36-9">               <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dframe =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb36-10">               )</span>
<span id="cb36-11">fit <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tslm</span>(transf <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> ., <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> df_ajustada)</span>
<span id="cb36-12">sub <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df_ajustada[(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(df_ajustada[, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"transf"</span>]) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(df_ajustada[, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"transf"</span>]), ]</span></code></pre></div>
</details>
</div>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forecast</span>(fit, sub), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">include =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">36</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb37-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p>Pode-se, como de costume, separar os dados em <em>train</em> e <em>test</em> para avaliar a qualidade das previsões dentro da amostra.</p>
</section>
</section>
<section id="conclusões" class="level1">
<h1>Conclusões</h1>
<p>Modelos linares podem ser bastante úteis na análise de séries de tempo. Neste post, discuti brevemente a aplicação destes modelos num contexto de decomposição clássica, análise de regressão e de previsão. Há muitos aspectos interessantes que ainda podem ser explorados.</p>
<p>[Como comentei no início do post, este texto foi originalmente escrito no início de 2019. De lá pra cá muitas coisas mudaram, mas acredito que a informação aqui continua sendo bastante útil. Talvez no futuro eu reescreva este post utilizando somente o pacote <code>forecast</code> e mostrando algumas maneiras mais simples de montar o código, evitando a multiplicidade de objetos <code>ts</code>, <code>xts</code>, etc.]</p>


</section>

 ]]></description>
  <category>econometria</category>
  <category>time-series</category>
  <category>repost</category>
  <category>tutorial-R</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/repost-ols-timeseries/index.html</guid>
  <pubDate>Tue, 01 Jan 2019 02:00:00 GMT</pubDate>
  <media:content url="https:://www.restateinsight.com/static/ols-time-series.svg" medium="image" type="image/svg+xml"/>
</item>
<item>
  <title>SARIMA no R</title>
  <dc:creator>Vinicius Oike</dc:creator>
  <link>https:://www.restateinsight.com/posts/general-posts/repost-sarima-no-r/index.html</link>
  <description><![CDATA[ 




<section id="introdução" class="level1">
<h1>Introdução</h1>
<p>Neste post apresento como estimar um modelo SARIMA simples no R usando os pacotes <code>astsa</code> e <code>forecast</code>. O pacote <code>astsa</code> foi elaborado pelos autores do livro <a href="https://www.stat.pitt.edu/stoffer/tsa4/">Time Series Analysis</a>. Já o <code>forecast</code> foi desenvolvido por Rob. Hyndman, autor do livro <a href="https://otexts.com/fpp2/">Forecasting: Principles and Practice</a>.</p>
</section>
<section id="o-modelo" class="level1">
<h1>O modelo</h1>
<p>O SARIMA adiciona sazonalidade estocástica multiplicativa ao modelo ARIMA. Lembre-se que o modelo ARMA(p,q) geral é da forma: <img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Bequation%7D%0A%20%20y_%7Bt%7D%20=%20%5Cmu%20+%20%5Cphi_%7B1%7Dy_%7Bt-1%7D%20+%20%5Cphi_%7B2%7Dy_%7Bt-2%7D%20+%20%5Cdots%20+%20%5Cphi_%7Bp%7Dy_%7Bt-p%7D%20+%20%5Cepsilon_%7Bt%7D%20+%20%5Ctheta_%7B1%7D%5Cepsilon_%7Bt-1%7D%20+%20%5Ctheta_%7B2%7D%5Cepsilon_%7Bt-2%7D%20+%20%5Cdots%20+%20%5Ctheta_%7Bq%7D%5Cepsilon_%7Bt-q%7D%0A%5Cend%7Bequation%7D"> Podemos reescrever a expressão acima usando o operador defasagem e os polinômios <img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Balign%7D%0A%5Cphi(L)%20&amp;%20=%201-%5Cphi_%7B1%7DL%20-%20%5Cphi_%7B2%7DL%5E%7B2%7D%20-%20%5Cdots%20-%20%5Cphi_%7Bp%7DL%5E%7Bp%7D%20%5C%5C%0A%5Ctheta(L)%20&amp;%20=%201+%5Ctheta_%7B1%7DL%20+%20%5Ctheta_%7B2%7DL%5E%7B2%7D%20+%20%5Cdots%20+%20%5Ctheta_%7Bq%7DL%5E%7Bq%7D%0A%5Cend%7Balign%7D"> Assim a expressão pode ser resumida como <img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Bequation%7D%0A%20%20%5Cphi(L)y_%7Bt%7D%20=%20%5Cmu%20+%20%5Ctheta(L)%5Cepsilon_%7Bt%7D%0A%5Cend%7Bequation%7D"> O modelo ARIMA tira diferenças <img src="https://latex.codecogs.com/png.latex?d"> de <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D">: <img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Bequation%7D%0A%20%20%5Cphi(L)(1-L)%5E%7Bd%7Dy_%7Bt%7D%20=%20%5Ctheta(L)%5Cepsilon_%7Bt%7D%0A%5Cend%7Bequation%7D"> A princípio não há restrição sobre o valor de <img src="https://latex.codecogs.com/png.latex?d"> mas na prática sabemos que <img src="https://latex.codecogs.com/png.latex?d%20=%201"> ou <img src="https://latex.codecogs.com/png.latex?d%20=%202">. Agora vamos definir os polinômios sazonais: <img src="https://latex.codecogs.com/png.latex?%5CPhi(L%5E%7Bs%7D)%20=%201-%5CPhi_%7B1%7DL%5E%7Bs%7D%20-%20%5CPhi_%7B2%7DL%5E%7B2s%7D%20-%20%5Cdots%20-%20%5CPhi_%7Bp%7DL%5E%7BPs%7D"> e <img src="https://latex.codecogs.com/png.latex?%5CTheta(L%5E%7Bs%7D)%20=%201+%5CTheta_%7B1%7DL%5E%7Bs%7D%20+%20%5CTheta_%7B2%7DL%5E%7B2s%7D%20+%20%5Cdots%20+%20%5CTheta_%7Bq%7DL%5E%7BQs%7D">. Ou seja, digamos que a série <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D"> seja mensurada mensalmente e apresente alguma sazonalidade anual. <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D"> pode ser, por exemplo, a receita de vendas de uma empresa de varejo. É provável que a receita no mês de dezembro seja mais alta que a média do ano. Como isto se repete todo ano vamos encontrar um padrão anual nos dados que deve ser modelado. Neste exemplo, como <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D"> é mensal temos que <img src="https://latex.codecogs.com/png.latex?s%20=%2012"> nos polinômios sazonais. Logo teremos que: <img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Balign%7D%0A%20%20%5CPhi(L)y_%7Bt%7D%20&amp;%20=%201%20+%20%5CPhi_%7B1%7Dy_%7Bt-12%7D%20+%20%5CPhi_%7B2%7Dy_%7Bt-24%7D%20+%20%5Cdots%20+%20%5CPhi_%7Bp%7Dy_%7Bt-Ps%7D%5C%5C%0A%20%20%5CTheta(L)%5Cepsilon_%7Bt%7D%20&amp;%20=%201+%5CTheta_%7B1%7D%5Cepsilon_%7Bt-12%7D%20+%20%5CTheta_%7B2%7D%5Cepsilon_%7Bt-24%7D%20+%20%5Cdots%20+%20%5CTheta_%7Bq%7D%5Cepsilon_%7Bt-Qs%7D%0A%5Cend%7Balign%7D"> Podemos então montar modelos SARMA(p,q)(P,Q)[s]. Para tornar a notação mais clara vamos escrever o caso em que <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D%20%5Csim%20%5Ctext%7BSARMA%7D(2,1)(1,3)%5B12%5D"> <img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Bequation%7D%0A%20%20y_%7Bt%7D%20=%20%5Cphi_%7B1%7Dy_%7Bt-1%7D%20+%20%5Cphi_%7B2%7Dy_%7Bt-2%7D%20+%20%5CPhi_%7B1%7Dy_%7Bt-12%7D%20+%20%5Cepsilon_%7Bt%7D%20+%20%5Ctheta_%7B1%7D%5Cepsilon_%7Bt-1%7D%20+%20%5CTheta_%7B1%7D%5Cepsilon_%7Bt-12%7D%20+%20%5CTheta_%7B2%7D%5Cepsilon_%7Bt-24%7D%20+%20%5CTheta_%7B3%7D%5Cepsilon_%7Bt-36%7D%0A%5Cend%7Bequation%7D"> De forma geral, temos que: <img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Bequation%7D%0A%20%20%5CPhi(L%5E%7Bs%7D)%5Cphi(L)y_%7Bt%7D%20=%20%5Cmu%20+%20%5Ctheta(L%5E%7Bs%7D)%5Ctheta(L)%5Cepsilon_%7Bt%7D%0A%5Cend%7Bequation%7D"> Finalmente, de forma análoga ao ARIMA, tiramos diferenças sazonais <img src="https://latex.codecogs.com/png.latex?D"> para chegar em: <img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Bequation%7D%0A%20%20%5CPhi(L%5E%7Bs%7D)%5Cphi(L)(1-L)%5E%7Bd%7D(1-L%5E%7Bs%7D)%5E%7BD%7Dy_%7Bt%7D%20=%20%5Cmu%20+%20%5Ctheta(L%5E%7Bs%7D)%5Ctheta(L)%5Cepsilon_%7Bt%7D%0A%5Cend%7Bequation%7D"> Assim, como na análise do ARIMA o procedimento para identificação parte da comparação entre o correlograma empírico com as correlações teóricas do processo SARMA(p,q)(P,Q)[s]. Digamos, por exemplo, que a série de interesse <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D"> siga um SARIMA(p,0,q)(P,1,Q). Então, temos que</p>
<p><img src="https://latex.codecogs.com/png.latex?%0Ax_%7Bt%7D%20=%20(1-L%5E%7B12%7D)y_%7Bt%7D%0A"></p>
<p>a série diferenciada sazonalmente, segue um SARMA(p,q)(P,Q). A partir das funções de autocorrelação e autocorrelação parcial de <img src="https://latex.codecogs.com/png.latex?x_%7Bt%7D"> podemos tentar recuperar o verdadeiro valor de <img src="https://latex.codecogs.com/png.latex?p">, <img src="https://latex.codecogs.com/png.latex?q">, <img src="https://latex.codecogs.com/png.latex?P"> e <img src="https://latex.codecogs.com/png.latex?Q">.</p>
</section>
<section id="exemplo-passagens-aéreas" class="level1">
<h1>Exemplo: passagens aéreas</h1>
<p>Primeiro vamos carregar os pacotes.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(astsa)    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># acf2() e sarima()</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(forecast) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># forecast() e autoplot()</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># carregar temas para a função autoplot()</span></span></code></pre></div>
</div>
<p>Vamos analisar o comportamento da demanda por passagens aéreas internacionais. Este é um exemplo clássico estudado em Box &amp; Jenkins (1976). Esta séria apresenta tanto uma tendência de crescimento como uma clara sazonalidade.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(AirPassengers) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">21</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Passagens aéreas (milhares)"</span>, </span>
<span id="cb2-4">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Demanda mensal de passagens aéreas internacionais"</span>, </span>
<span id="cb2-5">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fonte: Box &amp; Jenkins (1976)"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb2-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-sarima-no-r/index_files/figure-html/unnamed-chunk-3-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Uma maneira interessante de visualizar a sazonalidade da série é “empilhando” os ciclos. No caso, parece haver uma sazonalidade que se repete a cada ano. A função <code>ggseasonplot</code> do pacote <code>forecast</code> facilita esta visualização. Os meses de junho, julho e agosto parecem sempre ter valores mais elevados. De fato, estes são os meses do verão no hemisfério norte e da alta estação do turismo.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Gráfico mensal</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggseasonplot</span>(AirPassengers) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggtitle</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sazonalidade"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_colour_discrete</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ano"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-sarima-no-r/index_files/figure-html/unnamed-chunk-4-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<section id="identificação-e-tranformações" class="level2">
<h2 class="anchored" data-anchor-id="identificação-e-tranformações">Identificação e tranformações</h2>
<p>Como a variância da série cresce ao longo do tempo aplico uma transformação log nos valores da série. Seja <img src="https://latex.codecogs.com/png.latex?y_%7Bt%7D"> nossa série. Então fazemos <img src="https://latex.codecogs.com/png.latex?ly_%7Bt%7D%20%5Cequiv%20%5Ctext%7Blog%7D(y_%7Bt%7D)."></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Aplica transformação log (logaritmo natural)</span></span>
<span id="cb4-2">ly <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log</span>(AirPassengers)</span>
<span id="cb4-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Gráfico</span></span>
<span id="cb4-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(ly) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">shape =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">21</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb4-7">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Passagens aéreas (log)"</span>,</span>
<span id="cb4-8">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Demanda mensal de passagens aéreas internacionais"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-sarima-no-r/index_files/figure-html/unnamed-chunk-5-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Para testar a acurácia do modelo vamos remover algumas das últimas observações. Estas serão testadas contra as previsões do modelo. Aqui sigo a nomenclatura de <em>train</em> (treino) e <em>test</em> (teste). O gráfico abaixo permite visualizar esta divisão, onde os valores em vermelho foram excluídos da nossa amostra.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">train <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">window</span>(ly, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">end =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1957</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>))</span>
<span id="cb5-2">test <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">window</span>(ly, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">start =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1958</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb5-3"></span>
<span id="cb5-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(train) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autolayer</span>(test) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottom"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-sarima-no-r/index_files/figure-html/unnamed-chunk-6-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Tirando a primeira diferença da série removemos a sua tendência de crescimento. Fazemos <img src="https://latex.codecogs.com/png.latex?dly_%7Bt%7D%20%5Cequiv%20(1-L)ly_%7Bt%7D%20=%20ly_%7Bt%7D%20-%20ly_%7Bt-1%7D"> usando a função <code>diff()</code>. Note pelo gráfico que ainda parece haver forte sazonalidade na série.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Tira a primeira diferença da série</span></span>
<span id="cb6-2">dly <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">diff</span>(train)</span>
<span id="cb6-3"></span>
<span id="cb6-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(dly) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggtitle</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Primeira diferença do log da série"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb6-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-sarima-no-r/index_files/figure-html/unnamed-chunk-7-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Podemos ver isto mais claramente na análise do correlograma da série diferenciada. No gráfico abaixo, os “lags” seguem a periodicidade da série, isto é, cada “lag” representa o equivalente a 12 meses. Parece haver uma forte correlação entre <img src="https://latex.codecogs.com/png.latex?dly_%7Bt%7D"> com <img src="https://latex.codecogs.com/png.latex?dly_%7Bt-12%7D,%20dly_%7Bt-24%7D,%20%5Cdots,%20dly_%7Bt-12k%7D"> com <img src="https://latex.codecogs.com/png.latex?k%20=%201,%202,%20%5Cdots">.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Gráfico da FAC e FACP</span></span>
<span id="cb7-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">acf2</span>(dly)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-sarima-no-r/index_files/figure-html/unnamed-chunk-8-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Agora tiramos uma diferença sazonal de 12 meses. A série resultante, <img src="https://latex.codecogs.com/png.latex?sdly_%7Bt%7D"> fica: <img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Balign%7D%0A%20%20sdly_%7Bt%7D%20%5Cequiv%20(1-L%5E%7B12%7D)dly_%7Bt%7D%20&amp;%20=%20(1-L%5E%7B12%7D)(1-L)ly_%7Bt%7D%20%5C%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20&amp;%20=%20(1%20-%20L%5E%7B12%7D%20-%20L%20+%20L%5E%7B13%7D)ly_%7Bt%7D%20%5C%5C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20&amp;%20=%20ly_%7Bt%7D%20-%20ly_%7Bt-1%7D%20-%20ly_%7Bt-12%7D%20+%20ly_%7Bt-13%7D%0A%5Cend%7Balign%7D"></p>
<p>Abaixo temos o correlograma de <img src="https://latex.codecogs.com/png.latex?sdly_%7Bt%7D">. A primeira defasagem é significativa tanto no ACF como no PACF. Além disso a 12ª defasagem também é significativa em ambos. Assim, vamos primeiro tentar um modelo de “ordem máxima” SARIMA<img src="https://latex.codecogs.com/png.latex?(1,1,1)(1,1,1)%5B12%5D">. A partir deste modelo, vamos tentar estimar outros de ordens mais baixas para evitar o problema de sobreparametrização.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Tira a primeira diferença sazonal da série</span></span>
<span id="cb8-2">sdly <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">diff</span>(dly, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)</span>
<span id="cb8-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Gráfico da FAC e FACP</span></span>
<span id="cb8-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">acf2</span>(sdly)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-sarima-no-r/index_files/figure-html/unnamed-chunk-9-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="estimação" class="level2">
<h2 class="anchored" data-anchor-id="estimação">Estimação</h2>
<p>A equação do modelo que estamos estimando é: <img src="https://latex.codecogs.com/png.latex?%0A%20%20(1%20-%20%5Cphi%20L)(1%20-%20%5CPhi%20L%5E%7B12%7D)(1%20-%20L)(1%20-%20L%5E%7B12%7D)ly_%7Bt%7D%20=%20(1%20+%20%5Ctheta%20L)(1%20+%20%5CTheta%20L%5E%7B12%7D)%5Cepsilon_%7Bt%7D%0A"> Vamos o usar o comando <code>sarima</code> do pacote <code>astsa</code>. Note que os resíduos do modelo parecem se comportar como ruído branco, indicando que nosso modelo está bem ajustado.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">(m1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sarima</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">d =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">q =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">P =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">D =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Q =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">S =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xdata =</span> train))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>initial  value -3.031632 
iter   2 value -3.170590
iter   3 value -3.246467
iter   4 value -3.246688
iter   5 value -3.247295
iter   6 value -3.247539
iter   7 value -3.247841
iter   8 value -3.248283
iter   9 value -3.248794
iter  10 value -3.249345
iter  11 value -3.249360
iter  12 value -3.249378
iter  13 value -3.249379
iter  14 value -3.249380
iter  15 value -3.249381
iter  16 value -3.249381
iter  17 value -3.249381
iter  17 value -3.249381
iter  17 value -3.249381
final  value -3.249381 
converged
initial  value -3.248923 
iter   2 value -3.252561
iter   3 value -3.258267
iter   4 value -3.265627
iter   5 value -3.267071
iter   6 value -3.267585
iter   7 value -3.267745
iter   8 value -3.268029
iter   9 value -3.268401
iter  10 value -3.268494
iter  11 value -3.268499
iter  12 value -3.268506
iter  13 value -3.268511
iter  14 value -3.268511
iter  15 value -3.268511
iter  15 value -3.268511
iter  15 value -3.268511
final  value -3.268511 
converged</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-sarima-no-r/index_files/figure-html/unnamed-chunk-10-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$fit

Call:
arima(x = xdata, order = c(p, d, q), seasonal = list(order = c(P, D, Q), period = S), 
    include.mean = !no.constant, transform.pars = trans, fixed = fixed, optim.control = list(trace = trc, 
        REPORT = 1, reltol = tol))

Coefficients:
         ar1      ma1     sar1     sma1
      0.2565  -0.6243  -0.0599  -0.5574
s.e.  0.2759   0.2289   0.1765   0.1670

sigma^2 estimated as 0.001367:  log likelihood = 175.71,  aic = -341.42

$degrees_of_freedom
[1] 91

$ttable
     Estimate     SE t.value p.value
ar1    0.2565 0.2759  0.9299  0.3549
ma1   -0.6243 0.2289 -2.7271  0.0077
sar1  -0.0599 0.1765 -0.3392  0.7353
sma1  -0.5574 0.1670 -3.3380  0.0012

$AIC
[1] -3.593882

$AICc
[1] -3.589203

$BIC
[1] -3.459467</code></pre>
</div>
</div>
<p>Para evitar o problema de sobreparametrização (<em>overfitting</em>) temos que tentar ajustar modelos de ordens similares, porém mais baixas. Este processo costuma ser iterativo, isto é, na base da tentativa e erro seguindo algum critério de informação (i.e.: AIC, AICc, BIC, etc.). Depois de tentar vários modelos diferentes chegamos, por exemplo, no SARIMA<img src="https://latex.codecogs.com/png.latex?(0,1,1)(0,1,1)%5B12%5D">. A equação do modelo pode ser expressa como: <img src="https://latex.codecogs.com/png.latex?%0A%20%20(1%20-%20L)(1%20-%20L%5E%7B12%7D)ly_%7Bt%7D%20=%20(1%20+%20%5Ctheta%20L)(1%20+%20%5CTheta%20L%5E%7B12%7D)%5Cepsilon_%7Bt%7D%0A"></p>
<p>Novamente, os resíduos do modelo indicam que ele está bem ajustado aos dados.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">m2 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sarima</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">d =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">q =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">P =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">D =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Q =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">S =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xdata =</span> train)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>initial  value -3.047456 
iter   2 value -3.251231
iter   3 value -3.251514
iter   4 value -3.268396
iter   5 value -3.270049
iter   6 value -3.270196
iter   7 value -3.270197
iter   8 value -3.270198
iter   8 value -3.270198
iter   8 value -3.270198
final  value -3.270198 
converged
initial  value -3.263453 
iter   2 value -3.264133
iter   3 value -3.264159
iter   4 value -3.264160
iter   4 value -3.264160
iter   4 value -3.264160
final  value -3.264160 
converged</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-sarima-no-r/index_files/figure-html/unnamed-chunk-11-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">m2<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>fit</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = xdata, order = c(p, d, q), seasonal = list(order = c(P, D, Q), period = S), 
    include.mean = !no.constant, transform.pars = trans, fixed = fixed, optim.control = list(trace = trc, 
        REPORT = 1, reltol = tol))

Coefficients:
          ma1     sma1
      -0.3864  -0.5885
s.e.   0.1097   0.0927

sigma^2 estimated as 0.001383:  log likelihood = 175.3,  aic = -344.59</code></pre>
</div>
</div>
<p>A estimativa tem a forma:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%20%20(1%20-%20L)(1%20-%20L%5E%7B12%7D)ly_%7Bt%7D%20=%20(1%20-%200.3864%20L)(1%20-%200.5885%20L%5E%7B12%7D)%5Cepsilon_%7Bt%7D%0A"></p>
</section>
<section id="previsão" class="level2">
<h2 class="anchored" data-anchor-id="previsão">Previsão</h2>
<p>Para computar as previsões do modelo usamos a função <code>sarima.for</code>. Aqui podemos comparar as previsões do modelo (construindo usando apenas as observações dentro de <em>train</em>) com as observações. Esta função automaticametne retorna um gráfico com as previsões fora da amostra.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">pred <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sarima.for</span>(train, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">n.ahead =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(test),</span>
<span id="cb16-2">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">p =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">d =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">q =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">P =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">D =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Q =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">S =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-sarima-no-r/index_files/figure-html/unnamed-chunk-13-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Podemos construir um gráfico que inclui as observações reservadas no <em>test</em> usando as seguintes funções base do R.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot.ts</span>(pred<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>pred, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylim =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">5.7</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">6.5</span>),</span>
<span id="cb17-2">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">ylab =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>,</span>
<span id="cb17-3">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">main =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Previsão do modelo SARIMA(0, 1, 1)(0, 1, 1)[12]"</span>)</span>
<span id="cb17-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lines</span>(test, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"o"</span>)</span>
<span id="cb17-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">legend</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"topleft"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Previsto"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Observado"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lty =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,</span>
<span id="cb17-6">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pch =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>))</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-sarima-no-r/index_files/figure-html/unnamed-chunk-14-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Como comentado em outro post, pode-se produzir visualizações mais elegantes usando o <code>ggplot2</code>, mas o pacote não “conversa” bem com os objetos típicos de séries de tempo. Um jeito de contornar isto é usando a função <code>autoplot()</code> do pacote <code>forecast</code>. Abaixo, reestimo o modelo usando a função <code>arima</code>. Este passo é necessário para usar a função <code>autoplot()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">m <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arima</span>(train, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">seasonal =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">order =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">period =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>))</span></code></pre></div>
</div>
<p>Agora podemos verificar a qualidade das nossas previsões. O gráfico abaixo foi construído funções base do R. A linha azul representa as previsões do modelo SARIMA especificado acima, enquanto que a linha vermelha representa as observações. As áreas sombreadas são intervalos de confiança: o mais escuro é de 80% e o mais claro de 95%.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forecast</span>(m, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">h =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(test)))</span>
<span id="cb19-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lines</span>(test, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>)</span>
<span id="cb19-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">legend</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"topleft"</span>,</span>
<span id="cb19-4">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Previsto"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Observado"</span>),</span>
<span id="cb19-5">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">lty =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">col =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>))</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-sarima-no-r/index_files/figure-html/unnamed-chunk-16-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Usando o autoplot temos o seguinte resultado:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">forecast</span>(m, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">h =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(test)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">include =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autolayer</span>(test) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb20-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb20-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span>)</span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https:://www.restateinsight.com/posts/general-posts/repost-sarima-no-r/index_files/figure-html/unnamed-chunk-17-1.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="conclusão" class="level1">
<h1>Conclusão</h1>
<p>Os modelos SARIMA são uma extensão aos modelos ARIMA que acrescentam um componente sazonal nos dados. O exemplo acima mostrou uma série com frequência mensal, mas a mesma lógica se aplica a séries com sazonalidade semestral, trimestral, etc.</p>
<p>Estes modelos geram boas previsões e são fáceis de estimar o que explica a sua popularidade.</p>


</section>

 ]]></description>
  <category>econometria</category>
  <category>time-series</category>
  <category>repost</category>
  <category>tutorial-R</category>
  <guid>https:://www.restateinsight.com/posts/general-posts/repost-sarima-no-r/index.html</guid>
  <pubDate>Tue, 01 Jan 2019 02:00:00 GMT</pubDate>
  <media:content url="https:://www.restateinsight.com/static/sarima_tutorial_r.svg" medium="image" type="image/svg+xml"/>
</item>
</channel>
</rss>
