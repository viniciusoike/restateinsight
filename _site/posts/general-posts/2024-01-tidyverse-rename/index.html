<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vinicius Oike">
<meta name="dcterms.date" content="2024-01-08">
<meta name="description" content="Neste post ensino abordagens diferentes para renomear colunas de maneira eficiente.">

<title>Vinicius Oike - O novo tidyverse: rename</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-EJF8PGT67H"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-EJF8PGT67H', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Vinicius Oike</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../blog.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../aboutme.html" rel="" target="">
 <span class="menu-text">Sobre</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../my_apps.html" rel="" target="">
 <span class="menu-text">Apps</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/viniciusoike" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/viniciusoike" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../archive.html" rel="" target="">
 <span class="menu-text">Archive</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">O novo tidyverse: rename</h1>
                  <div>
        <div class="description">
          Neste post ensino abordagens diferentes para renomear colunas de maneira eficiente.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">data-science</div>
                <div class="quarto-category">tutorial-R</div>
                <div class="quarto-category">tidyverse</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Vinicius Oike </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 8, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#tidyverse" id="toc-tidyverse" class="nav-link active" data-scroll-target="#tidyverse">Tidyverse</a></li>
  <li><a href="#alguns-verbos" id="toc-alguns-verbos" class="nav-link" data-scroll-target="#alguns-verbos">Alguns verbos</a></li>
  <li><a href="#rename" id="toc-rename" class="nav-link" data-scroll-target="#rename">Rename</a>
  <ul class="collapse">
  <li><a href="#o-básico" id="toc-o-básico" class="nav-link" data-scroll-target="#o-básico">O básico</a>
  <ul class="collapse">
  <li><a href="#boas-práticas" id="toc-boas-práticas" class="nav-link" data-scroll-target="#boas-práticas">Boas práticas</a></li>
  </ul></li>
  <li><a href="#usando-funções" id="toc-usando-funções" class="nav-link" data-scroll-target="#usando-funções">Usando funções</a>
  <ul class="collapse">
  <li><a href="#renomeando-apenas-algumas-colunas" id="toc-renomeando-apenas-algumas-colunas" class="nav-link" data-scroll-target="#renomeando-apenas-algumas-colunas">Renomeando apenas algumas colunas</a></li>
  </ul></li>
  <li><a href="#usando-vetores" id="toc-usando-vetores" class="nav-link" data-scroll-target="#usando-vetores">Usando vetores</a>
  <ul class="collapse">
  <li><a href="#all_of-e-any_of" id="toc-all_of-e-any_of" class="nav-link" data-scroll-target="#all_of-e-any_of"><code>all_of</code> e <code>any_of</code></a></li>
  </ul></li>
  <li><a href="#usando-funções-e-vetores" id="toc-usando-funções-e-vetores" class="nav-link" data-scroll-target="#usando-funções-e-vetores">Usando funções e vetores</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="tidyverse" class="level1">
<h1>Tidyverse</h1>
<p>O tidyverse é uma coleção poderosa de pacotes, voltados para a manipulação e limpeza de dados. Num outro post, discuti alguns <a href="https://restateinsight.com/posts/general-posts/2023-09-tidyverse/">aspectos gerais da filosofia</a> destes pacotes que incluem a sua consistência sintática e o uso de <a href="https://restateinsight.com/posts/general-posts/2023-09-pipes-in-r/">pipes</a>. O tidyverse está em constante expansão, novas funcionalidades são criadas para melhorar a performance e capabilidade de suas funções. Assim, é importante atualizar nosso conhecimento destes pacotes periodicamente. Nesta série de posts vou focar nas funções principais dos pacotes <code>dplyr</code> e <code>tidyr</code>, voltados para a limpeza de dados.</p>
</section>
<section id="alguns-verbos" class="level1">
<h1>Alguns verbos</h1>
<p>Essencialmente, o <code>dplyr</code> gira em torno de quatro grandes funções: <code>filter</code>, <code>select</code>, <code>mutate</code> e <code>summarise</code>. Estas funções fazem o grosso do trabalho de limpeza de dados: filtram linhas, selecionam colunas e transformam os dados. A tabela abaixo resume as principais funções do pacote.</p>
<table class="table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Nome da Função</th>
<th>Tradução</th>
<th>O que faz</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>rename</code></td>
<td>Renomear</td>
<td>Modifica o nome das colunas.</td>
</tr>
<tr class="even">
<td><code>select</code></td>
<td>Selecionar</td>
<td>Seleciona as colunas.</td>
</tr>
<tr class="odd">
<td><code>filter</code></td>
<td>Filtrar</td>
<td>Filtra/seleciona as linhas segundo alguma condição.</td>
</tr>
<tr class="even">
<td><code>arrange</code></td>
<td>Arranjar/ordenar</td>
<td>Ordena as linhas (crescente/decrescente) segundo alguma variável.</td>
</tr>
<tr class="odd">
<td><code>mutate</code></td>
<td>Mutar/transformar</td>
<td>Cria uma nova coluna a partir de outras colunas ou dados.</td>
</tr>
<tr class="even">
<td><code>summarise</code></td>
<td>Sumarizar/resumir</td>
<td>Aplica alguma função sobre as linhas. Cria uma tabela “resumo”.</td>
</tr>
<tr class="odd">
<td><code>group_by</code></td>
<td>Agrupar</td>
<td>Agrupa as linhas segundo alguma variável.</td>
</tr>
</tbody>
</table>
</section>
<section id="rename" class="level1">
<h1>Rename</h1>
<section id="o-básico" class="level2">
<h2 class="anchored" data-anchor-id="o-básico">O básico</h2>
<p>Os pacotes utilizados neste tutorial são listados abaixo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringi)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sidrar)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Antes de mais nada, vamos importar uma base de dados qualquer do IBGE usando o pacote <code>sidrar</code>. A base importada mostra o custo médio m² de construção no Brasil da pesquisa SINAPI.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> sidrar<span class="sc">::</span><span class="fu">get_sidra</span>(<span class="dv">2296</span>, <span class="at">period =</span> <span class="st">"202201-202301"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div id="ahcjkqqkiw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ahcjkqqkiw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ahcjkqqkiw thead, #ahcjkqqkiw tbody, #ahcjkqqkiw tfoot, #ahcjkqqkiw tr, #ahcjkqqkiw td, #ahcjkqqkiw th {
  border-style: none;
}

#ahcjkqqkiw p {
  margin: 0;
  padding: 0;
}

#ahcjkqqkiw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ahcjkqqkiw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ahcjkqqkiw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ahcjkqqkiw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ahcjkqqkiw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ahcjkqqkiw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ahcjkqqkiw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ahcjkqqkiw .gt_col_heading {
  color: #FFFFFF;
  background-color: #038901;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ahcjkqqkiw .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #038901;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ahcjkqqkiw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ahcjkqqkiw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ahcjkqqkiw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ahcjkqqkiw .gt_spanner_row {
  border-bottom-style: hidden;
}

#ahcjkqqkiw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ahcjkqqkiw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#ahcjkqqkiw .gt_from_md > :first-child {
  margin-top: 0;
}

#ahcjkqqkiw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ahcjkqqkiw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#ahcjkqqkiw .gt_stub {
  color: #333333;
  background-color: #CAFFAF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#ahcjkqqkiw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ahcjkqqkiw .gt_row_group_first td {
  border-top-width: 2px;
}

#ahcjkqqkiw .gt_row_group_first th {
  border-top-width: 2px;
}

#ahcjkqqkiw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ahcjkqqkiw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#ahcjkqqkiw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ahcjkqqkiw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ahcjkqqkiw .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ahcjkqqkiw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#ahcjkqqkiw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#ahcjkqqkiw .gt_striped {
  background-color: #EDF6E8;
}

#ahcjkqqkiw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ahcjkqqkiw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ahcjkqqkiw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ahcjkqqkiw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ahcjkqqkiw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ahcjkqqkiw .gt_left {
  text-align: left;
}

#ahcjkqqkiw .gt_center {
  text-align: center;
}

#ahcjkqqkiw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ahcjkqqkiw .gt_font_normal {
  font-weight: normal;
}

#ahcjkqqkiw .gt_font_bold {
  font-weight: bold;
}

#ahcjkqqkiw .gt_font_italic {
  font-style: italic;
}

#ahcjkqqkiw .gt_super {
  font-size: 65%;
}

#ahcjkqqkiw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ahcjkqqkiw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ahcjkqqkiw .gt_indent_1 {
  text-indent: 5px;
}

#ahcjkqqkiw .gt_indent_2 {
  text-indent: 10px;
}

#ahcjkqqkiw .gt_indent_3 {
  text-indent: 15px;
}

#ahcjkqqkiw .gt_indent_4 {
  text-indent: 20px;
}

#ahcjkqqkiw .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Nível Territorial (Código)">Nível Territorial (Código)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Nível Territorial">Nível Territorial</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Unidade de Medida (Código)">Unidade de Medida (Código)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Unidade de Medida">Unidade de Medida</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Valor">Valor</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right">1</td>
<td headers="Nível Territorial" class="gt_row gt_left">Brasil</td>
<td headers="Unidade de Medida (Código)" class="gt_row gt_right">38</td>
<td headers="Unidade de Medida" class="gt_row gt_left">Reais</td>
<td headers="Valor" class="gt_row gt_right">1525.48</td></tr>
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right gt_striped">1</td>
<td headers="Nível Territorial" class="gt_row gt_left gt_striped">Brasil</td>
<td headers="Unidade de Medida (Código)" class="gt_row gt_right gt_striped">38</td>
<td headers="Unidade de Medida" class="gt_row gt_left gt_striped">Reais</td>
<td headers="Valor" class="gt_row gt_right gt_striped">915.79</td></tr>
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right">1</td>
<td headers="Nível Territorial" class="gt_row gt_left">Brasil</td>
<td headers="Unidade de Medida (Código)" class="gt_row gt_right">38</td>
<td headers="Unidade de Medida" class="gt_row gt_left">Reais</td>
<td headers="Valor" class="gt_row gt_right">609.69</td></tr>
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right gt_striped">1</td>
<td headers="Nível Territorial" class="gt_row gt_left gt_striped">Brasil</td>
<td headers="Unidade de Medida (Código)" class="gt_row gt_right gt_striped">30</td>
<td headers="Unidade de Medida" class="gt_row gt_left gt_striped">Número-índice</td>
<td headers="Valor" class="gt_row gt_right gt_striped">763.46</td></tr>
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right">1</td>
<td headers="Nível Territorial" class="gt_row gt_left">Brasil</td>
<td headers="Unidade de Medida (Código)" class="gt_row gt_right">30</td>
<td headers="Unidade de Medida" class="gt_row gt_left">Número-índice</td>
<td headers="Valor" class="gt_row gt_right">693.71</td></tr>
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right gt_striped">1</td>
<td headers="Nível Territorial" class="gt_row gt_left gt_striped">Brasil</td>
<td headers="Unidade de Medida (Código)" class="gt_row gt_right gt_striped">30</td>
<td headers="Unidade de Medida" class="gt_row gt_left gt_striped">Número-índice</td>
<td headers="Valor" class="gt_row gt_right gt_striped">962.09</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>A função <code>rename</code> serve para trocar o nome de uma coluna seguindo a sintaxe:</p>
<ul>
<li><code>rename(nome_novo = nome_velho)</code></li>
</ul>
<p>A forma mais imediata de utilizar a função é simplesmente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>dat_renamed <span class="ot">&lt;-</span> <span class="fu">rename</span>(dat, <span class="at">valor =</span> Valor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div id="hgcwvcyazw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#hgcwvcyazw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#hgcwvcyazw thead, #hgcwvcyazw tbody, #hgcwvcyazw tfoot, #hgcwvcyazw tr, #hgcwvcyazw td, #hgcwvcyazw th {
  border-style: none;
}

#hgcwvcyazw p {
  margin: 0;
  padding: 0;
}

#hgcwvcyazw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#hgcwvcyazw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#hgcwvcyazw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#hgcwvcyazw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#hgcwvcyazw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hgcwvcyazw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#hgcwvcyazw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#hgcwvcyazw .gt_col_heading {
  color: #FFFFFF;
  background-color: #038901;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#hgcwvcyazw .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #038901;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#hgcwvcyazw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#hgcwvcyazw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#hgcwvcyazw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#hgcwvcyazw .gt_spanner_row {
  border-bottom-style: hidden;
}

#hgcwvcyazw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#hgcwvcyazw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#hgcwvcyazw .gt_from_md > :first-child {
  margin-top: 0;
}

#hgcwvcyazw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#hgcwvcyazw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#hgcwvcyazw .gt_stub {
  color: #333333;
  background-color: #CAFFAF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#hgcwvcyazw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#hgcwvcyazw .gt_row_group_first td {
  border-top-width: 2px;
}

#hgcwvcyazw .gt_row_group_first th {
  border-top-width: 2px;
}

#hgcwvcyazw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hgcwvcyazw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#hgcwvcyazw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#hgcwvcyazw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#hgcwvcyazw .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#hgcwvcyazw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#hgcwvcyazw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#hgcwvcyazw .gt_striped {
  background-color: #EDF6E8;
}

#hgcwvcyazw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#hgcwvcyazw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hgcwvcyazw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hgcwvcyazw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#hgcwvcyazw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#hgcwvcyazw .gt_left {
  text-align: left;
}

#hgcwvcyazw .gt_center {
  text-align: center;
}

#hgcwvcyazw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#hgcwvcyazw .gt_font_normal {
  font-weight: normal;
}

#hgcwvcyazw .gt_font_bold {
  font-weight: bold;
}

#hgcwvcyazw .gt_font_italic {
  font-style: italic;
}

#hgcwvcyazw .gt_super {
  font-size: 65%;
}

#hgcwvcyazw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#hgcwvcyazw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#hgcwvcyazw .gt_indent_1 {
  text-indent: 5px;
}

#hgcwvcyazw .gt_indent_2 {
  text-indent: 10px;
}

#hgcwvcyazw .gt_indent_3 {
  text-indent: 15px;
}

#hgcwvcyazw .gt_indent_4 {
  text-indent: 20px;
}

#hgcwvcyazw .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Nível Territorial (Código)">Nível Territorial (Código)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Nível Territorial">Nível Territorial</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Unidade de Medida (Código)">Unidade de Medida (Código)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Unidade de Medida">Unidade de Medida</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="valor">valor</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right">1</td>
<td headers="Nível Territorial" class="gt_row gt_left">Brasil</td>
<td headers="Unidade de Medida (Código)" class="gt_row gt_right">38</td>
<td headers="Unidade de Medida" class="gt_row gt_left">Reais</td>
<td headers="valor" class="gt_row gt_right">1525.48</td></tr>
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right gt_striped">1</td>
<td headers="Nível Territorial" class="gt_row gt_left gt_striped">Brasil</td>
<td headers="Unidade de Medida (Código)" class="gt_row gt_right gt_striped">38</td>
<td headers="Unidade de Medida" class="gt_row gt_left gt_striped">Reais</td>
<td headers="valor" class="gt_row gt_right gt_striped">915.79</td></tr>
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right">1</td>
<td headers="Nível Territorial" class="gt_row gt_left">Brasil</td>
<td headers="Unidade de Medida (Código)" class="gt_row gt_right">38</td>
<td headers="Unidade de Medida" class="gt_row gt_left">Reais</td>
<td headers="valor" class="gt_row gt_right">609.69</td></tr>
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right gt_striped">1</td>
<td headers="Nível Territorial" class="gt_row gt_left gt_striped">Brasil</td>
<td headers="Unidade de Medida (Código)" class="gt_row gt_right gt_striped">30</td>
<td headers="Unidade de Medida" class="gt_row gt_left gt_striped">Número-índice</td>
<td headers="valor" class="gt_row gt_right gt_striped">763.46</td></tr>
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right">1</td>
<td headers="Nível Territorial" class="gt_row gt_left">Brasil</td>
<td headers="Unidade de Medida (Código)" class="gt_row gt_right">30</td>
<td headers="Unidade de Medida" class="gt_row gt_left">Número-índice</td>
<td headers="valor" class="gt_row gt_right">693.71</td></tr>
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right gt_striped">1</td>
<td headers="Nível Territorial" class="gt_row gt_left gt_striped">Brasil</td>
<td headers="Unidade de Medida (Código)" class="gt_row gt_right gt_striped">30</td>
<td headers="Unidade de Medida" class="gt_row gt_left gt_striped">Número-índice</td>
<td headers="valor" class="gt_row gt_right gt_striped">962.09</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Para renomear múliplas colunas, segue-se uma lógica similar, separando os argumentos adicionais por vírgulas. Note que somos forçados a utilizar o sinal <code>``</code> pois o nome de algumas colunas contêm acentos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>dat_renamed <span class="ot">&lt;-</span> <span class="fu">rename</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  dat,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">valor =</span> Valor,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">nivel_territorial =</span> <span class="st">`</span><span class="at">Nível Territorial</span><span class="st">`</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">code_unit =</span> <span class="st">`</span><span class="at">Unidade de Medida (Código)</span><span class="st">`</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div id="lipxtdjeie" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#lipxtdjeie table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#lipxtdjeie thead, #lipxtdjeie tbody, #lipxtdjeie tfoot, #lipxtdjeie tr, #lipxtdjeie td, #lipxtdjeie th {
  border-style: none;
}

#lipxtdjeie p {
  margin: 0;
  padding: 0;
}

#lipxtdjeie .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#lipxtdjeie .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#lipxtdjeie .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#lipxtdjeie .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#lipxtdjeie .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lipxtdjeie .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#lipxtdjeie .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lipxtdjeie .gt_col_heading {
  color: #FFFFFF;
  background-color: #038901;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#lipxtdjeie .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #038901;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#lipxtdjeie .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#lipxtdjeie .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#lipxtdjeie .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#lipxtdjeie .gt_spanner_row {
  border-bottom-style: hidden;
}

#lipxtdjeie .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#lipxtdjeie .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#lipxtdjeie .gt_from_md > :first-child {
  margin-top: 0;
}

#lipxtdjeie .gt_from_md > :last-child {
  margin-bottom: 0;
}

#lipxtdjeie .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#lipxtdjeie .gt_stub {
  color: #333333;
  background-color: #CAFFAF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#lipxtdjeie .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#lipxtdjeie .gt_row_group_first td {
  border-top-width: 2px;
}

#lipxtdjeie .gt_row_group_first th {
  border-top-width: 2px;
}

#lipxtdjeie .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lipxtdjeie .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#lipxtdjeie .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#lipxtdjeie .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#lipxtdjeie .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lipxtdjeie .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#lipxtdjeie .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#lipxtdjeie .gt_striped {
  background-color: #EDF6E8;
}

#lipxtdjeie .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#lipxtdjeie .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lipxtdjeie .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lipxtdjeie .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lipxtdjeie .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lipxtdjeie .gt_left {
  text-align: left;
}

#lipxtdjeie .gt_center {
  text-align: center;
}

#lipxtdjeie .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#lipxtdjeie .gt_font_normal {
  font-weight: normal;
}

#lipxtdjeie .gt_font_bold {
  font-weight: bold;
}

#lipxtdjeie .gt_font_italic {
  font-style: italic;
}

#lipxtdjeie .gt_super {
  font-size: 65%;
}

#lipxtdjeie .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#lipxtdjeie .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#lipxtdjeie .gt_indent_1 {
  text-indent: 5px;
}

#lipxtdjeie .gt_indent_2 {
  text-indent: 10px;
}

#lipxtdjeie .gt_indent_3 {
  text-indent: 15px;
}

#lipxtdjeie .gt_indent_4 {
  text-indent: 20px;
}

#lipxtdjeie .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Nível Territorial (Código)">Nível Territorial (Código)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="nivel_territorial">nivel_territorial</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="code_unit">code_unit</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Unidade de Medida">Unidade de Medida</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="valor">valor</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right">1</td>
<td headers="nivel_territorial" class="gt_row gt_left">Brasil</td>
<td headers="code_unit" class="gt_row gt_right">38</td>
<td headers="Unidade de Medida" class="gt_row gt_left">Reais</td>
<td headers="valor" class="gt_row gt_right">1525.48</td></tr>
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right gt_striped">1</td>
<td headers="nivel_territorial" class="gt_row gt_left gt_striped">Brasil</td>
<td headers="code_unit" class="gt_row gt_right gt_striped">38</td>
<td headers="Unidade de Medida" class="gt_row gt_left gt_striped">Reais</td>
<td headers="valor" class="gt_row gt_right gt_striped">915.79</td></tr>
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right">1</td>
<td headers="nivel_territorial" class="gt_row gt_left">Brasil</td>
<td headers="code_unit" class="gt_row gt_right">38</td>
<td headers="Unidade de Medida" class="gt_row gt_left">Reais</td>
<td headers="valor" class="gt_row gt_right">609.69</td></tr>
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right gt_striped">1</td>
<td headers="nivel_territorial" class="gt_row gt_left gt_striped">Brasil</td>
<td headers="code_unit" class="gt_row gt_right gt_striped">30</td>
<td headers="Unidade de Medida" class="gt_row gt_left gt_striped">Número-índice</td>
<td headers="valor" class="gt_row gt_right gt_striped">763.46</td></tr>
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right">1</td>
<td headers="nivel_territorial" class="gt_row gt_left">Brasil</td>
<td headers="code_unit" class="gt_row gt_right">30</td>
<td headers="Unidade de Medida" class="gt_row gt_left">Número-índice</td>
<td headers="valor" class="gt_row gt_right">693.71</td></tr>
    <tr><td headers="Nível Territorial (Código)" class="gt_row gt_right gt_striped">1</td>
<td headers="nivel_territorial" class="gt_row gt_left gt_striped">Brasil</td>
<td headers="code_unit" class="gt_row gt_right gt_striped">30</td>
<td headers="Unidade de Medida" class="gt_row gt_left gt_striped">Número-índice</td>
<td headers="valor" class="gt_row gt_right gt_striped">962.09</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Alternativamente, pode-se escrever os nomes usando aspas como no código abaixo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>dat_renamed <span class="ot">&lt;-</span> <span class="fu">rename</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  dat,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">valor =</span> <span class="st">"Valor"</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">nivel_territorial =</span> <span class="st">"Nível Territorial"</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">code_unit =</span> <span class="st">"Unidade de Medida (Código)"</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Literalmente reescrever o nome das colunas pode ser bastante enfadonho. Há duas maneiras mais interessantes de renomear colunas: (1) <strong>utilizando uma função</strong>; e (2) <strong>utilizando um vetor de “swap”</strong>. A primeira abordagem, em geral, é mais simples e pode-se aproveitar funções úteis pré-existentes para manipulação de strings como as do pacote <code>stringr</code>. A segunda abordagem exige mais esforço manual é recomendada quando não existem regras simples para renomear as colunas.</p>
<section id="boas-práticas" class="level3">
<h3 class="anchored" data-anchor-id="boas-práticas">Boas práticas</h3>
<p>Os nomes das colunas de um <code>data.frame</code> devem:</p>
<ol type="1">
<li>Ser únicos (não-duplicados) e evitar caracteres maiúsculos.</li>
<li>Não devem incluir caracteres especiais (e.g.&nbsp;!*&amp;@%), nem começar com um número ou caractere especial. Também é recomendável evitar o uso de acentos (é, ç, à, etc.).</li>
<li>Evitar espaços em branco, que devem ser substituídos por <code>_</code> ou omitidos (e.g.&nbsp;<code>PIB Agro</code> deve ser reescrito como <code>pibAgro</code> ou <code>pib_agro</code>.</li>
<li>Evitar nomes “reservados” como <code>for</code>, <code>in</code>, <code>TRUE</code>, <code>if</code>, etc. Estas palavras tem tratamento especial dentro do R e não se deve utilizá-las como nome de coluna<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</li>
</ol>
<p>Existe uma lógica bastante simples para seguir estas convenções: nomes sintaticamente válidos facilitam (e, em alguns casos, possibilitam) a seleção de colunas. É muito simples escrever <code>dat$pib_agro</code> do que <code>dat$`PIB Agrícola (R$)`</code>.</p>
</section>
</section>
<section id="usando-funções" class="level2">
<h2 class="anchored" data-anchor-id="usando-funções">Usando funções</h2>
<p>A maneira mais simples de entender o uso de funções para renomear colunas é através de exemplos. Para tornar os exemplos mais sucintos vamos focar apenas no nome das colunas através da função <code>names</code>. Esta abordagem torna mais claro o fato de que os nomes das colunas de um <code>data.frame</code> são, essencialmente, um vetor de texto.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Nível Territorial (Código)" "Nível Territorial"         
 [3] "Unidade de Medida (Código)" "Unidade de Medida"         
 [5] "Valor"                      "Brasil (Código)"           
 [7] "Brasil"                     "Mês (Código)"              
 [9] "Mês"                        "Variável (Código)"         
[11] "Variável"                  </code></pre>
</div>
</div>
<p>Para aplicar uma função sobre o nome de todas as colunas da base de dados <code>dat</code> usa-se <code>rename_with</code>, uma variação da função <code>rename</code>. A sintaxe da função é simples: <code>rename_with(dados, fn)</code>. No caso abaixo converte-se o nome de todas as colunas para maiúculo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>dat_renamed <span class="ot">&lt;-</span> <span class="fu">rename_with</span>(dat, toupper)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dat_renamed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "NÍVEL TERRITORIAL (CÓDIGO)" "NÍVEL TERRITORIAL"         
 [3] "UNIDADE DE MEDIDA (CÓDIGO)" "UNIDADE DE MEDIDA"         
 [5] "VALOR"                      "BRASIL (CÓDIGO)"           
 [7] "BRASIL"                     "MÊS (CÓDIGO)"              
 [9] "MÊS"                        "VARIÁVEL (CÓDIGO)"         
[11] "VARIÁVEL"                  </code></pre>
</div>
</div>
<p>Abaixo mostro algumas funções úteis para renomear colunas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Converte para minúsculo</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rename_with</span>(dat, tolower) <span class="sc">|&gt;</span> <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "nível territorial (código)" "nível territorial"         
 [3] "unidade de medida (código)" "unidade de medida"         
 [5] "valor"                      "brasil (código)"           
 [7] "brasil"                     "mês (código)"              
 [9] "mês"                        "variável (código)"         
[11] "variável"                  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Converte texto para um formato de 'título'</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rename_with</span>(dat, stringr<span class="sc">::</span>str_to_title) <span class="sc">|&gt;</span> <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Nível Territorial (Código)" "Nível Territorial"         
 [3] "Unidade De Medida (Código)" "Unidade De Medida"         
 [5] "Valor"                      "Brasil (Código)"           
 [7] "Brasil"                     "Mês (Código)"              
 [9] "Mês"                        "Variável (Código)"         
[11] "Variável"                  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Remove acentos</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rename_with</span>(dat, <span class="sc">~</span>stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(.x, <span class="at">id =</span><span class="st">"latin-ascii"</span>)) <span class="sc">|&gt;</span> <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Nivel Territorial (Codigo)" "Nivel Territorial"         
 [3] "Unidade de Medida (Codigo)" "Unidade de Medida"         
 [5] "Valor"                      "Brasil (Codigo)"           
 [7] "Brasil"                     "Mes (Codigo)"              
 [9] "Mes"                        "Variavel (Codigo)"         
[11] "Variavel"                  </code></pre>
</div>
</div>
<p>Pode-se criar uma função customizada mais completa para renomear colunas. A função abaixo costuma funcionar bem para colunas problemáticas escritas em português.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>nice_col_names <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#&gt; Remove acentos em geral</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(x, <span class="at">id =</span> <span class="st">"latin-ascii"</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#&gt; Remove pontuação e caracteres especiais (%$#&amp; etc.)</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(x, <span class="st">"[[:punct:]]"</span>, <span class="st">""</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">#&gt; Remove espaços em branco antes e/ou depois do texto</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_trim</span>(x, <span class="at">side =</span> <span class="st">"both"</span>)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">#&gt; Substitui espaços em branco por _</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(x, <span class="st">" "</span>, <span class="st">"_"</span>)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#&gt; Converte tudo para minúsculo</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(x)</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#&gt; Avisa se houver nomes duplicados</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  check_dups <span class="ot">&lt;-</span> x[<span class="fu">duplicated</span>(x)]</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(check_dups) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">warning</span>(<span class="st">"Duplicated names!"</span>)</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x)</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(nice_col_names) <span class="sc">|&gt;</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "nivel_territorial_codigo" "nivel_territorial"       
 [3] "unidade_de_medida_codigo" "unidade_de_medida"       
 [5] "valor"                    "brasil_codigo"           
 [7] "brasil"                   "mes_codigo"              
 [9] "mes"                      "variavel_codigo"         
[11] "variavel"                </code></pre>
</div>
</div>
<p>As funções base <code>make.names</code> e <code>make.unique</code> também podem ser úteis para ajudar a criar nomes de colunas válidos sem causar grandes alterações.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(make.names) <span class="sc">|&gt;</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Nível.Territorial..Código." "Nível.Territorial"         
 [3] "Unidade.de.Medida..Código." "Unidade.de.Medida"         
 [5] "Valor"                      "Brasil..Código."           
 [7] "Brasil"                     "Mês..Código."              
 [9] "Mês"                        "Variável..Código."         
[11] "Variável"                  </code></pre>
</div>
</div>
<p>Por fim, vale notar que a função <code>jantior::make_clean_names()</code> é bastante eficiente em “limpar” o nome de colunas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(janitor<span class="sc">::</span>make_clean_names) <span class="sc">|&gt;</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "nivel_territorial_codigo" "nivel_territorial"       
 [3] "unidade_de_medida_codigo" "unidade_de_medida"       
 [5] "valor"                    "brasil_codigo"           
 [7] "brasil"                   "mes_codigo"              
 [9] "mes"                      "variavel_codigo"         
[11] "variavel"                </code></pre>
</div>
</div>
<section id="renomeando-apenas-algumas-colunas" class="level3">
<h3 class="anchored" data-anchor-id="renomeando-apenas-algumas-colunas">Renomeando apenas algumas colunas</h3>
<p>Eventualmente, pode ser interessante renomear apenas algumas colunas. A função rename_with tem um terceiro argumento opcional que perimite selecionar um subconjunto de colunas que deve ser renomeada utilizando a função definida. A maneira mais simples de selecionar estas colunas é pela sua posição.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>dat_renamed <span class="ot">&lt;-</span> <span class="fu">rename_with</span>(dat, janitor<span class="sc">::</span>make_clean_names)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>dat_prefix <span class="ot">&lt;-</span> <span class="fu">rename_with</span>(</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  dat_renamed,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span><span class="fu">paste0</span>(<span class="st">"abs_"</span>, .x),</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dat_prefix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "abs_nivel_territorial_codigo" "abs_nivel_territorial"       
 [3] "abs_unidade_de_medida_codigo" "unidade_de_medida"           
 [5] "valor"                        "brasil_codigo"               
 [7] "brasil"                       "mes_codigo"                  
 [9] "mes"                          "variavel_codigo"             
[11] "variavel"                    </code></pre>
</div>
</div>
<p>Como de praxe, pode-se usar as funções <code>tidyselect</code> para facilitar a vida:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Adiciona um prefixo nas colunas numéricas</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rename_with</span>(</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  dat_renamed,</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span><span class="fu">paste0</span>(<span class="st">"num_"</span>, .x),</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">where</span>(is.numeric)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Adiciona um sufixo nas colunas numéricas</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rename_with</span>(</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  dat_renamed,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span><span class="fu">paste0</span>(.x, <span class="st">"_num"</span>),</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">where</span>(is.numeric)</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Converte para maiúsculo as colunas que contem 'codigo' no nome</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a><span class="fu">rename_with</span>(</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  dat_renamed,</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span>str_to_upper,</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">contains</span>(<span class="st">"codigo"</span>)</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="usando-vetores" class="level2">
<h2 class="anchored" data-anchor-id="usando-vetores">Usando vetores</h2>
<p>Um dos elementos básicos do <code>R</code> são os vetores. Um vetor, em linhas gerais, é uma coleção de elementos básicos do mesmo tipo. Uma sequência de números é um exemplo de vetor numérico, como <code>c(2, 4, 6, 8)</code>. Um vetor de texto, similarmente, tem a forma <code>c("abacaxi", "abacate", "tomate")</code>.</p>
<p>Um tipo especial de vetor é um named vector, um vetor com nomes. Um named vector é um vetor onde cada elemento tem um nome, como <code>c("a" = 2, "b" = 4, "c" = 6, "d" = 8)</code>. Tipicamente, seleciona-se um elemento específico de um vetor através da sua posição, como em <code>x[2]</code> ou <code>y[5:10]</code>. No caso de um named vector, é possível especificar um elemento através do seu nome.</p>
<p>Note que a sintaxe <code>c("A" = "abacaxi", "B = "banana")</code> é muito similar à sintaxe da função <code>rename</code>. De fato, pode-se usar um vetor deste tipo para renomear as colunas usando um “swap” vector. Este tipo de vetor funciona como <code>c("nome_novo" = "Nome Velho")</code>. Antigamente, podia-se simplesmente inserir o vetor dentro da função rename.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>swap <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"valor"</span> <span class="ot">=</span> <span class="st">"Valor"</span>, <span class="st">"geo_level"</span> <span class="ot">=</span> <span class="st">"Nível Territorial"</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>dat_renamed <span class="ot">&lt;-</span> <span class="fu">rename</span>(dat, swap)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using an external vector in selections was deprecated in tidyselect 1.1.0.
ℹ Please use `all_of()` or `any_of()` instead.
  # Was:
  data %&gt;% select(swap)

  # Now:
  data %&gt;% select(all_of(swap))

See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.</code></pre>
</div>
</div>
<p>Como deixa claro o aviso, desde a versão <code>1.1.0</code> do <code>tidyselect</code> este tipo de sintaxe foi descontinuada e agora é preciso usar mais uma função.</p>
<section id="all_of-e-any_of" class="level3">
<h3 class="anchored" data-anchor-id="all_of-e-any_of"><code>all_of</code> e <code>any_of</code></h3>
<p>Atualmente, é preciso colocar o vetor <code>swap</code> em uma de duas funções auxiliares: <code>any_of</code> e <code>all_of</code>. A primeira função é a mais branda e substitui o nome de todas as colunas que for possível. A segunda função é mais exigente: se qualquer umas das variáveis estiver ausente retorna-se um erro.</p>
<p>Para tornar a distinção mais clara, vale criar um novo vetor com o nome de coluna que não consta na nossa base. Note como a função <code>any_of</code> retorna o mesmo output, ignorando a coluna inexistente <code>Ano</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>swap <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"valor"</span> <span class="ot">=</span> <span class="st">"Valor"</span>, <span class="st">"geo_level"</span> <span class="ot">=</span> <span class="st">"Nível Territorial"</span>, <span class="st">"ano"</span> <span class="ot">=</span> <span class="st">"Ano"</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">|&gt;</span> </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="fu">any_of</span>(swap)) <span class="sc">|&gt;</span> </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Nível Territorial (Código)" "geo_level"                 
 [3] "Unidade de Medida (Código)" "Unidade de Medida"         
 [5] "valor"                      "Brasil (Código)"           
 [7] "Brasil"                     "Mês (Código)"              
 [9] "Mês"                        "Variável (Código)"         
[11] "Variável"                  </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="fu">all_of</span>(swap)) <span class="sc">|&gt;</span> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `all_of()`:
! Can't rename columns that don't exist.
✖ Column `Ano` doesn't exist.</code></pre>
</div>
</div>
<p>No caso em que se quer renomear <em>exatamente</em> todas as colunas, usa-se a função auxiliar <code>all_of</code> da seguinte maneira.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"geo_code"</span> <span class="ot">=</span> <span class="st">"Nível Territorial (Código)"</span>,</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"geo_level"</span> <span class="ot">=</span> <span class="st">"Nível Territorial"</span>,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"unit_code"</span> <span class="ot">=</span> <span class="st">"Unidade de Medida (Código)"</span>,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"unit"</span> <span class="ot">=</span> <span class="st">"Unidade de Medida"</span>,</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"value"</span> <span class="ot">=</span> <span class="st">"Valor"</span>,</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"geo_name_code"</span> <span class="ot">=</span> <span class="st">"Brasil (Código)"</span>,</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"geo_name"</span> <span class="ot">=</span> <span class="st">"Brasil"</span>,</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"month_code"</span> <span class="ot">=</span> <span class="st">"Mês (Código)"</span>,</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"month"</span> <span class="ot">=</span> <span class="st">"Mês"</span>,</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"variable_code"</span> <span class="ot">=</span> <span class="st">"Variável (Código)"</span>,</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"variable"</span> <span class="ot">=</span> <span class="st">"Variável"</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">|&gt;</span> </span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="fu">all_of</span>(new_names)) <span class="sc">|&gt;</span> </span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "geo_code"      "geo_level"     "unit_code"     "unit"         
 [5] "value"         "geo_name_code" "geo_name"      "month_code"   
 [9] "month"         "variable_code" "variable"     </code></pre>
</div>
</div>
<p>Uma maneira mais sucinta de escrever o código acima é aproveitar os nomes pré-existentes da base.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"geo_code"</span>, <span class="st">"geo_level"</span>, <span class="st">"unit_code"</span>, <span class="st">"unit"</span>, <span class="st">"value"</span>, <span class="st">"geo_name_code"</span>, </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"geo_name"</span>, <span class="st">"month_code"</span>, <span class="st">"month"</span>, <span class="st">"variable_code"</span>, <span class="st">"variable"</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>swap_names <span class="ot">&lt;-</span> <span class="fu">names</span>(dat)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(swap_names) <span class="ot">&lt;-</span> new_names</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">|&gt;</span> </span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="fu">all_of</span>(swap_names)) <span class="sc">|&gt;</span> </span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "geo_code"      "geo_level"     "unit_code"     "unit"         
 [5] "value"         "geo_name_code" "geo_name"      "month_code"   
 [9] "month"         "variable_code" "variable"     </code></pre>
</div>
</div>
<p>Na maior parte das aplicações, pode-se usar a função <code>any_of</code> sem grandes preocupações. Apenas em casos quando maior controle sobre o output for necessário deve-se considerar usar a função <code>all_of</code>.</p>
<p>Por fim, vale notar que um swap vector pode ter algumas “redundâncias”. Imagine, por exemplo, que temos várias bases de dados com pequenas inconsistências de ortografia. Em alguns casos temos “Nível Territorial (Código)”, mas em outras temos “nível territorial (Código)” e em outras “Nível Territorial (código)”, etc. etc. Pode-se construir um vetor que corrige isto sem grandes dificuldades, pois o nome do named vector não precisa ser único. Isto é muito conveniente quando se cria uma função genérica que limpa uma base de dados.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"geo_code"</span> <span class="ot">=</span> <span class="st">"Nível Territorial (Código)"</span>,</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"geo_code"</span> <span class="ot">=</span> <span class="st">"Nível Territorial (código)"</span>,</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"geo_code"</span> <span class="ot">=</span> <span class="st">"nível territorial (Código)"</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">|&gt;</span> </span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="fu">any_of</span>(new_names)) <span class="sc">|&gt;</span> </span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "geo_code"                   "Nível Territorial"         
 [3] "Unidade de Medida (Código)" "Unidade de Medida"         
 [5] "Valor"                      "Brasil (Código)"           
 [7] "Brasil"                     "Mês (Código)"              
 [9] "Mês"                        "Variável (Código)"         
[11] "Variável"                  </code></pre>
</div>
</div>
</section>
</section>
<section id="usando-funções-e-vetores" class="level2">
<h2 class="anchored" data-anchor-id="usando-funções-e-vetores">Usando funções e vetores</h2>
<p>Também é possível fazer um mix de vetores e funções. Aqui, infelizmente, a lógica da ordem do vetor se inverte, o que pode causar grande confusão. No exemplo abaixo, monto uma função que “traduz” alguns termos do português para o inglês. A mágica é feita usando a função <code>stringr::str_replace_all</code> que troca um termo por outro seguindo a ordem <code>nome_velho = nome_novo</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>translate_pt <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  trans <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Código"</span> <span class="ot">=</span> <span class="st">"code"</span>,</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Valor"</span> <span class="ot">=</span> <span class="st">"value"</span>,</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Nível"</span> <span class="ot">=</span> <span class="st">"level"</span>,</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Mês"</span> <span class="ot">=</span> <span class="st">"month"</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(x, trans)</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">|&gt;</span> </span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(translate_pt) <span class="sc">|&gt;</span> </span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "level Territorial (code)" "level Territorial"       
 [3] "Unidade de Medida (code)" "Unidade de Medida"       
 [5] "value"                    "Brasil (code)"           
 [7] "Brasil"                   "month (code)"            
 [9] "month"                    "Variável (code)"         
[11] "Variável"                </code></pre>
</div>
</div>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Para verificar a lista completa de palavras reservadas consulte <code>?Reserved</code>. Vale notar que não se deve criar objetos com estes nomes também, i.e., não se deve fazer <code>TRUE &lt;- c(1, 2, 3)</code>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="viniciusoike/restateinsight" data-repo-id="R_kgDOJ9Lnfw" data-category="General" data-category-id="" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>